# Comparing `tmp/sfctools-1.0.5.1.tar.gz` & `tmp/sfctools-1.0.5.2.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "sfctools-1.0.5.1.tar", max compression
+gzip compressed data, was "sfctools-1.0.5.2.tar", max compression
```

## Comparing `sfctools-1.0.5.1.tar` & `sfctools-1.0.5.2.tar`

### file list

```diff
@@ -1,215 +1,121 @@
--rw-r--r--   0        0        0     1157 2022-11-23 08:34:47.643840 sfctools-1.0.5.1/LICENSE
--rw-r--r--   0        0        0     1618 2023-04-04 07:41:32.816669 sfctools-1.0.5.1/pyproject.toml
--rw-r--r--   0        0        0     1308 2023-03-21 16:33:08.082866 sfctools-1.0.5.1/README.md
--rw-r--r--   0        0        0       39 2023-01-26 10:19:31.537790 sfctools-1.0.5.1/sfctools/.pytest_cache/.gitignore
--rw-r--r--   0        0        0      191 2023-01-26 10:19:31.537845 sfctools-1.0.5.1/sfctools/.pytest_cache/CACHEDIR.TAG
--rw-r--r--   0        0        0      310 2023-01-26 10:19:31.536780 sfctools-1.0.5.1/sfctools/.pytest_cache/README.md
--rw-r--r--   0        0        0        2 2023-01-26 10:19:31.537845 sfctools-1.0.5.1/sfctools/.pytest_cache/v/cache/nodeids
--rw-r--r--   0        0        0        2 2023-01-26 10:19:31.539052 sfctools-1.0.5.1/sfctools/.pytest_cache/v/cache/stepwise
--rw-r--r--   0        0        0     1938 2022-11-23 08:34:47.783372 sfctools-1.0.5.1/sfctools/__init__.py
--rw-r--r--   0        0        0     2655 2023-01-26 10:34:36.652567 sfctools-1.0.5.1/sfctools/__main__.py
--rw-r--r--   0        0        0        0 2022-11-23 08:34:47.785439 sfctools-1.0.5.1/sfctools/automation/__init__.py
--rw-r--r--   0        0        0      177 2023-01-25 08:23:20.053567 sfctools-1.0.5.1/sfctools/automation/__pycache__/__init__.cpython-311.pyc
--rw-r--r--   0        0        0      159 2023-01-19 21:54:26.523852 sfctools-1.0.5.1/sfctools/automation/__pycache__/__init__.cpython-38.pyc
--rw-r--r--   0        0        0     8273 2023-01-25 08:23:20.054862 sfctools-1.0.5.1/sfctools/automation/__pycache__/runner.cpython-311.pyc
--rw-r--r--   0        0        0     4139 2023-01-19 21:54:26.530954 sfctools-1.0.5.1/sfctools/automation/__pycache__/runner.cpython-38.pyc
--rw-r--r--   0        0        0    10574 2023-03-21 16:33:08.099326 sfctools-1.0.5.1/sfctools/automation/calibration.py
--rw-r--r--   0        0        0    14589 2023-03-21 16:33:08.100325 sfctools-1.0.5.1/sfctools/automation/cgesolver.py
--rw-r--r--   0        0        0       75 2022-11-23 08:34:47.785439 sfctools-1.0.5.1/sfctools/automation/README.md
--rw-r--r--   0        0        0     5077 2022-11-23 08:34:47.790242 sfctools-1.0.5.1/sfctools/automation/runner.py
--rw-r--r--   0        0        0        0 2022-11-23 08:34:47.791250 sfctools-1.0.5.1/sfctools/bottomup/__init__.py
--rw-r--r--   0        0        0      175 2023-01-25 08:23:19.248631 sfctools-1.0.5.1/sfctools/bottomup/__pycache__/__init__.cpython-311.pyc
--rw-r--r--   0        0        0      157 2023-01-19 21:54:25.705346 sfctools-1.0.5.1/sfctools/bottomup/__pycache__/__init__.cpython-38.pyc
--rw-r--r--   0        0        0    13061 2023-01-25 08:23:19.475949 sfctools-1.0.5.1/sfctools/bottomup/__pycache__/matching.cpython-311.pyc
--rw-r--r--   0        0        0     8647 2023-02-06 10:24:45.316244 sfctools-1.0.5.1/sfctools/bottomup/__pycache__/matching.cpython-38.pyc
--rw-r--r--   0        0        0    11948 2023-01-25 08:16:32.088889 sfctools-1.0.5.1/sfctools/bottomup/__pycache__/productiontree.cpython-38.pyc
--rw-r--r--   0        0        0     8339 2023-01-25 08:23:19.250795 sfctools-1.0.5.1/sfctools/bottomup/__pycache__/stock_manager.cpython-311.pyc
--rw-r--r--   0        0        0     5937 2023-01-19 21:54:25.707915 sfctools-1.0.5.1/sfctools/bottomup/__pycache__/stock_manager.cpython-38.pyc
--rw-r--r--   0        0        0     2863 2023-01-25 08:16:32.090879 sfctools-1.0.5.1/sfctools/bottomup/__pycache__/treestruct.cpython-38.pyc
--rw-r--r--   0        0        0     8900 2023-01-26 10:34:36.653567 sfctools-1.0.5.1/sfctools/bottomup/matching.py
--rw-r--r--   0        0        0    17465 2023-03-21 16:33:08.101324 sfctools-1.0.5.1/sfctools/bottomup/productiontree.py
--rw-r--r--   0        0        0     6904 2022-11-23 08:34:47.794005 sfctools-1.0.5.1/sfctools/bottomup/stock_manager.py
--rw-r--r--   0        0        0     2737 2022-11-23 08:34:47.795896 sfctools-1.0.5.1/sfctools/bottomup/treestruct.py
--rw-r--r--   0        0        0        0 2022-11-23 08:34:47.796902 sfctools-1.0.5.1/sfctools/core/__init__.py
--rw-r--r--   0        0        0      171 2023-01-25 08:23:16.612109 sfctools-1.0.5.1/sfctools/core/__pycache__/__init__.cpython-311.pyc
--rw-r--r--   0        0        0      153 2023-01-19 21:54:24.854116 sfctools-1.0.5.1/sfctools/core/__pycache__/__init__.cpython-38.pyc
--rw-r--r--   0        0        0      153 2022-12-22 08:43:56.478191 sfctools-1.0.5.1/sfctools/core/__pycache__/__init__.cpython-39.pyc
--rw-r--r--   0        0        0    10127 2023-01-25 08:23:16.614415 sfctools-1.0.5.1/sfctools/core/__pycache__/agent.cpython-311.pyc
--rw-r--r--   0        0        0     7106 2023-01-19 21:54:24.857704 sfctools-1.0.5.1/sfctools/core/__pycache__/agent.cpython-38.pyc
--rw-r--r--   0        0        0     7096 2022-12-22 08:43:56.499523 sfctools-1.0.5.1/sfctools/core/__pycache__/agent.cpython-39.pyc
--rw-r--r--   0        0        0     3200 2023-01-25 08:23:17.901786 sfctools-1.0.5.1/sfctools/core/__pycache__/clock.cpython-311.pyc
--rw-r--r--   0        0        0     2503 2023-01-19 21:54:25.148426 sfctools-1.0.5.1/sfctools/core/__pycache__/clock.cpython-38.pyc
--rw-r--r--   0        0        0      856 2023-01-25 08:23:17.915777 sfctools-1.0.5.1/sfctools/core/__pycache__/custom_warnings.cpython-311.pyc
--rw-r--r--   0        0        0      677 2023-03-21 13:35:53.661519 sfctools-1.0.5.1/sfctools/core/__pycache__/custom_warnings.cpython-38.pyc
--rw-r--r--   0        0        0    19394 2023-01-25 08:23:19.254129 sfctools-1.0.5.1/sfctools/core/__pycache__/flow_matrix.cpython-311.pyc
--rw-r--r--   0        0        0    12090 2023-03-21 13:35:54.028786 sfctools-1.0.5.1/sfctools/core/__pycache__/flow_matrix.cpython-38.pyc
--rw-r--r--   0        0        0    13234 2023-01-25 08:23:19.211702 sfctools-1.0.5.1/sfctools/core/__pycache__/settings.cpython-311.pyc
--rw-r--r--   0        0        0     8933 2023-03-21 13:35:54.001568 sfctools-1.0.5.1/sfctools/core/__pycache__/settings.cpython-38.pyc
--rw-r--r--   0        0        0     1482 2023-01-25 08:23:17.905919 sfctools-1.0.5.1/sfctools/core/__pycache__/singleton.cpython-311.pyc
--rw-r--r--   0        0        0     1091 2023-01-19 21:54:25.153899 sfctools-1.0.5.1/sfctools/core/__pycache__/singleton.cpython-38.pyc
--rw-r--r--   0        0        0     8862 2023-01-25 08:23:16.616906 sfctools-1.0.5.1/sfctools/core/__pycache__/world.cpython-311.pyc
--rw-r--r--   0        0        0     5654 2023-02-06 10:24:44.695973 sfctools-1.0.5.1/sfctools/core/__pycache__/world.cpython-38.pyc
--rw-r--r--   0        0        0     5547 2022-12-22 08:43:56.518896 sfctools-1.0.5.1/sfctools/core/__pycache__/world.cpython-39.pyc
--rw-r--r--   0        0        0     7572 2022-11-23 08:34:47.797213 sfctools-1.0.5.1/sfctools/core/agent.py
--rw-r--r--   0        0        0     2249 2022-11-23 08:34:47.798441 sfctools-1.0.5.1/sfctools/core/clock.py
--rw-r--r--   0        0        0      495 2023-03-21 16:33:08.101324 sfctools-1.0.5.1/sfctools/core/custom_warnings.py
--rw-r--r--   0        0        0    15032 2023-03-21 16:33:08.102324 sfctools-1.0.5.1/sfctools/core/flow_matrix.py
--rw-r--r--   0        0        0    11632 2023-03-21 16:33:08.102324 sfctools-1.0.5.1/sfctools/core/settings.py
--rw-r--r--   0        0        0      661 2022-11-23 08:34:47.802978 sfctools-1.0.5.1/sfctools/core/singleton.py
--rw-r--r--   0        0        0     7304 2023-01-26 10:34:36.655075 sfctools-1.0.5.1/sfctools/core/world.py
--rw-r--r--   0        0        0        0 2022-11-23 08:34:47.805666 sfctools-1.0.5.1/sfctools/datastructs/__init__.py
--rw-r--r--   0        0        0      178 2023-01-25 08:23:16.618054 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/__init__.cpython-311.pyc
--rw-r--r--   0        0        0      160 2023-01-19 21:54:24.869946 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/__init__.cpython-38.pyc
--rw-r--r--   0        0        0      160 2022-12-22 08:43:56.522922 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/__init__.cpython-39.pyc
--rw-r--r--   0        0        0    36033 2023-01-25 08:23:19.209700 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/balance.cpython-311.pyc
--rw-r--r--   0        0        0    22057 2023-03-21 13:35:53.999134 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/balance.cpython-38.pyc
--rw-r--r--   0        0        0    19951 2023-01-25 08:23:19.473688 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/bank_order_book.cpython-311.pyc
--rw-r--r--   0        0        0    13962 2023-02-06 10:24:45.311852 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/bank_order_book.cpython-38.pyc
--rw-r--r--   0        0        0     8905 2023-01-25 08:23:19.468631 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/cash_flow_statement.cpython-311.pyc
--rw-r--r--   0        0        0     6617 2023-03-21 13:35:54.211345 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/cash_flow_statement.cpython-38.pyc
--rw-r--r--   0        0        0     6937 2023-01-25 08:23:16.619099 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/collection.cpython-311.pyc
--rw-r--r--   0        0        0     4736 2023-01-19 21:54:24.876121 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/collection.cpython-38.pyc
--rw-r--r--   0        0        0     4718 2022-12-22 08:43:56.543068 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/collection.cpython-39.pyc
--rw-r--r--   0        0        0    18687 2023-01-25 08:23:19.466630 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/income_statement.cpython-311.pyc
--rw-r--r--   0        0        0    13398 2023-01-19 21:54:25.920678 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/income_statement.cpython-38.pyc
--rw-r--r--   0        0        0     8382 2023-01-25 08:23:20.048441 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/inventory.cpython-311.pyc
--rw-r--r--   0        0        0     5672 2023-01-19 21:54:26.507228 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/inventory.cpython-38.pyc
--rw-r--r--   0        0        0     6583 2023-01-25 08:23:20.050844 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/market_registry.cpython-311.pyc
--rw-r--r--   0        0        0     5167 2023-01-19 21:54:26.513706 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/market_registry.cpython-38.pyc
--rw-r--r--   0        0        0     8490 2023-01-25 08:23:19.471344 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/signalslot.cpython-311.pyc
--rw-r--r--   0        0        0     6018 2023-01-19 21:54:25.936504 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/signalslot.cpython-38.pyc
--rw-r--r--   0        0        0     5219 2023-01-25 08:23:20.052395 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/worker_registry.cpython-311.pyc
--rw-r--r--   0        0        0     3653 2023-01-19 21:54:26.519688 sfctools-1.0.5.1/sfctools/datastructs/__pycache__/worker_registry.cpython-38.pyc
--rw-r--r--   0        0        0    32494 2023-03-21 16:33:08.103324 sfctools-1.0.5.1/sfctools/datastructs/balance.py
--rw-r--r--   0        0        0    17441 2023-01-26 10:34:36.656502 sfctools-1.0.5.1/sfctools/datastructs/bank_order_book.py
--rw-r--r--   0        0        0     6175 2023-03-21 16:33:08.104324 sfctools-1.0.5.1/sfctools/datastructs/cash_flow_statement.py
--rw-r--r--   0        0        0     4900 2022-11-23 08:34:47.810921 sfctools-1.0.5.1/sfctools/datastructs/collection.py
--rw-r--r--   0        0        0    14241 2022-11-23 08:34:47.811957 sfctools-1.0.5.1/sfctools/datastructs/income_statement.py
--rw-r--r--   0        0        0     6043 2022-11-23 08:34:47.812908 sfctools-1.0.5.1/sfctools/datastructs/inventory.py
--rw-r--r--   0        0        0     4272 2022-11-23 08:34:47.813916 sfctools-1.0.5.1/sfctools/datastructs/market_registry.py
--rw-r--r--   0        0        0     5313 2022-11-23 08:34:47.815910 sfctools-1.0.5.1/sfctools/datastructs/signalslot.py
--rw-r--r--   0        0        0     2961 2022-11-23 08:34:47.816910 sfctools-1.0.5.1/sfctools/datastructs/worker_registry.py
--rw-r--r--   0        0        0      550 2023-03-21 16:33:08.105387 sfctools-1.0.5.1/sfctools/examples/__init__.py
--rw-r--r--   0        0        0     2491 2023-03-21 16:33:08.105387 sfctools-1.0.5.1/sfctools/examples/balance.py
--rw-r--r--   0        0        0     1701 2023-03-21 16:33:08.106499 sfctools-1.0.5.1/sfctools/examples/basic_example/basic_example.py
--rw-r--r--   0        0        0      202 2023-03-21 16:33:08.106499 sfctools-1.0.5.1/sfctools/examples/basic_example/my_settings.yml
--rw-r--r--   0        0        0     1087 2023-03-21 16:33:08.106499 sfctools-1.0.5.1/sfctools/examples/clock.py
--rw-r--r--   0        0        0     1378 2023-03-21 16:33:08.107730 sfctools-1.0.5.1/sfctools/examples/example_wrapper.py
--rw-r--r--   0        0        0        0 2023-03-21 16:33:08.107730 sfctools-1.0.5.1/sfctools/examples/exampleabm/agents/__init__.py
--rw-r--r--   0        0        0     1845 2023-03-21 16:33:08.107730 sfctools-1.0.5.1/sfctools/examples/exampleabm/agents/government.py
--rw-r--r--   0        0        0     2370 2023-03-21 16:33:08.108754 sfctools-1.0.5.1/sfctools/examples/exampleabm/agents/household.py
--rw-r--r--   0        0        0     2198 2023-03-21 16:33:08.108754 sfctools-1.0.5.1/sfctools/examples/exampleabm/agents/production.py
--rw-r--r--   0        0        0     4365 2023-03-21 16:33:08.108754 sfctools-1.0.5.1/sfctools/examples/exampleabm/agents/transactions.py
--rw-r--r--   0        0        0      910 2023-03-21 16:33:08.109754 sfctools-1.0.5.1/sfctools/examples/exampleabm/data/preprocess.py
--rw-r--r--   0        0        0    13152 2023-03-21 16:33:08.109754 sfctools-1.0.5.1/sfctools/examples/exampleabm/data/processed/tipsau20_gdp_processed.txt
--rw-r--r--   0        0        0      818 2023-03-21 16:33:08.110388 sfctools-1.0.5.1/sfctools/examples/exampleabm/data/raw/tipsau20_gdp.csv
--rw-r--r--   0        0        0    31241 2023-03-21 16:33:08.111510 sfctools-1.0.5.1/sfctools/examples/exampleabm/figures/matrix.png
--rw-r--r--   0        0        0    42423 2023-03-21 16:33:08.111510 sfctools-1.0.5.1/sfctools/examples/exampleabm/figures/outputs.png
--rw-r--r--   0        0        0    43865 2023-03-21 16:33:08.112510 sfctools-1.0.5.1/sfctools/examples/exampleabm/figures/sankey.png
--rw-r--r--   0        0        0     1264 2023-03-21 16:33:08.112510 sfctools-1.0.5.1/sfctools/examples/exampleabm/info.md
--rw-r--r--   0        0        0     3730 2023-03-21 16:33:08.113510 sfctools-1.0.5.1/sfctools/examples/exampleabm/model.py
--rw-r--r--   0        0        0     1148 2023-03-21 16:33:08.113510 sfctools-1.0.5.1/sfctools/examples/exampleabm/settings.yml
--rw-r--r--   0        0        0     2805 2023-03-21 16:33:08.113510 sfctools-1.0.5.1/sfctools/examples/flowmatrix.py
--rw-r--r--   0        0        0      813 2023-03-21 16:33:08.114513 sfctools-1.0.5.1/sfctools/examples/hello_agent.py
--rw-r--r--   0        0        0     1168 2023-03-21 16:33:08.114513 sfctools-1.0.5.1/sfctools/examples/inventory.py
--rw-r--r--   0        0        0     1783 2023-03-21 16:33:08.115240 sfctools-1.0.5.1/sfctools/examples/market_example/market.py
--rw-r--r--   0        0        0     2735 2023-03-21 16:33:08.115240 sfctools-1.0.5.1/sfctools/examples/market_example/market2.py
--rw-r--r--   0        0        0      999 2023-03-21 16:33:08.115240 sfctools-1.0.5.1/sfctools/examples/monte_carlo/monte_carlo.py
--rw-r--r--   0        0        0       28 2023-03-21 16:33:08.116298 sfctools-1.0.5.1/sfctools/examples/monte_carlo/result/errors.txt
--rw-r--r--   0        0        0      418 2023-03-21 16:33:08.116298 sfctools-1.0.5.1/sfctools/examples/monte_carlo/result/output.0
--rw-r--r--   0        0        0      413 2023-03-21 16:33:08.116298 sfctools-1.0.5.1/sfctools/examples/monte_carlo/result/output.1
--rw-r--r--   0        0        0      413 2023-03-21 16:33:08.117298 sfctools-1.0.5.1/sfctools/examples/monte_carlo/result/output.2
--rw-r--r--   0        0        0      413 2023-03-21 16:33:08.117298 sfctools-1.0.5.1/sfctools/examples/monte_carlo/result/output.3
--rw-r--r--   0        0        0      417 2023-03-21 16:33:08.117298 sfctools-1.0.5.1/sfctools/examples/monte_carlo/result/output.4
--rw-r--r--   0        0        0      410 2023-03-21 16:33:08.118299 sfctools-1.0.5.1/sfctools/examples/monte_carlo/result/output.5
--rw-r--r--   0        0        0      417 2023-03-21 16:33:08.118299 sfctools-1.0.5.1/sfctools/examples/monte_carlo/result/output.6
--rw-r--r--   0        0        0      412 2023-03-21 16:33:08.118299 sfctools-1.0.5.1/sfctools/examples/monte_carlo/result/output.7
--rw-r--r--   0        0        0      408 2023-03-21 16:33:08.118299 sfctools-1.0.5.1/sfctools/examples/monte_carlo/result/output.8
--rw-r--r--   0        0        0      408 2023-03-21 16:33:08.119298 sfctools-1.0.5.1/sfctools/examples/monte_carlo/result/output.9
--rw-r--r--   0        0        0      527 2023-03-21 16:33:08.119298 sfctools-1.0.5.1/sfctools/examples/monte_carlo/result/output.txt
--rw-r--r--   0        0        0      258 2023-03-21 16:33:08.119972 sfctools-1.0.5.1/sfctools/examples/monte_carlo/result/progress.txt
--rw-r--r--   0        0        0      184 2023-03-21 16:33:08.119972 sfctools-1.0.5.1/sfctools/examples/monte_carlo/testsettings.yml
--rw-r--r--   0        0        0     3411 2023-03-21 16:33:08.119972 sfctools-1.0.5.1/sfctools/examples/order_book.py
--rw-r--r--   0        0        0      124 2023-03-21 16:33:08.119972 sfctools-1.0.5.1/sfctools/examples/paper_example.py
--rw-r--r--   0        0        0     1471 2023-03-21 16:33:08.121051 sfctools-1.0.5.1/sfctools/examples/signal_slot.py
--rw-r--r--   0        0        0       27 2022-11-23 08:34:47.817910 sfctools-1.0.5.1/sfctools/gui/.gitignore
--rw-r--r--   0        0        0      854 2022-11-23 08:34:47.818915 sfctools-1.0.5.1/sfctools/gui/.gitlab-ci.yml
--rw-r--r--   0        0        0       64 2022-11-23 08:34:47.822910 sfctools-1.0.5.1/sfctools/gui/__init__.py
--rw-r--r--   0        0        0      269 2023-01-25 08:23:20.061472 sfctools-1.0.5.1/sfctools/gui/__pycache__/__init__.cpython-311.pyc
--rw-r--r--   0        0        0      221 2023-01-25 08:17:49.221422 sfctools-1.0.5.1/sfctools/gui/__pycache__/__init__.cpython-38.pyc
--rw-r--r--   0        0        0     2791 2023-01-25 08:23:20.063473 sfctools-1.0.5.1/sfctools/gui/__pycache__/attune_main.cpython-311.pyc
--rw-r--r--   0        0        0      835 2023-03-21 13:35:54.599006 sfctools-1.0.5.1/sfctools/gui/__pycache__/attune_main.cpython-38.pyc
--rw-r--r--   0        0        0       41 2022-11-23 08:34:47.824049 sfctools-1.0.5.1/sfctools/gui/attune/.gitignore
--rw-r--r--   0        0        0        0 2022-11-23 08:34:47.824049 sfctools-1.0.5.1/sfctools/gui/attune/__init__.py
--rw-r--r--   0        0        0      177 2022-12-22 08:51:44.532604 sfctools-1.0.5.1/sfctools/gui/attune/__pycache__/__init__.cpython-311.pyc
--rw-r--r--   0        0        0      159 2022-11-23 08:49:18.431057 sfctools-1.0.5.1/sfctools/gui/attune/__pycache__/__init__.cpython-38.pyc
--rw-r--r--   0        0        0        0 2022-11-23 08:34:47.825207 sfctools-1.0.5.1/sfctools/gui/attune/src/__init__.py
--rw-r--r--   0        0        0      181 2022-12-22 08:51:44.534815 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/__init__.cpython-311.pyc
--rw-r--r--   0        0        0      163 2022-11-23 08:49:18.433350 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/__init__.cpython-38.pyc
--rw-r--r--   0        0        0    50257 2023-01-25 08:23:24.448393 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/agent_editor.cpython-311.pyc
--rw-r--r--   0        0        0    20359 2023-03-21 13:35:55.406740 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/agent_editor.cpython-38.pyc
--rw-r--r--   0        0        0    70418 2023-01-25 08:50:00.544297 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/draw_widget.cpython-311.pyc
--rw-r--r--   0        0        0    28097 2023-03-21 13:35:55.397521 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/draw_widget.cpython-38.pyc
--rw-r--r--   0        0        0    16034 2023-01-25 08:23:21.221015 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/mainloop_editor.cpython-311.pyc
--rw-r--r--   0        0        0    10174 2023-03-21 13:35:55.173526 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/mainloop_editor.cpython-38.pyc
--rw-r--r--   0        0        0    10890 2023-01-25 08:23:21.216723 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/mamba_interpreter2.cpython-311.pyc
--rw-r--r--   0        0        0     4813 2023-02-06 10:17:36.928510 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/mamba_interpreter2.cpython-38.pyc
--rw-r--r--   0        0        0    32862 2023-01-25 08:23:21.227665 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/output_display.cpython-311.pyc
--rw-r--r--   0        0        0    12521 2023-03-21 13:35:55.179311 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/output_display.cpython-38.pyc
--rw-r--r--   0        0        0     2435 2023-01-25 08:23:21.211969 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/pandasmodel.cpython-311.pyc
--rw-r--r--   0        0        0     1686 2023-03-21 13:35:55.166746 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/pandasmodel.cpython-38.pyc
--rw-r--r--   0        0        0   152005 2023-01-25 08:47:50.827103 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/qtattune.cpython-311.pyc
--rw-r--r--   0        0        0    65486 2023-03-21 13:35:54.617994 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/qtattune.cpython-38.pyc
--rw-r--r--   0        0        0     7007 2023-01-25 08:23:24.383425 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/resources.cpython-311.pyc
--rw-r--r--   0        0        0     6499 2022-11-23 08:49:30.377800 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/resources.cpython-38.pyc
--rw-r--r--   0        0        0    10255 2023-01-25 08:23:24.459690 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/theme_manager.cpython-311.pyc
--rw-r--r--   0        0        0     4956 2023-02-06 10:17:37.162926 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/theme_manager.cpython-38.pyc
--rw-r--r--   0        0        0    14167 2023-01-25 08:23:24.456539 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/yaml_editor.cpython-311.pyc
--rw-r--r--   0        0        0     6572 2023-02-06 10:24:04.734131 sfctools-1.0.5.1/sfctools/gui/attune/src/__pycache__/yaml_editor.cpython-38.pyc
--rw-r--r--   0        0        0    34561 2023-03-21 16:33:08.121051 sfctools-1.0.5.1/sfctools/gui/attune/src/agent_editor.py
--rw-r--r--   0        0        0     6935 2023-03-21 16:33:08.122052 sfctools-1.0.5.1/sfctools/gui/attune/src/code_editor.ui
--rw-r--r--   0        0        0    60518 2023-03-21 16:33:08.123171 sfctools-1.0.5.1/sfctools/gui/attune/src/draw_widget.py
--rw-r--r--   0        0        0     1645 2023-01-26 10:34:36.660166 sfctools-1.0.5.1/sfctools/gui/attune/src/income_viewer.ui
--rw-r--r--   0        0        0    13149 2023-03-21 16:33:08.123171 sfctools-1.0.5.1/sfctools/gui/attune/src/mainloop_editor.py
--rw-r--r--   0        0        0     8176 2023-01-26 10:34:36.661270 sfctools-1.0.5.1/sfctools/gui/attune/src/mamba_interpreter2.py
--rw-r--r--   0        0        0     1334 2023-03-21 16:33:08.123171 sfctools-1.0.5.1/sfctools/gui/attune/src/matrix_viewer.ui
--rw-r--r--   0        0        0    19411 2023-03-21 16:33:08.124171 sfctools-1.0.5.1/sfctools/gui/attune/src/output_display.py
--rw-r--r--   0        0        0    11200 2022-11-23 08:34:47.835944 sfctools-1.0.5.1/sfctools/gui/attune/src/output_display.ui
--rw-r--r--   0        0        0     1066 2023-04-04 07:33:37.003243 sfctools-1.0.5.1/sfctools/gui/attune/src/pandasmodel.py
--rw-r--r--   0        0        0   131393 2023-04-04 07:42:49.758163 sfctools-1.0.5.1/sfctools/gui/attune/src/qtattune.py
--rw-r--r--   0        0        0    24104 2022-11-23 08:34:47.840835 sfctools-1.0.5.1/sfctools/gui/attune/src/resources.py
--rw-r--r--   0        0        0      107 2022-11-23 08:34:47.840835 sfctools-1.0.5.1/sfctools/gui/attune/src/resources.qrc
--rw-r--r--   0        0        0     5927 2023-03-21 16:33:08.126466 sfctools-1.0.5.1/sfctools/gui/attune/src/settings_edit.ui
--rw-r--r--   0        0        0     3012 2023-03-21 16:33:08.127467 sfctools-1.0.5.1/sfctools/gui/attune/src/simulation_edit.ui
--rw-r--r--   0        0        0      216 2023-01-26 10:34:36.664276 sfctools-1.0.5.1/sfctools/gui/attune/src/styles/bright/background.txt
--rw-r--r--   0        0        0     4020 2023-03-21 16:33:08.127467 sfctools-1.0.5.1/sfctools/gui/attune/src/styles/bright/main.txt
--rw-r--r--   0        0        0       62 2023-01-26 10:34:36.665242 sfctools-1.0.5.1/sfctools/gui/attune/src/styles/bright/tables.txt
--rw-r--r--   0        0        0      727 2023-01-26 10:34:36.665497 sfctools-1.0.5.1/sfctools/gui/attune/src/styles/dark/background.txt
--rw-r--r--   0        0        0     4228 2023-03-21 16:33:08.128524 sfctools-1.0.5.1/sfctools/gui/attune/src/styles/dark/main.txt
--rw-r--r--   0        0        0       37 2023-01-26 10:34:36.666498 sfctools-1.0.5.1/sfctools/gui/attune/src/styles/dark/tables.txt
--rw-r--r--   0        0        0     6807 2023-01-26 10:34:36.666825 sfctools-1.0.5.1/sfctools/gui/attune/src/theme_manager.py
--rw-r--r--   0        0        0    84670 2023-03-21 16:33:08.129564 sfctools-1.0.5.1/sfctools/gui/attune/src/transaction_designer_mainwindow.ui
--rw-r--r--   0        0        0     7565 2023-03-21 16:33:08.130565 sfctools-1.0.5.1/sfctools/gui/attune/src/yaml_editor.py
--rw-r--r--   0        0        0      357 2023-03-21 16:33:08.130565 sfctools-1.0.5.1/sfctools/gui/attune_main.py
--rw-r--r--   0        0        0      389 2023-03-21 16:33:08.130565 sfctools-1.0.5.1/sfctools/gui/attune_starter.py
--rw-r--r--   0        0        0    27804 2022-11-23 08:34:47.819952 sfctools-1.0.5.1/sfctools/gui/CLA.pdf
--rw-r--r--   0        0        0     1434 2022-11-23 08:34:47.820915 sfctools-1.0.5.1/sfctools/gui/CONTRIBUTING.md
--rw-r--r--   0        0        0     1157 2022-11-23 08:34:47.821917 sfctools-1.0.5.1/sfctools/gui/LICENSE
--rw-r--r--   0        0        0      819 2023-01-26 10:34:36.656502 sfctools-1.0.5.1/sfctools/gui/README.md
--rw-r--r--   0        0        0       47 2022-12-22 09:03:58.496002 sfctools-1.0.5.1/sfctools/gui/runner.py
--rw-r--r--   0        0        0      275 2023-01-26 10:34:36.669122 sfctools-1.0.5.1/sfctools/gui/sfctheme
--rw-r--r--   0        0        0     4765 2022-11-23 09:50:36.467143 sfctools-1.0.5.1/sfctools/MAMBA/__pycache__/mamba_interpreter2.cpython-38.pyc
--rw-r--r--   0        0        0        0 2022-11-23 08:34:47.855670 sfctools-1.0.5.1/sfctools/misc/__init__.py
--rw-r--r--   0        0        0      171 2023-01-25 08:23:20.056190 sfctools-1.0.5.1/sfctools/misc/__pycache__/__init__.cpython-311.pyc
--rw-r--r--   0        0        0      153 2023-01-19 21:54:26.534886 sfctools-1.0.5.1/sfctools/misc/__pycache__/__init__.cpython-38.pyc
--rw-r--r--   0        0        0    13145 2023-02-06 10:24:45.828385 sfctools-1.0.5.1/sfctools/misc/__pycache__/mpl_plotting.cpython-38.pyc
--rw-r--r--   0        0        0    10106 2023-01-25 08:23:20.059255 sfctools-1.0.5.1/sfctools/misc/__pycache__/reporting_sheet.cpython-311.pyc
--rw-r--r--   0        0        0     7616 2023-03-21 13:35:54.594279 sfctools-1.0.5.1/sfctools/misc/__pycache__/reporting_sheet.cpython-38.pyc
--rw-r--r--   0        0        0    12006 2023-01-25 08:23:21.230666 sfctools-1.0.5.1/sfctools/misc/__pycache__/timeseries.cpython-311.pyc
--rw-r--r--   0        0        0     6420 2023-01-25 08:17:49.793565 sfctools-1.0.5.1/sfctools/misc/__pycache__/timeseries.cpython-38.pyc
--rw-r--r--   0        0        0    18645 2023-03-21 16:33:08.131566 sfctools-1.0.5.1/sfctools/misc/mpl_plotting.py
--rw-r--r--   0        0        0     7795 2023-03-21 16:33:08.131566 sfctools-1.0.5.1/sfctools/misc/reporting_sheet.py
--rw-r--r--   0        0        0     7074 2022-11-23 08:34:47.858698 sfctools-1.0.5.1/sfctools/misc/timeseries.py
--rw-r--r--   0        0        0        0 2023-01-26 10:34:36.670124 sfctools-1.0.5.1/sfctools/test.txt
--rw-r--r--   0        0        0     3235 1970-01-01 00:00:00.000000 sfctools-1.0.5.1/setup.py
--rw-r--r--   0        0        0     2910 1970-01-01 00:00:00.000000 sfctools-1.0.5.1/PKG-INFO
+-rw-r--r--   0        0        0     1157 2022-07-11 05:48:16.488771 sfctools-1.0.5.2/LICENSE
+-rw-r--r--   0        0        0     1618 2023-04-27 12:35:27.493935 sfctools-1.0.5.2/pyproject.toml
+-rw-r--r--   0        0        0     1308 2023-03-20 13:09:06.583059 sfctools-1.0.5.2/README.md
+-rw-r--r--   0        0        0     1938 2022-09-30 18:37:37.788985 sfctools-1.0.5.2/sfctools/__init__.py
+-rw-r--r--   0        0        0     2655 2023-03-20 13:09:02.730363 sfctools-1.0.5.2/sfctools/__main__.py
+-rw-r--r--   0        0        0        0 2022-07-11 05:48:24.669104 sfctools-1.0.5.2/sfctools/automation/__init__.py
+-rw-r--r--   0        0        0    10574 2023-03-20 13:09:06.605805 sfctools-1.0.5.2/sfctools/automation/calibration.py
+-rw-r--r--   0        0        0    14589 2023-03-20 13:09:06.606808 sfctools-1.0.5.2/sfctools/automation/cgesolver.py
+-rw-r--r--   0        0        0       75 2022-08-09 15:11:37.952444 sfctools-1.0.5.2/sfctools/automation/README.md
+-rw-r--r--   0        0        0     5077 2022-09-30 16:39:54.806932 sfctools-1.0.5.2/sfctools/automation/runner.py
+-rw-r--r--   0        0        0        0 2022-07-11 05:48:24.973114 sfctools-1.0.5.2/sfctools/bottomup/__init__.py
+-rw-r--r--   0        0        0     8900 2023-03-20 13:09:02.731669 sfctools-1.0.5.2/sfctools/bottomup/matching.py
+-rw-r--r--   0        0        0    17465 2023-03-20 13:09:06.607816 sfctools-1.0.5.2/sfctools/bottomup/productiontree.py
+-rw-r--r--   0        0        0     6904 2022-07-11 05:48:25.096539 sfctools-1.0.5.2/sfctools/bottomup/stock_manager.py
+-rw-r--r--   0        0        0     2737 2022-07-11 05:48:25.136548 sfctools-1.0.5.2/sfctools/bottomup/treestruct.py
+-rw-r--r--   0        0        0        0 2022-09-30 17:46:40.211773 sfctools-1.0.5.2/sfctools/core/__init__.py
+-rw-r--r--   0        0        0     7572 2022-09-30 18:03:18.887479 sfctools-1.0.5.2/sfctools/core/agent.py
+-rw-r--r--   0        0        0     2249 2022-10-06 06:50:49.792046 sfctools-1.0.5.2/sfctools/core/clock.py
+-rw-r--r--   0        0        0      495 2023-03-20 13:09:06.608843 sfctools-1.0.5.2/sfctools/core/custom_warnings.py
+-rw-r--r--   0        0        0    15032 2023-03-20 13:09:06.609847 sfctools-1.0.5.2/sfctools/core/flow_matrix.py
+-rw-r--r--   0        0        0    11632 2023-03-20 13:09:06.609847 sfctools-1.0.5.2/sfctools/core/settings.py
+-rw-r--r--   0        0        0      661 2022-10-06 06:49:21.703590 sfctools-1.0.5.2/sfctools/core/singleton.py
+-rw-r--r--   0        0        0     7304 2023-03-20 13:09:02.733973 sfctools-1.0.5.2/sfctools/core/world.py
+-rw-r--r--   0        0        0        0 2022-07-11 05:48:26.022730 sfctools-1.0.5.2/sfctools/datastructs/__init__.py
+-rw-r--r--   0        0        0    32494 2023-03-20 13:09:06.610850 sfctools-1.0.5.2/sfctools/datastructs/balance.py
+-rw-r--r--   0        0        0    17441 2023-03-20 13:09:02.735065 sfctools-1.0.5.2/sfctools/datastructs/bank_order_book.py
+-rw-r--r--   0        0        0     6175 2023-03-20 13:09:06.611852 sfctools-1.0.5.2/sfctools/datastructs/cash_flow_statement.py
+-rw-r--r--   0        0        0     4900 2022-07-11 05:48:26.175050 sfctools-1.0.5.2/sfctools/datastructs/collection.py
+-rw-r--r--   0        0        0    14241 2022-12-30 14:49:34.085439 sfctools-1.0.5.2/sfctools/datastructs/income_statement.py
+-rw-r--r--   0        0        0     6043 2022-07-11 05:48:26.251065 sfctools-1.0.5.2/sfctools/datastructs/inventory.py
+-rw-r--r--   0        0        0     4272 2022-07-11 05:48:26.289074 sfctools-1.0.5.2/sfctools/datastructs/market_registry.py
+-rw-r--r--   0        0        0     5313 2022-07-11 05:48:26.401099 sfctools-1.0.5.2/sfctools/datastructs/signalslot.py
+-rw-r--r--   0        0        0     2961 2022-10-05 17:45:14.259714 sfctools-1.0.5.2/sfctools/datastructs/worker_registry.py
+-rw-r--r--   0        0        0      550 2023-03-20 13:09:06.612897 sfctools-1.0.5.2/sfctools/examples/__init__.py
+-rw-r--r--   0        0        0     2491 2023-03-20 13:09:06.614389 sfctools-1.0.5.2/sfctools/examples/balance.py
+-rw-r--r--   0        0        0     1701 2023-03-20 13:09:06.615392 sfctools-1.0.5.2/sfctools/examples/basic_example/basic_example.py
+-rw-r--r--   0        0        0      202 2023-03-20 13:09:06.615392 sfctools-1.0.5.2/sfctools/examples/basic_example/my_settings.yml
+-rw-r--r--   0        0        0     1087 2023-03-20 13:09:06.616409 sfctools-1.0.5.2/sfctools/examples/clock.py
+-rw-r--r--   0        0        0     1378 2023-03-20 13:09:06.616409 sfctools-1.0.5.2/sfctools/examples/example_wrapper.py
+-rw-r--r--   0        0        0        0 2023-03-20 13:09:06.616409 sfctools-1.0.5.2/sfctools/examples/exampleabm/agents/__init__.py
+-rw-r--r--   0        0        0     1845 2023-03-20 13:09:06.617415 sfctools-1.0.5.2/sfctools/examples/exampleabm/agents/government.py
+-rw-r--r--   0        0        0     2370 2023-03-20 13:09:06.617415 sfctools-1.0.5.2/sfctools/examples/exampleabm/agents/household.py
+-rw-r--r--   0        0        0     2198 2023-03-20 13:09:06.618422 sfctools-1.0.5.2/sfctools/examples/exampleabm/agents/production.py
+-rw-r--r--   0        0        0     4365 2023-03-20 13:09:06.618422 sfctools-1.0.5.2/sfctools/examples/exampleabm/agents/transactions.py
+-rw-r--r--   0        0        0      910 2023-03-20 13:09:06.618422 sfctools-1.0.5.2/sfctools/examples/exampleabm/data/preprocess.py
+-rw-r--r--   0        0        0    13152 2023-03-20 13:09:06.619427 sfctools-1.0.5.2/sfctools/examples/exampleabm/data/processed/tipsau20_gdp_processed.txt
+-rw-r--r--   0        0        0      818 2023-03-20 13:09:06.619427 sfctools-1.0.5.2/sfctools/examples/exampleabm/data/raw/tipsau20_gdp.csv
+-rw-r--r--   0        0        0    31241 2023-03-20 13:09:06.621437 sfctools-1.0.5.2/sfctools/examples/exampleabm/figures/matrix.png
+-rw-r--r--   0        0        0    42423 2023-03-20 13:09:06.622441 sfctools-1.0.5.2/sfctools/examples/exampleabm/figures/outputs.png
+-rw-r--r--   0        0        0    43865 2023-03-20 13:09:06.623445 sfctools-1.0.5.2/sfctools/examples/exampleabm/figures/sankey.png
+-rw-r--r--   0        0        0     1264 2023-03-20 13:09:06.623445 sfctools-1.0.5.2/sfctools/examples/exampleabm/info.md
+-rw-r--r--   0        0        0     3730 2023-03-20 13:09:06.624450 sfctools-1.0.5.2/sfctools/examples/exampleabm/model.py
+-rw-r--r--   0        0        0     1148 2023-03-20 13:09:06.624450 sfctools-1.0.5.2/sfctools/examples/exampleabm/settings.yml
+-rw-r--r--   0        0        0     2805 2023-03-20 13:09:06.625458 sfctools-1.0.5.2/sfctools/examples/flowmatrix.py
+-rw-r--r--   0        0        0      813 2023-03-20 13:09:06.625458 sfctools-1.0.5.2/sfctools/examples/hello_agent.py
+-rw-r--r--   0        0        0     1168 2023-03-20 13:09:06.626464 sfctools-1.0.5.2/sfctools/examples/inventory.py
+-rw-r--r--   0        0        0     1783 2023-03-20 13:09:06.626464 sfctools-1.0.5.2/sfctools/examples/market_example/market.py
+-rw-r--r--   0        0        0     2735 2023-03-20 13:09:06.627470 sfctools-1.0.5.2/sfctools/examples/market_example/market2.py
+-rw-r--r--   0        0        0      999 2023-03-20 13:09:06.628492 sfctools-1.0.5.2/sfctools/examples/monte_carlo/monte_carlo.py
+-rw-r--r--   0        0        0       28 2023-03-20 13:09:06.628492 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/errors.txt
+-rw-r--r--   0        0        0      418 2023-03-20 13:09:06.629556 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.0
+-rw-r--r--   0        0        0      413 2023-03-20 13:09:06.629556 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.1
+-rw-r--r--   0        0        0      413 2023-03-20 13:09:06.629556 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.2
+-rw-r--r--   0        0        0      413 2023-03-20 13:09:06.630562 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.3
+-rw-r--r--   0        0        0      417 2023-03-20 13:09:06.630562 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.4
+-rw-r--r--   0        0        0      410 2023-03-20 13:09:06.631568 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.5
+-rw-r--r--   0        0        0      417 2023-03-20 13:09:06.631568 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.6
+-rw-r--r--   0        0        0      412 2023-03-20 13:09:06.632574 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.7
+-rw-r--r--   0        0        0      408 2023-03-20 13:09:06.632574 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.8
+-rw-r--r--   0        0        0      408 2023-03-20 13:09:06.632574 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.9
+-rw-r--r--   0        0        0      527 2023-03-20 13:09:06.633581 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.txt
+-rw-r--r--   0        0        0      258 2023-03-20 13:09:06.633581 sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/progress.txt
+-rw-r--r--   0        0        0      184 2023-03-20 13:09:06.634587 sfctools-1.0.5.2/sfctools/examples/monte_carlo/testsettings.yml
+-rw-r--r--   0        0        0     3411 2023-03-20 13:09:06.635591 sfctools-1.0.5.2/sfctools/examples/order_book.py
+-rw-r--r--   0        0        0      124 2023-03-20 13:09:06.635591 sfctools-1.0.5.2/sfctools/examples/paper_example.py
+-rw-r--r--   0        0        0     1471 2023-03-20 13:09:06.636593 sfctools-1.0.5.2/sfctools/examples/signal_slot.py
+-rw-r--r--   0        0        0       27 2022-08-09 15:11:37.952444 sfctools-1.0.5.2/sfctools/gui/.gitignore
+-rw-r--r--   0        0        0      854 2022-08-09 15:11:37.952444 sfctools-1.0.5.2/sfctools/gui/.gitlab-ci.yml
+-rw-r--r--   0        0        0       64 2022-08-09 15:11:37.952444 sfctools-1.0.5.2/sfctools/gui/__init__.py
+-rw-r--r--   0        0        0       41 2022-08-09 15:11:37.952444 sfctools-1.0.5.2/sfctools/gui/attune/.gitignore
+-rw-r--r--   0        0        0        0 2022-08-09 15:11:37.952444 sfctools-1.0.5.2/sfctools/gui/attune/__init__.py
+-rw-r--r--   0        0        0        0 2022-08-09 15:11:37.952444 sfctools-1.0.5.2/sfctools/gui/attune/src/__init__.py
+-rw-r--r--   0        0        0    34561 2023-03-20 13:09:06.637593 sfctools-1.0.5.2/sfctools/gui/attune/src/agent_editor.py
+-rw-r--r--   0        0        0     6935 2023-03-20 13:09:06.637593 sfctools-1.0.5.2/sfctools/gui/attune/src/code_editor.ui
+-rw-r--r--   0        0        0    66050 2023-04-27 12:29:35.676805 sfctools-1.0.5.2/sfctools/gui/attune/src/draw_widget.py
+-rw-r--r--   0        0        0     1645 2023-03-20 13:09:02.740428 sfctools-1.0.5.2/sfctools/gui/attune/src/income_viewer.ui
+-rw-r--r--   0        0        0    13149 2023-03-20 13:09:06.639594 sfctools-1.0.5.2/sfctools/gui/attune/src/mainloop_editor.py
+-rw-r--r--   0        0        0     8176 2023-03-20 13:09:02.741615 sfctools-1.0.5.2/sfctools/gui/attune/src/mamba_interpreter2.py
+-rw-r--r--   0        0        0     1334 2023-03-20 13:09:06.640594 sfctools-1.0.5.2/sfctools/gui/attune/src/matrix_viewer.ui
+-rw-r--r--   0        0        0    19411 2023-03-20 13:09:06.641594 sfctools-1.0.5.2/sfctools/gui/attune/src/output_display.py
+-rw-r--r--   0        0        0    11200 2022-08-09 15:11:37.968071 sfctools-1.0.5.2/sfctools/gui/attune/src/output_display.ui
+-rw-r--r--   0        0        0     1066 2023-04-27 08:43:06.249807 sfctools-1.0.5.2/sfctools/gui/attune/src/pandasmodel.py
+-rw-r--r--   0        0        0   132046 2023-04-27 12:16:00.124302 sfctools-1.0.5.2/sfctools/gui/attune/src/qtattune.py
+-rw-r--r--   0        0        0    24104 2022-08-09 15:11:37.968071 sfctools-1.0.5.2/sfctools/gui/attune/src/resources.py
+-rw-r--r--   0        0        0      107 2022-08-09 15:11:37.968071 sfctools-1.0.5.2/sfctools/gui/attune/src/resources.qrc
+-rw-r--r--   0        0        0     5927 2023-03-20 13:09:06.643594 sfctools-1.0.5.2/sfctools/gui/attune/src/settings_edit.ui
+-rw-r--r--   0        0        0     3012 2023-03-20 13:09:06.644595 sfctools-1.0.5.2/sfctools/gui/attune/src/simulation_edit.ui
+-rw-r--r--   0        0        0      216 2023-03-20 13:09:02.744421 sfctools-1.0.5.2/sfctools/gui/attune/src/styles/bright/background.txt
+-rw-r--r--   0        0        0     4020 2023-03-20 13:09:06.645595 sfctools-1.0.5.2/sfctools/gui/attune/src/styles/bright/main.txt
+-rw-r--r--   0        0        0       62 2023-03-20 13:09:02.745871 sfctools-1.0.5.2/sfctools/gui/attune/src/styles/bright/tables.txt
+-rw-r--r--   0        0        0      727 2023-03-20 13:09:02.746872 sfctools-1.0.5.2/sfctools/gui/attune/src/styles/dark/background.txt
+-rw-r--r--   0        0        0     4228 2023-03-20 13:09:06.646595 sfctools-1.0.5.2/sfctools/gui/attune/src/styles/dark/main.txt
+-rw-r--r--   0        0        0       37 2023-03-20 13:09:02.748074 sfctools-1.0.5.2/sfctools/gui/attune/src/styles/dark/tables.txt
+-rw-r--r--   0        0        0     6808 2023-04-27 08:43:06.257210 sfctools-1.0.5.2/sfctools/gui/attune/src/theme_manager.py
+-rw-r--r--   0        0        0    84670 2023-04-27 12:23:02.039372 sfctools-1.0.5.2/sfctools/gui/attune/src/transaction_designer_mainwindow.ui
+-rw-r--r--   0        0        0     7565 2023-03-20 13:09:02.750296 sfctools-1.0.5.2/sfctools/gui/attune/src/yaml_editor.py
+-rw-r--r--   0        0        0      357 2023-03-20 13:09:06.647595 sfctools-1.0.5.2/sfctools/gui/attune_main.py
+-rw-r--r--   0        0        0      389 2023-03-20 13:09:06.648596 sfctools-1.0.5.2/sfctools/gui/attune_starter.py
+-rw-r--r--   0        0        0    27804 2022-08-09 15:11:37.952444 sfctools-1.0.5.2/sfctools/gui/CLA.pdf
+-rw-r--r--   0        0        0     1434 2022-08-09 15:11:37.952444 sfctools-1.0.5.2/sfctools/gui/CONTRIBUTING.md
+-rw-r--r--   0        0        0     1157 2022-08-09 15:11:37.952444 sfctools-1.0.5.2/sfctools/gui/LICENSE
+-rw-r--r--   0        0        0      819 2023-03-20 13:09:02.736482 sfctools-1.0.5.2/sfctools/gui/README.md
+-rw-r--r--   0        0        0       47 2023-03-20 12:39:06.880624 sfctools-1.0.5.2/sfctools/gui/runner.py
+-rw-r--r--   0        0        0      275 2023-04-27 11:35:47.715548 sfctools-1.0.5.2/sfctools/gui/sfctheme
+-rw-r--r--   0        0        0        0 2022-07-11 05:48:26.867204 sfctools-1.0.5.2/sfctools/misc/__init__.py
+-rw-r--r--   0        0        0    18645 2023-03-20 13:09:06.649596 sfctools-1.0.5.2/sfctools/misc/mpl_plotting.py
+-rw-r--r--   0        0        0     7795 2023-03-20 13:09:06.650596 sfctools-1.0.5.2/sfctools/misc/reporting_sheet.py
+-rw-r--r--   0        0        0     7074 2022-07-11 05:48:26.971227 sfctools-1.0.5.2/sfctools/misc/timeseries.py
+-rw-r--r--   0        0        0        0 2023-03-20 13:09:02.751297 sfctools-1.0.5.2/sfctools/test.txt
+-rw-r--r--   0        0        0     3174 1970-01-01 00:00:00.000000 sfctools-1.0.5.2/setup.py
+-rw-r--r--   0        0        0     2859 1970-01-01 00:00:00.000000 sfctools-1.0.5.2/PKG-INFO
```

### Comparing `sfctools-1.0.5.1/LICENSE` & `sfctools-1.0.5.2/LICENSE`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/pyproject.toml` & `sfctools-1.0.5.2/pyproject.toml`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 [tool.poetry]
 name = "sfctools"
-version = "1.0.5.1"
+version = "1.0.5.2"
 description = "Framework for stock-flow consistent agent-based modeling, being developed at the German Aerospace Center (DLR) for and in the scientific context of energy systems analysis, however, it is widely applicable in other scientific fields."
 
 authors = ["Thomas Baldauf <thomas.baldauf@dlr.de>"]
 license = "MIT"
 maintainers = ["Thomas Baldauf, Benjamin Fuchs <thomas.baldauf@dlr.de, benjamin.fuchs@dlr.de>"]
 homepage = 'https://gitlab.com/dlr-ve/esy/sfctools/framework'
 documentation = 'https://sfctools-framework.readthedocs.io/en/latest/'
```

### Comparing `sfctools-1.0.5.1/README.md` & `sfctools-1.0.5.2/README.md`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/__init__.py` & `sfctools-1.0.5.2/sfctools/__init__.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/__main__.py` & `sfctools-1.0.5.2/sfctools/__main__.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/automation/calibration.py` & `sfctools-1.0.5.2/sfctools/automation/calibration.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/automation/cgesolver.py` & `sfctools-1.0.5.2/sfctools/automation/cgesolver.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/automation/runner.py` & `sfctools-1.0.5.2/sfctools/automation/runner.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/bottomup/matching.py` & `sfctools-1.0.5.2/sfctools/bottomup/matching.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/bottomup/productiontree.py` & `sfctools-1.0.5.2/sfctools/bottomup/productiontree.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/bottomup/stock_manager.py` & `sfctools-1.0.5.2/sfctools/bottomup/stock_manager.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/bottomup/treestruct.py` & `sfctools-1.0.5.2/sfctools/bottomup/treestruct.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/core/agent.py` & `sfctools-1.0.5.2/sfctools/core/agent.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/core/clock.py` & `sfctools-1.0.5.2/sfctools/core/clock.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/core/flow_matrix.py` & `sfctools-1.0.5.2/sfctools/core/flow_matrix.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/core/settings.py` & `sfctools-1.0.5.2/sfctools/core/settings.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/core/singleton.py` & `sfctools-1.0.5.2/sfctools/core/singleton.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/core/world.py` & `sfctools-1.0.5.2/sfctools/core/world.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/datastructs/balance.py` & `sfctools-1.0.5.2/sfctools/datastructs/balance.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/datastructs/bank_order_book.py` & `sfctools-1.0.5.2/sfctools/datastructs/bank_order_book.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/datastructs/cash_flow_statement.py` & `sfctools-1.0.5.2/sfctools/datastructs/cash_flow_statement.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/datastructs/collection.py` & `sfctools-1.0.5.2/sfctools/datastructs/collection.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/datastructs/income_statement.py` & `sfctools-1.0.5.2/sfctools/datastructs/income_statement.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/datastructs/inventory.py` & `sfctools-1.0.5.2/sfctools/datastructs/inventory.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/datastructs/market_registry.py` & `sfctools-1.0.5.2/sfctools/datastructs/market_registry.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/datastructs/signalslot.py` & `sfctools-1.0.5.2/sfctools/datastructs/signalslot.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/datastructs/worker_registry.py` & `sfctools-1.0.5.2/sfctools/datastructs/worker_registry.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/__init__.py` & `sfctools-1.0.5.2/sfctools/examples/__init__.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/balance.py` & `sfctools-1.0.5.2/sfctools/examples/balance.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/basic_example/basic_example.py` & `sfctools-1.0.5.2/sfctools/examples/basic_example/basic_example.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/clock.py` & `sfctools-1.0.5.2/sfctools/examples/clock.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/example_wrapper.py` & `sfctools-1.0.5.2/sfctools/examples/example_wrapper.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/exampleabm/agents/government.py` & `sfctools-1.0.5.2/sfctools/examples/exampleabm/agents/government.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/exampleabm/agents/household.py` & `sfctools-1.0.5.2/sfctools/examples/exampleabm/agents/household.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/exampleabm/agents/production.py` & `sfctools-1.0.5.2/sfctools/examples/exampleabm/agents/production.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/exampleabm/agents/transactions.py` & `sfctools-1.0.5.2/sfctools/examples/exampleabm/agents/transactions.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/exampleabm/data/preprocess.py` & `sfctools-1.0.5.2/sfctools/examples/exampleabm/data/preprocess.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/exampleabm/data/processed/tipsau20_gdp_processed.txt` & `sfctools-1.0.5.2/sfctools/examples/exampleabm/data/processed/tipsau20_gdp_processed.txt`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/exampleabm/data/raw/tipsau20_gdp.csv` & `sfctools-1.0.5.2/sfctools/examples/exampleabm/data/raw/tipsau20_gdp.csv`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/exampleabm/figures/matrix.png` & `sfctools-1.0.5.2/sfctools/examples/exampleabm/figures/matrix.png`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/exampleabm/figures/outputs.png` & `sfctools-1.0.5.2/sfctools/examples/exampleabm/figures/outputs.png`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/exampleabm/figures/sankey.png` & `sfctools-1.0.5.2/sfctools/examples/exampleabm/figures/sankey.png`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/exampleabm/info.md` & `sfctools-1.0.5.2/sfctools/examples/exampleabm/info.md`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/exampleabm/model.py` & `sfctools-1.0.5.2/sfctools/examples/exampleabm/model.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/exampleabm/settings.yml` & `sfctools-1.0.5.2/sfctools/examples/exampleabm/settings.yml`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/flowmatrix.py` & `sfctools-1.0.5.2/sfctools/examples/flowmatrix.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/hello_agent.py` & `sfctools-1.0.5.2/sfctools/examples/hello_agent.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/inventory.py` & `sfctools-1.0.5.2/sfctools/examples/inventory.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/market_example/market.py` & `sfctools-1.0.5.2/sfctools/examples/market_example/market.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/market_example/market2.py` & `sfctools-1.0.5.2/sfctools/examples/market_example/market2.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/monte_carlo/monte_carlo.py` & `sfctools-1.0.5.2/sfctools/examples/monte_carlo/monte_carlo.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/monte_carlo/result/output.txt` & `sfctools-1.0.5.2/sfctools/examples/monte_carlo/result/output.txt`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/order_book.py` & `sfctools-1.0.5.2/sfctools/examples/order_book.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/examples/signal_slot.py` & `sfctools-1.0.5.2/sfctools/examples/signal_slot.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/.gitlab-ci.yml` & `sfctools-1.0.5.2/sfctools/gui/.gitlab-ci.yml`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/attune/src/agent_editor.py` & `sfctools-1.0.5.2/sfctools/gui/attune/src/agent_editor.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/attune/src/code_editor.ui` & `sfctools-1.0.5.2/sfctools/gui/attune/src/code_editor.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/attune/src/draw_widget.py` & `sfctools-1.0.5.2/sfctools/gui/attune/src/draw_widget.py`

 * *Files 2% similar despite different names*

```diff
@@ -14,33 +14,119 @@
 import os
 import numpy as np
 # from transaction_editor import TransactionEditor
 # from agent_editor import AgentEditor
 
 from .agent_editor import CodeEditor
 
-class Box:
 
+class Label:
+    """
+    A label for a box
+    """
+    def __init__(self,x,y,name,parent_box):
+        self.x = x
+        self.y =  y
+        self.box = parent_box
+        self.name = name
+
+        self.offx = 0
+        self.offy = 0
+
+    def draw(self, qp, brush, position = None):
+        #
+        #
+
+        dw = MyDrawWidget.instance
+        zf = dw.zoom_factor
+
+        # set the name according to the checkbox settings
+        if not dw.main_widget.checkBox_8.isChecked():
+            name = self.name.replace("_"," ")
+        else:
+            name = self.name.replace("_"," ")
+
+        # check the actually dispalyed height and length
+        fm = qp.fontMetrics()
+
+        text_length = fm.boundingRect(name).width() + 2
+        text_height = fm.boundingRect(name).height() + 2
+
+        if position is None:
+            a = zf*(dw.gox + self.x + self.offx )
+            b = zf*(dw.goy + self.y + self.offy )
+        else:
+            a,b = position
+
+        # draw highlighted background
+        if brush is not None and dw.main_widget.checkBox_4.isChecked():
+            bound_rect = QtCore.QRectF(QtCore.QPointF(int(a-.1),int(b-text_height+1)),QtCore.QPointF(int(a + text_length),int(b)))
+            qp.fillRect(bound_rect,brush)
+
+        # draw text
+        qp.drawText(int(a),int(b)-1, name)
+
+
+
+
+class Box:
+    """
+    A box (representing an agent)
+    """
     def __init__(self,x,y, name,ishelper=False,parent=None,parent_widget=None,is_support=False):
 
-        self.x = x
-        self.y = y
+        self._x = x
+        self._y = y
 
         self.x0 = x
         self.y0 = y
 
-
         self.name = name #.capitalize()
+        self.label = Label(x+1,y-7,name,parent_box = self)
+
         self.ishelper = ishelper
         self.is_support = is_support
         self.parent = parent
         self.n_connections = 0
 
         self.parent_widget = parent_widget
 
+    @property
+    def x(self):
+        return self._x
+
+    @property
+    def y(self):
+        return self._y
+
+    @x.setter
+    def x(self,val):
+        dx = val - self._x
+        self._x += dx
+        self.label.x += dx
+
+    @y.setter
+    def y(self,val):
+        dy = val - self._y
+        self._y += dy
+        self.label.y += dy
+
+
+
+    def draw(self, qp, brush=None, active=True):
+
+        dw = MyDrawWidget.instance
+        zf = dw.zoom_factor
+
+        if self.ishelper:
+            handle_w = 5
+            qp.drawEllipse(QtCore.QPointF(zf*(dw.gox + self.x+4),zf*(dw.goy + self.y+4)), handle_w, handle_w)
+
+
+
 
     def edit_agent(self):
         if not self.ishelper:
             print("EDIT AGENT CODE", self.name)
             print("INSTANCES",CodeEditor.instances,"\n\n")
             start = ""
             if self.name in self.parent_widget.code_data:
@@ -171,28 +257,31 @@
         self.a.ishelper = False
         self.b.ishelper = False
 
 
 
 class MyDrawWidget(QtWidgets.QWidget):
 
+    instance = None
+
     def __init__(self,parent_widget,main_widget):
 
         super().__init__(parent_widget)
 
         parent_widget.resizeEvent = self.resizeEvent
         # self.W = int(self.parent().frameGeometry().width()-1030) # 850
         # self.H = 750
         # self.setGeometry(0,0,self.W,self.H)
         self.move(0,0)
 
         self.parent_widget = parent_widget
         self.main_widget = main_widget
 
         self.resize_frame()
+        self.__class__.instance = self
 
 
         self.boxes = []
         self.connectors = []
 
         self.old_positions = {}
 
@@ -358,26 +447,53 @@
         pos_data = {}
 
         for box in self.boxes:
             pos_data[box.name] = {"x": int(box.x), "y": int(box.y)}
 
         return pos_data
 
+    def label_positions(self):
+        pos_data = {}
+
+        for box in self.boxes:
+            box.label.x += box.label.offx
+            box.label.y += box.label.offy
+
+            box.label.offx = 0
+            box.label.offy = 0
+
+            pos_data[box.label.name] = {"x": int(box.label.x), "y": int(box.label.y)}
+
+        return pos_data
+    
+
     def reposition(self,pos_data):
         # reposition all the boxes
         print("reposition <-> ", pos_data)
         for box in self.boxes:
             if box.name in pos_data:
 
                 print("reposition",box.name,pos_data[box.name])
                 box.x = pos_data[box.name]["x"]
                 box.y = pos_data[box.name]["y"]
                 box.x0 = box.x
                 box.y0 = box.y
 
+    def reposition_labels(self,pos_data):
+        # reposition all the labels
+        print("reposition <-> ", pos_data)
+        for box in self.boxes:
+            if box.label.name in pos_data:
+
+                print("reposition",box.label.name,pos_data[box.label.name])
+                box.label.x = pos_data[box.label.name]["x"]
+                box.label.y = pos_data[box.label.name]["y"]
+                box.label.offx = 0
+                box.label.offy = 0
+
     def edit_agent(self):
         if self.highlighted is not None:
             self.highlighted.edit_agent()
 
     def remove_agent(self):
         # remove currently selected agent if it has no connections
         box = self.highlighted
@@ -1066,37 +1182,33 @@
                     pen.setStyle(Qt.SolidLine)
                     pen.setWidthF(1.5)
 
                 else:
                     pen.setStyle(Qt.DashLine)
                     #pen.setDashOffset(4.0)
                     pen.setDashPattern([1,4])
-                    pen.setWidthF(1.8)
+                    pen.setWidthF(1.1)
 
                     is_flow = False
                     is_unidir = True
 
 
             qp.setPen(pen)
 
             # qp.drawLine(int(conn.a.x+25), int(conn.a.y+25), int(conn.c.x+5), int(conn.c.y+5))
             # qp.drawLine(int(conn.c.x+5), int(conn.c.y+5), int(conn.b.x+25), int(conn.b.y+25))
 
             # apply filter: does the connector contain any of the filter_vals?
 
             show = True
-
             offset_box = 25
 
             if conn in active_connectors:
                 # draw only if filter applies
 
-
-
-
                 tx,ty = self.curved_connector(qp,self.gox + int(conn.a.x+offset_box),
                                                  self.goy + int(conn.a.y+offset_box),
                                                  self.gox + int(conn.b.x+offset_box),
                                                  self.goy + int(conn.b.y+offset_box),
                                                  self.gox + int(conn.c.x+5), self.goy + int(conn.c.y+5),
                                                  self.gox + int(conn.d.x+5), self.goy + int(conn.d.y+5),
                                                  is_flow=is_flow,
@@ -1118,104 +1230,115 @@
                     pen = QtGui.QPen(self.main_widget.theme_manager.get_color(6),1.5)
                     qp.setPen(pen)
                 else:
                     pen = QtGui.QPen(self.main_widget.theme_manager.get_color(1),1.5)
                     qp.setPen(pen)
 
 
-                if not self.main_widget.checkBox_8.isChecked():
-                    conn_label_name = conn.c.name.replace("_"," ")
-                else:
-                    conn_label_name = conn.subject.replace("_"," ")
-
                 if self.main_widget.checkBox_5.isChecked(): # draw at handles
                     if self.main_widget.checkBox_2.isChecked():
+
+
                         if self.highlighted == conn.c:
                             brush = QtGui.QBrush(self.main_widget.theme_manager.get_color(4),1)
                         else:
                             brush = QtGui.QBrush(self.main_widget.theme_manager.get_color(3),1)
 
+                        fontsize = 8
+
+                        try:
+                            fontsize = int(self.main_widget.spinBoxFontSize_2.value())
+                            qp.setFont(QFont("Arial", fontsize))
+
+                        except Exception as e:
+                            print(str(e))
+
+                        conn.c.label.draw(qp,brush)
+
+                        """
                         a = self.zoom_factor*(self.gox +conn.c.x)
                         b = self.zoom_factor*(self.goy + conn.c.y-7)
 
                         # draw second connector
                         a2 = self.zoom_factor*(self.gox +conn.d.x)
                         b2 = self.zoom_factor*(self.goy + conn.d.y-7)
 
                         # draw connector label
-                        fontsize = 8
 
-                        try:
-                            fontsize = int(self.main_widget.spinBoxFontSize_2.value())
-                            qp.setFont(QFont("Arial", fontsize))
-
-                        except Exception as e:
-                            print(str(e))
 
                         if self.main_widget.checkBox_4.isChecked():
 
                             fm = qp.fontMetrics()
                             text_length = fm.boundingRect(conn_label_name).width() + 2
                             text_height = fm.boundingRect(conn_label_name).height() + 2
+
                             # text_length = 5.1*len(conn.c.name)
                             qp.fillRect(QtCore.QRectF(QtCore.QPointF(int(a-.1),int(b-text_height+1)),QtCore.QPointF(int(a+text_length),int(b))),brush)
                             # qp.fillRect(QtCore.QRectF(QtCore.QPointF(int(a2-.1),b2-10),QtCore.QPointF(int(a2+5.1*len(conn.d.name)),b2+10)),brush)
 
                         qp.drawText(int(a),int(b)-1,conn_label_name)
+                        """
 
-                else:
+                else: # do not draw at handles
                     if self.main_widget.checkBox_2.isChecked():
                         if self.highlighted == conn.c:
                             brush = QtGui.QBrush(self.main_widget.theme_manager.get_color(4),1)
                         else:
                             brush = QtGui.QBrush(self.main_widget.theme_manager.get_color(3),1)
+
+
                         if conn.a.x != conn.b.x and conn.a.y != conn.b.y:
                             a = self.zoom_factor*(tx)
                             b = self.zoom_factor*(ty)
 
                             a2 = self.zoom_factor*(tx+5)
                             b2 = self.zoom_factor*(ty+5)
 
 
                         else:
                             a = self.zoom_factor*(self.gox +conn.c.x)
-                            b = self.zoom_factor*(self.goy + conn.c.y-7)
+                            b = self.zoom_factor*(self.goy + conn.c.y+conn.c.name_osx)
 
                             a2 = self.zoom_factor*(self.gox +conn.d.x)
-                            b2 = self.zoom_factor*(self.goy + conn.d.y-7)
+                            b2 = self.zoom_factor*(self.goy + conn.d.y+conn.c.name.osy)
 
 
-                        # draw agent labels
                         fontsize = 8
 
                         try:
                             fontsize = int(self.main_widget.spinBoxFontSize_2.value())
                             qp.setFont(QFont("Arial", fontsize))
 
                         except Exception as e:
                             print(str(e))
 
-                        if self.main_widget.checkBox_4.isChecked():
-                            # text_length = 5.1*len(conn.c.name)
+                        conn.c.label.draw(qp, brush, position = (a2,b2))
 
+                        """
+                        DEPRICATED
 
 
+                        # draw agent labels
+
+
+                        if self.main_widget.checkBox_4.isChecked():
+                            # text_length = 5.1*len(conn.c.name)
 
                             fm = qp.fontMetrics()
                             text_length = fm.boundingRect(conn.c.name.replace("_"," ")).width() + 2
                             text_height = fm.boundingRect(conn.c.name.replace("_"," ")).height() + 2
 
                             qp.fillRect(QtCore.QRectF(QtCore.QPointF(int(a-.1),int(b-text_height+1)),QtCore.QPointF(int(a+text_length),int(b))),brush)
                             # qp.fillRect(QtCore.QRectF(QtCore.QPointF(int(a2-.1),b2-10),QtCore.QPointF(int(a2+5.1*len(conn.d.name)),b2+10)),brush)
 
 
                         qp.drawText(int(a),int(b)-1,conn_label_name)
 
                         # draw second connector
-
+                        """
 
             else:
 
                 """
                 self.curved_connector(qp,self.gox + int(conn.a.x+12.5),
                  self.goy + int(conn.a.y+12.5),
                  self.gox + int(conn.b.x+12.5),
@@ -1243,34 +1366,51 @@
             pen = QtGui.QPen(QtGui.QColor(120, 120, 120, 255),1) # ,2, Qt.SolidLine)
         else:
             pen = QtGui.QPen(QtGui.QColor(0, 0,0 , 75),0) # ,2, Qt.SolidLine)
         """
         pen = QtGui.QPen(self.main_widget.theme_manager.get_color(2),1)
         pen.setStyle(Qt.SolidLine)
 
-        #pen = QtGui.QPen(QtGui.QColor(0, 0,0 , 200),1) # ,2, Qt.SolidLine)
-
+        # pen = QtGui.QPen(QtGui.QColor(0, 0,0 , 200),1) # ,2, Qt.SolidLine)
         qp.setPen(pen)
 
         # print("self.boxes",[b.name for b in self.boxes])
+
+        """
+        FOR DEBUGGING LABELS
+        for box in self.boxes:
+            if box.name != "":
+                z = self.zoom_factor
+                a = z*(box.label.x + box.label.offx +self.gox )
+                b = z*(box.label.y + box.label.offy -11+self.goy ) # self.zoom_factor*(y-7+self.goy)
+
+                w = z* 25
+                w2 = z* 15
+                qp.drawRect(QtCore.QRectF(a,b,w,w2))
+        """
+
         for box in self.boxes:
 
             if box != self.selected: # and box != self.connected2:
 
                 x = box.x
                 y = box.y
 
             elif box == self.selected:
 
                 x = self.mousex + self.offx
                 y = self.mousey + self.offy
 
+                box.x = x
+                box.y = y
+
                 #x = box.x * (1-self.zoom_factor) + new_x *(self.zoom_factor)
                 #y = box.y * (1-self.zoom_factor) + new_y *(self.zoom_factor)
-
+                #box.label.x = x
+                #box.label.y = y
 
             #x = box.x
             #y = box.y
 
             if box == self.selected:
                 br = QtGui.QBrush(QtGui.QColor(34, 34, 230, 255))
             elif box == self.connected1:
@@ -1306,81 +1446,99 @@
                 if box.is_support:
                     br = QtGui.QBrush(self.main_widget.theme_manager.get_color(7),1)
                 else:
                     br = QtGui.QBrush(self.main_widget.theme_manager.get_color(1),1)
 
                 qp.setPen(pen)
                 # qp.drawText(x,y-7,box.name)
+
             else:
                 #qp.drawText(x,y-3,box.name.capitalize())
 
                 # draw agent labels
 
 
-                a = self.zoom_factor*(x+self.gox)
-                b = self.zoom_factor*(y-11+self.goy) # self.zoom_factor*(y-7+self.goy)
+                #a = self.zoom_factor*(x+self.gox)
+                #b = self.zoom_factor*(y-11+self.goy) # self.zoom_factor*(y-7+self.goy)
+                a = self.zoom_factor*(x+self.gox )
+                b = self.zoom_factor*(y-11+self.goy ) # self.zoom_factor*(y-7+self.goy)
+
 
                 pen = QtGui.QPen(self.main_widget.theme_manager.get_color(6),1)
                 qp.setPen(pen)
 
 
-                # draw agent labels
+                # draw agent labels (box labels)
                 fontsize = 12
 
                 try:
                     fontsize = int(self.main_widget.spinBoxFontSize.value())
                     qp.setFont(QFont("Arial", fontsize))
 
                 except Exception as e:
                     print(str(e))
 
 
+
                 if self.main_widget.checkBox_4.isChecked():
 
                     br_label = QtGui.QBrush(self.main_widget.theme_manager.get_color(3),1)
+                else:
+                    br_label = None
 
-
+                """
                     fm = qp.fontMetrics()
                     text_length = fm.boundingRect(box.name.replace("_"," ")).width() + 2
                     text_height = fm.boundingRect(box.name.replace("_"," ")).height() + 2
 
                     qp.fillRect(QtCore.QRectF(QtCore.QPointF(int(a-.1),int(b-text_height + 1)),QtCore.QPointF(int(a+text_length),int(b))),br_label) # background
 
-                qp.drawText(int(a) ,int(b)-1,box.name) # text
+
+                qp.drawText(int(a) ,int(b)-1, box.name) # text
+                """
+
+                box.label.draw(qp,br_label)
+
 
             qp.setBrush(br)
 
             if box.ishelper:
 
                 x2 = x + 6
                 y2 = y + 6
 
-
                 pen = QtGui.QPen(QtGui.QColor(0, 0, 0 , 0),0) # ,2, Qt.SolidLine)
                 qp.setPen(pen)
                 # qp.drawRect(QtCore.QRectF(QtCore.QPointF(x,y),QtCore.QPointF(x2,y2)))
 
                 if box.is_support:
                     show_box = self.main_widget.checkBox_6.isChecked()
                 else:
                     show_box = self.main_widget.checkBox_3.isChecked()
 
                 if show_box:
                     if box in active_boxes:
+
+                        """
                         if box.is_support:
                             qp.drawEllipse(QtCore.QPointF(self.zoom_factor*(self.gox + x+4),self.zoom_factor*(self.goy + y+4)),6, 6)
                         else:
                             qp.drawEllipse(QtCore.QPointF(self.zoom_factor*(self.gox + x+4),self.zoom_factor*(self.goy + y+4)),6, 6)
+                        """
+                        box.draw(qp,active=False)
 
                     else:
+
+                        """
                         if box.is_support:
                             qp.drawEllipse(QtCore.QPointF(self.zoom_factor*(self.gox + x+4),self.zoom_factor*(self.goy + y+4)),2, 2)
                         else:
                             qp.drawEllipse(QtCore.QPointF(self.zoom_factor*(self.gox + x+4),self.zoom_factor*(self.goy + y+4)),2, 2)
-
+                        """
+                        box.draw(qp,active=True)
 
                 """
                 if self.darkMode:
                     pen = QtGui.QPen(QtGui.QColor(120, 120, 120 , 200),0) # ,2, Qt.SolidLine
                 else:
                     pen = QtGui.QPen(QtGui.QColor(0, 0, 0 , 200),0) # ,2, Qt.SolidLine)
                 """
@@ -1418,33 +1576,49 @@
                 y1 = self.zoom_factor*(self.goy +y)
                 x2 = self.zoom_factor*(self.gox +x2)
                 y2 = self.zoom_factor*(self.goy +y2)
 
                 # rect with rounded corners
                 round_w = 4
 
+                # draw boxes
                 path.addRoundedRect(QtCore.QRectF(x1,y1,x2-x1,y2-y1), self.zoom_factor*round_w, self.zoom_factor*round_w)
                 qp.fillPath(path,br.color())
 
+
                 """
                 if self.darkMode:
                     pen = QtGui.QPen(QtGui.QColor(120,120,120 , 255),0) # ,2, Qt.SolidLine)
                 else:
                     pen = QtGui.QPen(QtGui.QColor(0, 0,0 , 255),0) # ,2, Qt.SolidLine)
                 """
 
                 pen = QtGui.QPen(self.main_widget.theme_manager.get_color(3),1)
                 qp.setPen(pen)
         self.dawPreview(qp)
+
+
+
+
         return qp
 
     def paintEvent(self, event):
         self.paint(self)
 
 
+    def hit_box(self,x,y,xb,yb,wx,wy):
+        """
+        check if (x,y) lies within the rectangle
+        (xb, yb), (xb, yb+wy), ...., (xb+wx, yb+wy)
+        """
+
+        cond1 = self.zoom_factor*(xb+self.gox)  < x*self.zoom_factor  < self.zoom_factor*(xb+self.gox + wx)
+        cond2 = self.zoom_factor*(yb+self.goy) < y*self.zoom_factor  < self.zoom_factor*(yb + wy+self.goy)
+        return cond1 and cond2
+
     def mousePressEvent(self, event):
         print("MOUSE PRESS DRAW WIDGET")
 
         self.main_widget.update_graphics_data(self.boxes,self.connectors)
 
         time_delay = time.time() - self.last_click
         self.last_click = time.time()
@@ -1465,22 +1639,32 @@
         self.go_starty = y
         self.gox_start = self.gox
         self.goy_start = self.goy
 
         # check if any box was selected
         box_hit = False
         self.selected = None
+
+        # check for labels
+        for box in self.boxes:
+
+            if self.mode != "move" and self.hit_box(x, y, box.label.x + box.label.offx, box.label.y + box.label.offy -11, 25, 15):
+                self.mode = "drag_label"
+                self.selected = box.label
+                print("selected", box.name)
+
+        # check for box movements
         for box in self.boxes:
             if box.ishelper:
                 w = 10
             else:
                 w = 50
 
-            if self.mode != "move" and self.zoom_factor*(box.x+self.gox)  < x*self.zoom_factor  < self.zoom_factor*(box.x+self.gox + w) and self.zoom_factor*(box.y+self.goy) < y*self.zoom_factor  < self.zoom_factor*(box.y + w+self.goy):
-
+            if self.mode != "move" and self.hit_box(x, y, box.x, box.y, w, w):
+                print("box hit", box.name)
                 # self.mode = "drag"
 
                 box_hit = True
                 if self.mode == "drag":
                     self.selected = box
                     self.offx = (box.x - x)
                     self.offy = (box.y - y)
@@ -1580,54 +1764,73 @@
 
         x = int(x/self.zoom_factor)
         y = int(y/self.zoom_factor)
 
         self.mousex = x
         self.mousey = y
 
-        if self.mode == "move":
+        if self.mode == "drag_label":
+
+            dx = x  - self.go_startx
+            dy = y - self.go_starty
+
+            self.selected.offx = dx # max(-25,min(25,dx))
+            self.selected.offy = dy # max(-25,min(25,dy))
+
+        elif self.mode == "move":
             x = x
             y = y
 
             dx = x  - self.go_startx
             dy = y - self.go_starty
             # print("move", dx,dy)
 
             self.gox = self.gox_start + dx
             self.goy = self.goy_start + dy
 
         # print("move",x,y)
+        else:
 
-        hovering = False
-        for box in self.boxes:
-            if box.ishelper:
-                w = 10
-            else:
-                w = 50
-            if self.mode != "move" and self.zoom_factor*(box.x+self.gox)  < x*self.zoom_factor  < self.zoom_factor*(box.x+self.gox + w) and self.zoom_factor*(box.y+self.goy) < y*self.zoom_factor  < self.zoom_factor*(box.y + w+self.goy):
+            hovering = False
+            for box in self.boxes:
+                if box.ishelper:
+                    w = 10
+                else:
+                    w = 50
+                if self.mode != "move" and self.zoom_factor*(box.x+self.gox)  < x*self.zoom_factor  < self.zoom_factor*(box.x+self.gox + w) and self.zoom_factor*(box.y+self.goy) < y*self.zoom_factor  < self.zoom_factor*(box.y + w+self.goy):
 
-                if event.buttons() & QtCore.Qt.RightButton:
-                    self.mode = "drag"
+                    if event.buttons() & QtCore.Qt.RightButton:
+                        self.mode = "drag"
 
-                self.setCursor(Qt.OpenHandCursor)
-                hovering = True
+                    self.setCursor(Qt.OpenHandCursor)
+                    hovering = True
 
-        if not hovering:
-            self.setCursor(Qt.ArrowCursor)
-            #self.parent().setCursor(Qt.OpenHandCursor)
+            if not hovering:
+                self.setCursor(Qt.ArrowCursor)
+                #self.parent().setCursor(Qt.OpenHandCursor)
 
         self.update()
 
     def mouseReleaseEvent(self, event):
 
         self.gox_start = self.gox
         self.goy_start = self.goy
         self.go_startx = self.gox
         self.go_starty = self.goy
 
+        if self.mode == "drag_label":
+
+            if self.selected is not None:
+                self.selected.x += self.selected.offx
+                self.selected.y += self.selected.offy
+
+                self.selected.offx = 0
+                self.selected.offy = 0
+
+
         if self.mode == "drag":
             x, y = event.pos().x(), event.pos().y()
 
             x = int(x/self.zoom_factor)
             y = int(y/self.zoom_factor)
 
             self.mousex = x
```

### Comparing `sfctools-1.0.5.1/sfctools/gui/attune/src/income_viewer.ui` & `sfctools-1.0.5.2/sfctools/gui/attune/src/income_viewer.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/attune/src/mainloop_editor.py` & `sfctools-1.0.5.2/sfctools/gui/attune/src/mainloop_editor.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/attune/src/mamba_interpreter2.py` & `sfctools-1.0.5.2/sfctools/gui/attune/src/mamba_interpreter2.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/attune/src/matrix_viewer.ui` & `sfctools-1.0.5.2/sfctools/gui/attune/src/matrix_viewer.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/attune/src/output_display.py` & `sfctools-1.0.5.2/sfctools/gui/attune/src/output_display.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/attune/src/output_display.ui` & `sfctools-1.0.5.2/sfctools/gui/attune/src/output_display.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/attune/src/pandasmodel.py` & `sfctools-1.0.5.2/sfctools/gui/attune/src/pandasmodel.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/attune/src/qtattune.py` & `sfctools-1.0.5.2/sfctools/gui/attune/src/qtattune.py`

 * *Files 1% similar despite different names*

```diff
@@ -200,8014 +200,8054 @@
 00000c70: 7569 2729 2c20 7365 6c66 290d 0a20 2020  ui'), self)..   
 00000c80: 2020 2020 2073 656c 662e 7365 7457 696e       self.setWin
 00000c90: 646f 7754 6974 6c65 2822 4361 7368 2046  dowTitle("Cash F
 00000ca0: 6c6f 7720 5374 6174 656d 656e 7420 6f66  low Statement of
 00000cb0: 2025 7322 2025 206e 616d 6529 0d0a 0d0a   %s" % name)....
 00000cc0: 2020 2020 2020 2020 7365 6c66 2e5f 5f63          self.__c
 00000cd0: 6c61 7373 5f5f 2e69 6e73 7461 6e63 6573  lass__.instances
-00000ce0: 5b6e 616d 655d 203d 2073 656c 660d 0a20  [name] = self.. 
-00000cf0: 2020 2020 2020 200d 0a0d 0a20 2020 2064         ....    d
-00000d00: 6566 2073 6574 5f6d 6f64 656c 2873 656c  ef set_model(sel
-00000d10: 662c 6d6f 6465 6c29 3a0d 0a20 2020 2020  f,model):..     
-00000d20: 2020 2070 7269 6e74 2822 5345 5420 4d4f     print("SET MO
-00000d30: 4445 4c22 2c20 6d6f 6465 6c29 0d0a 2020  DEL", model)..  
-00000d40: 2020 2020 2020 7365 6c66 2e70 616e 6461        self.panda
-00000d50: 735f 6d6f 6465 6c20 3d20 6d6f 6465 6c0d  s_model = model.
-00000d60: 0a20 2020 2020 2020 2073 656c 662e 7461  .        self.ta
-00000d70: 626c 6556 6965 772e 7365 744d 6f64 656c  bleView.setModel
-00000d80: 286d 6f64 656c 290d 0a0d 0a20 2020 2064  (model)....    d
-00000d90: 6566 2067 6574 5f64 6174 6128 7365 6c66  ef get_data(self
-00000da0: 293a 0d0a 2020 2020 2020 2020 7265 7475  ):..        retu
-00000db0: 726e 2073 656c 662e 7061 6e64 6173 5f6d  rn self.pandas_m
-00000dc0: 6f64 656c 2e67 6574 5f72 6177 6461 7461  odel.get_rawdata
-00000dd0: 2829 0d0a 0d0a 0d0a 636c 6173 7320 496e  ()......class In
-00000de0: 636f 6d65 5669 6577 6572 2851 7457 6964  comeViewer(QtWid
-00000df0: 6765 7473 2e51 4469 616c 6f67 293a 0d0a  gets.QDialog):..
-00000e00: 2020 2020 696e 7374 616e 6365 7320 3d20      instances = 
-00000e10: 7b7d 0d0a 0d0a 2020 2020 6465 6620 636c  {}....    def cl
-00000e20: 6f73 6545 7665 6e74 2873 656c 662c 2065  oseEvent(self, e
-00000e30: 7665 6e74 293a 0d0a 2020 2020 2020 2020  vent):..        
-00000e40: 6465 6c20 7365 6c66 2e5f 5f63 6c61 7373  del self.__class
-00000e50: 5f5f 2e69 6e73 7461 6e63 6573 5b73 656c  __.instances[sel
-00000e60: 662e 6e61 6d65 5d0d 0a20 2020 2020 2020  f.name]..       
-00000e70: 2065 7665 6e74 2e61 6363 6570 7428 2920   event.accept() 
-00000e80: 2320 6c65 7420 7468 6520 7769 6e64 6f77  # let the window
-00000e90: 2063 6c6f 7365 0d0a 0d0a 2020 2020 6465   close....    de
-00000ea0: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
-00000eb0: 7061 7265 6e74 3d4e 6f6e 652c 6e61 6d65  parent=None,name
-00000ec0: 3d22 556e 6b6e 6f77 6e22 293a 0d0a 0d0a  ="Unknown"):....
-00000ed0: 2020 2020 2020 2020 7375 7065 7228 496e          super(In
-00000ee0: 636f 6d65 5669 6577 6572 2c20 7365 6c66  comeViewer, self
-00000ef0: 292e 5f5f 696e 6974 5f5f 2870 6172 656e  ).__init__(paren
-00000f00: 7429 2020 2320 4361 6c6c 2074 6865 2069  t)  # Call the i
-00000f10: 6e68 6572 6974 6564 2063 6c61 7373 6573  nherited classes
-00000f20: 205f 5f69 6e69 745f 5f20 6d65 7468 6f64   __init__ method
-00000f30: 0d0a 2020 2020 2020 2020 7061 7468 203d  ..        path =
-00000f40: 206f 732e 7061 7468 2e64 6972 6e61 6d65   os.path.dirname
-00000f50: 286f 732e 7061 7468 2e61 6273 7061 7468  (os.path.abspath
-00000f60: 285f 5f66 696c 655f 5f29 290d 0a20 2020  (__file__))..   
-00000f70: 2020 2020 2075 6963 2e6c 6f61 6455 6928       uic.loadUi(
-00000f80: 6f73 2e70 6174 682e 6a6f 696e 2870 6174  os.path.join(pat
-00000f90: 682c 2769 6e63 6f6d 655f 7669 6577 6572  h,'income_viewer
-00000fa0: 2e75 6927 292c 2073 656c 6629 0d0a 2020  .ui'), self)..  
-00000fb0: 2020 2020 2020 7365 6c66 2e73 6574 5769        self.setWi
-00000fc0: 6e64 6f77 5469 746c 6528 2249 6e63 6f6d  ndowTitle("Incom
-00000fd0: 6520 5368 6565 7420 6f66 2025 7322 2025  e Sheet of %s" %
-00000fe0: 206e 616d 6529 0d0a 0d0a 2020 2020 2020   name)....      
-00000ff0: 2020 7365 6c66 2e6e 616d 6520 3d20 6e61    self.name = na
-00001000: 6d65 0d0a 2020 2020 2020 2020 7365 6c66  me..        self
-00001010: 2e5f 5f63 6c61 7373 5f5f 2e69 6e73 7461  .__class__.insta
-00001020: 6e63 6573 5b6e 616d 655d 203d 2073 656c  nces[name] = sel
-00001030: 660d 0a0d 0a20 2020 2064 6566 2073 6574  f....    def set
-00001040: 5f6d 6f64 656c 2873 656c 662c 6d6f 6465  _model(self,mode
-00001050: 6c29 3a0d 0a20 2020 2020 2020 2070 7269  l):..        pri
-00001060: 6e74 2822 5345 5420 4d4f 4445 4c22 2c20  nt("SET MODEL", 
-00001070: 6d6f 6465 6c29 0d0a 2020 2020 2020 2020  model)..        
-00001080: 7365 6c66 2e70 616e 6461 735f 6d6f 6465  self.pandas_mode
-00001090: 6c20 3d20 6d6f 6465 6c0d 0a20 2020 2020  l = model..     
-000010a0: 2020 2073 656c 662e 7461 626c 6556 6965     self.tableVie
-000010b0: 772e 7365 744d 6f64 656c 286d 6f64 656c  w.setModel(model
-000010c0: 290d 0a0d 0a20 2020 2064 6566 2067 6574  )....    def get
-000010d0: 5f64 6174 6128 7365 6c66 293a 0d0a 2020  _data(self):..  
-000010e0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-000010f0: 662e 7061 6e64 6173 5f6d 6f64 656c 2e67  f.pandas_model.g
-00001100: 6574 5f72 6177 6461 7461 2829 0d0a 0d0a  et_rawdata()....
-00001110: 0d0a 0d0a 2320 5374 6570 2031 3a20 4372  ....# Step 1: Cr
-00001120: 6561 7465 2061 2077 6f72 6b65 720d 0a63  eate a worker..c
-00001130: 6c61 7373 2053 7461 7475 734c 4544 2851  lass StatusLED(Q
-00001140: 4f62 6a65 6374 293a 0d0a 2020 2020 6669  Object):..    fi
-00001150: 6e69 7368 6564 203d 2070 7971 7453 6967  nished = pyqtSig
-00001160: 6e61 6c28 290d 0a20 2020 2070 726f 6772  nal()..    progr
-00001170: 6573 7320 3d20 7079 7174 5369 676e 616c  ess = pyqtSignal
-00001180: 2869 6e74 290d 0a0d 0a20 2020 2064 6566  (int)....    def
-00001190: 205f 5f69 6e69 745f 5f28 7365 6c66 2c72   __init__(self,r
-000011a0: 6229 3a0d 0a20 2020 2020 2020 2073 7570  b):..        sup
-000011b0: 6572 2829 2e5f 5f69 6e69 745f 5f28 290d  er().__init__().
-000011c0: 0a20 2020 2020 2020 2073 656c 662e 7262  .        self.rb
-000011d0: 203d 2072 620d 0a0d 0a20 2020 2020 2020   = rb....       
-000011e0: 2023 2073 656c 662e 7262 203d 2072 620d   # self.rb = rb.
-000011f0: 0a20 2020 2020 2020 2073 656c 662e 6920  .        self.i 
-00001200: 3d20 300d 0a20 2020 2020 2020 2073 656c  = 0..        sel
-00001210: 662e 6a20 3d20 300d 0a20 2020 2020 2020  f.j = 0..       
-00001220: 2073 656c 662e 6f6e 203d 2046 616c 7365   self.on = False
-00001230: 0d0a 2020 2020 2020 2020 2320 7072 696e  ..        # prin
-00001240: 7428 2257 4f52 4b45 5220 4352 4541 5445  t("WORKER CREATE
-00001250: 4422 290d 0a0d 0a20 2020 2064 6566 2072  D")....    def r
-00001260: 756e 2873 656c 6629 3a0d 0a20 2020 2020  un(self):..     
-00001270: 2020 2022 2222 4c6f 6e67 2d72 756e 6e69     """Long-runni
-00001280: 6e67 2074 6173 6b2e 2222 220d 0a20 2020  ng task."""..   
-00001290: 2020 2020 2077 6869 6c65 2854 7275 6529       while(True)
-000012a0: 3a0d 0a20 2020 2020 2020 2020 2020 2074  :..            t
-000012b0: 696d 652e 736c 6565 7028 2e31 290d 0a0d  ime.sleep(.1)...
-000012c0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-000012d0: 7365 6c66 2e6f 6e3a 0d0a 2020 2020 2020  self.on:..      
-000012e0: 2020 2020 2020 2020 2020 7365 6c66 2e69            self.i
-000012f0: 202b 3d20 310d 0a0d 0a20 2020 2020 2020   += 1....       
-00001300: 2020 2020 2020 2020 2073 7461 7465 203d           state =
-00001310: 2073 656c 662e 7262 2e69 7343 6865 636b   self.rb.isCheck
-00001320: 6564 2829 0d0a 2020 2020 2020 2020 2020  ed()..          
-00001330: 2020 2020 2020 2320 7365 6c66 2e72 622e        # self.rb.
-00001340: 7365 7443 6865 636b 6564 286e 6f74 2073  setChecked(not s
-00001350: 7461 7465 290d 0a0d 0a20 2020 2020 2020  tate)....       
-00001360: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-00001370: 2e69 203d 3d20 353a 0d0a 2020 2020 2020  .i == 5:..      
-00001380: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00001390: 6c66 2e69 203d 2030 0d0a 2020 2020 2020  lf.i = 0..      
-000013a0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-000013b0: 6c66 2e73 7769 7463 685f 7374 6174 6528  lf.switch_state(
-000013c0: 290d 0a20 2020 2020 2020 2020 2020 2065  )..            e
-000013d0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-000013e0: 2020 2020 2020 7061 7373 0d0a 2020 2020        pass..    
-000013f0: 2020 2020 2020 2020 2020 2020 2320 7365              # se
-00001400: 6c66 2e72 622e 7365 7443 6865 636b 6564  lf.rb.setChecked
-00001410: 2846 616c 7365 290d 0a0d 0a20 2020 2020  (False)....     
-00001420: 2020 2020 2020 2023 7072 696e 7428 2273         #print("s
-00001430: 7461 7465 222c 7365 6c66 2e69 290d 0a0d  tate",self.i)...
-00001440: 0a20 2020 2064 6566 2073 7769 7463 685f  .    def switch_
-00001450: 7374 6174 6528 7365 6c66 293a 0d0a 2020  state(self):..  
-00001460: 2020 2020 2020 7365 6c66 2e6f 6e20 3d20        self.on = 
-00001470: 6e6f 7420 7365 6c66 2e6f 6e0d 0a20 2020  not self.on..   
-00001480: 2020 2020 2023 2070 7269 6e74 2822 7377       # print("sw
-00001490: 6974 6368 222c 2073 656c 662e 6f6e 290d  itch", self.on).
-000014a0: 0a0d 0a20 2020 2020 2020 2023 6966 206e  ...        #if n
-000014b0: 6f74 2073 656c 662e 6f6e 3a0d 0a20 2020  ot self.on:..   
-000014c0: 2020 2020 2023 2020 2020 7365 6c66 2e72       #    self.r
-000014d0: 622e 7365 7443 6865 636b 6564 2846 616c  b.setChecked(Fal
-000014e0: 7365 290d 0a0d 0a63 6c61 7373 2054 7261  se)....class Tra
-000014f0: 6e73 6163 7469 6f6e 4465 7369 676e 6572  nsactionDesigner
-00001500: 2851 7457 6964 6765 7473 2e51 4d61 696e  (QtWidgets.QMain
-00001510: 5769 6e64 6f77 293a 0d0a 2020 2020 6465  Window):..    de
-00001520: 6620 5f5f 696e 6974 5f5f 2873 656c 6629  f __init__(self)
-00001530: 3a0d 0a20 2020 2020 2020 2073 7570 6572  :..        super
-00001540: 2854 7261 6e73 6163 7469 6f6e 4465 7369  (TransactionDesi
-00001550: 676e 6572 2c20 7365 6c66 292e 5f5f 696e  gner, self).__in
-00001560: 6974 5f5f 2829 2023 2043 616c 6c20 7468  it__() # Call th
-00001570: 6520 696e 6865 7269 7465 6420 636c 6173  e inherited clas
-00001580: 7365 7320 5f5f 696e 6974 5f5f 206d 6574  ses __init__ met
-00001590: 686f 640d 0a20 2020 2020 2020 2070 7269  hod..        pri
-000015a0: 6e74 2822 6c6f 6164 2e2e 2e22 290d 0a20  nt("load...").. 
-000015b0: 2020 2020 2020 2070 6174 6820 3d20 6f73         path = os
-000015c0: 2e70 6174 682e 6469 726e 616d 6528 6f73  .path.dirname(os
-000015d0: 2e70 6174 682e 6162 7370 6174 6828 5f5f  .path.abspath(__
-000015e0: 6669 6c65 5f5f 2929 0d0a 2020 2020 2020  file__))..      
-000015f0: 2020 6c6f 6164 7061 7468 203d 206f 732e    loadpath = os.
-00001600: 7061 7468 2e6a 6f69 6e28 7061 7468 2c22  path.join(path,"
-00001610: 7472 616e 7361 6374 696f 6e5f 6465 7369  transaction_desi
-00001620: 676e 6572 5f6d 6169 6e77 696e 646f 772e  gner_mainwindow.
-00001630: 7569 2229 0d0a 2020 2020 2020 2020 636f  ui")..        co
-00001640: 6e74 656e 7420 3d20 5b5d 0d0a 2020 2020  ntent = []..    
-00001650: 2020 2020 7375 6363 6573 7320 3d20 4661      success = Fa
-00001660: 6c73 650d 0a0d 0a20 2020 2020 2020 2073  lse....        s
-00001670: 656c 662e 7465 7374 5f6d 6f64 6520 3d20  elf.test_mode = 
-00001680: 4661 6c73 6520 2320 7573 6564 2066 6f72  False # used for
-00001690: 2074 6573 7469 6e67 0d0a 0d0a 2020 2020   testing....    
-000016a0: 2020 2020 2320 7265 6d6f 7665 2066 6f6e      # remove fon
-000016b0: 742d 7369 7a65 2074 6f20 6669 7820 6275  t-size to fix bu
-000016c0: 6720 696e 2071 7420 6465 7369 676e 6572  g in qt designer
-000016d0: 0d0a 2020 2020 2020 2020 7769 7468 206f  ..        with o
-000016e0: 7065 6e28 6c6f 6164 7061 7468 2c22 7222  pen(loadpath,"r"
-000016f0: 2920 6173 2066 696c 653a 0d0a 2020 2020  ) as file:..    
-00001700: 2020 2020 2020 2020 666f 7220 6c69 6e65          for line
-00001710: 2069 6e20 6669 6c65 2e72 6561 646c 696e   in file.readlin
-00001720: 6573 2829 3a0d 0a20 2020 2020 2020 2020  es():..         
-00001730: 2020 2020 2020 2069 6620 223c 706f 696e         if "<poin
-00001740: 7473 697a 653e 2d31 3c2f 706f 696e 7473  tsize>-1</points
-00001750: 697a 653e 2220 6e6f 7420 696e 206c 696e  ize>" not in lin
-00001760: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00001770: 2020 2020 2020 2020 636f 6e74 656e 742e          content.
-00001780: 6170 7065 6e64 286c 696e 6529 0d0a 0d0a  append(line)....
-00001790: 2020 2020 2020 2020 2020 2020 7375 6363              succ
-000017a0: 6573 7320 3d20 5472 7565 0d0a 0d0a 2020  ess = True....  
-000017b0: 2020 2020 2020 6966 2073 7563 6365 7373        if success
-000017c0: 3a0d 0a20 2020 2020 2020 2020 2020 2077  :..            w
-000017d0: 6974 6820 6f70 656e 286c 6f61 6470 6174  ith open(loadpat
-000017e0: 682c 2277 2229 2061 7320 6669 6c65 3a0d  h,"w") as file:.
-000017f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00001800: 2066 696c 652e 7772 6974 6528 2222 2e6a   file.write("".j
-00001810: 6f69 6e28 636f 6e74 656e 7429 290d 0a0d  oin(content))...
-00001820: 0a0d 0a0d 0a20 2020 2020 2020 2023 2075  .....        # u
-00001830: 6963 2e6c 6f61 6455 6928 2774 7261 6e73  ic.loadUi('trans
-00001840: 6163 7469 6f6e 5f64 6573 6967 6e65 722e  action_designer.
-00001850: 7569 272c 2073 656c 6629 2023 204c 6f61  ui', self) # Loa
-00001860: 6420 7468 6520 2e75 6920 6669 6c65 0d0a  d the .ui file..
-00001870: 2020 2020 2020 2020 7569 632e 6c6f 6164          uic.load
-00001880: 5569 286c 6f61 6470 6174 682c 2073 656c  Ui(loadpath, sel
-00001890: 6629 2023 204c 6f61 6420 7468 6520 2e75  f) # Load the .u
-000018a0: 6920 6669 6c65 0d0a 2020 2020 2020 2020  i file..        
-000018b0: 7072 696e 7428 2264 6f6e 652e 2229 0d0a  print("done.")..
-000018c0: 0d0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
-000018d0: 6574 5769 6e64 6f77 466c 6167 7328 7365  etWindowFlags(se
-000018e0: 6c66 2e77 696e 646f 7746 6c61 6773 2829  lf.windowFlags()
-000018f0: 207c 2051 742e 5769 6e64 6f77 4d69 6e69   | Qt.WindowMini
-00001900: 6d69 7a65 4275 7474 6f6e 4869 6e74 290d  mizeButtonHint).
-00001910: 0a20 2020 2020 2020 2023 2073 656c 662e  .        # self.
-00001920: 7365 7446 6978 6564 5369 7a65 2873 656c  setFixedSize(sel
-00001930: 662e 7369 7a65 2829 293b 0d0a 2020 2020  f.size());..    
-00001940: 2020 2020 7365 6c66 2e66 6c69 7070 6564      self.flipped
-00001950: 203d 2046 616c 7365 0d0a 0d0a 2020 2020   = False....    
-00001960: 2020 2020 6d79 5f77 6964 6765 7420 3d20      my_widget = 
-00001970: 4d79 4472 6177 5769 6467 6574 2873 656c  MyDrawWidget(sel
-00001980: 662e 6672 616d 652c 7365 6c66 290d 0a20  f.frame,self).. 
-00001990: 2020 2020 2020 2023 206d 795f 7769 6467         # my_widg
-000019a0: 6574 2e6d 6f76 6528 2d35 2c2d 3535 2920  et.move(-5,-55) 
-000019b0: 2328 3830 2c31 3630 290d 0a0d 0a20 2020  #(80,160)....   
-000019c0: 2020 2020 2023 2073 656c 662e 6c61 6265       # self.labe
-000019d0: 6c5f 3137 2e73 6574 5669 7369 626c 6528  l_17.setVisible(
-000019e0: 4661 6c73 6529 2023 206c 6f67 6f0d 0a0d  False) # logo...
-000019f0: 0a20 2020 2020 2020 2073 656c 662e 636f  .        self.co
-00001a00: 6465 5f64 6174 6120 3d20 7b7d 0d0a 0d0a  de_data = {}....
-00001a10: 2020 2020 2020 2020 2320 6c6f 6767 6572          # logger
-00001a20: 2066 6f72 2063 6861 6e67 6573 2069 6e20   for changes in 
-00001a30: 7472 616e 7361 6374 696f 6e73 0d0a 2020  transactions..  
-00001a40: 2020 2020 2020 7365 6c66 2e6d 6164 655f        self.made_
-00001a50: 6368 616e 6765 7320 3d20 4661 6c73 650d  changes = False.
-00001a60: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
-00001a70: 6172 7261 6e67 6542 7574 746f 6e5f 372e  arrangeButton_7.
-00001a80: 7072 6573 7365 642e 636f 6e6e 6563 7428  pressed.connect(
-00001a90: 6c61 6d62 6461 3a20 7365 6c66 2e6e 6f74  lambda: self.not
-00001aa0: 6966 795f 746f 6f6c 7469 7028 7365 6c66  ify_tooltip(self
-00001ab0: 2e61 7272 616e 6765 4275 7474 6f6e 5f37  .arrangeButton_7
-00001ac0: 2929 0d0a 2020 2020 2020 2020 7365 6c66  ))..        self
-00001ad0: 2e61 7272 616e 6765 4275 7474 6f6e 5f38  .arrangeButton_8
-00001ae0: 2e70 7265 7373 6564 2e63 6f6e 6e65 6374  .pressed.connect
-00001af0: 286c 616d 6264 613a 2073 656c 662e 6e6f  (lambda: self.no
-00001b00: 7469 6679 5f74 6f6f 6c74 6970 2873 656c  tify_tooltip(sel
-00001b10: 662e 6172 7261 6e67 6542 7574 746f 6e5f  f.arrangeButton_
-00001b20: 3829 290d 0a20 2020 2020 2020 2073 656c  8))..        sel
-00001b30: 662e 6172 7261 6e67 6542 7574 746f 6e5f  f.arrangeButton_
-00001b40: 392e 7072 6573 7365 642e 636f 6e6e 6563  9.pressed.connec
-00001b50: 7428 6c61 6d62 6461 3a20 7365 6c66 2e6e  t(lambda: self.n
-00001b60: 6f74 6966 795f 746f 6f6c 7469 7028 7365  otify_tooltip(se
-00001b70: 6c66 2e61 7272 616e 6765 4275 7474 6f6e  lf.arrangeButton
-00001b80: 5f39 2929 0d0a 2020 2020 2020 2020 7365  _9))..        se
-00001b90: 6c66 2e61 7272 616e 6765 4275 7474 6f6e  lf.arrangeButton
-00001ba0: 5f33 2e70 7265 7373 6564 2e63 6f6e 6e65  _3.pressed.conne
-00001bb0: 6374 286c 616d 6264 613a 2073 656c 662e  ct(lambda: self.
-00001bc0: 6e6f 7469 6679 5f74 6f6f 6c74 6970 2873  notify_tooltip(s
-00001bd0: 656c 662e 6172 7261 6e67 6542 7574 746f  elf.arrangeButto
-00001be0: 6e5f 3329 290d 0a20 2020 2020 2020 2073  n_3))..        s
-00001bf0: 656c 662e 6172 7261 6e67 6542 7574 746f  elf.arrangeButto
-00001c00: 6e5f 342e 7072 6573 7365 642e 636f 6e6e  n_4.pressed.conn
-00001c10: 6563 7428 6c61 6d62 6461 3a20 7365 6c66  ect(lambda: self
-00001c20: 2e6e 6f74 6966 795f 746f 6f6c 7469 7028  .notify_tooltip(
-00001c30: 7365 6c66 2e61 7272 616e 6765 4275 7474  self.arrangeButt
-00001c40: 6f6e 5f34 2929 0d0a 2020 2020 2020 2020  on_4))..        
-00001c50: 7365 6c66 2e61 7272 616e 6765 4275 7474  self.arrangeButt
-00001c60: 6f6e 5f35 2e70 7265 7373 6564 2e63 6f6e  on_5.pressed.con
-00001c70: 6e65 6374 286c 616d 6264 613a 2073 656c  nect(lambda: sel
-00001c80: 662e 6e6f 7469 6679 5f74 6f6f 6c74 6970  f.notify_tooltip
-00001c90: 2873 656c 662e 6172 7261 6e67 6542 7574  (self.arrangeBut
-00001ca0: 746f 6e5f 3529 290d 0a20 2020 2020 2020  ton_5))..       
-00001cb0: 2073 656c 662e 6172 7261 6e67 6542 7574   self.arrangeBut
-00001cc0: 746f 6e5f 362e 7072 6573 7365 642e 636f  ton_6.pressed.co
-00001cd0: 6e6e 6563 7428 6c61 6d62 6461 3a20 7365  nnect(lambda: se
-00001ce0: 6c66 2e6e 6f74 6966 795f 746f 6f6c 7469  lf.notify_toolti
-00001cf0: 7028 7365 6c66 2e61 7272 616e 6765 4275  p(self.arrangeBu
-00001d00: 7474 6f6e 5f36 2929 0d0a 2020 2020 2020  tton_6))..      
-00001d10: 2020 2320 7365 6c66 2e61 7272 616e 6765    # self.arrange
-00001d20: 4275 7474 6f6e 5f32 2e70 7265 7373 6564  Button_2.pressed
-00001d30: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-00001d40: 2073 656c 662e 6e6f 7469 6679 5f74 6f6f   self.notify_too
-00001d50: 6c74 6970 2873 656c 662e 6172 7261 6e67  ltip(self.arrang
-00001d60: 6542 7574 746f 6e5f 3229 290d 0a0d 0a20  eButton_2)).... 
-00001d70: 2020 2020 2020 2073 656c 662e 6163 7469         self.acti
-00001d80: 6f6e 4765 6e65 7261 7465 5f42 616c 616e  onGenerate_Balan
-00001d90: 6365 5368 6565 745f 4d61 7472 6978 2e74  ceSheet_Matrix.t
-00001da0: 7269 6767 6572 6564 2e63 6f6e 6e65 6374  riggered.connect
-00001db0: 286c 616d 6264 613a 2073 656c 662e 6765  (lambda: self.ge
-00001dc0: 6e5f 6261 6c61 6e63 655f 6d61 7472 6978  n_balance_matrix
-00001dd0: 2864 6574 6169 6c65 643d 4661 6c73 6529  (detailed=False)
-00001de0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00001df0: 6163 7469 6f6e 4765 6e65 7261 7465 5f42  actionGenerate_B
-00001e00: 616c 616e 6365 5f4d 6174 7269 785f 4465  alance_Matrix_De
-00001e10: 7461 696c 6564 2e74 7269 6767 6572 6564  tailed.triggered
-00001e20: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
-00001e30: 2073 656c 662e 6765 6e5f 6261 6c61 6e63   self.gen_balanc
-00001e40: 655f 6d61 7472 6978 2864 6574 6169 6c65  e_matrix(detaile
-00001e50: 643d 5472 7565 2929 0d0a 0d0a 2020 2020  d=True))....    
-00001e60: 2020 2020 7365 6c66 2e61 6765 6e74 3145      self.agent1E
-00001e70: 6469 742e 7465 7874 4564 6974 6564 2e63  dit.textEdited.c
-00001e80: 6f6e 6e65 6374 2873 656c 662e 6368 616e  onnect(self.chan
-00001e90: 6765 5f61 6c65 7274 290d 0a20 2020 2020  ge_alert)..     
-00001ea0: 2020 2073 656c 662e 6167 656e 7432 4564     self.agent2Ed
-00001eb0: 6974 2e74 6578 7445 6469 7465 642e 636f  it.textEdited.co
-00001ec0: 6e6e 6563 7428 7365 6c66 2e63 6861 6e67  nnect(self.chang
-00001ed0: 655f 616c 6572 7429 0d0a 2020 2020 2020  e_alert)..      
-00001ee0: 2020 7365 6c66 2e41 7373 6574 4c69 7374    self.AssetList
-00001ef0: 4c65 6674 2e74 6578 7443 6861 6e67 6564  Left.textChanged
-00001f00: 2e63 6f6e 6e65 6374 2873 656c 662e 6368  .connect(self.ch
-00001f10: 616e 6765 5f61 6c65 7274 290d 0a20 2020  ange_alert)..   
-00001f20: 2020 2020 2073 656c 662e 4c69 6162 696c       self.Liabil
-00001f30: 6974 794c 6973 744c 6566 742e 7465 7874  ityListLeft.text
-00001f40: 4368 616e 6765 642e 636f 6e6e 6563 7428  Changed.connect(
-00001f50: 7365 6c66 2e63 6861 6e67 655f 616c 6572  self.change_aler
-00001f60: 7429 0d0a 2020 2020 2020 2020 7365 6c66  t)..        self
-00001f70: 2e45 7175 6974 794c 6973 744c 6566 742e  .EquityListLeft.
-00001f80: 7465 7874 4368 616e 6765 642e 636f 6e6e  textChanged.conn
-00001f90: 6563 7428 7365 6c66 2e63 6861 6e67 655f  ect(self.change_
-00001fa0: 616c 6572 7429 0d0a 2020 2020 2020 2020  alert)..        
-00001fb0: 7365 6c66 2e41 7373 6574 4c69 7374 5269  self.AssetListRi
-00001fc0: 6768 742e 7465 7874 4368 616e 6765 642e  ght.textChanged.
-00001fd0: 636f 6e6e 6563 7428 7365 6c66 2e63 6861  connect(self.cha
-00001fe0: 6e67 655f 616c 6572 7429 0d0a 2020 2020  nge_alert)..    
-00001ff0: 2020 2020 7365 6c66 2e4c 6961 6269 6c69      self.Liabili
-00002000: 7479 4c69 7374 5269 6768 742e 7465 7874  tyListRight.text
-00002010: 4368 616e 6765 642e 636f 6e6e 6563 7428  Changed.connect(
-00002020: 7365 6c66 2e63 6861 6e67 655f 616c 6572  self.change_aler
-00002030: 7429 0d0a 2020 2020 2020 2020 7365 6c66  t)..        self
-00002040: 2e45 7175 6974 794c 6973 7452 6967 6874  .EquityListRight
-00002050: 2e74 6578 7443 6861 6e67 6564 2e63 6f6e  .textChanged.con
-00002060: 6e65 6374 2873 656c 662e 6368 616e 6765  nect(self.change
-00002070: 5f61 6c65 7274 290d 0a20 2020 2020 2020  _alert)..       
-00002080: 2073 656c 662e 6564 6974 5375 626a 6563   self.editSubjec
-00002090: 742e 7465 7874 4564 6974 6564 2e63 6f6e  t.textEdited.con
-000020a0: 6e65 6374 2873 656c 662e 6368 616e 6765  nect(self.change
-000020b0: 5f61 6c65 7274 290d 0a20 2020 2020 2020  _alert)..       
-000020c0: 2073 656c 662e 6564 6974 5368 6f72 746e   self.editShortn
-000020d0: 616d 652e 7465 7874 4564 6974 6564 2e63  ame.textEdited.c
-000020e0: 6f6e 6e65 6374 2873 656c 662e 6368 616e  onnect(self.chan
-000020f0: 6765 5f61 6c65 7274 290d 0a20 2020 2020  ge_alert)..     
-00002100: 2020 2073 656c 662e 6564 6974 5175 616e     self.editQuan
-00002110: 7469 7479 2e74 6578 7445 6469 7465 642e  tity.textEdited.
-00002120: 636f 6e6e 6563 7428 7365 6c66 2e63 6861  connect(self.cha
-00002130: 6e67 655f 616c 6572 7429 0d0a 2020 2020  nge_alert)..    
-00002140: 2020 2020 7365 6c66 2e65 6469 7444 6573      self.editDes
-00002150: 6372 6970 7469 6f6e 2e74 6578 7445 6469  cription.textEdi
-00002160: 7465 642e 636f 6e6e 6563 7428 7365 6c66  ted.connect(self
-00002170: 2e63 6861 6e67 655f 616c 6572 7429 0d0a  .change_alert)..
-00002180: 0d0a 2020 2020 2020 2020 7365 6c66 2e63  ..        self.c
-00002190: 6f6d 626f 496e 636f 6d65 4c65 6674 2e63  omboIncomeLeft.c
-000021a0: 7572 7265 6e74 496e 6465 7843 6861 6e67  urrentIndexChang
-000021b0: 6564 2e63 6f6e 6e65 6374 2873 656c 662e  ed.connect(self.
-000021c0: 6368 616e 6765 5f61 6c65 7274 290d 0a20  change_alert).. 
-000021d0: 2020 2020 2020 2073 656c 662e 636f 6d62         self.comb
-000021e0: 6f43 6173 684c 6566 742e 6375 7272 656e  oCashLeft.curren
-000021f0: 7449 6e64 6578 4368 616e 6765 642e 636f  tIndexChanged.co
-00002200: 6e6e 6563 7428 7365 6c66 2e63 6861 6e67  nnect(self.chang
-00002210: 655f 616c 6572 7429 0d0a 2020 2020 2020  e_alert)..      
-00002220: 2020 7365 6c66 2e63 6f6d 626f 496e 636f    self.comboInco
-00002230: 6d65 5269 6768 742e 6375 7272 656e 7449  meRight.currentI
-00002240: 6e64 6578 4368 616e 6765 642e 636f 6e6e  ndexChanged.conn
-00002250: 6563 7428 7365 6c66 2e63 6861 6e67 655f  ect(self.change_
-00002260: 616c 6572 7429 0d0a 2020 2020 2020 2020  alert)..        
-00002270: 7365 6c66 2e63 6f6d 626f 4361 7368 5269  self.comboCashRi
-00002280: 6768 742e 6375 7272 656e 7449 6e64 6578  ght.currentIndex
-00002290: 4368 616e 6765 642e 636f 6e6e 6563 7428  Changed.connect(
-000022a0: 7365 6c66 2e63 6861 6e67 655f 616c 6572  self.change_aler
-000022b0: 7429 0d0a 2020 2020 2020 2020 7365 6c66  t)..        self
-000022c0: 2e72 6567 6973 7465 7246 6c6f 7742 6f78  .registerFlowBox
-000022d0: 2e63 7572 7265 6e74 496e 6465 7843 6861  .currentIndexCha
-000022e0: 6e67 6564 2e63 6f6e 6e65 6374 2873 656c  nged.connect(sel
-000022f0: 662e 6368 616e 6765 5f61 6c65 7274 290d  f.change_alert).
-00002300: 0a20 2020 2020 2020 2073 656c 662e 7265  .        self.re
-00002310: 6769 7374 6572 466c 6f77 426f 782e 6375  gisterFlowBox.cu
-00002320: 7272 656e 7449 6e64 6578 4368 616e 6765  rrentIndexChange
-00002330: 642e 636f 6e6e 6563 7428 6c61 6d62 6461  d.connect(lambda
-00002340: 3a20 7072 696e 7428 2252 4547 4953 5445  : print("REGISTE
-00002350: 5220 464c 4f57 222c 2073 656c 662e 7265  R FLOW", self.re
-00002360: 6769 7374 6572 466c 6f77 426f 782e 6375  gisterFlowBox.cu
-00002370: 7272 656e 7454 6578 7428 2929 290d 0a20  rrentText())).. 
-00002380: 2020 2020 2020 2073 656c 662e 636f 6d62         self.comb
-00002390: 6f49 6e63 6f6d 654c 6566 742e 6375 7272  oIncomeLeft.curr
-000023a0: 656e 7449 6e64 6578 4368 616e 6765 642e  entIndexChanged.
-000023b0: 636f 6e6e 6563 7428 6c61 6d62 6461 3a20  connect(lambda: 
-000023c0: 7072 696e 7428 2252 4547 4953 5445 5220  print("REGISTER 
-000023d0: 464c 4f57 222c 2073 656c 662e 7265 6769  FLOW", self.regi
-000023e0: 7374 6572 466c 6f77 426f 782e 6375 7272  sterFlowBox.curr
-000023f0: 656e 7454 6578 7428 2929 290d 0a0d 0a20  entText())).... 
-00002400: 2020 2020 2020 2073 656c 662e 6564 6974         self.edit
-00002410: 5479 7065 2e63 7572 7265 6e74 496e 6465  Type.currentInde
-00002420: 7843 6861 6e67 6564 2e63 6f6e 6e65 6374  xChanged.connect
-00002430: 2873 656c 662e 6368 616e 6765 5f61 6c65  (self.change_ale
-00002440: 7274 290d 0a20 2020 2020 2020 2073 656c  rt)..        sel
-00002450: 662e 636f 6d62 6f55 6e69 6469 722e 6375  f.comboUnidir.cu
-00002460: 7272 656e 7449 6e64 6578 4368 616e 6765  rrentIndexChange
-00002470: 642e 636f 6e6e 6563 7428 7365 6c66 2e63  d.connect(self.c
-00002480: 6861 6e67 655f 616c 6572 7429 0d0a 0d0a  hange_alert)....
-00002490: 0d0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
-000024a0: 7069 6e42 6f78 466f 6e74 5369 7a65 2e76  pinBoxFontSize.v
-000024b0: 616c 7565 4368 616e 6765 642e 636f 6e6e  alueChanged.conn
-000024c0: 6563 7428 6c61 6d62 6461 3a20 7365 6c66  ect(lambda: self
-000024d0: 2e64 7261 7763 616e 7661 732e 7570 6461  .drawcanvas.upda
-000024e0: 7465 2829 290d 0a20 2020 2020 2020 2073  te())..        s
-000024f0: 656c 662e 7370 696e 426f 7846 6f6e 7453  elf.spinBoxFontS
-00002500: 697a 655f 322e 7661 6c75 6543 6861 6e67  ize_2.valueChang
-00002510: 6564 2e63 6f6e 6e65 6374 286c 616d 6264  ed.connect(lambd
-00002520: 613a 2073 656c 662e 6472 6177 6361 6e76  a: self.drawcanv
-00002530: 6173 2e75 7064 6174 6528 2929 0d0a 0d0a  as.update())....
-00002540: 2020 2020 2020 2020 7365 6c66 2e46 696c          self.Fil
-00002550: 7465 726c 696e 6545 6469 742e 7465 7874  terlineEdit.text
-00002560: 4368 616e 6765 642e 636f 6e6e 6563 7428  Changed.connect(
-00002570: 7365 6c66 2e75 7064 6174 655f 7461 626c  self.update_tabl
-00002580: 6529 0d0a 0d0a 2020 2020 2020 2020 7365  e)....        se
-00002590: 6c66 2e63 6865 636b 426f 782e 7374 6174  lf.checkBox.stat
-000025a0: 6543 6861 6e67 6564 2e63 6f6e 6e65 6374  eChanged.connect
-000025b0: 286c 616d 6264 613a 2073 656c 662e 6472  (lambda: self.dr
-000025c0: 6177 6361 6e76 6173 2e75 7064 6174 6528  awcanvas.update(
-000025d0: 2929 0d0a 2020 2020 2020 2020 7365 6c66  ))..        self
-000025e0: 2e63 6865 636b 426f 785f 322e 7374 6174  .checkBox_2.stat
-000025f0: 6543 6861 6e67 6564 2e63 6f6e 6e65 6374  eChanged.connect
-00002600: 286c 616d 6264 613a 2073 656c 662e 6472  (lambda: self.dr
-00002610: 6177 6361 6e76 6173 2e75 7064 6174 6528  awcanvas.update(
-00002620: 2929 0d0a 2020 2020 2020 2020 7365 6c66  ))..        self
-00002630: 2e63 6865 636b 426f 785f 332e 7374 6174  .checkBox_3.stat
-00002640: 6543 6861 6e67 6564 2e63 6f6e 6e65 6374  eChanged.connect
-00002650: 286c 616d 6264 613a 2073 656c 662e 6472  (lambda: self.dr
-00002660: 6177 6361 6e76 6173 2e75 7064 6174 6528  awcanvas.update(
-00002670: 2929 0d0a 2020 2020 2020 2020 7365 6c66  ))..        self
-00002680: 2e63 6865 636b 426f 785f 342e 7374 6174  .checkBox_4.stat
-00002690: 6543 6861 6e67 6564 2e63 6f6e 6e65 6374  eChanged.connect
-000026a0: 286c 616d 6264 613a 2073 656c 662e 6472  (lambda: self.dr
-000026b0: 6177 6361 6e76 6173 2e75 7064 6174 6528  awcanvas.update(
-000026c0: 2929 0d0a 2020 2020 2020 2020 7365 6c66  ))..        self
-000026d0: 2e63 6865 636b 426f 785f 352e 7374 6174  .checkBox_5.stat
-000026e0: 6543 6861 6e67 6564 2e63 6f6e 6e65 6374  eChanged.connect
-000026f0: 286c 616d 6264 613a 2073 656c 662e 6472  (lambda: self.dr
-00002700: 6177 6361 6e76 6173 2e75 7064 6174 6528  awcanvas.update(
-00002710: 2929 0d0a 2020 2020 2020 2020 7365 6c66  ))..        self
-00002720: 2e63 6865 636b 426f 785f 362e 7374 6174  .checkBox_6.stat
-00002730: 6543 6861 6e67 6564 2e63 6f6e 6e65 6374  eChanged.connect
-00002740: 286c 616d 6264 613a 2073 656c 662e 6472  (lambda: self.dr
-00002750: 6177 6361 6e76 6173 2e75 7064 6174 6528  awcanvas.update(
-00002760: 2929 0d0a 2020 2020 2020 2020 7365 6c66  ))..        self
-00002770: 2e63 6865 636b 426f 785f 372e 7374 6174  .checkBox_7.stat
-00002780: 6543 6861 6e67 6564 2e63 6f6e 6e65 6374  eChanged.connect
-00002790: 286c 616d 6264 613a 2073 656c 662e 6472  (lambda: self.dr
-000027a0: 6177 6361 6e76 6173 2e75 7064 6174 6528  awcanvas.update(
-000027b0: 2929 0d0a 2020 2020 2020 2020 7365 6c66  ))..        self
-000027c0: 2e63 6865 636b 426f 785f 382e 7374 6174  .checkBox_8.stat
-000027d0: 6543 6861 6e67 6564 2e63 6f6e 6e65 6374  eChanged.connect
-000027e0: 286c 616d 6264 613a 2073 656c 662e 6472  (lambda: self.dr
-000027f0: 6177 6361 6e76 6173 2e75 7064 6174 6528  awcanvas.update(
-00002800: 2929 0d0a 2020 2020 2020 2020 7365 6c66  ))..        self
-00002810: 2e63 6865 636b 426f 785f 392e 7374 6174  .checkBox_9.stat
-00002820: 6543 6861 6e67 6564 2e63 6f6e 6e65 6374  eChanged.connect
-00002830: 286c 616d 6264 613a 2073 656c 662e 6472  (lambda: self.dr
-00002840: 6177 6361 6e76 6173 2e75 7064 6174 6528  awcanvas.update(
-00002850: 2929 0d0a 0d0a 2020 2020 2020 2020 2320  ))....        # 
-00002860: 7374 6174 7573 204c 4544 0d0a 2020 2020  status LED..    
-00002870: 2020 2020 7365 6c66 2e74 6872 6561 6420      self.thread 
-00002880: 3d20 5154 6872 6561 6428 290d 0a0d 0a20  = QThread().... 
-00002890: 2020 2020 2020 2073 656c 662e 776f 726b         self.work
-000028a0: 6572 203d 2053 7461 7475 734c 4544 2873  er = StatusLED(s
-000028b0: 656c 662e 7261 6469 6f42 7574 746f 6e29  elf.radioButton)
-000028c0: 0d0a 2020 2020 2020 2020 7365 6c66 2e77  ..        self.w
-000028d0: 6f72 6b65 722e 6d6f 7665 546f 5468 7265  orker.moveToThre
-000028e0: 6164 2873 656c 662e 7468 7265 6164 290d  ad(self.thread).
-000028f0: 0a20 2020 2020 2020 2073 656c 662e 776f  .        self.wo
-00002900: 726b 6572 2e66 696e 6973 6865 642e 636f  rker.finished.co
-00002910: 6e6e 6563 7428 7365 6c66 2e77 6f72 6b65  nnect(self.worke
-00002920: 722e 6465 6c65 7465 4c61 7465 7229 0d0a  r.deleteLater)..
-00002930: 2020 2020 2020 2020 7365 6c66 2e74 6872          self.thr
-00002940: 6561 642e 6669 6e69 7368 6564 2e63 6f6e  ead.finished.con
-00002950: 6e65 6374 2873 656c 662e 7468 7265 6164  nect(self.thread
-00002960: 2e64 656c 6574 654c 6174 6572 290d 0a20  .deleteLater).. 
-00002970: 2020 2020 2020 2073 656c 662e 7468 7265         self.thre
-00002980: 6164 2e73 7461 7274 6564 2e63 6f6e 6e65  ad.started.conne
-00002990: 6374 2873 656c 662e 776f 726b 6572 2e72  ct(self.worker.r
-000029a0: 756e 290d 0a20 2020 2020 2020 2073 656c  un)..        sel
-000029b0: 662e 7468 7265 6164 2e73 7461 7274 2829  f.thread.start()
-000029c0: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
-000029d0: 2e74 6865 6d65 5f6d 616e 6167 6572 203d  .theme_manager =
-000029e0: 2054 6865 6d65 4d61 6e61 6765 7228 7365   ThemeManager(se
-000029f0: 6c66 290d 0a20 2020 2020 2020 2073 656c  lf)..        sel
-00002a00: 662e 7365 7453 7479 6c65 5368 6565 7428  f.setStyleSheet(
-00002a10: 7365 6c66 2e74 6865 6d65 5f6d 616e 6167  self.theme_manag
-00002a20: 6572 2e67 6574 5f73 7479 6c65 7368 6565  er.get_styleshee
-00002a30: 7428 226d 6169 6e22 2929 0d0a 0d0a 2020  t("main"))....  
-00002a40: 2020 2020 2020 7365 6c66 2e63 7572 7265        self.curre
-00002a50: 6e74 5f66 696c 6520 3d20 4e6f 6e65 0d0a  nt_file = None..
-00002a60: 0d0a 2020 2020 2020 2020 2320 2d2d 0d0a  ..        # --..
-00002a70: 2020 2020 2020 2020 7365 6c66 2e64 7261          self.dra
-00002a80: 7763 616e 7661 7320 3d20 6d79 5f77 6964  wcanvas = my_wid
-00002a90: 6765 740d 0a20 2020 2020 2020 2073 656c  get..        sel
-00002aa0: 662e 6472 6177 6361 6e76 6173 2e6d 6f64  f.drawcanvas.mod
-00002ab0: 6520 3d20 2264 7261 6722 0d0a 0d0a 2020  e = "drag"....  
-00002ac0: 2020 2020 2020 7365 6c66 2e62 6163 6b75        self.backu
-00002ad0: 705f 7374 7220 3d20 2222 0d0a 2020 2020  p_str = ""..    
-00002ae0: 2020 2020 2320 7365 6c66 2e73 6574 4d6f      # self.setMo
-00002af0: 7573 6554 7261 636b 696e 6728 5472 7565  useTracking(True
-00002b00: 290d 0a20 2020 2020 2020 2023 2073 656c  )..        # sel
-00002b10: 662e 6e65 7874 4275 7474 6f6e 2e70 7265  f.nextButton.pre
-00002b20: 7373 6564 2e63 6f6e 6e65 6374 2873 656c  ssed.connect(sel
-00002b30: 662e 676f 746f 5f6e 6578 7429 0d0a 2020  f.goto_next)..  
-00002b40: 2020 2020 2020 7365 6c66 2e62 726f 7773        self.brows
-00002b50: 6542 7574 746f 6e2e 7472 6967 6765 7265  eButton.triggere
-00002b60: 642e 636f 6e6e 6563 7428 7365 6c66 2e62  d.connect(self.b
-00002b70: 726f 7773 6529 0d0a 2020 2020 2020 2020  rowse)..        
-00002b80: 2320 7365 6c66 2e73 6176 6542 7574 746f  # self.saveButto
-00002b90: 6e2e 7472 6967 6765 7265 642e 636f 6e6e  n.triggered.conn
-00002ba0: 6563 7428 7365 6c66 2e73 6176 6529 0d0a  ect(self.save)..
-00002bb0: 2020 2020 2020 2020 7365 6c66 2e73 6176          self.sav
-00002bc0: 6541 7342 7574 746f 6e2e 7472 6967 6765  eAsButton.trigge
-00002bd0: 7265 642e 636f 6e6e 6563 7428 7365 6c66  red.connect(self
-00002be0: 2e73 6176 655f 646c 6729 0d0a 2020 2020  .save_dlg)..    
-00002bf0: 2020 2020 7365 6c66 2e73 6176 6542 7569      self.saveBui
-00002c00: 6c64 4275 7474 6f6e 2e74 7269 6767 6572  ldButton.trigger
-00002c10: 6564 2e63 6f6e 6e65 6374 2873 656c 662e  ed.connect(self.
-00002c20: 7361 7665 5f61 6e64 5f62 7569 6c64 290d  save_and_build).
-00002c30: 0a20 2020 2020 2020 2023 2073 656c 662e  .        # self.
-00002c40: 466c 6970 4865 6967 6874 4275 7474 6f6e  FlipHeightButton
-00002c50: 2e70 7265 7373 6564 2e63 6f6e 6e65 6374  .pressed.connect
-00002c60: 2873 656c 662e 666c 6970 5f68 6569 6768  (self.flip_heigh
-00002c70: 7429 0d0a 2020 2020 2020 2020 7365 6c66  t)..        self
-00002c80: 2e61 6374 696f 6e46 6c69 705f 5669 6577  .actionFlip_View
-00002c90: 2e74 7269 6767 6572 6564 2e63 6f6e 6e65  .triggered.conne
-00002ca0: 6374 2873 656c 662e 666c 6970 5f68 6569  ct(self.flip_hei
-00002cb0: 6768 7429 0d0a 2020 2020 2020 2020 7365  ght)..        se
-00002cc0: 6c66 2e61 6374 696f 6e52 6573 746f 7265  lf.actionRestore
-00002cd0: 5f4f 7269 6769 6e61 6c5f 5369 7a65 2e74  _Original_Size.t
-00002ce0: 7269 6767 6572 6564 2e63 6f6e 6e65 6374  riggered.connect
-00002cf0: 2873 656c 662e 7265 7374 6f72 655f 6f72  (self.restore_or
-00002d00: 6967 696e 616c 5f73 697a 6529 0d0a 0d0a  iginal_size)....
-00002d10: 2020 2020 2020 2020 7365 6c66 2e61 6374          self.act
-00002d20: 696f 6e53 686f 775f 4f75 7470 7574 5f4c  ionShow_Output_L
-00002d30: 6f67 2e74 7269 6767 6572 6564 2e63 6f6e  og.triggered.con
-00002d40: 6e65 6374 2873 656c 662e 7368 6f77 5f6f  nect(self.show_o
-00002d50: 7574 7075 745f 6469 7370 6c61 7929 0d0a  utput_display)..
-00002d60: 0d0a 2020 2020 2020 2020 2320 7365 6c66  ..        # self
-00002d70: 2e73 686f 7767 7261 7068 4275 7474 6f6e  .showgraphButton
-00002d80: 2e74 7269 6767 6572 6564 2e63 6f6e 6e65  .triggered.conne
-00002d90: 6374 2873 656c 662e 7368 6f77 5f67 7261  ct(self.show_gra
-00002da0: 7068 290d 0a20 2020 2020 2020 2073 656c  ph)..        sel
-00002db0: 662e 6765 6e4d 6174 4275 7474 6f6e 2e74  f.genMatButton.t
-00002dc0: 7269 6767 6572 6564 2e63 6f6e 6e65 6374  riggered.connect
-00002dd0: 2873 656c 662e 7472 795f 6765 6e5f 6d61  (self.try_gen_ma
-00002de0: 7472 6978 290d 0a20 2020 2020 2020 2023  trix)..        #
-00002df0: 2073 656c 662e 6765 6e43 6f64 6542 7574   self.genCodeBut
-00002e00: 746f 6e2e 7472 6967 6765 7265 642e 636f  ton.triggered.co
-00002e10: 6e6e 6563 7428 7365 6c66 2e67 656e 5f63  nnect(self.gen_c
-00002e20: 6f64 6529 0d0a 2020 2020 2020 2020 2320  ode)..        # 
-00002e30: 7365 6c66 2e67 656e 5465 7842 7574 746f  self.genTexButto
-00002e40: 6e2e 7072 6573 7365 642e 636f 6e6e 6563  n.pressed.connec
-00002e50: 7428 7365 6c66 2e67 656e 5f74 6578 5f64  t(self.gen_tex_d
-00002e60: 6573 6372 6970 7469 6f6e 290d 0a20 2020  escription)..   
-00002e70: 2020 2020 2073 656c 662e 6765 6e49 4353       self.genICS
-00002e80: 4275 7474 6f6e 2e74 7269 6767 6572 6564  Button.triggered
-00002e90: 2e63 6f6e 6e65 6374 2873 656c 662e 6765  .connect(self.ge
-00002ea0: 6e5f 7465 785f 6963 7329 0d0a 0d0a 2020  n_tex_ics)....  
-00002eb0: 2020 2020 2020 7365 6c66 2e67 7261 7068        self.graph
-00002ec0: 7368 6f77 696e 636f 6d65 2e70 7265 7373  showincome.press
-00002ed0: 6564 2e63 6f6e 6e65 6374 2873 656c 662e  ed.connect(self.
-00002ee0: 6765 6e5f 6963 735f 7369 6e67 6c65 290d  gen_ics_single).
-00002ef0: 0a20 2020 2020 2020 2073 656c 662e 6765  .        self.ge
-00002f00: 6e43 4653 4275 7474 6f6e 2e70 7265 7373  nCFSButton.press
-00002f10: 6564 2e63 6f6e 6e65 6374 2873 656c 662e  ed.connect(self.
-00002f20: 6765 6e5f 6361 7368 666c 6f77 5f73 696e  gen_cashflow_sin
-00002f30: 676c 6529 0d0a 0d0a 2020 2020 2020 2020  gle)....        
-00002f40: 7365 6c66 2e65 6469 744d 6169 6e4c 6f6f  self.editMainLoo
-00002f50: 7042 7574 746f 6e2e 7472 6967 6765 7265  pButton.triggere
-00002f60: 642e 636f 6e6e 6563 7428 7365 6c66 2e65  d.connect(self.e
-00002f70: 6469 745f 6d61 696e 6c6f 6f70 290d 0a0d  dit_mainloop)...
-00002f80: 0a20 2020 2020 2020 2073 656c 662e 6275  .        self.bu
-00002f90: 696c 6450 726f 6a65 6374 4275 7474 6f6e  ildProjectButton
-00002fa0: 2e74 7269 6767 6572 6564 2e63 6f6e 6e65  .triggered.conne
-00002fb0: 6374 286c 616d 6264 613a 2073 656c 662e  ct(lambda: self.
-00002fc0: 6275 696c 645f 7072 6f6a 6563 7428 6f76  build_project(ov
-00002fd0: 6572 7772 6974 653d 5472 7565 2929 0d0a  erwrite=True))..
-00002fe0: 2020 2020 2020 2020 7365 6c66 2e72 756e          self.run
-00002ff0: 4275 7474 6f6e 2e74 7269 6767 6572 6564  Button.triggered
-00003000: 2e63 6f6e 6e65 6374 2873 656c 662e 7275  .connect(self.ru
-00003010: 6e5f 7072 6f6a 6563 7429 0d0a 0d0a 2020  n_project)....  
-00003020: 2020 2020 2020 7365 6c66 2e73 686f 7274        self.short
-00003030: 6375 7420 3d20 5153 686f 7274 6375 7428  cut = QShortcut(
-00003040: 514b 6579 5365 7175 656e 6365 2822 4374  QKeySequence("Ct
-00003050: 726c 2b53 2229 2c73 656c 6629 0d0a 2020  rl+S"),self)..  
-00003060: 2020 2020 2020 7365 6c66 2e73 686f 7274        self.short
-00003070: 6375 742e 6163 7469 7661 7465 642e 636f  cut.activated.co
-00003080: 6e6e 6563 7428 7365 6c66 2e73 6176 655f  nnect(self.save_
-00003090: 616e 645f 6275 696c 6429 0d0a 2020 2020  and_build)..    
-000030a0: 2020 2020 7365 6c66 2e61 6374 696f 6e41      self.actionA
-000030b0: 626f 7574 2e74 7269 6767 6572 6564 2e63  bout.triggered.c
-000030c0: 6f6e 6e65 6374 286c 616d 6264 613a 2073  onnect(lambda: s
-000030d0: 656c 662e 6e6f 7469 6679 2822 7366 6374  elf.notify("sfct
-000030e0: 6f6c 732d 6174 7475 6e65 2076 6572 2e20  ols-attune ver. 
-000030f0: 302e 3220 636f 6d70 6174 6962 6c65 2077  0.2 compatible w
-00003100: 6974 6820 7366 6374 6f6f 6c73 203e 3d20  ith sfctools >= 
-00003110: 312e 302e 312e 2054 6861 6e6b 7320 666f  1.0.1. Thanks fo
-00003120: 7220 7573 696e 6721 2050 6c65 6173 6520  r using! Please 
-00003130: 7265 706f 7274 2062 7567 7320 746f 2074  report bugs to t
-00003140: 686f 6d61 732e 6261 6c64 6175 6640 646c  homas.baldauf@dl
-00003150: 722e 6465 222c 7469 746c 653d 2241 626f  r.de",title="Abo
-00003160: 7574 2074 6869 7320 736f 6674 7761 7265  ut this software
-00003170: 2229 290d 0a20 2020 2020 2020 2073 656c  "))..        sel
-00003180: 662e 6163 7469 6f6e 466c 6f77 4d61 7472  f.actionFlowMatr
-00003190: 6978 5f74 6f5f 4578 6365 6c5f 6669 6c65  ix_to_Excel_file
-000031a0: 2e74 7269 6767 6572 6564 2e63 6f6e 6e65  .triggered.conne
-000031b0: 6374 286c 616d 6264 613a 2073 656c 662e  ct(lambda: self.
-000031c0: 6765 6e5f 6d61 7472 6978 286d 6f64 653d  gen_matrix(mode=
-000031d0: 2265 7863 656c 2229 290d 0a0d 0a20 2020  "excel"))....   
-000031e0: 2020 2020 2073 656c 662e 6163 7469 6f6e       self.action
-000031f0: 5377 6974 6368 5f44 6172 6b5f 4272 6967  Switch_Dark_Brig
-00003200: 6874 5f4d 6f64 652e 7472 6967 6765 7265  ht_Mode.triggere
-00003210: 642e 636f 6e6e 6563 7428 7365 6c66 2e73  d.connect(self.s
-00003220: 7769 7463 685f 7468 656d 6529 0d0a 0d0a  witch_theme)....
-00003230: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
-00003240: 6e73 6163 7469 6f6e 5669 6577 2e73 6574  nsactionView.set
-00003250: 4564 6974 5472 6967 6765 7273 2851 4162  EditTriggers(QAb
-00003260: 7374 7261 6374 4974 656d 5669 6577 2e4e  stractItemView.N
-00003270: 6f45 6469 7454 7269 6767 6572 7329 0d0a  oEditTriggers)..
-00003280: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
-00003290: 6e73 6163 7469 6f6e 5669 6577 2e64 6f75  nsactionView.dou
-000032a0: 626c 6543 6c69 636b 6564 2e63 6f6e 6e65  bleClicked.conne
-000032b0: 6374 2873 656c 662e 6461 7461 5f73 656c  ct(self.data_sel
-000032c0: 6563 7429 0d0a 2020 2020 2020 2020 7365  ect)..        se
-000032d0: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
-000032e0: 6577 2e73 6574 436f 6c75 6d6e 5769 6474  ew.setColumnWidt
-000032f0: 6828 302c 2031 3230 290d 0a0d 0a20 2020  h(0, 120)....   
-00003300: 2020 2020 2073 656c 662e 6172 7261 6e67       self.arrang
-00003310: 6542 7574 746f 6e2e 7072 6573 7365 642e  eButton.pressed.
-00003320: 636f 6e6e 6563 7428 7365 6c66 2e61 7272  connect(self.arr
-00003330: 616e 6765 5f70 7265 7474 7929 0d0a 2020  ange_pretty)..  
-00003340: 2020 2020 2020 7365 6c66 2e72 656d 6f76        self.remov
-00003350: 6542 7574 746f 6e2e 7072 6573 7365 642e  eButton.pressed.
-00003360: 636f 6e6e 6563 7428 7365 6c66 2e72 656d  connect(self.rem
-00003370: 6f76 655f 6974 656d 290d 0a0d 0a20 2020  ove_item)....   
-00003380: 2020 2020 2073 656c 662e 6263 312e 7072       self.bc1.pr
-00003390: 6573 7365 642e 636f 6e6e 6563 7428 6c61  essed.connect(la
-000033a0: 6d62 6461 3a20 7365 6c66 2e63 6861 6e67  mbda: self.chang
-000033b0: 655f 636f 6c6f 7228 3129 290d 0a20 2020  e_color(1))..   
-000033c0: 2020 2020 2073 656c 662e 6263 322e 7072       self.bc2.pr
-000033d0: 6573 7365 642e 636f 6e6e 6563 7428 6c61  essed.connect(la
-000033e0: 6d62 6461 3a20 7365 6c66 2e63 6861 6e67  mbda: self.chang
-000033f0: 655f 636f 6c6f 7228 3229 290d 0a20 2020  e_color(2))..   
-00003400: 2020 2020 2073 656c 662e 6263 332e 7072       self.bc3.pr
-00003410: 6573 7365 642e 636f 6e6e 6563 7428 6c61  essed.connect(la
-00003420: 6d62 6461 3a20 7365 6c66 2e63 6861 6e67  mbda: self.chang
-00003430: 655f 636f 6c6f 7228 3329 290d 0a20 2020  e_color(3))..   
-00003440: 2020 2020 2073 656c 662e 6263 342e 7072       self.bc4.pr
-00003450: 6573 7365 642e 636f 6e6e 6563 7428 6c61  essed.connect(la
-00003460: 6d62 6461 3a20 7365 6c66 2e63 6861 6e67  mbda: self.chang
-00003470: 655f 636f 6c6f 7228 3429 290d 0a20 2020  e_color(4))..   
-00003480: 2020 2020 2073 656c 662e 6263 352e 7072       self.bc5.pr
-00003490: 6573 7365 642e 636f 6e6e 6563 7428 6c61  essed.connect(la
-000034a0: 6d62 6461 3a20 7365 6c66 2e63 6861 6e67  mbda: self.chang
-000034b0: 655f 636f 6c6f 7228 3529 290d 0a20 2020  e_color(5))..   
-000034c0: 2020 2020 2073 656c 662e 6263 362e 7072       self.bc6.pr
-000034d0: 6573 7365 642e 636f 6e6e 6563 7428 6c61  essed.connect(la
-000034e0: 6d62 6461 3a20 7365 6c66 2e63 6861 6e67  mbda: self.chang
-000034f0: 655f 636f 6c6f 7228 3629 290d 0a20 2020  e_color(6))..   
-00003500: 2020 2020 2073 656c 662e 6263 372e 7072       self.bc7.pr
-00003510: 6573 7365 642e 636f 6e6e 6563 7428 6c61  essed.connect(la
-00003520: 6d62 6461 3a20 7365 6c66 2e63 6861 6e67  mbda: self.chang
-00003530: 655f 636f 6c6f 7228 3729 290d 0a20 2020  e_color(7))..   
-00003540: 2020 2020 2073 656c 662e 6263 382e 7072       self.bc8.pr
-00003550: 6573 7365 642e 636f 6e6e 6563 7428 6c61  essed.connect(la
-00003560: 6d62 6461 3a20 7365 6c66 2e63 6861 6e67  mbda: self.chang
-00003570: 655f 636f 6c6f 7228 3829 290d 0a0d 0a20  e_color(8)).... 
-00003580: 2020 2020 2020 2073 656c 662e 6274 6e5f         self.btn_
-00003590: 6373 6176 652e 7072 6573 7365 642e 636f  csave.pressed.co
-000035a0: 6e6e 6563 7428 6c61 6d62 6461 3a20 7365  nnect(lambda: se
-000035b0: 6c66 2e74 6865 6d65 5f6d 616e 6167 6572  lf.theme_manager
-000035c0: 2e73 6176 655f 636f 6c6f 7273 2829 290d  .save_colors()).
-000035d0: 0a20 2020 2020 2020 2073 656c 662e 6274  .        self.bt
-000035e0: 6e5f 636c 6f61 642e 7072 6573 7365 642e  n_cload.pressed.
-000035f0: 636f 6e6e 6563 7428 6c61 6d62 6461 3a20  connect(lambda: 
-00003600: 7365 6c66 2e74 6865 6d65 5f6d 616e 6167  self.theme_manag
-00003610: 6572 2e6c 6f61 645f 636f 6c6f 7273 2829  er.load_colors()
-00003620: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00003630: 6274 6e5f 6372 6573 746f 7265 2e70 7265  btn_crestore.pre
-00003640: 7373 6564 2e63 6f6e 6e65 6374 286c 616d  ssed.connect(lam
-00003650: 6264 613a 2073 656c 662e 7468 656d 655f  bda: self.theme_
-00003660: 6d61 6e61 6765 722e 7265 7374 6f72 6528  manager.restore(
-00003670: 2929 0d0a 0d0a 2020 2020 2020 2020 7365  ))....        se
-00003680: 6c66 2e6d 6169 6e6c 6f6f 705f 7374 7220  lf.mainloop_str 
-00003690: 3d20 2222 0d0a 0d0a 2020 2020 2020 2020  = ""....        
-000036a0: 7365 6c66 2e73 6574 7469 6e67 735f 7374  self.settings_st
-000036b0: 7220 3d20 2222 220d 0a6d 6574 6169 6e66  r = """..metainf
-000036c0: 6f3a 0d0a 0961 7574 686f 723a 2079 6f75  o:...author: you
-000036d0: 7220 6e61 6d65 2068 6572 650d 0a09 6461  r name here...da
-000036e0: 7465 3a20 3230 3232 0d0a 0969 6e66 6f3a  te: 2022...info:
-000036f0: 2065 7861 6d70 6c65 2073 6574 7469 6e67   example setting
-00003700: 730d 0a0d 0a68 7970 6572 7061 7261 6d73  s....hyperparams
-00003710: 3a0d 0a20 2020 2020 2020 2d20 6e61 6d65  :..       - name
-00003720: 3a20 6578 616d 706c 650d 0a20 2020 2020  : example..     
-00003730: 2020 2020 7661 6c75 653a 2034 322e 300d      value: 42.0.
-00003740: 0a20 2020 2020 2020 2020 6465 7363 7269  .         descri
-00003750: 7074 696f 6e3a 2061 6e20 6578 616d 706c  ption: an exampl
-00003760: 6520 7061 7261 6d65 7465 720d 0a22 2222  e parameter.."""
-00003770: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
-00003780: 2e65 6469 7453 6574 7469 6e67 7342 7574  .editSettingsBut
-00003790: 746f 6e2e 7472 6967 6765 7265 642e 636f  ton.triggered.co
-000037a0: 6e6e 6563 7428 7365 6c66 2e65 6469 745f  nnect(self.edit_
-000037b0: 7365 7474 696e 6773 290d 0a0d 0a20 2020  settings)....   
-000037c0: 2020 2020 2073 656c 662e 6164 6442 7574       self.addBut
-000037d0: 746f 6e2e 7072 6573 7365 642e 636f 6e6e  ton.pressed.conn
-000037e0: 6563 7428 7365 6c66 2e61 6464 5f6e 6577  ect(self.add_new
-000037f0: 2920 2320 6164 6420 616e 2061 6765 6e74  ) # add an agent
-00003800: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00003810: 6464 4275 7474 6f6e 322e 7072 6573 7365  ddButton2.presse
-00003820: 642e 636f 6e6e 6563 7428 7365 6c66 2e61  d.connect(self.a
-00003830: 6464 5f68 656c 7065 7229 2023 2061 6464  dd_helper) # add
-00003840: 2061 2068 656c 7065 7220 6167 656e 7420   a helper agent 
-00003850: 286e 6f20 7472 616e 7361 6374 696f 6e73  (no transactions
-00003860: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00003870: 6772 6170 6844 656c 6574 6542 7574 746f  graphDeleteButto
-00003880: 6e2e 7072 6573 7365 642e 636f 6e6e 6563  n.pressed.connec
-00003890: 7428 7365 6c66 2e72 656d 6f76 655f 6865  t(self.remove_he
-000038a0: 6c70 6572 290d 0a0d 0a0d 0a0d 0a20 2020  lper)........   
-000038b0: 2020 2020 2023 7365 6c66 2e73 6176 6542       #self.saveB
-000038c0: 7574 746f 6e2e 7072 6573 7365 642e 636f  utton.pressed.co
-000038d0: 6e6e 6563 7428 7365 6c66 2e73 6176 6529  nnect(self.save)
-000038e0: 0d0a 0d0a 2020 2020 2020 2020 2320 7365  ....        # se
-000038f0: 6c66 2e67 7261 7068 5365 6c65 6374 4275  lf.graphSelectBu
-00003900: 7474 6f6e 2e70 7265 7373 6564 2e63 6f6e  tton.pressed.con
-00003910: 6e65 6374 2873 656c 662e 6368 616e 6765  nect(self.change
-00003920: 5f67 7261 7068 6d6f 6465 5f73 656c 6563  _graphmode_selec
-00003930: 7429 0d0a 2020 2020 2020 2020 2320 7365  t)..        # se
-00003940: 6c66 2e67 7261 7068 4472 6167 4275 7474  lf.graphDragButt
-00003950: 6f6e 2e70 7265 7373 6564 2e63 6f6e 6e65  on.pressed.conne
-00003960: 6374 2873 656c 662e 6368 616e 6765 5f67  ct(self.change_g
-00003970: 7261 7068 6d6f 6465 5f64 7261 6729 0d0a  raphmode_drag)..
-00003980: 0d0a 2020 2020 2020 2020 7365 6c66 2e67  ..        self.g
-00003990: 7261 7068 4564 6974 4275 7474 6f6e 2e70  raphEditButton.p
-000039a0: 7265 7373 6564 2e63 6f6e 6e65 6374 2873  ressed.connect(s
-000039b0: 656c 662e 6564 6974 5f67 7261 7068 5f61  elf.edit_graph_a
-000039c0: 6765 6e74 290d 0a0d 0a20 2020 2020 2020  gent)....       
-000039d0: 2023 666f 7220 7769 6467 6574 2069 6e20   #for widget in 
-000039e0: 5b73 656c 662e 4173 7365 744c 6973 744c  [self.AssetListL
-000039f0: 6566 742c 2073 656c 662e 4173 7365 744c  eft, self.AssetL
-00003a00: 6973 7452 6967 6874 2c0d 0a20 2020 2020  istRight,..     
-00003a10: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00003a20: 2020 2073 656c 662e 4c69 6162 696c 6974     self.Liabilit
-00003a30: 794c 6973 744c 6566 742c 2073 656c 662e  yListLeft, self.
-00003a40: 4c69 6162 696c 6974 794c 6973 7452 6967  LiabilityListRig
-00003a50: 6874 2c0d 0a20 2020 2020 2020 2023 2020  ht,..        #  
-00003a60: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00003a70: 662e 4571 7569 7479 4c69 7374 4c65 6674  f.EquityListLeft
-00003a80: 2c20 7365 6c66 2e45 7175 6974 794c 6973  , self.EquityLis
-00003a90: 7452 6967 6874 5d3a 0d0a 2020 2020 2020  tRight]:..      
-00003aa0: 2020 2320 2020 2077 6964 6765 742e 7465    #    widget.te
-00003ab0: 7874 4368 616e 6765 642e 636f 6e6e 6563  xtChanged.connec
-00003ac0: 7428 7365 6c66 2e75 7064 6174 655f 6461  t(self.update_da
-00003ad0: 7461 290d 0a20 2020 2020 2020 2073 656c  ta)..        sel
-00003ae0: 662e 6163 7469 6f6e 5377 6170 5f4c 696e  f.actionSwap_Lin
-00003af0: 655f 496e 7465 7270 6f6c 6174 696f 6e2e  e_Interpolation.
-00003b00: 7472 6967 6765 7265 642e 636f 6e6e 6563  triggered.connec
-00003b10: 7428 7365 6c66 2e64 7261 7763 616e 7661  t(self.drawcanva
-00003b20: 732e 7377 6170 5f69 6e74 6572 706f 6c5f  s.swap_interpol_
-00003b30: 7374 796c 6529 0d0a 0d0a 2020 2020 2020  style)....      
-00003b40: 2020 7365 6c66 2e61 6374 696f 6e45 7870    self.actionExp
-00003b50: 6f72 745f 4772 6170 685f 746f 5f50 4446  ort_Graph_to_PDF
-00003b60: 2e74 7269 6767 6572 6564 2e63 6f6e 6e65  .triggered.conne
-00003b70: 6374 2873 656c 662e 6472 6177 6361 6e76  ct(self.drawcanv
-00003b80: 6173 2e65 7870 6f72 745f 7064 6629 0d0a  as.export_pdf)..
-00003b90: 0d0a 2020 2020 2020 2020 7365 6c66 2e75  ..        self.u
-00003ba0: 6470 6174 6542 7574 746f 6e2e 7072 6573  dpateButton.pres
-00003bb0: 7365 642e 636f 6e6e 6563 7428 7365 6c66  sed.connect(self
-00003bc0: 2e75 7064 6174 655f 6461 7461 290d 0a0d  .update_data)...
-00003bd0: 0a20 2020 2020 2020 2073 656c 662e 6669  .        self.fi
-00003be0: 6c65 6e61 6d65 203d 204e 6f6e 6520 2020  lename = None   
-00003bf0: 2023 2063 7572 7265 6e74 202e 7961 6d6c   # current .yaml
-00003c00: 2066 696c 650d 0a20 2020 2020 2020 2073   file..        s
-00003c10: 656c 662e 656e 7472 795f 6461 7461 203d  elf.entry_data =
-00003c20: 205b 5d20 2320 7374 6f72 6520 6375 7272   [] # store curr
-00003c30: 656e 7420 656e 7472 6965 730d 0a20 2020  ent entries..   
-00003c40: 2020 2020 2073 656c 662e 7365 6c65 6374       self.select
-00003c50: 696f 6e5f 6964 7820 3d20 4e6f 6e65 0d0a  ion_idx = None..
-00003c60: 0d0a 2020 2020 2020 2020 2373 656c 662e  ..        #self.
-00003c70: 6d61 7472 6978 5669 6577 203d 204d 6174  matrixView = Mat
-00003c80: 7269 7856 6965 7765 7228 7365 6c66 290d  rixViewer(self).
-00003c90: 0a20 2020 2020 2020 2073 656c 662e 6d6f  .        self.mo
-00003ca0: 7665 5570 4274 6e2e 7072 6573 7365 642e  veUpBtn.pressed.
-00003cb0: 636f 6e6e 6563 7428 7365 6c66 2e6d 6f76  connect(self.mov
-00003cc0: 655f 7570 290d 0a20 2020 2020 2020 2073  e_up)..        s
-00003cd0: 656c 662e 6d6f 7665 446e 4274 6e2e 7072  elf.moveDnBtn.pr
-00003ce0: 6573 7365 642e 636f 6e6e 6563 7428 7365  essed.connect(se
-00003cf0: 6c66 2e6d 6f76 655f 646f 776e 290d 0a0d  lf.move_down)...
-00003d00: 0a20 2020 2020 2020 2073 656c 662e 6669  .        self.fi
-00003d10: 6c74 6572 436f 6d62 6f2e 6974 656d 5365  lterCombo.itemSe
-00003d20: 6c65 6374 696f 6e43 6861 6e67 6564 2e63  lectionChanged.c
-00003d30: 6f6e 6e65 6374 286c 616d 6264 613a 2073  onnect(lambda: s
-00003d40: 656c 662e 6472 6177 6361 6e76 6173 2e75  elf.drawcanvas.u
-00003d50: 7064 6174 6528 2929 0d0a 2020 2020 2020  pdate())..      
-00003d60: 2020 7365 6c66 2e63 6c65 6172 4669 6c74    self.clearFilt
-00003d70: 6572 4275 7474 6f6e 2e70 7265 7373 6564  erButton.pressed
-00003d80: 2e63 6f6e 6e65 6374 2873 656c 662e 636c  .connect(self.cl
-00003d90: 6561 725f 6669 6c74 6572 290d 0a0d 0a20  ear_filter).... 
-00003da0: 2020 2020 2020 2073 656c 662e 7468 656d         self.them
-00003db0: 655f 6d61 6e61 6765 722e 7468 656d 6520  e_manager.theme 
-00003dc0: 3d20 2264 6172 6b22 0d0a 2020 2020 2020  = "dark"..      
-00003dd0: 2020 7365 6c66 2e73 7769 7463 685f 7468    self.switch_th
-00003de0: 656d 6528 290d 0a0d 0a20 2020 2020 2020  eme()....       
-00003df0: 200d 0a20 2020 2020 2020 2073 656c 662e   ..        self.
-00003e00: 7468 656d 655f 6d61 6e61 6765 722e 7265  theme_manager.re
-00003e10: 7374 6f72 6528 290d 0a0d 0a20 2020 2020  store()....     
-00003e20: 2020 2073 656c 662e 7377 6974 6368 5f74     self.switch_t
-00003e30: 6865 6d65 2829 0d0a 2020 2020 2020 2020  heme()..        
-00003e40: 7365 6c66 2e73 7769 7463 685f 7468 656d  self.switch_them
-00003e50: 6528 290d 0a0d 0a0d 0a20 2020 2064 6566  e()......    def
-00003e60: 2063 6861 6e67 655f 636f 6c6f 7228 7365   change_color(se
-00003e70: 6c66 2c77 6869 6368 293a 0d0a 2020 2020  lf,which):..    
-00003e80: 2020 2020 636f 6c6f 7220 3d20 5143 6f6c      color = QCol
-00003e90: 6f72 4469 616c 6f67 2e67 6574 436f 6c6f  orDialog.getColo
-00003ea0: 7228 290d 0a0d 0a20 2020 2020 2020 2069  r()....        i
-00003eb0: 6620 636f 6c6f 722e 6973 5661 6c69 6428  f color.isValid(
-00003ec0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00003ed0: 7072 696e 7428 2243 4841 4e47 4520 434f  print("CHANGE CO
-00003ee0: 4c4f 5222 2c20 7768 6963 682c 2063 6f6c  LOR", which, col
-00003ef0: 6f72 2e6e 616d 6528 2929 0d0a 0d0a 2020  or.name())....  
-00003f00: 2020 2020 2020 2020 2020 6274 6e5f 7461            btn_ta
-00003f10: 626c 6520 3d20 7b0d 0a20 2020 2020 2020  ble = {..       
-00003f20: 2020 2020 2020 2020 2031 3a20 7365 6c66           1: self
-00003f30: 2e62 6331 2c0d 0a20 2020 2020 2020 2020  .bc1,..         
-00003f40: 2020 2020 2020 2032 3a20 7365 6c66 2e62         2: self.b
-00003f50: 6332 2c0d 0a20 2020 2020 2020 2020 2020  c2,..           
-00003f60: 2020 2020 2033 3a20 7365 6c66 2e62 6333       3: self.bc3
-00003f70: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00003f80: 2020 2034 3a20 7365 6c66 2e62 6334 2c0d     4: self.bc4,.
-00003f90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00003fa0: 2035 3a20 7365 6c66 2e62 6335 2c0d 0a20   5: self.bc5,.. 
-00003fb0: 2020 2020 2020 2020 2020 2020 2020 2036                 6
-00003fc0: 3a20 7365 6c66 2e62 6336 2c0d 0a20 2020  : self.bc6,..   
-00003fd0: 2020 2020 2020 2020 2020 2020 2037 3a20               7: 
-00003fe0: 7365 6c66 2e62 6337 2c0d 0a20 2020 2020  self.bc7,..     
-00003ff0: 2020 2020 2020 2020 2020 2038 3a20 7365             8: se
-00004000: 6c66 2e62 6338 2c0d 0a20 2020 2020 2020  lf.bc8,..       
-00004010: 2020 2020 207d 0d0a 0d0a 2020 2020 2020       }....      
-00004020: 2020 2020 2020 6274 6e5f 7461 626c 655b        btn_table[
-00004030: 7768 6963 685d 2e73 6574 5374 796c 6553  which].setStyleS
-00004040: 6865 6574 2822 6261 636b 6772 6f75 6e64  heet("background
-00004050: 2d63 6f6c 6f72 3a20 7267 6228 2573 2c25  -color: rgb(%s,%
-00004060: 732c 2573 293b 2225 2863 6f6c 6f72 2e72  s,%s);"%(color.r
-00004070: 6564 2829 2c63 6f6c 6f72 2e67 7265 656e  ed(),color.green
-00004080: 2829 2c63 6f6c 6f72 2e62 6c75 6528 2929  (),color.blue())
-00004090: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-000040a0: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
-000040b0: 722e 636f 6c6f 7273 5b73 656c 662e 7468  r.colors[self.th
-000040c0: 656d 655f 6d61 6e61 6765 722e 7468 656d  eme_manager.them
-000040d0: 655d 5b77 6869 6368 2d31 5d20 3d20 636f  e][which-1] = co
-000040e0: 6c6f 720d 0a0d 0a0d 0a20 2020 2064 6566  lor......    def
-000040f0: 2063 6c65 6172 5f66 696c 7465 7228 7365   clear_filter(se
-00004100: 6c66 293a 0d0a 2020 2020 2020 2020 7365  lf):..        se
-00004110: 6c66 2e66 696c 7465 7243 6f6d 626f 2e63  lf.filterCombo.c
-00004120: 6c65 6172 5365 6c65 6374 696f 6e28 290d  learSelection().
-00004130: 0a0d 0a20 2020 2064 6566 2067 656e 5f62  ...    def gen_b
-00004140: 616c 616e 6365 5f6d 6174 7269 7828 7365  alance_matrix(se
-00004150: 6c66 2c64 6574 6169 6c65 643d 5472 7565  lf,detailed=True
-00004160: 293a 0d0a 2020 2020 2020 2020 2320 6765  ):..        # ge
-00004170: 6e65 7261 7465 7320 6120 6261 6c61 6e63  nerates a balanc
-00004180: 6520 7368 6565 7420 6d61 7472 6978 2066  e sheet matrix f
-00004190: 6f72 2061 6c6c 2061 6765 6e74 730d 0a20  or all agents.. 
-000041a0: 2020 2020 2020 2023 203a 7061 7261 6d3a         # :param:
-000041b0: 2064 6574 6169 6c65 643a 2073 686f 7720   detailed: show 
-000041c0: 6c61 7267 6520 6d61 7472 6978 206f 7220  large matrix or 
-000041d0: 6167 6772 6567 6174 6520 696e 6469 7669  aggregate indivi
-000041e0: 6475 616c 2072 6f77 733f 0d0a 0d0a 2020  dual rows?....  
-000041f0: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
-00004200: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
-00004210: 5f62 616c 616e 6365 203d 2020 6465 6661  _balance =  defa
-00004220: 756c 7464 6963 7428 6c61 6d62 6461 3a20  ultdict(lambda: 
-00004230: 7b22 4974 656d 223a 5b5d 2c22 4173 7365  {"Item":[],"Asse
-00004240: 7473 223a 5b5d 2c22 4c69 6162 696c 6974  ts":[],"Liabilit
-00004250: 6965 7322 3a20 5b5d 7d29 0d0a 0d0a 0d0a  ies": []})......
-00004260: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00004270: 6669 6c65 6461 7461 2069 6e20 7365 6c66  filedata in self
-00004280: 2e65 6e74 7279 5f64 6174 613a 0d0a 0d0a  .entry_data:....
-00004290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000042a0: 6167 656e 7431 203d 2066 696c 6564 6174  agent1 = filedat
-000042b0: 615b 2261 6765 6e74 3122 5d2e 7374 7269  a["agent1"].stri
-000042c0: 7028 290d 0a20 2020 2020 2020 2020 2020  p()..           
-000042d0: 2020 2020 2061 6765 6e74 3220 3d20 6669       agent2 = fi
-000042e0: 6c65 6461 7461 5b22 6167 656e 7432 225d  ledata["agent2"]
-000042f0: 2e73 7472 6970 2829 0d0a 0d0a 2020 2020  .strip()....    
-00004300: 2020 2020 2020 2020 2020 2020 6173 7365              asse
-00004310: 7473 3120 3d20 6669 6c65 6461 7461 5b22  ts1 = filedata["
-00004320: 6131 225d 0d0a 2020 2020 2020 2020 2020  a1"]..          
-00004330: 2020 2020 2020 6c69 6162 7331 203d 2066        liabs1 = f
-00004340: 696c 6564 6174 615b 226c 3122 5d20 232b  iledata["l1"] #+
-00004350: 2066 696c 6564 6174 615b 2265 3122 5d20   filedata["e1"] 
-00004360: 2b20 225c 6e22 0d0a 0d0a 2020 2020 2020  + "\n"....      
-00004370: 2020 2020 2020 2020 2020 6173 7365 7473            assets
-00004380: 3220 3d20 6669 6c65 6461 7461 5b22 6132  2 = filedata["a2
-00004390: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
-000043a0: 2020 2020 6c69 6162 7332 203d 2066 696c      liabs2 = fil
-000043b0: 6564 6174 615b 226c 3222 5d20 232b 2066  edata["l2"] #+ f
-000043c0: 696c 6564 6174 615b 2265 3222 5d20 2b20  iledata["e2"] + 
-000043d0: 225c 6e22 0d0a 0d0a 2020 2020 2020 2020  "\n"....        
-000043e0: 2020 2020 2020 2020 6966 2064 6574 6169          if detai
-000043f0: 6c65 643a 0d0a 2020 2020 2020 2020 2020  led:..          
-00004400: 2020 2020 2020 2020 2020 7375 626a 6563            subjec
-00004410: 7420 3d20 2220 2825 7329 5c6e 2220 2520  t = " (%s)\n" % 
-00004420: 6669 6c65 6461 7461 5b22 7375 626a 6563  filedata["subjec
-00004430: 7422 5d0d 0a20 2020 2020 2020 2020 2020  t"]..           
-00004440: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00004450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004460: 7375 626a 6563 7420 3d20 225c 6e22 0d0a  subject = "\n"..
-00004470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004480: 6d79 5f61 7373 6574 7331 203d 205b 5d0d  my_assets1 = [].
-00004490: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000044a0: 206d 795f 6c69 6162 7331 203d 205b 5d0d   my_liabs1 = [].
-000044b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000044c0: 206d 795f 6173 7365 7473 3220 3d20 5b5d   my_assets2 = []
-000044d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000044e0: 2020 6d79 5f6c 6961 6273 3220 3d20 5b5d    my_liabs2 = []
-000044f0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00004500: 2020 2020 666f 7220 6920 696e 2061 7373      for i in ass
-00004510: 6574 7331 2e73 706c 6974 2822 5c6e 2229  ets1.split("\n")
-00004520: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00004530: 2020 2020 2020 2069 6620 692e 7374 7269         if i.stri
-00004540: 7028 292e 7374 6172 7473 7769 7468 2822  p().startswith("
-00004550: 2b22 293a 0d0a 2020 2020 2020 2020 2020  +"):..          
-00004560: 2020 2020 2020 2020 2020 2020 2020 6d79                my
-00004570: 5f69 7465 6d20 3d20 692e 7370 6c69 7428  _item = i.split(
-00004580: 222b 2229 5b31 5d20 2b20 7375 626a 6563  "+")[1] + subjec
-00004590: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
-000045a0: 2020 2020 2020 2020 2020 2073 6967 6e20             sign 
-000045b0: 3d20 222b 220d 0a20 2020 2020 2020 2020  = "+"..         
-000045c0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-000045d0: 692e 7374 7269 7028 292e 7374 6172 7473  i.strip().starts
-000045e0: 7769 7468 2822 2d22 293a 0d0a 2020 2020  with("-"):..    
-000045f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004600: 2020 2020 6d79 5f69 7465 6d20 3d20 692e      my_item = i.
-00004610: 7370 6c69 7428 222d 2229 5b31 5d20 2b20  split("-")[1] + 
-00004620: 7375 626a 6563 740d 0a20 2020 2020 2020  subject..       
-00004630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004640: 2073 6967 6e20 3d20 222d 220d 0a20 2020   sign = "-"..   
-00004650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004660: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00004670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004680: 6272 6561 6b0d 0a20 2020 2020 2020 2020  break..         
-00004690: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
-000046a0: 6e65 645f 6261 6c61 6e63 655b 6167 656e  ned_balance[agen
-000046b0: 7431 5d5b 2249 7465 6d22 5d2e 6170 7065  t1]["Item"].appe
-000046c0: 6e64 286d 795f 6974 656d 290d 0a20 2020  nd(my_item)..   
-000046d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000046e0: 2063 6f6d 6269 6e65 645f 6261 6c61 6e63   combined_balanc
-000046f0: 655b 6167 656e 7431 5d5b 2241 7373 6574  e[agent1]["Asset
-00004700: 7322 5d2e 6170 7065 6e64 2873 6967 6e2b  s"].append(sign+
-00004710: 6669 6c65 6461 7461 5b22 7175 616e 7469  filedata["quanti
-00004720: 7479 225d 2b22 5c6e 2229 0d0a 2020 2020  ty"]+"\n")..    
-00004730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004740: 636f 6d62 696e 6564 5f62 616c 616e 6365  combined_balance
-00004750: 5b61 6765 6e74 315d 5b22 4c69 6162 696c  [agent1]["Liabil
-00004760: 6974 6965 7322 5d2e 6170 7065 6e64 2822  ities"].append("
-00004770: 2229 0d0a 0d0a 2020 2020 2020 2020 2020  ")....          
-00004780: 2020 2020 2020 666f 7220 6920 696e 2061        for i in a
-00004790: 7373 6574 7332 2e73 706c 6974 2822 5c6e  ssets2.split("\n
-000047a0: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
-000047b0: 2020 2020 2020 2020 2069 6620 692e 7374           if i.st
-000047c0: 7269 7028 292e 7374 6172 7473 7769 7468  rip().startswith
-000047d0: 2822 2b22 293a 0d0a 2020 2020 2020 2020  ("+"):..        
-000047e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000047f0: 6d79 5f69 7465 6d20 3d20 692e 7370 6c69  my_item = i.spli
-00004800: 7428 222b 2229 5b31 5d20 2b20 7375 626a  t("+")[1] + subj
-00004810: 6563 740d 0a20 2020 2020 2020 2020 2020  ect..           
-00004820: 2020 2020 2020 2020 2020 2020 2073 6967               sig
-00004830: 6e20 3d20 222b 220d 0a20 2020 2020 2020  n = "+"..       
-00004840: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
-00004850: 6620 692e 7374 7269 7028 292e 7374 6172  f i.strip().star
-00004860: 7473 7769 7468 2822 2d22 293a 0d0a 2020  tswith("-"):..  
-00004870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004880: 2020 2020 2020 6d79 5f69 7465 6d20 3d20        my_item = 
-00004890: 692e 7370 6c69 7428 222d 2229 5b31 5d20  i.split("-")[1] 
-000048a0: 2b20 7375 626a 6563 740d 0a20 2020 2020  + subject..     
-000048b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000048c0: 2020 2073 6967 6e20 3d20 222d 220d 0a20     sign = "-".. 
-000048d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000048e0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-000048f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004900: 2020 6272 6561 6b0d 0a20 2020 2020 2020    break..       
-00004910: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
-00004920: 6269 6e65 645f 6261 6c61 6e63 655b 6167  bined_balance[ag
-00004930: 656e 7432 5d5b 2249 7465 6d22 5d2e 6170  ent2]["Item"].ap
-00004940: 7065 6e64 286d 795f 6974 656d 290d 0a20  pend(my_item).. 
-00004950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004960: 2020 2063 6f6d 6269 6e65 645f 6261 6c61     combined_bala
-00004970: 6e63 655b 6167 656e 7432 5d5b 2241 7373  nce[agent2]["Ass
-00004980: 6574 7322 5d2e 6170 7065 6e64 2873 6967  ets"].append(sig
-00004990: 6e2b 6669 6c65 6461 7461 5b22 7175 616e  n+filedata["quan
-000049a0: 7469 7479 225d 2b22 5c6e 2229 0d0a 2020  tity"]+"\n")..  
-000049b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000049c0: 2020 636f 6d62 696e 6564 5f62 616c 616e    combined_balan
-000049d0: 6365 5b61 6765 6e74 325d 5b22 4c69 6162  ce[agent2]["Liab
-000049e0: 696c 6974 6965 7322 5d2e 6170 7065 6e64  ilities"].append
-000049f0: 2822 2229 0d0a 0d0a 0d0a 2020 2020 2020  ("")......      
-00004a00: 2020 2020 2020 2020 2020 666f 7220 6a20            for j 
-00004a10: 696e 206c 6961 6273 312e 7370 6c69 7428  in liabs1.split(
-00004a20: 225c 6e22 293a 0d0a 2020 2020 2020 2020  "\n"):..        
-00004a30: 2020 2020 2020 2020 2020 2020 6966 206a              if j
-00004a40: 2e73 7472 6970 2829 2e73 7461 7274 7377  .strip().startsw
-00004a50: 6974 6828 222b 2229 3a0d 0a20 2020 2020  ith("+"):..     
-00004a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004a70: 2020 206d 795f 6974 656d 203d 206a 2e73     my_item = j.s
-00004a80: 706c 6974 2822 2b22 295b 315d 202b 2073  plit("+")[1] + s
-00004a90: 7562 6a65 6374 0d0a 2020 2020 2020 2020  ubject..        
-00004aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004ab0: 7369 676e 203d 2022 2b22 0d0a 0d0a 2020  sign = "+"....  
-00004ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004ad0: 2020 656c 6966 206a 2e73 7472 6970 2829    elif j.strip()
-00004ae0: 2e73 7461 7274 7377 6974 6828 222d 2229  .startswith("-")
-00004af0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00004b00: 2020 2020 2020 2020 2020 206d 795f 6974             my_it
-00004b10: 656d 203d 206a 2e73 706c 6974 2822 2d22  em = j.split("-"
-00004b20: 295b 315d 202b 2073 7562 6a65 6374 0d0a  )[1] + subject..
-00004b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004b40: 2020 2020 2020 2020 7369 676e 203d 2022          sign = "
-00004b50: 2d22 0d0a 2020 2020 2020 2020 2020 2020  -"..            
-00004b60: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00004b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004b80: 2020 2020 2020 2062 7265 616b 0d0a 2020         break..  
-00004b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004ba0: 2020 636f 6d62 696e 6564 5f62 616c 616e    combined_balan
-00004bb0: 6365 5b61 6765 6e74 315d 5b22 4974 656d  ce[agent1]["Item
-00004bc0: 225d 2e61 7070 656e 6428 6d79 5f69 7465  "].append(my_ite
-00004bd0: 6d29 0d0a 2020 2020 2020 2020 2020 2020  m)..            
-00004be0: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
-00004bf0: 5f62 616c 616e 6365 5b61 6765 6e74 315d  _balance[agent1]
-00004c00: 5b22 4c69 6162 696c 6974 6965 7322 5d2e  ["Liabilities"].
-00004c10: 6170 7065 6e64 2873 6967 6e2b 6669 6c65  append(sign+file
-00004c20: 6461 7461 5b22 7175 616e 7469 7479 225d  data["quantity"]
-00004c30: 2b22 5c6e 2229 0d0a 2020 2020 2020 2020  +"\n")..        
-00004c40: 2020 2020 2020 2020 2020 2020 636f 6d62              comb
-00004c50: 696e 6564 5f62 616c 616e 6365 5b61 6765  ined_balance[age
-00004c60: 6e74 315d 5b22 4173 7365 7473 225d 2e61  nt1]["Assets"].a
-00004c70: 7070 656e 6428 2222 290d 0a0d 0a20 2020  ppend("")....   
-00004c80: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-00004c90: 206a 2069 6e20 6c69 6162 7332 2e73 706c   j in liabs2.spl
-00004ca0: 6974 2822 5c6e 2229 3a0d 0a20 2020 2020  it("\n"):..     
-00004cb0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00004cc0: 6620 6a2e 7374 7269 7028 292e 7374 6172  f j.strip().star
-00004cd0: 7473 7769 7468 2822 2b22 293a 0d0a 2020  tswith("+"):..  
-00004ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004cf0: 2020 2020 2020 6d79 5f69 7465 6d20 3d20        my_item = 
-00004d00: 6a2e 7370 6c69 7428 222b 2229 5b31 5d20  j.split("+")[1] 
-00004d10: 2b20 7375 626a 6563 740d 0a20 2020 2020  + subject..     
-00004d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004d30: 2020 2073 6967 6e20 3d20 222b 220d 0a0d     sign = "+"...
-00004d40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004d50: 2020 2020 2065 6c69 6620 6a2e 7374 7269       elif j.stri
-00004d60: 7028 292e 7374 6172 7473 7769 7468 2822  p().startswith("
-00004d70: 2d22 293a 0d0a 2020 2020 2020 2020 2020  -"):..          
-00004d80: 2020 2020 2020 2020 2020 2020 2020 6d79                my
-00004d90: 5f69 7465 6d20 3d20 6a2e 7370 6c69 7428  _item = j.split(
-00004da0: 222d 2229 5b31 5d20 2b20 7375 626a 6563  "-")[1] + subjec
-00004db0: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
-00004dc0: 2020 2020 2020 2020 2020 2073 6967 6e20             sign 
-00004dd0: 3d20 222d 220d 0a20 2020 2020 2020 2020  = "-"..         
-00004de0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00004df0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00004e00: 2020 2020 2020 2020 2020 6272 6561 6b0d            break.
-00004e10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00004e20: 2020 2020 2063 6f6d 6269 6e65 645f 6261       combined_ba
-00004e30: 6c61 6e63 655b 6167 656e 7432 5d5b 2249  lance[agent2]["I
-00004e40: 7465 6d22 5d2e 6170 7065 6e64 286d 795f  tem"].append(my_
-00004e50: 6974 656d 290d 0a20 2020 2020 2020 2020  item)..         
-00004e60: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
-00004e70: 6e65 645f 6261 6c61 6e63 655b 6167 656e  ned_balance[agen
-00004e80: 7432 5d5b 224c 6961 6269 6c69 7469 6573  t2]["Liabilities
-00004e90: 225d 2e61 7070 656e 6428 7369 676e 2b66  "].append(sign+f
-00004ea0: 696c 6564 6174 615b 2271 7561 6e74 6974  iledata["quantit
-00004eb0: 7922 5d2b 225c 6e22 290d 0a20 2020 2020  y"]+"\n")..     
-00004ec0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00004ed0: 6f6d 6269 6e65 645f 6261 6c61 6e63 655b  ombined_balance[
-00004ee0: 6167 656e 7432 5d5b 2241 7373 6574 7322  agent2]["Assets"
-00004ef0: 5d2e 6170 7065 6e64 2822 2229 0d0a 0d0a  ].append("")....
-00004f00: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00004f10: 7072 696e 7428 636f 6d62 696e 6564 5f62  print(combined_b
-00004f20: 616c 616e 6365 290d 0a0d 0a20 2020 2020  alance)....     
-00004f30: 2020 2020 2020 2064 6673 203d 205b 5d0d         dfs = [].
-00004f40: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00004f50: 206b 2c76 2069 6e20 636f 6d62 696e 6564   k,v in combined
-00004f60: 5f62 616c 616e 6365 2e69 7465 6d73 2829  _balance.items()
-00004f70: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00004f80: 2020 2064 7620 3d20 7064 2e44 6174 6146     dv = pd.DataF
-00004f90: 7261 6d65 2876 290d 0a20 2020 2020 2020  rame(v)..       
-00004fa0: 2020 2020 2020 2020 2064 7620 3d20 6476           dv = dv
-00004fb0: 2e72 656e 616d 6528 636f 6c75 6d6e 733d  .rename(columns=
-00004fc0: 7b22 4c69 6162 696c 6974 6965 7322 3a22  {"Liabilities":"
-00004fd0: 4c69 6162 696c 6974 6965 7320 2825 7329  Liabilities (%s)
-00004fe0: 2225 6b2c 2022 4173 7365 7473 223a 2022  "%k, "Assets": "
-00004ff0: 4173 7365 7473 2028 2573 2922 256b 7d29  Assets (%s)"%k})
-00005000: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00005010: 2020 2020 6966 206e 6f74 2064 6574 6169      if not detai
-00005020: 6c65 643a 0d0a 2020 2020 2020 2020 2020  led:..          
-00005030: 2020 2020 2020 2020 2020 6167 6772 6567            aggreg
-00005040: 6174 696f 6e5f 6675 6e63 7469 6f6e 7320  ation_functions 
-00005050: 3d20 7b7d 0d0a 2020 2020 2020 2020 2020  = {}..          
-00005060: 2020 2020 2020 2020 2020 666f 7220 636f            for co
-00005070: 6c20 696e 2064 762e 636f 6c75 6d6e 733a  l in dv.columns:
-00005080: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00005090: 2020 2020 2020 2020 2020 6966 2063 6f6c            if col
-000050a0: 203d 3d20 2249 7465 6d22 3a0d 0a20 2020   == "Item":..   
-000050b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000050c0: 2020 2020 2020 2020 2061 6767 7265 6761           aggrega
-000050d0: 7469 6f6e 5f66 756e 6374 696f 6e73 5b63  tion_functions[c
-000050e0: 6f6c 5d20 3d20 2266 6972 7374 220d 0a20  ol] = "first".. 
-000050f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005100: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00005110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005120: 2020 2020 2020 2020 2020 6167 6772 6567            aggreg
-00005130: 6174 696f 6e5f 6675 6e63 7469 6f6e 735b  ation_functions[
-00005140: 636f 6c5d 203d 2022 7375 6d22 0d0a 2020  col] = "sum"..  
-00005150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005160: 2020 6476 203d 2064 762e 6772 6f75 7062    dv = dv.groupb
-00005170: 7928 6476 5b27 4974 656d 275d 292e 6167  y(dv['Item']).ag
-00005180: 6772 6567 6174 6528 6167 6772 6567 6174  gregate(aggregat
-00005190: 696f 6e5f 6675 6e63 7469 6f6e 7329 0d0a  ion_functions)..
-000051a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000051b0: 2020 2020 6476 203d 2064 762e 6472 6f70      dv = dv.drop
-000051c0: 2863 6f6c 756d 6e73 3d22 4974 656d 2229  (columns="Item")
-000051d0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-000051e0: 2020 2020 6466 732e 6170 7065 6e64 2870      dfs.append(p
-000051f0: 642e 4461 7461 4672 616d 6528 6476 2929  d.DataFrame(dv))
-00005200: 0d0a 0d0a 0d0a 2020 2020 2020 2020 2020  ......          
-00005210: 2020 6466 203d 2070 642e 636f 6e63 6174    df = pd.concat
-00005220: 2864 6673 2c61 7869 733d 3129 2023 2c6b  (dfs,axis=1) #,k
-00005230: 6579 7320 3d63 6f6d 6269 6e65 645f 6261  eys =combined_ba
-00005240: 6c61 6e63 652e 6b65 7973 2829 290d 0a20  lance.keys()).. 
-00005250: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00005260: 2864 662e 746f 5f73 7472 696e 6728 2929  (df.to_string())
-00005270: 0d0a 2020 2020 2020 2020 2020 2020 6466  ..            df
-00005280: 203d 2064 662e 7265 706c 6163 6528 6e70   = df.replace(np
-00005290: 2e6e 616e 2c22 2229 0d0a 0d0a 0d0a 0d0a  .nan,"")........
-000052a0: 2020 2020 2020 2020 2020 2020 6d6f 6465              mode
-000052b0: 6c20 3d20 5061 6e64 6173 4d6f 6465 6c28  l = PandasModel(
-000052c0: 6466 290d 0a20 2020 2020 2020 2020 2020  df)..           
-000052d0: 206d 7669 6577 203d 204d 6174 7269 7856   mview = MatrixV
-000052e0: 6965 7765 7228 6d6f 6465 6c2c 7061 7265  iewer(model,pare
-000052f0: 6e74 3d73 656c 6629 0d0a 0d0a 2020 2020  nt=self)....    
-00005300: 2020 2020 2020 2020 2320 6d76 6965 772e          # mview.
-00005310: 7765 6256 6965 772e 7365 7448 746d 6c28  webView.setHtml(
-00005320: 6466 5f68 746d 6c29 0d0a 2020 2020 2020  df_html)..      
-00005330: 2020 2020 2020 6966 206e 6f74 2073 656c        if not sel
-00005340: 662e 7465 7374 5f6d 6f64 653a 0d0a 2020  f.test_mode:..  
-00005350: 2020 2020 2020 2020 2020 2020 2020 6d76                mv
-00005360: 6965 772e 7368 6f77 2829 0d0a 0d0a 2020  iew.show()....  
-00005370: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
-00005380: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
-00005390: 2020 2020 2020 2020 2020 7365 6c66 2e6e            self.n
-000053a0: 6f74 6966 7928 7469 746c 653d 2245 7272  otify(title="Err
-000053b0: 6f72 222c 6d65 7373 6167 653d 2245 7272  or",message="Err
-000053c0: 6f72 3a22 202b 2073 7472 2865 2929 0d0a  or:" + str(e))..
-000053d0: 0d0a 0d0a 2020 2020 6465 6620 6564 6974  ....    def edit
-000053e0: 5f6d 6169 6e6c 6f6f 7028 7365 6c66 293a  _mainloop(self):
-000053f0: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
-00005400: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-00005410: 7428 2273 656c 662e 6d61 696e 6c6f 6f70  t("self.mainloop
-00005420: 5f73 7472 222c 7365 6c66 2e6d 6169 6e6c  _str",self.mainl
-00005430: 6f6f 705f 7374 7229 0d0a 2020 2020 2020  oop_str)..      
-00005440: 2020 2020 2020 6c69 6e65 7320 3d20 7365        lines = se
-00005450: 6c66 2e6d 6169 6e6c 6f6f 705f 7374 720d  lf.mainloop_str.
-00005460: 0a0d 0a20 2020 2020 2020 2020 2020 206d  ...            m
-00005470: 795f 6564 6974 203d 204d 6169 6e4c 6f6f  y_edit = MainLoo
-00005480: 7045 6469 746f 7228 7061 7265 6e74 3d73  pEditor(parent=s
-00005490: 656c 662c 2074 6578 743d 6c69 6e65 7329  elf, text=lines)
-000054a0: 0d0a 2020 2020 2020 2020 2020 2020 6d79  ..            my
-000054b0: 5f65 6469 742e 7365 7453 7479 6c65 5368  _edit.setStyleSh
-000054c0: 6565 7428 7365 6c66 2e74 6865 6d65 5f6d  eet(self.theme_m
-000054d0: 616e 6167 6572 2e67 6574 5f62 6163 6b67  anager.get_backg
-000054e0: 726f 756e 645f 7374 796c 6528 2929 0d0a  round_style())..
-000054f0: 2020 2020 2020 2020 2020 2020 6d79 5f65              my_e
-00005500: 6469 742e 7365 7453 7479 6c65 5368 6565  dit.setStyleShee
-00005510: 7428 7365 6c66 2e74 6865 6d65 5f6d 616e  t(self.theme_man
-00005520: 6167 6572 2e67 6574 5f73 7479 6c65 7368  ager.get_stylesh
-00005530: 6565 7428 226d 6169 6e22 2929 0d0a 0d0a  eet("main"))....
-00005540: 2020 2020 2020 2020 6578 6365 7074 2045          except E
-00005550: 7863 6570 7469 6f6e 2061 7320 653a 0d0a  xception as e:..
-00005560: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00005570: 2e6e 6f74 6966 7928 7374 7228 6529 2c20  .notify(str(e), 
-00005580: 7469 746c 653d 2245 7272 6f72 2229 0d0a  title="Error")..
-00005590: 0d0a 2020 2020 6465 6620 7265 7374 6f72  ..    def restor
-000055a0: 655f 6f72 6967 696e 616c 5f73 697a 6528  e_original_size(
-000055b0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
-000055c0: 7365 6c66 2e73 6574 4669 7865 6453 697a  self.setFixedSiz
-000055d0: 6528 3138 3231 2c31 3031 3029 0d0a 2020  e(1821,1010)..  
-000055e0: 2020 2020 2020 7365 6c66 2e73 6574 4d61        self.setMa
-000055f0: 7869 6d75 6d53 697a 6528 3430 3030 302c  ximumSize(40000,
-00005600: 3430 3030 3029 0d0a 0d0a 2020 2020 6465  40000)....    de
-00005610: 6620 666c 6970 5f68 6569 6768 7428 7365  f flip_height(se
-00005620: 6c66 293a 0d0a 2020 2020 2020 2020 6966  lf):..        if
-00005630: 2073 656c 662e 666c 6970 7065 643a 0d0a   self.flipped:..
-00005640: 2020 2020 2020 2020 2020 2020 5720 3d20              W = 
-00005650: 7365 6c66 2e66 7261 6d65 4765 6f6d 6574  self.frameGeomet
-00005660: 7279 2829 2e77 6964 7468 2829 0d0a 2020  ry().width()..  
-00005670: 2020 2020 2020 2020 2020 4820 3d20 7365            H = se
-00005680: 6c66 2e66 7261 6d65 4765 6f6d 6574 7279  lf.frameGeometry
-00005690: 2829 2e68 6569 6768 7428 290d 0a0d 0a20  ().height().... 
-000056a0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000056b0: 7365 744d 696e 696d 756d 5369 7a65 2873  setMinimumSize(s
-000056c0: 656c 662e 6c61 7374 5f77 6964 7468 2c73  elf.last_width,s
-000056d0: 656c 662e 6c61 7374 5f68 6569 6768 7429  elf.last_height)
-000056e0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-000056f0: 7365 6c66 2e73 6574 4d61 7869 6d75 6d53  self.setMaximumS
-00005700: 697a 6528 7365 6c66 2e6c 6173 745f 7769  ize(self.last_wi
-00005710: 6474 682c 7365 6c66 2e6c 6173 745f 6865  dth,self.last_he
-00005720: 6967 6874 290d 0a20 2020 2020 2020 2020  ight)..         
-00005730: 2020 2073 656c 662e 7365 744d 6178 696d     self.setMaxim
-00005740: 756d 5369 7a65 2834 3030 3030 2c34 3030  umSize(40000,400
-00005750: 3030 290d 0a20 2020 2020 2020 2020 2020  00)..           
-00005760: 2023 2073 656c 662e 7365 744d 696e 696d   # self.setMinim
-00005770: 756d 5369 7a65 2834 3030 2c34 3030 290d  umSize(400,400).
-00005780: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-00005790: 2057 203d 2073 656c 662e 6672 616d 6547   W = self.frameG
-000057a0: 656f 6d65 7472 7928 292e 7769 6474 6828  eometry().width(
-000057b0: 290d 0a20 2020 2020 2020 2020 2020 2023  )..            #
-000057c0: 2073 656c 662e 466c 6970 4865 6967 6874   self.FlipHeight
-000057d0: 4275 7474 6f6e 2e73 6574 4765 6f6d 6574  Button.setGeomet
-000057e0: 7279 2869 6e74 2857 292d 3831 2d32 352c  ry(int(W)-81-25,
-000057f0: 352c 3831 2c32 3129 0d0a 0d0a 2020 2020  5,81,21)....    
-00005800: 2020 2020 2020 2020 7365 6c66 2e66 6c69          self.fli
-00005810: 7070 6564 203d 2046 616c 7365 0d0a 2020  pped = False..  
-00005820: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
-00005830: 2020 2020 2020 2020 2057 203d 2073 656c           W = sel
-00005840: 662e 6672 616d 6547 656f 6d65 7472 7928  f.frameGeometry(
-00005850: 292e 7769 6474 6828 290d 0a20 2020 2020  ).width()..     
-00005860: 2020 2020 2020 2048 203d 2073 656c 662e         H = self.
-00005870: 6672 616d 6547 656f 6d65 7472 7928 292e  frameGeometry().
-00005880: 6865 6967 6874 2829 0d0a 2020 2020 2020  height()..      
-00005890: 2020 2020 2020 7365 6c66 2e6c 6173 745f        self.last_
-000058a0: 7769 6474 6820 3d20 570d 0a20 2020 2020  width = W..     
-000058b0: 2020 2020 2020 2073 656c 662e 6c61 7374         self.last
-000058c0: 5f68 6569 6768 7420 3d20 480d 0a0d 0a20  _height = H.... 
-000058d0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000058e0: 7365 7446 6978 6564 5369 7a65 2838 3030  setFixedSize(800
-000058f0: 2c37 3029 0d0a 0d0a 2020 2020 2020 2020  ,70)....        
-00005900: 2020 2020 2357 203d 2073 656c 662e 6672      #W = self.fr
-00005910: 616d 6547 656f 6d65 7472 7928 292e 7769  ameGeometry().wi
-00005920: 6474 6828 290d 0a20 2020 2020 2020 2020  dth()..         
-00005930: 2020 2023 7365 6c66 2e46 6c69 7048 6569     #self.FlipHei
-00005940: 6768 7442 7574 746f 6e2e 7365 7447 656f  ghtButton.setGeo
-00005950: 6d65 7472 7928 696e 7428 5729 2d38 312d  metry(int(W)-81-
-00005960: 3235 2c35 2c38 312c 3231 290d 0a0d 0a20  25,5,81,21).... 
-00005970: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00005980: 666c 6970 7065 6420 3d20 5472 7565 0d0a  flipped = True..
-00005990: 0d0a 0d0a 2020 2020 6465 6620 6368 616e  ....    def chan
-000059a0: 6765 5f61 6c65 7274 2873 656c 6629 3a0d  ge_alert(self):.
-000059b0: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
-000059c0: 6465 5f63 6861 6e67 6573 203d 2054 7275  de_changes = Tru
-000059d0: 650d 0a20 2020 2020 2020 2023 2073 656c  e..        # sel
-000059e0: 662e 7564 7061 7465 4275 7474 6f6e 2e73  f.udpateButton.s
-000059f0: 6574 5465 7874 2822 5570 6461 7465 2056  etText("Update V
-00005a00: 616c 7565 7320 2a22 290d 0a0d 0a20 2020  alues *")....   
-00005a10: 2064 6566 2073 686f 775f 6f75 7470 7574   def show_output
-00005a20: 5f64 6973 706c 6179 2873 656c 6629 3a0d  _display(self):.
-00005a30: 0a20 2020 2020 2020 2023 2073 686f 7773  .        # shows
-00005a40: 2074 6865 206c 6f67 6765 7220 6469 7370   the logger disp
-00005a50: 6c61 7920 666f 7220 6f75 7470 7574 2071  lay for output q
-00005a60: 7561 6e74 6974 6965 730d 0a0d 0a20 2020  uantities....   
-00005a70: 2020 2020 2074 7279 3a0d 0a0d 0a20 2020       try:....   
-00005a80: 2020 2020 2020 2020 2070 6174 6820 3d20           path = 
-00005a90: 6f73 2e70 6174 682e 6469 726e 616d 6528  os.path.dirname(
-00005aa0: 7365 6c66 2e63 7572 7265 6e74 5f66 696c  self.current_fil
-00005ab0: 6529 2b22 2f6f 7574 7075 742f 220d 0a20  e)+"/output/".. 
-00005ac0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00005ad0: 2822 5b44 4542 5547 204d 4553 5341 4745  ("[DEBUG MESSAGE
-00005ae0: 5d20 6f70 656e 206f 7574 7075 7420 6469  ] open output di
-00005af0: 7370 6c61 7920 696e 2070 6174 6822 2c20  splay in path", 
-00005b00: 7061 7468 290d 0a0d 0a20 2020 2020 2020  path)....       
-00005b10: 2020 2020 206f 7574 7075 745f 6469 7370       output_disp
-00005b20: 6c61 7920 3d20 4f75 7470 7574 4469 7370  lay = OutputDisp
-00005b30: 6c61 7928 7365 6c66 2c70 6174 6820 3d20  lay(self,path = 
-00005b40: 7061 7468 290d 0a20 2020 2020 2020 2065  path)..        e
-00005b50: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
-00005b60: 6173 2065 3a0d 0a20 2020 2020 2020 2020  as e:..         
-00005b70: 2020 2073 656c 662e 6e6f 7469 6679 2873     self.notify(s
-00005b80: 7472 2865 292c 7469 746c 653d 2245 7272  tr(e),title="Err
-00005b90: 6f72 2229 0d0a 0d0a 0d0a 0d0a 2020 2020  or")........    
-00005ba0: 6465 6620 7361 7665 5f61 6e64 5f62 7569  def save_and_bui
-00005bb0: 6c64 2873 656c 6629 3a0d 0a0d 0a20 2020  ld(self):....   
-00005bc0: 2020 2020 2023 202d 2d20 6372 6561 7465       # -- create
-00005bd0: 206e 6577 2073 7461 7475 7320 7369 676e   new status sign
-00005be0: 616c 0d0a 0d0a 2020 2020 2020 2020 7365  al....        se
-00005bf0: 6c66 2e77 6f72 6b65 722e 7377 6974 6368  lf.worker.switch
-00005c00: 5f73 7461 7465 2829 0d0a 2020 2020 2020  _state()..      
-00005c10: 2020 2320 2d2d 2d0d 0a0d 0a20 2020 2020    # ---....     
-00005c20: 2020 2073 656c 662e 7361 7665 2829 0d0a     self.save()..
-00005c30: 0d0a 2020 2020 2020 2020 6120 3d20 5b5d  ..        a = []
-00005c40: 0d0a 2020 2020 2020 2020 666f 7220 6365  ..        for ce
-00005c50: 2069 6e20 436f 6465 4564 6974 6f72 2e69   in CodeEditor.i
-00005c60: 6e73 7461 6e63 6573 2e76 616c 7565 7328  nstances.values(
-00005c70: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00005c80: 6e61 6d65 7320 3d20 6365 2e73 6176 655f  names = ce.save_
-00005c90: 616e 645f 6275 696c 6428 290d 0a20 2020  and_build()..   
-00005ca0: 2020 2020 2020 2020 2069 6620 6e61 6d65           if name
-00005cb0: 7320 6973 206e 6f74 204e 6f6e 653a 0d0a  s is not None:..
-00005cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005cd0: 612e 6170 7065 6e64 286e 616d 6573 290d  a.append(names).
-00005ce0: 0a0d 0a20 2020 2020 2020 2066 6f72 2061  ...        for a
-00005cf0: 6920 696e 2061 3a0d 0a20 2020 2020 2020  i in a:..       
-00005d00: 2020 2020 2069 6620 6169 5b30 5d20 696e       if ai[0] in
-00005d10: 2043 6f64 6545 6469 746f 722e 696e 7374   CodeEditor.inst
-00005d20: 616e 6365 733a 0d0a 2020 2020 2020 2020  ances:..        
-00005d30: 2020 2020 2020 2020 436f 6465 4564 6974          CodeEdit
-00005d40: 6f72 2e69 6e73 7461 6e63 6573 5b61 695b  or.instances[ai[
-00005d50: 305d 5d20 3d20 4e6f 6e65 0d0a 2020 2020  0]] = None..    
-00005d60: 2020 2020 2020 2020 2020 2020 6465 6c20              del 
-00005d70: 436f 6465 4564 6974 6f72 2e69 6e73 7461  CodeEditor.insta
-00005d80: 6e63 6573 5b61 695b 305d 5d0d 0a20 2020  nces[ai[0]]..   
-00005d90: 2020 2020 2020 2020 2043 6f64 6545 6469           CodeEdi
-00005da0: 746f 722e 696e 7374 616e 6365 735b 6169  tor.instances[ai
-00005db0: 5b31 5d5d 203d 2061 695b 325d 0d0a 0d0a  [1]] = ai[2]....
-00005dc0: 2020 2020 2020 2020 7072 696e 7428 225c          print("\
-00005dd0: 6e4e 4557 2049 4e53 5441 4e43 4553 5c6e  nNEW INSTANCES\n
-00005de0: 222c 2043 6f64 6545 6469 746f 722e 696e  ", CodeEditor.in
-00005df0: 7374 616e 6365 7329 0d0a 0d0a 0d0a 2020  stances)......  
-00005e00: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
-00005e10: 2020 2020 2020 2020 7365 6c66 2e62 7569          self.bui
-00005e20: 6c64 5f70 726f 6a65 6374 2873 696c 656e  ld_project(silen
-00005e30: 743d 5472 7565 290d 0a20 2020 2020 2020  t=True)..       
-00005e40: 2020 2020 2073 656c 662e 7374 6174 7573       self.status
-00005e50: 4261 7228 292e 7368 6f77 4d65 7373 6167  Bar().showMessag
-00005e60: 6528 2253 6176 6564 2022 202b 2073 656c  e("Saved " + sel
-00005e70: 662e 6375 7272 656e 745f 6669 6c65 290d  f.current_file).
-00005e80: 0a0d 0a20 2020 2020 2020 2065 7863 6570  ...        excep
-00005e90: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
-00005ea0: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
-00005eb0: 2073 656c 662e 6e6f 7469 6679 2873 7472   self.notify(str
-00005ec0: 2865 292c 7469 746c 653d 2245 7863 6570  (e),title="Excep
-00005ed0: 7469 6f6e 2229 0d0a 2020 2020 2020 2020  tion")..        
-00005ee0: 2020 2020 7072 696e 7428 7374 7228 6529      print(str(e)
-00005ef0: 290d 0a0d 0a0d 0a0d 0a20 2020 2064 6566  )........    def
-00005f00: 2072 756e 5f70 726f 6a65 6374 2873 656c   run_project(sel
-00005f10: 6629 3a0d 0a0d 0a20 2020 2020 2020 2073  f):....        s
-00005f20: 656c 662e 7361 7665 5f61 6e64 5f62 7569  elf.save_and_bui
-00005f30: 6c64 2829 0d0a 0d0a 2020 2020 2020 2020  ld()....        
-00005f40: 2320 7365 6c66 2e73 686f 775f 6f75 7470  # self.show_outp
-00005f50: 7574 5f64 6973 706c 6179 2829 0d0a 0d0a  ut_display()....
-00005f60: 2020 2020 2020 2020 7365 6c66 2e73 6574          self.set
-00005f70: 4375 7273 6f72 2851 742e 5761 6974 4375  Cursor(Qt.WaitCu
-00005f80: 7273 6f72 290d 0a0d 0a20 2020 2020 2020  rsor)....       
-00005f90: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-00005fa0: 2020 2023 2073 656c 662e 7461 6257 6964     # self.tabWid
-00005fb0: 6765 742e 7365 7443 7572 7265 6e74 496e  get.setCurrentIn
-00005fc0: 6465 7828 3129 0d0a 0d0a 2020 2020 2020  dex(1)....      
-00005fd0: 2020 2020 2020 2366 696c 656e 616d 6520        #filename 
-00005fe0: 3d20 6f73 2e70 6174 682e 6469 726e 616d  = os.path.dirnam
-00005ff0: 6528 7365 6c66 2e63 7572 7265 6e74 5f66  e(self.current_f
-00006000: 696c 6529 202b 2022 2f70 7974 686f 6e5f  ile) + "/python_
-00006010: 636f 6465 2f6d 6169 6e6c 6f6f 702e 7079  code/mainloop.py
-00006020: 220d 0a20 2020 2020 2020 2020 2020 2066  "..            f
-00006030: 696c 656e 616d 6520 3d20 6f73 2e70 6174  ilename = os.pat
-00006040: 682e 6469 726e 616d 6528 7365 6c66 2e63  h.dirname(self.c
-00006050: 7572 7265 6e74 5f66 696c 6529 202b 2022  urrent_file) + "
-00006060: 2f72 756e 6e65 722e 7079 220d 0a20 2020  /runner.py"..   
-00006070: 2020 2020 2020 2020 2066 6f6c 6465 7220           folder 
-00006080: 3d20 6f73 2e70 6174 682e 6469 726e 616d  = os.path.dirnam
-00006090: 6528 7365 6c66 2e63 7572 7265 6e74 5f66  e(self.current_f
-000060a0: 696c 6529 202b 2022 2f22 0d0a 0d0a 2020  ile) + "/"....  
-000060b0: 2020 2020 2020 2020 2020 6966 2022 2022            if " "
-000060c0: 2069 6e20 6669 6c65 6e61 6d65 206f 7220   in filename or 
-000060d0: 2220 2220 696e 2066 6f6c 6465 723a 0d0a  " " in folder:..
-000060e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000060f0: 7365 6c66 2e6e 6f74 6966 7928 7469 746c  self.notify(titl
-00006100: 653d 2249 6e76 616c 6964 2066 696c 6520  e="Invalid file 
-00006110: 6e61 6d65 222c 206d 6573 7361 6765 3d22  name", message="
-00006120: 5468 6572 6520 6172 6520 7370 6163 6573  There are spaces
-00006130: 2069 6e20 796f 7572 2066 6f6c 6465 7220   in your folder 
-00006140: 6f72 2066 696c 6520 6e61 6d65 2e20 5468  or file name. Th
-00006150: 6973 206d 6967 6874 2063 6175 7365 2070  is might cause p
-00006160: 726f 626c 656d 732e 2229 0d0a 0d0a 2020  roblems.")....  
-00006170: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-00006180: 226c 6f6f 6b75 7022 2c20 6669 6c65 6e61  "lookup", filena
-00006190: 6d65 2c20 2269 6e22 2c20 666f 6c64 6572  me, "in", folder
-000061a0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-000061b0: 206f 6c64 5f64 6972 203d 206f 732e 6765   old_dir = os.ge
-000061c0: 7463 7764 2829 0d0a 2020 2020 2020 2020  tcwd()..        
-000061d0: 2020 2020 2320 7072 696e 7428 226f 6c64      # print("old
-000061e0: 5f64 6972 222c 6f6c 645f 6469 7229 0d0a  _dir",old_dir)..
-000061f0: 0d0a 2020 2020 2020 2020 2020 2020 6f73  ..            os
-00006200: 2e63 6864 6972 2866 6f6c 6465 7229 0d0a  .chdir(folder)..
-00006210: 2020 2020 2020 2020 2020 2020 636d 6420              cmd 
-00006220: 3d20 2263 6f6e 6461 2061 6374 6976 6174  = "conda activat
-00006230: 6520 6174 7475 6e65 202f 6b20 7079 7468  e attune /k pyth
-00006240: 6f6e 2025 7322 2025 2066 696c 656e 616d  on %s" % filenam
-00006250: 650d 0a20 2020 2020 2020 2020 2020 2070  e..            p
-00006260: 7269 6e74 2822 434f 4d4d 414e 4422 2c20  rint("COMMAND", 
-00006270: 636d 6429 0d0a 2020 2020 2020 2020 2020  cmd)..          
-00006280: 2020 6f73 2e73 7973 7465 6d28 2273 7461    os.system("sta
-00006290: 7274 2063 6d64 2020 2020 2025 7322 2025  rt cmd     %s" %
-000062a0: 2063 6d64 290d 0a0d 0a20 2020 2020 2020   cmd)....       
-000062b0: 2020 2020 206f 732e 6368 6469 7228 6f6c       os.chdir(ol
-000062c0: 645f 6469 7229 0d0a 0d0a 2020 2020 2020  d_dir)....      
-000062d0: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
-000062e0: 6f6e 2061 7320 653a 0d0a 0d0a 2020 2020  on as e:....    
-000062f0: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
-00006300: 6966 7928 7374 7228 6529 2c74 6974 6c65  ify(str(e),title
-00006310: 3d22 2229 0d0a 2020 2020 2020 2020 2020  ="")..          
-00006320: 2020 7365 6c66 2e73 6574 4375 7273 6f72    self.setCursor
-00006330: 2851 742e 4172 726f 7743 7572 736f 7229  (Qt.ArrowCursor)
-00006340: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
-00006350: 2e73 6574 4375 7273 6f72 2851 742e 4172  .setCursor(Qt.Ar
-00006360: 726f 7743 7572 736f 7229 0d0a 0d0a 2020  rowCursor)....  
-00006370: 2020 6465 6620 6275 696c 645f 7072 6f6a    def build_proj
-00006380: 6563 7428 7365 6c66 2c73 696c 656e 743d  ect(self,silent=
-00006390: 4661 6c73 652c 6f76 6572 7772 6974 653d  False,overwrite=
-000063a0: 4661 6c73 6529 3a0d 0a0d 0a20 2020 2020  False):....     
-000063b0: 2020 2023 666f 6c64 6572 203d 2051 4669     #folder = QFi
-000063c0: 6c65 4469 616c 6f67 2e67 6574 4578 6973  leDialog.getExis
-000063d0: 7469 6e67 4469 7265 6374 6f72 7920 2873  tingDirectory (s
-000063e0: 656c 662c 2027 4275 696c 6420 5072 6f6a  elf, 'Build Proj
-000063f0: 6563 742e 2e2e 272c 206f 732e 6765 7463  ect...', os.getc
-00006400: 7764 2829 290d 0a0d 0a20 2020 2020 2020  wd())....       
-00006410: 2069 6620 7365 6c66 2e63 7572 7265 6e74   if self.current
-00006420: 5f66 696c 6520 6973 204e 6f6e 653a 0d0a  _file is None:..
-00006430: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00006440: 2e6e 6f74 6966 7928 6d65 7373 6167 653d  .notify(message=
-00006450: 2243 616e 6e6f 7420 6275 696c 6420 7072  "Cannot build pr
-00006460: 6f6a 6563 742e 2050 6c65 6173 6520 7361  oject. Please sa
-00006470: 7665 2074 6f20 6669 6c65 2066 6972 7374  ve to file first
-00006480: 2e22 2c74 6974 6c65 3d22 4572 726f 7222  .",title="Error"
-00006490: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
-000064a0: 6574 7572 6e0d 0a0d 0a20 2020 2020 2020  eturn....       
-000064b0: 2066 6f6c 6465 7220 3d20 6f73 2e70 6174   folder = os.pat
-000064c0: 682e 6469 726e 616d 6528 7365 6c66 2e63  h.dirname(self.c
-000064d0: 7572 7265 6e74 5f66 696c 6529 0d0a 2020  urrent_file)..  
-000064e0: 2020 2020 2020 7072 696e 7428 2262 7569        print("bui
-000064f0: 6c64 2070 726f 6a65 6374 2069 6e20 222c  ld project in ",
-00006500: 2066 6f6c 6465 7229 0d0a 0d0a 2020 2020   folder)....    
-00006510: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-00006520: 2020 2020 2020 6f73 2e6d 6b64 6972 2866        os.mkdir(f
-00006530: 6f6c 6465 7220 2b20 222f 6d61 6d62 615f  older + "/mamba_
-00006540: 636f 6465 2f22 290d 0a20 2020 2020 2020  code/")..       
-00006550: 2065 7863 6570 743a 0d0a 2020 2020 2020   except:..      
-00006560: 2020 2020 2020 7061 7373 0d0a 0d0a 2020        pass....  
-00006570: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
-00006580: 2020 2020 2020 2020 6f73 2e6d 6b64 6972          os.mkdir
-00006590: 2866 6f6c 6465 7220 2b20 222f 7079 7468  (folder + "/pyth
-000065a0: 6f6e 5f63 6f64 652f 2229 0d0a 2020 2020  on_code/")..    
-000065b0: 2020 2020 6578 6365 7074 3a0d 0a20 2020      except:..   
-000065c0: 2020 2020 2020 2020 2070 6173 730d 0a0d           pass...
-000065d0: 0a20 2020 2020 2020 2074 7279 3a0d 0a20  .        try:.. 
-000065e0: 2020 2020 2020 2020 2020 206f 732e 6d6b             os.mk
-000065f0: 6469 7228 666f 6c64 6572 202b 2022 2f6f  dir(folder + "/o
-00006600: 7574 7075 742f 2229 0d0a 2020 2020 2020  utput/")..      
-00006610: 2020 6578 6365 7074 3a0d 0a20 2020 2020    except:..     
-00006620: 2020 2020 2020 2070 6173 730d 0a0d 0a20         pass.... 
-00006630: 2020 2020 2020 2074 7279 3a0d 0a0d 0a20         try:.... 
-00006640: 2020 2020 2020 2020 2020 2066 6f72 2061             for a
-00006650: 6765 6e74 2c20 636f 6465 2069 6e20 7365  gent, code in se
-00006660: 6c66 2e64 7261 7763 616e 7661 732e 636f  lf.drawcanvas.co
-00006670: 6465 5f64 6174 612e 6974 656d 7328 293a  de_data.items():
-00006680: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00006690: 2020 6966 2061 6765 6e74 2069 6e20 436f    if agent in Co
-000066a0: 6465 4564 6974 6f72 2e69 6e73 7461 6e63  deEditor.instanc
-000066b0: 6573 3a20 2320 6f6e 6c79 2063 6f6e 7665  es: # only conve
-000066c0: 7274 2065 6469 7465 6420 636f 6465 0d0a  rt edited code..
-000066d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000066e0: 2020 2020 2020 2320 7772 6974 6520 6d61        # write ma
-000066f0: 6d62 6120 636f 6465 2066 6f72 2063 6f6d  mba code for com
-00006700: 706c 6574 656e 6573 730d 0a20 2020 2020  pleteness..     
-00006710: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00006720: 6174 6820 3d20 666f 6c64 6572 202b 2022  ath = folder + "
-00006730: 2f6d 616d 6261 5f63 6f64 652f 2573 2e70  /mamba_code/%s.p
-00006740: 7922 2025 2061 6765 6e74 2023 2066 6f72  y" % agent # for
-00006750: 6d65 7220 2e74 7874 0d0a 0d0a 2020 2020  mer .txt....    
-00006760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006770: 7072 696e 7428 2270 6174 6822 2c70 6174  print("path",pat
-00006780: 6829 0d0a 0d0a 2020 2020 2020 2020 2020  h)....          
-00006790: 2020 2020 2020 2020 2020 7769 7468 206f            with o
-000067a0: 7065 6e28 7061 7468 2c20 2277 2229 2061  pen(path, "w") a
-000067b0: 7320 6669 6c65 3a0d 0a20 2020 2020 2020  s file:..       
-000067c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000067d0: 2066 696c 652e 7772 6974 6528 636f 6465   file.write(code
-000067e0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-000067f0: 2020 2020 2020 2020 2023 2077 7269 7465           # write
-00006800: 2070 7974 686f 6e20 636f 6465 0d0a 2020   python code..  
-00006810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006820: 2020 7061 7468 203d 2066 6f6c 6465 7220    path = folder 
-00006830: 2b20 222f 7079 7468 6f6e 5f63 6f64 652f  + "/python_code/
-00006840: 2573 2e70 7922 2025 2061 6765 6e74 2e6c  %s.py" % agent.l
-00006850: 6f77 6572 2829 0d0a 0d0a 2020 2020 2020  ower()....      
-00006860: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-00006870: 696e 7428 2270 6174 6822 2c70 6174 6829  int("path",path)
-00006880: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00006890: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
-000068a0: 6e28 7061 7468 2c20 2277 2229 2061 7320  n(path, "w") as 
-000068b0: 6669 6c65 3a0d 0a20 2020 2020 2020 2020  file:..         
-000068c0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
-000068d0: 6577 5f63 6f64 6520 3d20 636f 6e76 6572  ew_code = conver
-000068e0: 745f 636f 6465 2863 6f64 652e 7370 6c69  t_code(code.spli
-000068f0: 7428 225c 6e22 2929 5b30 5d0d 0a20 2020  t("\n"))[0]..   
-00006900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006910: 2020 2020 206e 6577 5f63 6f64 6520 3d20       new_code = 
-00006920: 6e65 775f 636f 6465 2e65 6e63 6f64 6528  new_code.encode(
-00006930: 2275 7466 2d38 2229 2e64 6563 6f64 6528  "utf-8").decode(
-00006940: 2763 7031 3235 3227 290d 0a20 2020 2020  'cp1252')..     
-00006950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006960: 2020 2066 696c 652e 7772 6974 6528 6e65     file.write(ne
-00006970: 775f 636f 6465 2920 2320 636f 6e76 6572  w_code) # conver
-00006980: 7420 7573 696e 6720 7468 6520 6d61 6d62  t using the mamb
-00006990: 6120 696e 7465 7270 7265 7465 720d 0a0d  a interpreter...
-000069a0: 0a20 2020 2020 2020 2020 2020 2023 2077  .            # w
-000069b0: 7269 7465 2073 6574 7469 6e67 7320 6669  rite settings fi
-000069c0: 6c65 0d0a 2020 2020 2020 2020 2020 2020  le..            
-000069d0: 7769 7468 206f 7065 6e28 666f 6c64 6572  with open(folder
-000069e0: 202b 2022 2f73 6574 7469 6e67 732e 796d   + "/settings.ym
-000069f0: 6c22 2c22 7722 2920 6173 2066 696c 653a  l","w") as file:
-00006a00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00006a10: 2020 6669 6c65 2e77 7269 7465 2873 656c    file.write(sel
-00006a20: 662e 7365 7474 696e 6773 5f73 7472 290d  f.settings_str).
-00006a30: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-00006a40: 2077 7269 7465 2074 6865 2072 756e 6e65   write the runne
-00006a50: 7220 6669 6c65 0d0a 2020 2020 2020 2020  r file..        
-00006a60: 2020 2020 6966 2073 656c 662e 6d61 696e      if self.main
-00006a70: 6c6f 6f70 5f73 7472 203d 3d20 2222 206f  loop_str == "" o
-00006a80: 7220 6f76 6572 7772 6974 653a 0d0a 2020  r overwrite:..  
-00006a90: 2020 2020 2020 2020 2020 2020 2020 7769                wi
-00006aa0: 7468 206f 7065 6e28 666f 6c64 6572 2b22  th open(folder+"
-00006ab0: 2f72 756e 6e65 722e 7079 222c 2277 2229  /runner.py","w")
-00006ac0: 2061 7320 6669 6c65 3a0d 0a20 2020 2020   as file:..     
-00006ad0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00006ae0: 696c 652e 7772 6974 6528 2266 726f 6d20  ile.write("from 
-00006af0: 7079 7468 6f6e 5f63 6f64 652e 6d61 696e  python_code.main
-00006b00: 6c6f 6f70 2069 6d70 6f72 7420 7275 6e5c  loop import run\
-00006b10: 6e5c 6e72 756e 2829 5c6e 2229 0d0a 0d0a  n\nrun()\n")....
-00006b20: 2020 2020 2020 2020 2020 2020 2320 7772              # wr
-00006b30: 6974 6520 6d61 696e 2073 696d 756c 6174  ite main simulat
-00006b40: 696f 6e20 6669 6c65 0d0a 2020 2020 2020  ion file..      
-00006b50: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
-00006b60: 666f 6c64 6572 202b 2022 2f70 7974 686f  folder + "/pytho
-00006b70: 6e5f 636f 6465 2f6d 6169 6e6c 6f6f 702e  n_code/mainloop.
-00006b80: 7079 222c 2277 2229 2061 7320 6669 6c65  py","w") as file
-00006b90: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
-00006ba0: 7769 7468 206f 7065 6e28 666f 6c64 6572  with open(folder
-00006bb0: 202b 2022 2e2f 6d61 696e 6c6f 6f70 2e70   + "./mainloop.p
-00006bc0: 7922 2c22 7722 2920 6173 2066 696c 653a  y","w") as file:
-00006bd0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00006be0: 2020 6966 2073 656c 662e 6d61 696e 6c6f    if self.mainlo
-00006bf0: 6f70 5f73 7472 203d 3d20 2222 206f 7220  op_str == "" or 
-00006c00: 6f76 6572 7772 6974 653a 0d0a 0d0a 2020  overwrite:....  
-00006c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006c20: 2020 6966 206f 7665 7277 7269 7465 3a0d    if overwrite:.
-00006c30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00006c40: 2020 2020 2020 2020 2079 6573 203d 2073           yes = s
-00006c50: 656c 662e 6173 6b5f 7175 6573 7469 6f6e  elf.ask_question
-00006c60: 2827 272c 2022 5741 524e 494e 4720 2d20  ('', "WARNING - 
-00006c70: 596f 7520 6172 6520 6162 6f75 7420 746f  You are about to
-00006c80: 2063 7265 6174 6520 6120 6672 6573 6820   create a fresh 
-00006c90: 6d61 696e 2073 6372 6970 742e 2054 6869  main script. Thi
-00006ca0: 7320 636f 756c 6420 706f 7465 6e74 6961  s could potentia
-00006cb0: 6c6c 7920 6f76 6572 7772 6974 6520 7072  lly overwrite pr
-00006cc0: 6576 696f 7573 2076 6572 7369 6f6e 7320  evious versions 
-00006cd0: 2869 6620 616e 7929 2e5c 6e54 6869 7320  (if any).\nThis 
-00006ce0: 6f70 6572 6174 696f 6e20 6361 6e6e 6f74  operation cannot
-00006cf0: 2062 6520 7265 7665 7274 6564 2e20 436f   be reverted. Co
-00006d00: 6e74 696e 7565 3f22 290d 0a20 2020 2020  ntinue?")..     
-00006d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006d20: 2020 2069 6620 6e6f 7420 7965 733a 0d0a     if not yes:..
-00006d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006d40: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00006d50: 726e 0d0a 0d0a 2020 2020 2020 2020 2020  rn....          
-00006d60: 2020 2020 2020 2020 2020 6966 206f 7665            if ove
-00006d70: 7277 7269 7465 2061 6e64 2073 656c 662e  rwrite and self.
-00006d80: 6d61 696e 6c6f 6f70 5f73 7472 2021 3d20  mainloop_str != 
-00006d90: 2222 3a0d 0a20 2020 2020 2020 2020 2020  "":..           
-00006da0: 2020 2020 2020 2020 2020 2020 2077 6974               wit
-00006db0: 6820 6f70 656e 2866 6f6c 6465 7220 2b20  h open(folder + 
-00006dc0: 222f 7079 7468 6f6e 5f63 6f64 652f 6d61  "/python_code/ma
-00006dd0: 696e 6c6f 6f70 5f62 6163 6b75 702e 7079  inloop_backup.py
-00006de0: 222c 2277 2229 2061 7320 6261 636b 7570  ","w") as backup
-00006df0: 6669 6c65 3a0d 0a20 2020 2020 2020 2020  file:..         
-00006e00: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00006e10: 7769 7468 206f 7065 6e28 666f 6c64 6572  with open(folder
-00006e20: 202b 2022 2e2f 6d61 696e 6c6f 6f70 5f62   + "./mainloop_b
-00006e30: 6163 6b75 702e 7079 222c 2277 2229 2061  ackup.py","w") a
-00006e40: 7320 6261 636b 7570 6669 6c65 3a0d 0a20  s backupfile:.. 
-00006e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006e60: 2020 2020 2020 2020 2020 2062 6163 6b75             backu
-00006e70: 7066 696c 652e 7772 6974 6528 7365 6c66  pfile.write(self
-00006e80: 2e6d 6169 6e6c 6f6f 705f 7374 722e 7265  .mainloop_str.re
-00006e90: 706c 6163 6528 225c 7422 2c22 2020 2020  place("\t","    
-00006ea0: 2229 290d 0a0d 0a20 2020 2020 2020 2020  "))....         
-00006eb0: 2020 2020 2020 2020 2020 2073 696d 755f             simu_
-00006ec0: 7374 7220 3d20 2222 220d 0a5c 225c 225c  str = """..\"\"\
-00006ed0: 220d 0a54 6869 7320 7468 6520 6d61 696e  "..This the main
-00006ee0: 2041 424d 2053 696d 756c 6174 696f 6e20   ABM Simulation 
-00006ef0: 6669 6c65 0d0a 4372 6574 6165 6420 7769  file..Cretaed wi
-00006f00: 7468 204d 414d 4241 2047 5549 0d0a 0d0a  th MAMBA GUI....
-00006f10: 4061 7574 686f 723a 203c 596f 7572 206e  @author: <Your n
-00006f20: 616d 653e 0d0a 4064 6174 653a 203c 596f  ame>..@date: <Yo
-00006f30: 7572 2064 6174 653e 0d0a 5c22 5c22 5c22  ur date>..\"\"\"
-00006f40: 0d0a 0d0a 6672 6f6d 2073 6663 746f 6f6c  ....from sfctool
-00006f50: 7320 696d 706f 7274 2041 6765 6e74 2c20  s import Agent, 
-00006f60: 576f 726c 642c 2053 6574 7469 6e67 732c  World, Settings,
-00006f70: 2043 6c6f 636b 2c20 466c 6f77 4d61 7472   Clock, FlowMatr
-00006f80: 6978 0d0a 2222 220d 0a20 2020 2020 2020  ix.."""..       
-00006f90: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-00006fa0: 2061 6765 6e74 2069 6e20 7365 6c66 2e64   agent in self.d
-00006fb0: 7261 7763 616e 7661 732e 636f 6465 5f64  rawcanvas.code_d
-00006fc0: 6174 612e 6b65 7973 2829 3a0d 0a20 2020  ata.keys():..   
-00006fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006fe0: 2020 2020 2073 696d 755f 7374 7220 2b3d       simu_str +=
-00006ff0: 2022 6672 6f6d 2070 7974 686f 6e5f 636f   "from python_co
-00007000: 6465 2e25 7320 696d 706f 7274 2025 735c  de.%s import %s\
-00007010: 6e22 2025 2028 6167 656e 742e 6c6f 7765  n" % (agent.lowe
-00007020: 7228 292c 6167 656e 742e 6361 7069 7461  r(),agent.capita
-00007030: 6c69 7a65 2829 290d 0a0d 0a20 2020 2020  lize())....     
-00007040: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00007050: 696d 755f 7374 7220 2b3d 2022 2222 0d0a  imu_str += """..
-00007060: 0d0a 6465 6620 6974 6572 2829 3a0d 0a20  ..def iter():.. 
-00007070: 2020 205c 225c 225c 220d 0a20 2020 2074     \"\"\"..    t
-00007080: 6869 7320 6973 206f 6e65 2069 7465 7261  his is one itera
-00007090: 7469 6f6e 0d0a 2020 2020 5c22 5c22 5c22  tion..    \"\"\"
-000070a0: 0d0a 0d0a 2020 2020 2320 544f 444f 206d  ....    # TODO m
-000070b0: 6f64 6966 7920 6974 6572 6174 696f 6e20  odify iteration 
-000070c0: 6865 7265 0d0a 2222 220d 0a0d 0a20 2020  here.."""....   
-000070d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000070e0: 2066 6f72 2061 6765 6e74 2069 6e20 7365   for agent in se
-000070f0: 6c66 2e64 7261 7763 616e 7661 732e 636f  lf.drawcanvas.co
-00007100: 6465 5f64 6174 612e 6b65 7973 2829 3a0d  de_data.keys():.
-00007110: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007120: 2020 2020 2020 2020 2061 203d 2061 6765           a = age
-00007130: 6e74 2e63 6170 6974 616c 697a 6528 290d  nt.capitalize().
-00007140: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007150: 2020 2020 2020 2020 2073 696d 755f 7374           simu_st
-00007160: 7220 2b3d 2022 5c74 666f 7220 6120 696e  r += "\tfor a in
-00007170: 2057 6f72 6c64 2829 2e67 6574 5f61 6765   World().get_age
-00007180: 6e74 735f 6f66 5f74 7970 6528 2725 7327  nts_of_type('%s'
-00007190: 293a 5c6e 5c74 5c74 7072 696e 7428 2744  ):\n\t\tprint('D
-000071a0: 6f20 736f 6d65 7468 696e 6720 7769 7468  o something with
-000071b0: 2720 2b20 7374 7228 6129 295c 6e5c 6e22  ' + str(a))\n\n"
-000071c0: 2025 2028 6129 0d0a 2020 2020 2020 2020   % (a)..        
-000071d0: 2020 2020 2020 2020 2020 2020 7369 6d75              simu
-000071e0: 5f73 7472 202b 3d20 2222 225c 6e0d 0a64  _str += """\n..d
-000071f0: 6566 2072 756e 2829 3a0d 0a20 2020 205c  ef run():..    \
-00007200: 225c 225c 220d 0a20 2020 2074 6869 7320  "\"\"..    this 
-00007210: 6973 2074 6865 206d 6169 6e20 7369 6d75  is the main simu
-00007220: 6c61 7469 6f6e 206c 6f6f 700d 0a20 2020  lation loop..   
-00007230: 205c 225c 225c 220d 0a22 2222 0d0a 0d0a   \"\"\".."""....
-00007240: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00007250: 2020 2020 2020 7369 6d75 5f73 7472 202b        simu_str +
-00007260: 3d20 2222 225c 6e0d 0a0d 0a20 2020 2053  = """\n....    S
-00007270: 6574 7469 6e67 7328 292e 7265 6164 285c  ettings().read(\
-00007280: 2273 6574 7469 6e67 732e 796d 6c5c 2229  "settings.yml\")
-00007290: 2023 2072 6561 6420 7365 7474 696e 6773   # read settings
-000072a0: 2066 696c 650d 0a0d 0a20 2020 205c 225c   file....    \"\
-000072b0: 225c 220d 0a20 2020 2053 696d 756c 6174  "\"..    Simulat
-000072c0: 696f 6e20 7061 7261 6d65 7465 7273 0d0a  ion parameters..
-000072d0: 2020 2020 5c22 5c22 5c22 0d0a 0d0a 2020      \"\"\"....  
-000072e0: 2020 2320 6e75 6d62 6572 206f 6620 6167    # number of ag
-000072f0: 656e 7473 2074 6f20 6265 2063 7265 6174  ents to be creat
-00007300: 6564 0d0a 2222 220d 0a0d 0a20 2020 2020  ed.."""....     
-00007310: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00007320: 6f72 2061 6765 6e74 2069 6e20 7365 6c66  or agent in self
-00007330: 2e64 7261 7763 616e 7661 732e 636f 6465  .drawcanvas.code
-00007340: 5f64 6174 612e 6b65 7973 2829 3a0d 0a20  _data.keys():.. 
-00007350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007360: 2020 2020 2020 2073 696d 755f 7374 7220         simu_str 
-00007370: 2b3d 2022 5c74 4e5f 2573 203d 2031 5c6e  += "\tN_%s = 1\n
-00007380: 2220 2520 6167 656e 742e 6361 7069 7461  " % agent.capita
-00007390: 6c69 7a65 2829 0d0a 2020 2020 2020 2020  lize()..        
-000073a0: 2020 2020 2020 2020 2020 2020 7369 6d75              simu
-000073b0: 5f73 7472 202b 3d20 2222 220d 0a20 2020  _str += """..   
-000073c0: 2023 2054 4f44 4f5e 2073 6574 2074 6865   # TODO^ set the
-000073d0: 2063 6f72 7265 6374 2076 616c 7565 0d0a   correct value..
-000073e0: 0d0a 2020 2020 2320 6e75 6d62 6572 206f  ..    # number o
-000073f0: 6620 7369 6d75 6c61 7469 6f6e 2073 7465  f simulation ste
-00007400: 7073 0d0a 2020 2020 5420 3d20 3130 300d  ps..    T = 100.
-00007410: 0a0d 0a20 2020 2023 2054 4f44 4f5e 2073  ...    # TODO^ s
-00007420: 6574 2074 6865 2063 6f72 7265 6374 2076  et the correct v
-00007430: 616c 7565 730d 0a0d 0a20 2020 2023 2063  alues....    # c
-00007440: 7265 6174 6520 4167 656e 7473 3a0d 0a22  reate Agents:.."
-00007450: 2222 0d0a 2020 2020 2020 2020 2020 2020  ""..            
-00007460: 2020 2020 2020 2020 666f 7220 6167 656e          for agen
-00007470: 7420 696e 2073 656c 662e 6472 6177 6361  t in self.drawca
-00007480: 6e76 6173 2e63 6f64 655f 6461 7461 2e6b  nvas.code_data.k
-00007490: 6579 7328 293a 0d0a 2020 2020 2020 2020  eys():..        
-000074a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000074b0: 6120 3d20 6167 656e 742e 6361 7069 7461  a = agent.capita
-000074c0: 6c69 7a65 2829 0d0a 2020 2020 2020 2020  lize()..        
-000074d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000074e0: 7369 6d75 5f73 7472 202b 3d20 225c 745b  simu_str += "\t[
-000074f0: 2573 2829 2066 6f72 2069 2069 6e20 7261  %s() for i in ra
-00007500: 6e67 6528 4e5f 2573 295d 5c6e 2220 2520  nge(N_%s)]\n" % 
-00007510: 2861 2c61 290d 0a0d 0a20 2020 2020 2020  (a,a)....       
-00007520: 2020 2020 2020 2020 2020 2020 2073 696d               sim
-00007530: 755f 7374 7220 2b3d 2022 5c6e 220d 0a20  u_str += "\n".. 
-00007540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007550: 2020 2073 696d 755f 7374 7220 2b3d 2022     simu_str += "
-00007560: 5c74 2320 696e 7465 722d 6c69 6e6b 2061  \t# inter-link a
-00007570: 6765 6e74 7320 5c6e 220d 0a0d 0a20 2020  gents \n"....   
-00007580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007590: 2073 696d 755f 7374 7220 2b3d 2022 5c74   simu_str += "\t
-000075a0: 576f 726c 6428 292e 6c69 6e6b 2829 5c6e  World().link()\n
-000075b0: 5c6e 220d 0a0d 0a20 2020 2020 2020 2020  \n"....         
-000075c0: 2020 2020 2020 2020 2020 2023 2066 6f72             # for
-000075d0: 2061 6765 6e74 2069 6e20 7365 6c66 2e64   agent in self.d
-000075e0: 7261 7763 616e 7661 732e 636f 6465 5f64  rawcanvas.code_d
-000075f0: 6174 612e 6b65 7973 2829 3a0d 0a20 2020  ata.keys():..   
-00007600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007610: 2023 2020 2020 6120 3d20 6167 656e 742e   #    a = agent.
-00007620: 6361 7069 7461 6c69 7a65 2829 0d0a 2020  capitalize()..  
-00007630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007640: 2020 2320 2020 2073 696d 755f 7374 7220    #    simu_str 
-00007650: 2b3d 2022 5c74 5b69 2e6c 696e 6b28 2920  += "\t[i.link() 
-00007660: 666f 7220 6920 696e 2025 735f 7069 6c65  for i in %s_pile
-00007670: 5d5c 6e22 2025 2028 6129 0d0a 0d0a 2020  ]\n" % (a)....  
-00007680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007690: 2020 7369 6d75 5f73 7472 202b 3d20 2222    simu_str += ""
-000076a0: 220d 0a20 2020 2066 6f72 2069 2069 6e20  "..    for i in 
-000076b0: 7261 6e67 6528 5429 3a0d 0a20 2020 2020  range(T):..     
-000076c0: 2020 2069 7465 7228 290d 0a0d 0a20 2020     iter()....   
-000076d0: 2020 2020 2023 2054 4f44 4f20 7772 6974       # TODO writ
-000076e0: 6520 6f75 7470 7574 7320 6865 7265 202e  e outputs here .
-000076f0: 2e2e 0d0a 0d0a 2020 2020 2020 2020 436c  ......        Cl
-00007700: 6f63 6b28 292e 7469 636b 2829 0d0a 0d0a  ock().tick()....
-00007710: 2020 2020 7072 696e 7428 466c 6f77 4d61      print(FlowMa
-00007720: 7472 6978 2829 2e74 6f5f 7374 7269 6e67  trix().to_string
-00007730: 2829 290d 0a22 2222 0d0a 2020 2020 2020  ()).."""..      
-00007740: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00007750: 6c66 2e6d 6169 6e6c 6f6f 705f 7374 7220  lf.mainloop_str 
-00007760: 3d20 7369 6d75 5f73 7472 0d0a 0d0a 2020  = simu_str....  
-00007770: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00007780: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00007790: 2020 2020 2020 2020 2073 696d 755f 7374           simu_st
-000077a0: 7220 3d20 7365 6c66 2e6d 6169 6e6c 6f6f  r = self.mainloo
-000077b0: 705f 7374 720d 0a0d 0a20 2020 2020 2020  p_str....       
-000077c0: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
-000077d0: 5349 4d55 2053 5452 222c 2073 696d 755f  SIMU STR", simu_
-000077e0: 7374 7229 0d0a 2020 2020 2020 2020 2020  str)..          
-000077f0: 2020 2020 2020 6669 6c65 2e77 7269 7465        file.write
-00007800: 2873 696d 755f 7374 722e 7265 706c 6163  (simu_str.replac
-00007810: 6528 225c 7422 2c22 2020 2020 2229 290d  e("\t","    ")).
-00007820: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00007830: 2020 2069 6620 6e6f 7420 7369 6c65 6e74     if not silent
-00007840: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00007850: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
-00007860: 6679 2822 5072 6f6a 6563 7420 6669 6c65  fy("Project file
-00007870: 7320 6275 696c 7421 222c 7469 746c 653d  s built!",title=
-00007880: 2253 7563 6365 7373 2229 0d0a 0d0a 2020  "Success")....  
-00007890: 2020 2020 2020 2020 2020 2020 2020 7365                se
-000078a0: 6c66 2e67 656e 5f63 6f64 6528 2920 2320  lf.gen_code() # 
-000078b0: 6765 6e65 7261 7465 2074 7261 6e73 6163  generate transac
-000078c0: 7469 6f6e 732e 7079 0d0a 0d0a 2020 2020  tions.py....    
-000078d0: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
-000078e0: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
-000078f0: 2020 2020 2020 2020 6578 6365 7074 696f          exceptio
-00007900: 6e5f 7479 7065 2c20 6578 6365 7074 696f  n_type, exceptio
-00007910: 6e5f 6f62 6a65 6374 2c20 6578 6365 7074  n_object, except
-00007920: 696f 6e5f 7472 6163 6562 6163 6b20 3d20  ion_traceback = 
-00007930: 7379 732e 6578 635f 696e 666f 2829 0d0a  sys.exc_info()..
-00007940: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00007950: 2e6e 6f74 6966 7928 2243 6f75 6c64 206e  .notify("Could n
-00007960: 6f74 2062 7569 6c64 2070 726f 6a65 6374  ot build project
-00007970: 2e5c 6e22 202b 2073 7472 2865 7863 6570  .\n" + str(excep
-00007980: 7469 6f6e 5f6f 626a 6563 7429 202b 2073  tion_object) + s
-00007990: 7472 2865 7863 6570 7469 6f6e 5f74 7261  tr(exception_tra
-000079a0: 6365 6261 636b 292c 7469 746c 653d 2245  ceback),title="E
-000079b0: 7272 6f72 206f 6e20 5072 6f6a 6563 7420  rror on Project 
-000079c0: 4275 696c 6422 290d 0a0d 0a20 2020 2064  Build")....    d
-000079d0: 6566 2061 7574 6f5f 6261 636b 7570 2873  ef auto_backup(s
-000079e0: 656c 6629 3a0d 0a20 2020 2020 2020 2074  elf):..        t
-000079f0: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
-00007a00: 2066 6f6c 6465 7220 3d20 7365 6c66 2e63   folder = self.c
-00007a10: 7572 7265 6e74 5f66 696c 650d 0a20 2020  urrent_file..   
-00007a20: 2020 2020 2020 2020 2069 6620 666f 6c64           if fold
-00007a30: 6572 2069 7320 6e6f 7420 4e6f 6e65 3a0d  er is not None:.
-00007a40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007a50: 2073 656c 662e 7361 7665 6173 2866 6f6c   self.saveas(fol
-00007a60: 6465 725b 3a2d 365d 202b 225f 6175 746f  der[:-6] +"_auto
-00007a70: 6261 636b 7570 2e73 6663 746c 2229 2023  backup.sfctl") #
-00007a80: 206d 616b 6573 2061 2062 6163 6b75 7020   makes a backup 
-00007a90: 6669 6c65 0d0a 2020 2020 2020 2020 2020  file..          
-00007aa0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00007ab0: 2020 2020 2020 2020 2023 2073 656c 662e           # self.
-00007ac0: 6e6f 7469 6679 2822 596f 7520 6172 6520  notify("You are 
-00007ad0: 776f 726b 696e 6720 6f6e 2061 2062 6c61  working on a bla
-00007ae0: 6e6b 2070 726f 6a65 6374 2066 696c 652e  nk project file.
-00007af0: 2050 6c65 6173 6520 7361 7665 2079 6f75   Please save you
-00007b00: 7220 6368 616e 6765 7320 736f 6f6e 2e22  r changes soon."
-00007b10: 2c20 7469 746c 653d 2257 6172 6e69 6e67  , title="Warning
-00007b20: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
-00007b30: 2020 2020 7365 6c66 2e73 7461 7475 7342      self.statusB
-00007b40: 6172 2829 2e73 686f 774d 6573 7361 6765  ar().showMessage
-00007b50: 2822 5741 524e 494e 473a 2059 6f75 2061  ("WARNING: You a
-00007b60: 7265 2077 6f72 6b69 6e67 206f 6e20 6120  re working on a 
-00007b70: 626c 616e 6b20 7072 6f6a 6563 7420 6669  blank project fi
-00007b80: 6c65 2e20 506c 6561 7365 2073 6176 6520  le. Please save 
-00007b90: 796f 7572 2063 6861 6e67 6573 2073 6f6f  your changes soo
-00007ba0: 6e2e 2229 0d0a 2020 2020 2020 2020 6578  n.")..        ex
-00007bb0: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
-00007bc0: 7320 653a 0d0a 2020 2020 2020 2020 2020  s e:..          
-00007bd0: 2020 7365 6c66 2e6e 6f74 6966 7928 7374    self.notify(st
-00007be0: 7228 6529 2c20 7469 746c 653d 2245 7272  r(e), title="Err
-00007bf0: 6f72 206f 6e20 4175 746f 4261 636b 7570  or on AutoBackup
-00007c00: 2229 0d0a 0d0a 2020 2020 6465 6620 6564  ")....    def ed
-00007c10: 6974 5f73 6574 7469 6e67 7328 7365 6c66  it_settings(self
-00007c20: 293a 0d0a 2020 2020 2020 2020 6966 2073  ):..        if s
-00007c30: 656c 662e 7365 7474 696e 6773 5f73 7472  elf.settings_str
-00007c40: 203d 3d22 2220 6f72 2073 656c 662e 7365   =="" or self.se
-00007c50: 7474 696e 6773 5f73 7472 2069 7320 4e6f  ttings_str is No
-00007c60: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-00007c70: 2073 656c 662e 6e6f 7469 6679 286d 6573   self.notify(mes
-00007c80: 7361 6765 3d22 536f 6d65 7468 696e 6720  sage="Something 
-00007c90: 7765 6e74 2077 726f 6e67 2e20 4861 7665  went wrong. Have
-00007ca0: 2079 6f75 2062 7569 6c74 2074 6865 2070   you built the p
-00007cb0: 726f 6a65 6374 3f22 2c74 6974 6c65 3d22  roject?",title="
-00007cc0: 4572 726f 7222 290d 0a20 2020 2020 2020  Error")..       
-00007cd0: 2020 2020 2072 6574 7572 6e0d 0a0d 0a20       return.... 
-00007ce0: 2020 2020 2020 206d 795f 6564 6974 203d         my_edit =
-00007cf0: 2053 6574 7469 6e67 7345 6469 746f 7228   SettingsEditor(
-00007d00: 7061 7265 6e74 3d73 656c 662c 2074 6578  parent=self, tex
-00007d10: 743d 7365 6c66 2e73 6574 7469 6e67 735f  t=self.settings_
-00007d20: 7374 7229 0d0a 0d0a 2020 2020 6465 6620  str)....    def 
-00007d30: 6564 6974 5f67 7261 7068 5f61 6765 6e74  edit_graph_agent
-00007d40: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
-00007d50: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
-00007d60: 2e65 6469 745f 6167 656e 7428 290d 0a0d  .edit_agent()...
-00007d70: 0a20 2020 2064 6566 2063 6861 6e67 655f  .    def change_
-00007d80: 6772 6170 686d 6f64 655f 7365 6c65 6374  graphmode_select
-00007d90: 2873 656c 6629 3a0d 0a0d 0a20 2020 2020  (self):....     
-00007da0: 2020 2073 656c 662e 6472 6177 6361 6e76     self.drawcanv
-00007db0: 6173 2e6d 6f64 6520 3d20 2273 656c 6563  as.mode = "selec
-00007dc0: 7422 0d0a 0d0a 2020 2020 6465 6620 6368  t"....    def ch
-00007dd0: 616e 6765 5f67 7261 7068 6d6f 6465 5f64  ange_graphmode_d
-00007de0: 7261 6728 7365 6c66 293a 0d0a 0d0a 2020  rag(self):....  
-00007df0: 2020 2020 2020 7365 6c66 2e64 7261 7763        self.drawc
-00007e00: 616e 7661 732e 6d6f 6465 203d 2022 6472  anvas.mode = "dr
-00007e10: 6167 220d 0a0d 0a20 2020 2064 6566 2061  ag"....    def a
-00007e20: 7272 616e 6765 5f70 7265 7474 7928 7365  rrange_pretty(se
-00007e30: 6c66 293a 0d0a 2020 2020 2020 2020 7365  lf):..        se
-00007e40: 6c66 2e75 7064 6174 655f 7461 626c 6528  lf.update_table(
-00007e50: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-00007e60: 6472 6177 6361 6e76 6173 2e61 7272 616e  drawcanvas.arran
-00007e70: 6765 5f70 7265 7474 7928 290d 0a0d 0a0d  ge_pretty().....
-00007e80: 0a20 2020 2064 6566 2075 7064 6174 655f  .    def update_
-00007e90: 6772 6170 6869 6373 5f64 6174 6128 7365  graphics_data(se
-00007ea0: 6c66 2c20 626f 782c 2063 6f6e 6e29 3a0d  lf, box, conn):.
-00007eb0: 0a20 2020 2020 2020 2070 6173 730d 0a0d  .        pass...
-00007ec0: 0a0d 0a20 2020 2064 6566 2073 7769 7463  ...    def switc
-00007ed0: 685f 7468 656d 6528 7365 6c66 293a 0d0a  h_theme(self):..
-00007ee0: 0d0a 0d0a 2020 2020 2020 2020 2320 6672  ....        # fr
-00007ef0: 6f6d 2071 745f 6d61 7465 7269 616c 2069  om qt_material i
-00007f00: 6d70 6f72 7420 6170 706c 795f 7374 796c  mport apply_styl
-00007f10: 6573 6865 6574 0d0a 0d0a 2020 2020 2020  esheet....      
-00007f20: 2020 6966 2073 656c 662e 7468 656d 655f    if self.theme_
-00007f30: 6d61 6e61 6765 722e 7468 656d 6520 3d3d  manager.theme ==
-00007f40: 2022 6461 726b 223a 0d0a 2020 2020 2020   "dark":..      
-00007f50: 2020 2020 2020 7365 6c66 2e74 6865 6d65        self.theme
-00007f60: 5f6d 616e 6167 6572 2e74 6865 6d65 203d  _manager.theme =
-00007f70: 2022 6272 6967 6874 220d 0a0d 0a20 2020   "bright"....   
-00007f80: 2020 2020 2065 6c69 6620 7365 6c66 2e74       elif self.t
-00007f90: 6865 6d65 5f6d 616e 6167 6572 2e74 6865  heme_manager.the
-00007fa0: 6d65 203d 3d20 2262 7269 6768 7422 3a0d  me == "bright":.
-00007fb0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00007fc0: 662e 7468 656d 655f 6d61 6e61 6765 722e  f.theme_manager.
-00007fd0: 7468 656d 6520 3d20 2264 6172 6b22 0d0a  theme = "dark"..
-00007fe0: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
-00007ff0: 2e73 6574 5374 796c 6553 6865 6574 2873  .setStyleSheet(s
-00008000: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
-00008010: 722e 6765 745f 7374 796c 6573 6865 6574  r.get_stylesheet
-00008020: 2822 6d61 696e 2229 290d 0a0d 0a20 2020  ("main"))....   
-00008030: 2020 2020 2073 656c 662e 7468 656d 655f       self.theme_
-00008040: 6d61 6e61 6765 722e 7265 7374 6f72 655f  manager.restore_
-00008050: 6275 7474 6f6e 7328 290d 0a0d 0a20 2020  buttons()....   
-00008060: 2020 2020 2073 656c 662e 7461 6257 6964       self.tabWid
-00008070: 6765 745f 322e 7365 7453 7479 6c65 5368  get_2.setStyleSh
-00008080: 6565 7428 7365 6c66 2e74 6865 6d65 5f6d  eet(self.theme_m
-00008090: 616e 6167 6572 2e67 6574 5f62 6163 6b67  anager.get_backg
-000080a0: 726f 756e 645f 7374 796c 6528 2929 0d0a  round_style())..
-000080b0: 2020 2020 2020 2020 7365 6c66 2e64 6f63          self.doc
-000080c0: 6b57 6964 6765 745f 332e 7365 7453 7479  kWidget_3.setSty
-000080d0: 6c65 5368 6565 7428 7365 6c66 2e74 6865  leSheet(self.the
-000080e0: 6d65 5f6d 616e 6167 6572 2e67 6574 5f62  me_manager.get_b
-000080f0: 6163 6b67 726f 756e 645f 7374 796c 6528  ackground_style(
-00008100: 2929 0d0a 2020 2020 2020 2020 7365 6c66  ))..        self
-00008110: 2e64 6f63 6b57 6964 6765 745f 342e 7365  .dockWidget_4.se
-00008120: 7453 7479 6c65 5368 6565 7428 7365 6c66  tStyleSheet(self
-00008130: 2e74 6865 6d65 5f6d 616e 6167 6572 2e67  .theme_manager.g
-00008140: 6574 5f62 6163 6b67 726f 756e 645f 7374  et_background_st
-00008150: 796c 6528 2929 0d0a 2020 2020 2020 2020  yle())..        
-00008160: 7365 6c66 2e64 6f63 6b57 6964 6765 745f  self.dockWidget_
-00008170: 352e 7365 7453 7479 6c65 5368 6565 7428  5.setStyleSheet(
-00008180: 7365 6c66 2e74 6865 6d65 5f6d 616e 6167  self.theme_manag
-00008190: 6572 2e67 6574 5f62 6163 6b67 726f 756e  er.get_backgroun
-000081a0: 645f 7374 796c 6528 2929 0d0a 0d0a 2020  d_style())....  
-000081b0: 2020 2020 2020 7365 6c66 2e77 6964 6765        self.widge
-000081c0: 742e 7365 7453 7479 6c65 5368 6565 7428  t.setStyleSheet(
-000081d0: 7365 6c66 2e74 6865 6d65 5f6d 616e 6167  self.theme_manag
-000081e0: 6572 2e67 6574 5f62 6163 6b67 726f 756e  er.get_backgroun
-000081f0: 645f 7374 796c 6528 2929 0d0a 0d0a 2020  d_style())....  
-00008200: 2020 2020 2020 7365 6c66 2e64 6f63 6b57        self.dockW
-00008210: 6964 6765 745f 372e 7365 7453 7479 6c65  idget_7.setStyle
-00008220: 5368 6565 7428 7365 6c66 2e74 6865 6d65  Sheet(self.theme
-00008230: 5f6d 616e 6167 6572 2e67 6574 5f62 6163  _manager.get_bac
-00008240: 6b67 726f 756e 645f 7374 796c 6528 2929  kground_style())
-00008250: 0d0a 2020 2020 2020 2020 7365 6c66 2e74  ..        self.t
-00008260: 6162 5769 6467 6574 2e73 6574 5374 796c  abWidget.setStyl
-00008270: 6553 6865 6574 2873 656c 662e 7468 656d  eSheet(self.them
-00008280: 655f 6d61 6e61 6765 722e 6765 745f 6261  e_manager.get_ba
-00008290: 636b 6772 6f75 6e64 5f73 7479 6c65 2829  ckground_style()
-000082a0: 290d 0a0d 0a20 2020 2020 2020 2066 6f72  )....        for
-000082b0: 2063 6520 696e 2043 6f64 6545 6469 746f   ce in CodeEdito
-000082c0: 722e 696e 7374 616e 6365 732e 7661 6c75  r.instances.valu
-000082d0: 6573 2829 3a0d 0a20 2020 2020 2020 2020  es():..         
-000082e0: 2020 2063 652e 7365 7453 7479 6c65 5368     ce.setStyleSh
-000082f0: 6565 7428 7365 6c66 2e74 6865 6d65 5f6d  eet(self.theme_m
-00008300: 616e 6167 6572 2e67 6574 5f62 6163 6b67  anager.get_backg
-00008310: 726f 756e 645f 7374 796c 6528 2929 0d0a  round_style())..
-00008320: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-00008330: 6765 6e74 3145 6469 742e 7365 7453 7479  gent1Edit.setSty
-00008340: 6c65 5368 6565 7428 7365 6c66 2e74 6865  leSheet(self.the
-00008350: 6d65 5f6d 616e 6167 6572 2e67 6574 5f62  me_manager.get_b
-00008360: 6163 6b67 726f 756e 645f 7374 796c 6528  ackground_style(
-00008370: 2929 0d0a 2020 2020 2020 2020 7365 6c66  ))..        self
-00008380: 2e61 6765 6e74 3245 6469 742e 7365 7453  .agent2Edit.setS
-00008390: 7479 6c65 5368 6565 7428 7365 6c66 2e74  tyleSheet(self.t
-000083a0: 6865 6d65 5f6d 616e 6167 6572 2e67 6574  heme_manager.get
-000083b0: 5f62 6163 6b67 726f 756e 645f 7374 796c  _background_styl
-000083c0: 6528 2929 0d0a 0d0a 2020 2020 2020 2020  e())....        
-000083d0: 7472 793a 0d0a 0d0a 2020 2020 2020 2020  try:....        
-000083e0: 2020 2020 6966 204d 6169 6e4c 6f6f 7045      if MainLoopE
-000083f0: 6469 746f 722e 696e 7374 616e 6365 2069  ditor.instance i
-00008400: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
-00008410: 2020 2020 2020 2020 2020 2020 2069 6e73               ins
-00008420: 7420 3d20 4d61 696e 4c6f 6f70 4564 6974  t = MainLoopEdit
-00008430: 6f72 2e69 6e73 7461 6e63 650d 0a20 2020  or.instance..   
-00008440: 2020 2020 2020 2020 2020 2020 2069 6e73               ins
-00008450: 742e 7365 7453 7479 6c65 5368 6565 7428  t.setStyleSheet(
-00008460: 7365 6c66 2e74 6865 6d65 5f6d 616e 6167  self.theme_manag
-00008470: 6572 2e67 6574 5f62 6163 6b67 726f 756e  er.get_backgroun
-00008480: 645f 7374 796c 6528 2929 0d0a 2020 2020  d_style())..    
-00008490: 2020 2020 2020 2020 2020 2020 696e 7374              inst
-000084a0: 2e73 6574 5374 796c 6553 6865 6574 2873  .setStyleSheet(s
-000084b0: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
-000084c0: 722e 6765 745f 7374 796c 6573 6865 6574  r.get_stylesheet
-000084d0: 2822 6d61 696e 2229 290d 0a0d 0a20 2020  ("main"))....   
-000084e0: 2020 2020 2065 7863 6570 743a 0d0a 0d0a       except:....
-000084f0: 2020 2020 2020 2020 2020 2020 7061 7373              pass
-00008500: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
-00008510: 2e75 7064 6174 655f 7461 626c 6528 290d  .update_table().
-00008520: 0a0d 0a20 2020 2020 2020 2023 2073 656c  ...        # sel
-00008530: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
-00008540: 772e 7365 7453 7479 6c65 5368 6565 7428  w.setStyleSheet(
-00008550: 7365 6c66 2e74 6865 6d65 5f6d 616e 6167  self.theme_manag
-00008560: 6572 2e67 6574 5f74 6162 6c65 5f73 7479  er.get_table_sty
-00008570: 6c65 2829 290d 0a0d 0a20 2020 2064 6566  le())....    def
-00008580: 2061 736b 5f71 7565 7374 696f 6e28 7365   ask_question(se
-00008590: 6c66 2c74 6974 6c65 2c6d 6573 7361 6765  lf,title,message
-000085a0: 293a 0d0a 2020 2020 2020 2020 2320 6173  ):..        # as
-000085b0: 6b20 6120 7175 6573 7469 6f6e 2079 6573  k a question yes
-000085c0: 202f 206e 6f0d 0a20 2020 2020 2020 206d   / no..        m
-000085d0: 7367 203d 2051 4d65 7373 6167 6542 6f78  sg = QMessageBox
-000085e0: 2851 4d65 7373 6167 6542 6f78 2e51 7565  (QMessageBox.Que
-000085f0: 7374 696f 6e2c 0d0a 2020 2020 2020 2020  stion,..        
-00008600: 2020 2020 2020 2020 7469 746c 652c 206d          title, m
-00008610: 6573 7361 6765 2c62 7574 746f 6e73 3d51  essage,buttons=Q
-00008620: 4d65 7373 6167 6542 6f78 2e59 6573 207c  MessageBox.Yes |
-00008630: 2051 4d65 7373 6167 6542 6f78 2e4e 6f2c   QMessageBox.No,
-00008640: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00008650: 2020 7061 7265 6e74 3d73 656c 6629 0d0a    parent=self)..
-00008660: 2020 2020 2020 2020 6d73 672e 7365 7457          msg.setW
-00008670: 696e 646f 7754 6974 6c65 2874 6974 6c65  indowTitle(title
-00008680: 290d 0a20 2020 2020 2020 206d 7367 2e73  )..        msg.s
-00008690: 6574 5374 796c 6553 6865 6574 2873 656c  etStyleSheet(sel
-000086a0: 662e 7468 656d 655f 6d61 6e61 6765 722e  f.theme_manager.
-000086b0: 6765 745f 6e6f 7469 6669 6361 7469 6f6e  get_notification
-000086c0: 5f73 7479 6c65 2829 290d 0a20 2020 2020  _style())..     
-000086d0: 2020 206d 7367 2e65 7865 635f 2829 0d0a     msg.exec_()..
-000086e0: 2020 2020 2020 2020 7265 706c 7920 3d20          reply = 
-000086f0: 6d73 672e 7374 616e 6461 7264 4275 7474  msg.standardButt
-00008700: 6f6e 286d 7367 2e63 6c69 636b 6564 4275  on(msg.clickedBu
-00008710: 7474 6f6e 2829 290d 0a0d 0a20 2020 2020  tton())....     
-00008720: 2020 2069 6620 7265 706c 7920 3d3d 206d     if reply == m
-00008730: 7367 2e59 6573 3a0d 0a20 2020 2020 2020  sg.Yes:..       
-00008740: 2020 2020 2072 6574 7572 6e20 5472 7565       return True
-00008750: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
-00008760: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00008770: 7572 6e20 4661 6c73 650d 0a0d 0a20 2020  urn False....   
-00008780: 2064 6566 206e 6f74 6966 7928 7365 6c66   def notify(self
-00008790: 2c6d 6573 7361 6765 2c74 6974 6c65 293a  ,message,title):
-000087a0: 0d0a 2020 2020 2020 2020 236d 7367 203d  ..        #msg =
-000087b0: 2051 4d65 7373 6167 6542 6f78 2873 656c   QMessageBox(sel
-000087c0: 6629 0d0a 2020 2020 2020 2020 6d73 6720  f)..        msg 
-000087d0: 3d20 514d 6573 7361 6765 426f 7828 7365  = QMessageBox(se
-000087e0: 6c66 290d 0a20 2020 2020 2020 206d 7367  lf)..        msg
-000087f0: 2e73 6574 5769 6e64 6f77 5469 746c 6528  .setWindowTitle(
-00008800: 7469 746c 6529 0d0a 2020 2020 2020 2020  title)..        
-00008810: 6d73 672e 7365 7454 6578 7428 6d65 7373  msg.setText(mess
-00008820: 6167 6529 0d0a 2020 2020 2020 2020 236d  age)..        #m
-00008830: 7367 2e73 6574 5374 796c 6553 6865 6574  sg.setStyleSheet
-00008840: 2873 656c 662e 7374 796c 6573 6865 6574  (self.stylesheet
-00008850: 290d 0a20 2020 2020 2020 2023 2067 6574  )..        # get
-00008860: 2062 6163 6b67 726f 756e 6420 636f 6c6f   background colo
-00008870: 7220 6672 6f6d 2074 6865 6d65 206d 616e  r from theme man
-00008880: 6167 6572 0d0a 2020 2020 2020 2020 2320  ager..        # 
-00008890: 6765 7420 666f 7265 6772 6f75 6e64 2063  get foreground c
-000088a0: 6f6c 6f72 2066 726f 6d20 7468 656d 6520  olor from theme 
-000088b0: 6d61 6e61 6765 720d 0a20 2020 2020 2020  manager..       
-000088c0: 2073 7479 6c65 203d 2073 656c 662e 7468   style = self.th
-000088d0: 656d 655f 6d61 6e61 6765 722e 6765 745f  eme_manager.get_
-000088e0: 6e6f 7469 6669 6361 7469 6f6e 5f73 7479  notification_sty
-000088f0: 6c65 2829 0d0a 2020 2020 2020 2020 6d73  le()..        ms
-00008900: 672e 7365 7453 7479 6c65 5368 6565 7428  g.setStyleSheet(
-00008910: 7374 796c 6529 0d0a 2020 2020 2020 2020  style)..        
-00008920: 6d73 672e 6f70 656e 2829 0d0a 0d0a 0d0a  msg.open()......
-00008930: 2020 2020 6465 6620 636c 6561 6e75 705f      def cleanup_
-00008940: 7472 616e 7361 6374 696f 6e5f 6461 7461  transaction_data
-00008950: 2873 656c 662c 6461 7461 293a 0d0a 2020  (self,data):..  
-00008960: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
-00008970: 2020 2063 6c65 616e 7320 7570 2074 7261     cleans up tra
-00008980: 6e73 6163 7469 6f6e 2064 6174 6120 6672  nsaction data fr
-00008990: 6f6d 206f 6c64 2066 696c 6520 7665 7273  om old file vers
-000089a0: 696f 6e73 0d0a 2020 2020 2020 2020 2222  ions..        ""
-000089b0: 220d 0a20 2020 2020 2020 2074 7279 3a0d  "..        try:.
-000089c0: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-000089d0: 6e74 2822 6f6c 645f 6461 7461 222c 6461  nt("old_data",da
-000089e0: 7461 290d 0a20 2020 2020 2020 2020 2020  ta)..           
-000089f0: 2023 2064 6174 6120 3d20 6469 6374 2864   # data = dict(d
-00008a00: 6174 6129 0d0a 2020 2020 2020 2020 2020  ata)..          
-00008a10: 2020 6e65 775f 6461 7461 203d 207b 2261    new_data = {"a
-00008a20: 6765 6e74 7322 3a7b 7d2c 2274 7261 6e73  gents":{},"trans
-00008a30: 6163 7469 6f6e 7322 3a5b 5d2c 2262 6f78  actions":[],"box
-00008a40: 5f70 6f73 6974 696f 6e73 223a 7b7d 2c22  _positions":{},"
-00008a50: 7468 656d 6522 3a4e 6f6e 657d 2023 2064  theme":None} # d
-00008a60: 6174 612e 636f 7079 2829 0d0a 2020 2020  ata.copy()..    
-00008a70: 2020 2020 2020 2020 2320 6e65 775f 6461          # new_da
-00008a80: 7461 5b22 7472 616e 7361 6374 696f 6e73  ta["transactions
-00008a90: 225d 203d 2064 6174 615b 2274 7261 6e73  "] = data["trans
-00008aa0: 6163 7469 6f6e 7322 5d2e 636f 7079 2829  actions"].copy()
-00008ab0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00008ac0: 666f 7220 6b2c 7620 696e 2064 6174 612e  for k,v in data.
-00008ad0: 6974 656d 7328 293a 0d0a 0d0a 2020 2020  items():....    
-00008ae0: 2020 2020 2020 2020 2020 2020 6966 206b              if k
-00008af0: 203d 3d20 2274 6865 6d65 223a 0d0a 2020   == "theme":..  
-00008b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008b10: 2020 6e65 775f 6461 7461 5b22 7468 656d    new_data["them
-00008b20: 6522 5d20 3d20 6461 7461 5b6b 5d20 2320  e"] = data[k] # 
-00008b30: 7b22 676c 6f62 616c 7468 656d 6522 3a20  {"globaltheme": 
-00008b40: 6272 6967 6874 2f64 6172 6b2c 2022 636f  bright/dark, "co
-00008b50: 6c6f 7273 223a 2063 6f6c 6f72 737d 2023  lors": colors} #
-00008b60: 206c 6f61 6420 7468 6520 636f 6c6f 7220   load the color 
-00008b70: 7468 656d 650d 0a0d 0a20 2020 2020 2020  theme....       
-00008b80: 2020 2020 2020 2020 2069 6620 6b20 3d3d           if k ==
-00008b90: 2022 6167 656e 7473 223a 0d0a 2020 2020   "agents":..    
-00008ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008bb0: 666f 7220 6b32 2c76 3220 696e 2064 6174  for k2,v2 in dat
-00008bc0: 615b 6b5d 2e69 7465 6d73 2829 3a0d 0a0d  a[k].items():...
-00008bd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00008be0: 2020 2020 2020 2020 2023 2031 2e20 7265           # 1. re
-00008bf0: 6e61 6d65 2061 6765 6e74 0d0a 2020 2020  name agent..    
-00008c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008c10: 2020 2020 7072 696e 7428 2252 454e 414d      print("RENAM
-00008c20: 4520 4147 454e 5453 2e2e 2e22 290d 0a20  E AGENTS...").. 
-00008c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008c40: 2020 2020 2020 206e 6577 5f63 6f64 655f         new_code_
-00008c50: 6c69 6e65 7320 3d20 5b5d 0d0a 0d0a 2020  lines = []....  
-00008c60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008c70: 2020 2020 2020 666f 7220 6c69 6e65 2069        for line i
-00008c80: 6e20 7632 2e73 706c 6974 2822 5c6e 2229  n v2.split("\n")
-00008c90: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00008ca0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00008cb0: 6620 2241 4745 4e54 2220 696e 206c 696e  f "AGENT" in lin
-00008cc0: 653a 2023 2020 616e 6420 6c65 6e28 6c69  e: #  and len(li
-00008cd0: 6e65 2920 3e3d 2039 3a0d 0a20 2020 2020  ne) >= 9:..     
-00008ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008cf0: 2020 2020 2020 2020 2020 206e 6c69 6e65             nline
-00008d00: 203d 206c 696e 655b 3a39 5d20 2b20 6361   = line[:9] + ca
-00008d10: 6d65 6c28 6c69 6e65 5b39 5d29 202b 206c  mel(line[9]) + l
-00008d20: 696e 655b 3130 3a5d 0d0a 2020 2020 2020  ine[10:]..      
+00000ce0: 5b6e 616d 655d 203d 2073 656c 660d 0a0d  [name] = self...
+00000cf0: 0a0d 0a20 2020 2064 6566 2073 6574 5f6d  ...    def set_m
+00000d00: 6f64 656c 2873 656c 662c 6d6f 6465 6c29  odel(self,model)
+00000d10: 3a0d 0a20 2020 2020 2020 2070 7269 6e74  :..        print
+00000d20: 2822 5345 5420 4d4f 4445 4c22 2c20 6d6f  ("SET MODEL", mo
+00000d30: 6465 6c29 0d0a 2020 2020 2020 2020 7365  del)..        se
+00000d40: 6c66 2e70 616e 6461 735f 6d6f 6465 6c20  lf.pandas_model 
+00000d50: 3d20 6d6f 6465 6c0d 0a20 2020 2020 2020  = model..       
+00000d60: 2073 656c 662e 7461 626c 6556 6965 772e   self.tableView.
+00000d70: 7365 744d 6f64 656c 286d 6f64 656c 290d  setModel(model).
+00000d80: 0a0d 0a20 2020 2064 6566 2067 6574 5f64  ...    def get_d
+00000d90: 6174 6128 7365 6c66 293a 0d0a 2020 2020  ata(self):..    
+00000da0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00000db0: 7061 6e64 6173 5f6d 6f64 656c 2e67 6574  pandas_model.get
+00000dc0: 5f72 6177 6461 7461 2829 0d0a 0d0a 0d0a  _rawdata()......
+00000dd0: 636c 6173 7320 496e 636f 6d65 5669 6577  class IncomeView
+00000de0: 6572 2851 7457 6964 6765 7473 2e51 4469  er(QtWidgets.QDi
+00000df0: 616c 6f67 293a 0d0a 2020 2020 696e 7374  alog):..    inst
+00000e00: 616e 6365 7320 3d20 7b7d 0d0a 0d0a 2020  ances = {}....  
+00000e10: 2020 6465 6620 636c 6f73 6545 7665 6e74    def closeEvent
+00000e20: 2873 656c 662c 2065 7665 6e74 293a 0d0a  (self, event):..
+00000e30: 2020 2020 2020 2020 6465 6c20 7365 6c66          del self
+00000e40: 2e5f 5f63 6c61 7373 5f5f 2e69 6e73 7461  .__class__.insta
+00000e50: 6e63 6573 5b73 656c 662e 6e61 6d65 5d0d  nces[self.name].
+00000e60: 0a20 2020 2020 2020 2065 7665 6e74 2e61  .        event.a
+00000e70: 6363 6570 7428 2920 2320 6c65 7420 7468  ccept() # let th
+00000e80: 6520 7769 6e64 6f77 2063 6c6f 7365 0d0a  e window close..
+00000e90: 0d0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+00000ea0: 5f5f 2873 656c 662c 7061 7265 6e74 3d4e  __(self,parent=N
+00000eb0: 6f6e 652c 6e61 6d65 3d22 556e 6b6e 6f77  one,name="Unknow
+00000ec0: 6e22 293a 0d0a 0d0a 2020 2020 2020 2020  n"):....        
+00000ed0: 7375 7065 7228 496e 636f 6d65 5669 6577  super(IncomeView
+00000ee0: 6572 2c20 7365 6c66 292e 5f5f 696e 6974  er, self).__init
+00000ef0: 5f5f 2870 6172 656e 7429 2020 2320 4361  __(parent)  # Ca
+00000f00: 6c6c 2074 6865 2069 6e68 6572 6974 6564  ll the inherited
+00000f10: 2063 6c61 7373 6573 205f 5f69 6e69 745f   classes __init_
+00000f20: 5f20 6d65 7468 6f64 0d0a 2020 2020 2020  _ method..      
+00000f30: 2020 7061 7468 203d 206f 732e 7061 7468    path = os.path
+00000f40: 2e64 6972 6e61 6d65 286f 732e 7061 7468  .dirname(os.path
+00000f50: 2e61 6273 7061 7468 285f 5f66 696c 655f  .abspath(__file_
+00000f60: 5f29 290d 0a20 2020 2020 2020 2075 6963  _))..        uic
+00000f70: 2e6c 6f61 6455 6928 6f73 2e70 6174 682e  .loadUi(os.path.
+00000f80: 6a6f 696e 2870 6174 682c 2769 6e63 6f6d  join(path,'incom
+00000f90: 655f 7669 6577 6572 2e75 6927 292c 2073  e_viewer.ui'), s
+00000fa0: 656c 6629 0d0a 2020 2020 2020 2020 7365  elf)..        se
+00000fb0: 6c66 2e73 6574 5769 6e64 6f77 5469 746c  lf.setWindowTitl
+00000fc0: 6528 2249 6e63 6f6d 6520 5368 6565 7420  e("Income Sheet 
+00000fd0: 6f66 2025 7322 2025 206e 616d 6529 0d0a  of %s" % name)..
+00000fe0: 0d0a 2020 2020 2020 2020 7365 6c66 2e6e  ..        self.n
+00000ff0: 616d 6520 3d20 6e61 6d65 0d0a 2020 2020  ame = name..    
+00001000: 2020 2020 7365 6c66 2e5f 5f63 6c61 7373      self.__class
+00001010: 5f5f 2e69 6e73 7461 6e63 6573 5b6e 616d  __.instances[nam
+00001020: 655d 203d 2073 656c 660d 0a0d 0a20 2020  e] = self....   
+00001030: 2064 6566 2073 6574 5f6d 6f64 656c 2873   def set_model(s
+00001040: 656c 662c 6d6f 6465 6c29 3a0d 0a20 2020  elf,model):..   
+00001050: 2020 2020 2070 7269 6e74 2822 5345 5420       print("SET 
+00001060: 4d4f 4445 4c22 2c20 6d6f 6465 6c29 0d0a  MODEL", model)..
+00001070: 2020 2020 2020 2020 7365 6c66 2e70 616e          self.pan
+00001080: 6461 735f 6d6f 6465 6c20 3d20 6d6f 6465  das_model = mode
+00001090: 6c0d 0a20 2020 2020 2020 2073 656c 662e  l..        self.
+000010a0: 7461 626c 6556 6965 772e 7365 744d 6f64  tableView.setMod
+000010b0: 656c 286d 6f64 656c 290d 0a0d 0a20 2020  el(model)....   
+000010c0: 2064 6566 2067 6574 5f64 6174 6128 7365   def get_data(se
+000010d0: 6c66 293a 0d0a 2020 2020 2020 2020 7265  lf):..        re
+000010e0: 7475 726e 2073 656c 662e 7061 6e64 6173  turn self.pandas
+000010f0: 5f6d 6f64 656c 2e67 6574 5f72 6177 6461  _model.get_rawda
+00001100: 7461 2829 0d0a 0d0a 0d0a 0d0a 2320 5374  ta()........# St
+00001110: 6570 2031 3a20 4372 6561 7465 2061 2077  ep 1: Create a w
+00001120: 6f72 6b65 720d 0a63 6c61 7373 2053 7461  orker..class Sta
+00001130: 7475 734c 4544 2851 4f62 6a65 6374 293a  tusLED(QObject):
+00001140: 0d0a 2020 2020 6669 6e69 7368 6564 203d  ..    finished =
+00001150: 2070 7971 7453 6967 6e61 6c28 290d 0a20   pyqtSignal().. 
+00001160: 2020 2070 726f 6772 6573 7320 3d20 7079     progress = py
+00001170: 7174 5369 676e 616c 2869 6e74 290d 0a0d  qtSignal(int)...
+00001180: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+00001190: 5f28 7365 6c66 2c72 6229 3a0d 0a20 2020  _(self,rb):..   
+000011a0: 2020 2020 2073 7570 6572 2829 2e5f 5f69       super().__i
+000011b0: 6e69 745f 5f28 290d 0a20 2020 2020 2020  nit__()..       
+000011c0: 2073 656c 662e 7262 203d 2072 620d 0a0d   self.rb = rb...
+000011d0: 0a20 2020 2020 2020 2023 2073 656c 662e  .        # self.
+000011e0: 7262 203d 2072 620d 0a20 2020 2020 2020  rb = rb..       
+000011f0: 2073 656c 662e 6920 3d20 300d 0a20 2020   self.i = 0..   
+00001200: 2020 2020 2073 656c 662e 6a20 3d20 300d       self.j = 0.
+00001210: 0a20 2020 2020 2020 2073 656c 662e 6f6e  .        self.on
+00001220: 203d 2046 616c 7365 0d0a 2020 2020 2020   = False..      
+00001230: 2020 2320 7072 696e 7428 2257 4f52 4b45    # print("WORKE
+00001240: 5220 4352 4541 5445 4422 290d 0a0d 0a20  R CREATED").... 
+00001250: 2020 2064 6566 2072 756e 2873 656c 6629     def run(self)
+00001260: 3a0d 0a20 2020 2020 2020 2022 2222 4c6f  :..        """Lo
+00001270: 6e67 2d72 756e 6e69 6e67 2074 6173 6b2e  ng-running task.
+00001280: 2222 220d 0a20 2020 2020 2020 2077 6869  """..        whi
+00001290: 6c65 2854 7275 6529 3a0d 0a20 2020 2020  le(True):..     
+000012a0: 2020 2020 2020 2074 696d 652e 736c 6565         time.slee
+000012b0: 7028 2e31 290d 0a0d 0a20 2020 2020 2020  p(.1)....       
+000012c0: 2020 2020 2069 6620 7365 6c66 2e6f 6e3a       if self.on:
+000012d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000012e0: 2020 7365 6c66 2e69 202b 3d20 310d 0a0d    self.i += 1...
+000012f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001300: 2073 7461 7465 203d 2073 656c 662e 7262   state = self.rb
+00001310: 2e69 7343 6865 636b 6564 2829 0d0a 2020  .isChecked()..  
+00001320: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00001330: 7365 6c66 2e72 622e 7365 7443 6865 636b  self.rb.setCheck
+00001340: 6564 286e 6f74 2073 7461 7465 290d 0a0d  ed(not state)...
+00001350: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00001360: 2069 6620 7365 6c66 2e69 203d 3d20 353a   if self.i == 5:
+00001370: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00001380: 2020 2020 2020 7365 6c66 2e69 203d 2030        self.i = 0
+00001390: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000013a0: 2020 2020 2020 7365 6c66 2e73 7769 7463        self.switc
+000013b0: 685f 7374 6174 6528 290d 0a20 2020 2020  h_state()..     
+000013c0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+000013d0: 2020 2020 2020 2020 2020 2020 2020 7061                pa
+000013e0: 7373 0d0a 2020 2020 2020 2020 2020 2020  ss..            
+000013f0: 2020 2020 2320 7365 6c66 2e72 622e 7365      # self.rb.se
+00001400: 7443 6865 636b 6564 2846 616c 7365 290d  tChecked(False).
+00001410: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+00001420: 7072 696e 7428 2273 7461 7465 222c 7365  print("state",se
+00001430: 6c66 2e69 290d 0a0d 0a20 2020 2064 6566  lf.i)....    def
+00001440: 2073 7769 7463 685f 7374 6174 6528 7365   switch_state(se
+00001450: 6c66 293a 0d0a 2020 2020 2020 2020 7365  lf):..        se
+00001460: 6c66 2e6f 6e20 3d20 6e6f 7420 7365 6c66  lf.on = not self
+00001470: 2e6f 6e0d 0a20 2020 2020 2020 2023 2070  .on..        # p
+00001480: 7269 6e74 2822 7377 6974 6368 222c 2073  rint("switch", s
+00001490: 656c 662e 6f6e 290d 0a0d 0a20 2020 2020  elf.on)....     
+000014a0: 2020 2023 6966 206e 6f74 2073 656c 662e     #if not self.
+000014b0: 6f6e 3a0d 0a20 2020 2020 2020 2023 2020  on:..        #  
+000014c0: 2020 7365 6c66 2e72 622e 7365 7443 6865    self.rb.setChe
+000014d0: 636b 6564 2846 616c 7365 290d 0a0d 0a63  cked(False)....c
+000014e0: 6c61 7373 2054 7261 6e73 6163 7469 6f6e  lass Transaction
+000014f0: 4465 7369 676e 6572 2851 7457 6964 6765  Designer(QtWidge
+00001500: 7473 2e51 4d61 696e 5769 6e64 6f77 293a  ts.QMainWindow):
+00001510: 0d0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+00001520: 5f5f 2873 656c 6629 3a0d 0a20 2020 2020  __(self):..     
+00001530: 2020 2073 7570 6572 2854 7261 6e73 6163     super(Transac
+00001540: 7469 6f6e 4465 7369 676e 6572 2c20 7365  tionDesigner, se
+00001550: 6c66 292e 5f5f 696e 6974 5f5f 2829 2023  lf).__init__() #
+00001560: 2043 616c 6c20 7468 6520 696e 6865 7269   Call the inheri
+00001570: 7465 6420 636c 6173 7365 7320 5f5f 696e  ted classes __in
+00001580: 6974 5f5f 206d 6574 686f 640d 0a20 2020  it__ method..   
+00001590: 2020 2020 2070 7269 6e74 2822 6c6f 6164       print("load
+000015a0: 2e2e 2e22 290d 0a20 2020 2020 2020 2070  ...")..        p
+000015b0: 6174 6820 3d20 6f73 2e70 6174 682e 6469  ath = os.path.di
+000015c0: 726e 616d 6528 6f73 2e70 6174 682e 6162  rname(os.path.ab
+000015d0: 7370 6174 6828 5f5f 6669 6c65 5f5f 2929  spath(__file__))
+000015e0: 0d0a 2020 2020 2020 2020 6c6f 6164 7061  ..        loadpa
+000015f0: 7468 203d 206f 732e 7061 7468 2e6a 6f69  th = os.path.joi
+00001600: 6e28 7061 7468 2c22 7472 616e 7361 6374  n(path,"transact
+00001610: 696f 6e5f 6465 7369 676e 6572 5f6d 6169  ion_designer_mai
+00001620: 6e77 696e 646f 772e 7569 2229 0d0a 2020  nwindow.ui")..  
+00001630: 2020 2020 2020 636f 6e74 656e 7420 3d20        content = 
+00001640: 5b5d 0d0a 2020 2020 2020 2020 7375 6363  []..        succ
+00001650: 6573 7320 3d20 4661 6c73 650d 0a0d 0a20  ess = False.... 
+00001660: 2020 2020 2020 2073 656c 662e 7465 7374         self.test
+00001670: 5f6d 6f64 6520 3d20 4661 6c73 6520 2320  _mode = False # 
+00001680: 7573 6564 2066 6f72 2074 6573 7469 6e67  used for testing
+00001690: 0d0a 0d0a 2020 2020 2020 2020 2320 7265  ....        # re
+000016a0: 6d6f 7665 2066 6f6e 742d 7369 7a65 2074  move font-size t
+000016b0: 6f20 6669 7820 6275 6720 696e 2071 7420  o fix bug in qt 
+000016c0: 6465 7369 676e 6572 0d0a 2020 2020 2020  designer..      
+000016d0: 2020 7769 7468 206f 7065 6e28 6c6f 6164    with open(load
+000016e0: 7061 7468 2c22 7222 2920 6173 2066 696c  path,"r") as fil
+000016f0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00001700: 666f 7220 6c69 6e65 2069 6e20 6669 6c65  for line in file
+00001710: 2e72 6561 646c 696e 6573 2829 3a0d 0a20  .readlines():.. 
+00001720: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00001730: 6620 223c 706f 696e 7473 697a 653e 2d31  f "<pointsize>-1
+00001740: 3c2f 706f 696e 7473 697a 653e 2220 6e6f  </pointsize>" no
+00001750: 7420 696e 206c 696e 653a 0d0a 2020 2020  t in line:..    
+00001760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001770: 636f 6e74 656e 742e 6170 7065 6e64 286c  content.append(l
+00001780: 696e 6529 0d0a 0d0a 2020 2020 2020 2020  ine)....        
+00001790: 2020 2020 7375 6363 6573 7320 3d20 5472      success = Tr
+000017a0: 7565 0d0a 0d0a 2020 2020 2020 2020 6966  ue....        if
+000017b0: 2073 7563 6365 7373 3a0d 0a20 2020 2020   success:..     
+000017c0: 2020 2020 2020 2077 6974 6820 6f70 656e         with open
+000017d0: 286c 6f61 6470 6174 682c 2277 2229 2061  (loadpath,"w") a
+000017e0: 7320 6669 6c65 3a0d 0a20 2020 2020 2020  s file:..       
+000017f0: 2020 2020 2020 2020 2066 696c 652e 7772           file.wr
+00001800: 6974 6528 2222 2e6a 6f69 6e28 636f 6e74  ite("".join(cont
+00001810: 656e 7429 290d 0a0d 0a0d 0a0d 0a20 2020  ent))........   
+00001820: 2020 2020 2023 2075 6963 2e6c 6f61 6455       # uic.loadU
+00001830: 6928 2774 7261 6e73 6163 7469 6f6e 5f64  i('transaction_d
+00001840: 6573 6967 6e65 722e 7569 272c 2073 656c  esigner.ui', sel
+00001850: 6629 2023 204c 6f61 6420 7468 6520 2e75  f) # Load the .u
+00001860: 6920 6669 6c65 0d0a 2020 2020 2020 2020  i file..        
+00001870: 7569 632e 6c6f 6164 5569 286c 6f61 6470  uic.loadUi(loadp
+00001880: 6174 682c 2073 656c 6629 2023 204c 6f61  ath, self) # Loa
+00001890: 6420 7468 6520 2e75 6920 6669 6c65 0d0a  d the .ui file..
+000018a0: 2020 2020 2020 2020 7072 696e 7428 2264          print("d
+000018b0: 6f6e 652e 2229 0d0a 0d0a 2020 2020 2020  one.")....      
+000018c0: 2020 7365 6c66 2e73 6574 5769 6e64 6f77    self.setWindow
+000018d0: 466c 6167 7328 7365 6c66 2e77 696e 646f  Flags(self.windo
+000018e0: 7746 6c61 6773 2829 207c 2051 742e 5769  wFlags() | Qt.Wi
+000018f0: 6e64 6f77 4d69 6e69 6d69 7a65 4275 7474  ndowMinimizeButt
+00001900: 6f6e 4869 6e74 290d 0a20 2020 2020 2020  onHint)..       
+00001910: 2023 2073 656c 662e 7365 7446 6978 6564   # self.setFixed
+00001920: 5369 7a65 2873 656c 662e 7369 7a65 2829  Size(self.size()
+00001930: 293b 0d0a 2020 2020 2020 2020 7365 6c66  );..        self
+00001940: 2e66 6c69 7070 6564 203d 2046 616c 7365  .flipped = False
+00001950: 0d0a 0d0a 2020 2020 2020 2020 6d79 5f77  ....        my_w
+00001960: 6964 6765 7420 3d20 4d79 4472 6177 5769  idget = MyDrawWi
+00001970: 6467 6574 2873 656c 662e 6672 616d 652c  dget(self.frame,
+00001980: 7365 6c66 290d 0a20 2020 2020 2020 2023  self)..        #
+00001990: 206d 795f 7769 6467 6574 2e6d 6f76 6528   my_widget.move(
+000019a0: 2d35 2c2d 3535 2920 2328 3830 2c31 3630  -5,-55) #(80,160
+000019b0: 290d 0a0d 0a20 2020 2020 2020 2023 2073  )....        # s
+000019c0: 656c 662e 6c61 6265 6c5f 3137 2e73 6574  elf.label_17.set
+000019d0: 5669 7369 626c 6528 4661 6c73 6529 2023  Visible(False) #
+000019e0: 206c 6f67 6f0d 0a0d 0a20 2020 2020 2020   logo....       
+000019f0: 2073 656c 662e 636f 6465 5f64 6174 6120   self.code_data 
+00001a00: 3d20 7b7d 0d0a 0d0a 2020 2020 2020 2020  = {}....        
+00001a10: 2320 6c6f 6767 6572 2066 6f72 2063 6861  # logger for cha
+00001a20: 6e67 6573 2069 6e20 7472 616e 7361 6374  nges in transact
+00001a30: 696f 6e73 0d0a 2020 2020 2020 2020 7365  ions..        se
+00001a40: 6c66 2e6d 6164 655f 6368 616e 6765 7320  lf.made_changes 
+00001a50: 3d20 4661 6c73 650d 0a0d 0a20 2020 2020  = False....     
+00001a60: 2020 2073 656c 662e 6172 7261 6e67 6542     self.arrangeB
+00001a70: 7574 746f 6e5f 372e 7072 6573 7365 642e  utton_7.pressed.
+00001a80: 636f 6e6e 6563 7428 6c61 6d62 6461 3a20  connect(lambda: 
+00001a90: 7365 6c66 2e6e 6f74 6966 795f 746f 6f6c  self.notify_tool
+00001aa0: 7469 7028 7365 6c66 2e61 7272 616e 6765  tip(self.arrange
+00001ab0: 4275 7474 6f6e 5f37 2929 0d0a 2020 2020  Button_7))..    
+00001ac0: 2020 2020 7365 6c66 2e61 7272 616e 6765      self.arrange
+00001ad0: 4275 7474 6f6e 5f38 2e70 7265 7373 6564  Button_8.pressed
+00001ae0: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
+00001af0: 2073 656c 662e 6e6f 7469 6679 5f74 6f6f   self.notify_too
+00001b00: 6c74 6970 2873 656c 662e 6172 7261 6e67  ltip(self.arrang
+00001b10: 6542 7574 746f 6e5f 3829 290d 0a20 2020  eButton_8))..   
+00001b20: 2020 2020 2073 656c 662e 6172 7261 6e67       self.arrang
+00001b30: 6542 7574 746f 6e5f 392e 7072 6573 7365  eButton_9.presse
+00001b40: 642e 636f 6e6e 6563 7428 6c61 6d62 6461  d.connect(lambda
+00001b50: 3a20 7365 6c66 2e6e 6f74 6966 795f 746f  : self.notify_to
+00001b60: 6f6c 7469 7028 7365 6c66 2e61 7272 616e  oltip(self.arran
+00001b70: 6765 4275 7474 6f6e 5f39 2929 0d0a 2020  geButton_9))..  
+00001b80: 2020 2020 2020 7365 6c66 2e61 7272 616e        self.arran
+00001b90: 6765 4275 7474 6f6e 5f33 2e70 7265 7373  geButton_3.press
+00001ba0: 6564 2e63 6f6e 6e65 6374 286c 616d 6264  ed.connect(lambd
+00001bb0: 613a 2073 656c 662e 6e6f 7469 6679 5f74  a: self.notify_t
+00001bc0: 6f6f 6c74 6970 2873 656c 662e 6172 7261  ooltip(self.arra
+00001bd0: 6e67 6542 7574 746f 6e5f 3329 290d 0a20  ngeButton_3)).. 
+00001be0: 2020 2020 2020 2073 656c 662e 6172 7261         self.arra
+00001bf0: 6e67 6542 7574 746f 6e5f 342e 7072 6573  ngeButton_4.pres
+00001c00: 7365 642e 636f 6e6e 6563 7428 6c61 6d62  sed.connect(lamb
+00001c10: 6461 3a20 7365 6c66 2e6e 6f74 6966 795f  da: self.notify_
+00001c20: 746f 6f6c 7469 7028 7365 6c66 2e61 7272  tooltip(self.arr
+00001c30: 616e 6765 4275 7474 6f6e 5f34 2929 0d0a  angeButton_4))..
+00001c40: 2020 2020 2020 2020 7365 6c66 2e61 7272          self.arr
+00001c50: 616e 6765 4275 7474 6f6e 5f35 2e70 7265  angeButton_5.pre
+00001c60: 7373 6564 2e63 6f6e 6e65 6374 286c 616d  ssed.connect(lam
+00001c70: 6264 613a 2073 656c 662e 6e6f 7469 6679  bda: self.notify
+00001c80: 5f74 6f6f 6c74 6970 2873 656c 662e 6172  _tooltip(self.ar
+00001c90: 7261 6e67 6542 7574 746f 6e5f 3529 290d  rangeButton_5)).
+00001ca0: 0a20 2020 2020 2020 2073 656c 662e 6172  .        self.ar
+00001cb0: 7261 6e67 6542 7574 746f 6e5f 362e 7072  rangeButton_6.pr
+00001cc0: 6573 7365 642e 636f 6e6e 6563 7428 6c61  essed.connect(la
+00001cd0: 6d62 6461 3a20 7365 6c66 2e6e 6f74 6966  mbda: self.notif
+00001ce0: 795f 746f 6f6c 7469 7028 7365 6c66 2e61  y_tooltip(self.a
+00001cf0: 7272 616e 6765 4275 7474 6f6e 5f36 2929  rrangeButton_6))
+00001d00: 0d0a 2020 2020 2020 2020 2320 7365 6c66  ..        # self
+00001d10: 2e61 7272 616e 6765 4275 7474 6f6e 5f32  .arrangeButton_2
+00001d20: 2e70 7265 7373 6564 2e63 6f6e 6e65 6374  .pressed.connect
+00001d30: 286c 616d 6264 613a 2073 656c 662e 6e6f  (lambda: self.no
+00001d40: 7469 6679 5f74 6f6f 6c74 6970 2873 656c  tify_tooltip(sel
+00001d50: 662e 6172 7261 6e67 6542 7574 746f 6e5f  f.arrangeButton_
+00001d60: 3229 290d 0a0d 0a20 2020 2020 2020 2073  2))....        s
+00001d70: 656c 662e 6163 7469 6f6e 4765 6e65 7261  elf.actionGenera
+00001d80: 7465 5f42 616c 616e 6365 5368 6565 745f  te_BalanceSheet_
+00001d90: 4d61 7472 6978 2e74 7269 6767 6572 6564  Matrix.triggered
+00001da0: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
+00001db0: 2073 656c 662e 6765 6e5f 6261 6c61 6e63   self.gen_balanc
+00001dc0: 655f 6d61 7472 6978 2864 6574 6169 6c65  e_matrix(detaile
+00001dd0: 643d 4661 6c73 6529 290d 0a20 2020 2020  d=False))..     
+00001de0: 2020 2073 656c 662e 6163 7469 6f6e 4765     self.actionGe
+00001df0: 6e65 7261 7465 5f42 616c 616e 6365 5f4d  nerate_Balance_M
+00001e00: 6174 7269 785f 4465 7461 696c 6564 2e74  atrix_Detailed.t
+00001e10: 7269 6767 6572 6564 2e63 6f6e 6e65 6374  riggered.connect
+00001e20: 286c 616d 6264 613a 2073 656c 662e 6765  (lambda: self.ge
+00001e30: 6e5f 6261 6c61 6e63 655f 6d61 7472 6978  n_balance_matrix
+00001e40: 2864 6574 6169 6c65 643d 5472 7565 2929  (detailed=True))
+00001e50: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
+00001e60: 2e61 6765 6e74 3145 6469 742e 7465 7874  .agent1Edit.text
+00001e70: 4564 6974 6564 2e63 6f6e 6e65 6374 2873  Edited.connect(s
+00001e80: 656c 662e 6368 616e 6765 5f61 6c65 7274  elf.change_alert
+00001e90: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00001ea0: 6167 656e 7432 4564 6974 2e74 6578 7445  agent2Edit.textE
+00001eb0: 6469 7465 642e 636f 6e6e 6563 7428 7365  dited.connect(se
+00001ec0: 6c66 2e63 6861 6e67 655f 616c 6572 7429  lf.change_alert)
+00001ed0: 0d0a 2020 2020 2020 2020 7365 6c66 2e41  ..        self.A
+00001ee0: 7373 6574 4c69 7374 4c65 6674 2e74 6578  ssetListLeft.tex
+00001ef0: 7443 6861 6e67 6564 2e63 6f6e 6e65 6374  tChanged.connect
+00001f00: 2873 656c 662e 6368 616e 6765 5f61 6c65  (self.change_ale
+00001f10: 7274 290d 0a20 2020 2020 2020 2073 656c  rt)..        sel
+00001f20: 662e 4c69 6162 696c 6974 794c 6973 744c  f.LiabilityListL
+00001f30: 6566 742e 7465 7874 4368 616e 6765 642e  eft.textChanged.
+00001f40: 636f 6e6e 6563 7428 7365 6c66 2e63 6861  connect(self.cha
+00001f50: 6e67 655f 616c 6572 7429 0d0a 2020 2020  nge_alert)..    
+00001f60: 2020 2020 7365 6c66 2e45 7175 6974 794c      self.EquityL
+00001f70: 6973 744c 6566 742e 7465 7874 4368 616e  istLeft.textChan
+00001f80: 6765 642e 636f 6e6e 6563 7428 7365 6c66  ged.connect(self
+00001f90: 2e63 6861 6e67 655f 616c 6572 7429 0d0a  .change_alert)..
+00001fa0: 2020 2020 2020 2020 7365 6c66 2e41 7373          self.Ass
+00001fb0: 6574 4c69 7374 5269 6768 742e 7465 7874  etListRight.text
+00001fc0: 4368 616e 6765 642e 636f 6e6e 6563 7428  Changed.connect(
+00001fd0: 7365 6c66 2e63 6861 6e67 655f 616c 6572  self.change_aler
+00001fe0: 7429 0d0a 2020 2020 2020 2020 7365 6c66  t)..        self
+00001ff0: 2e4c 6961 6269 6c69 7479 4c69 7374 5269  .LiabilityListRi
+00002000: 6768 742e 7465 7874 4368 616e 6765 642e  ght.textChanged.
+00002010: 636f 6e6e 6563 7428 7365 6c66 2e63 6861  connect(self.cha
+00002020: 6e67 655f 616c 6572 7429 0d0a 2020 2020  nge_alert)..    
+00002030: 2020 2020 7365 6c66 2e45 7175 6974 794c      self.EquityL
+00002040: 6973 7452 6967 6874 2e74 6578 7443 6861  istRight.textCha
+00002050: 6e67 6564 2e63 6f6e 6e65 6374 2873 656c  nged.connect(sel
+00002060: 662e 6368 616e 6765 5f61 6c65 7274 290d  f.change_alert).
+00002070: 0a20 2020 2020 2020 2073 656c 662e 6564  .        self.ed
+00002080: 6974 5375 626a 6563 742e 7465 7874 4564  itSubject.textEd
+00002090: 6974 6564 2e63 6f6e 6e65 6374 2873 656c  ited.connect(sel
+000020a0: 662e 6368 616e 6765 5f61 6c65 7274 290d  f.change_alert).
+000020b0: 0a20 2020 2020 2020 2073 656c 662e 6564  .        self.ed
+000020c0: 6974 5368 6f72 746e 616d 652e 7465 7874  itShortname.text
+000020d0: 4564 6974 6564 2e63 6f6e 6e65 6374 2873  Edited.connect(s
+000020e0: 656c 662e 6368 616e 6765 5f61 6c65 7274  elf.change_alert
+000020f0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00002100: 6564 6974 5175 616e 7469 7479 2e74 6578  editQuantity.tex
+00002110: 7445 6469 7465 642e 636f 6e6e 6563 7428  tEdited.connect(
+00002120: 7365 6c66 2e63 6861 6e67 655f 616c 6572  self.change_aler
+00002130: 7429 0d0a 2020 2020 2020 2020 7365 6c66  t)..        self
+00002140: 2e65 6469 7444 6573 6372 6970 7469 6f6e  .editDescription
+00002150: 2e74 6578 7445 6469 7465 642e 636f 6e6e  .textEdited.conn
+00002160: 6563 7428 7365 6c66 2e63 6861 6e67 655f  ect(self.change_
+00002170: 616c 6572 7429 0d0a 0d0a 2020 2020 2020  alert)....      
+00002180: 2020 7365 6c66 2e63 6f6d 626f 496e 636f    self.comboInco
+00002190: 6d65 4c65 6674 2e63 7572 7265 6e74 496e  meLeft.currentIn
+000021a0: 6465 7843 6861 6e67 6564 2e63 6f6e 6e65  dexChanged.conne
+000021b0: 6374 2873 656c 662e 6368 616e 6765 5f61  ct(self.change_a
+000021c0: 6c65 7274 290d 0a20 2020 2020 2020 2073  lert)..        s
+000021d0: 656c 662e 636f 6d62 6f43 6173 684c 6566  elf.comboCashLef
+000021e0: 742e 6375 7272 656e 7449 6e64 6578 4368  t.currentIndexCh
+000021f0: 616e 6765 642e 636f 6e6e 6563 7428 7365  anged.connect(se
+00002200: 6c66 2e63 6861 6e67 655f 616c 6572 7429  lf.change_alert)
+00002210: 0d0a 2020 2020 2020 2020 7365 6c66 2e63  ..        self.c
+00002220: 6f6d 626f 496e 636f 6d65 5269 6768 742e  omboIncomeRight.
+00002230: 6375 7272 656e 7449 6e64 6578 4368 616e  currentIndexChan
+00002240: 6765 642e 636f 6e6e 6563 7428 7365 6c66  ged.connect(self
+00002250: 2e63 6861 6e67 655f 616c 6572 7429 0d0a  .change_alert)..
+00002260: 2020 2020 2020 2020 7365 6c66 2e63 6f6d          self.com
+00002270: 626f 4361 7368 5269 6768 742e 6375 7272  boCashRight.curr
+00002280: 656e 7449 6e64 6578 4368 616e 6765 642e  entIndexChanged.
+00002290: 636f 6e6e 6563 7428 7365 6c66 2e63 6861  connect(self.cha
+000022a0: 6e67 655f 616c 6572 7429 0d0a 2020 2020  nge_alert)..    
+000022b0: 2020 2020 7365 6c66 2e72 6567 6973 7465      self.registe
+000022c0: 7246 6c6f 7742 6f78 2e63 7572 7265 6e74  rFlowBox.current
+000022d0: 496e 6465 7843 6861 6e67 6564 2e63 6f6e  IndexChanged.con
+000022e0: 6e65 6374 2873 656c 662e 6368 616e 6765  nect(self.change
+000022f0: 5f61 6c65 7274 290d 0a20 2020 2020 2020  _alert)..       
+00002300: 2073 656c 662e 7265 6769 7374 6572 466c   self.registerFl
+00002310: 6f77 426f 782e 6375 7272 656e 7449 6e64  owBox.currentInd
+00002320: 6578 4368 616e 6765 642e 636f 6e6e 6563  exChanged.connec
+00002330: 7428 6c61 6d62 6461 3a20 7072 696e 7428  t(lambda: print(
+00002340: 2252 4547 4953 5445 5220 464c 4f57 222c  "REGISTER FLOW",
+00002350: 2073 656c 662e 7265 6769 7374 6572 466c   self.registerFl
+00002360: 6f77 426f 782e 6375 7272 656e 7454 6578  owBox.currentTex
+00002370: 7428 2929 290d 0a20 2020 2020 2020 2073  t()))..        s
+00002380: 656c 662e 636f 6d62 6f49 6e63 6f6d 654c  elf.comboIncomeL
+00002390: 6566 742e 6375 7272 656e 7449 6e64 6578  eft.currentIndex
+000023a0: 4368 616e 6765 642e 636f 6e6e 6563 7428  Changed.connect(
+000023b0: 6c61 6d62 6461 3a20 7072 696e 7428 2252  lambda: print("R
+000023c0: 4547 4953 5445 5220 464c 4f57 222c 2073  EGISTER FLOW", s
+000023d0: 656c 662e 7265 6769 7374 6572 466c 6f77  elf.registerFlow
+000023e0: 426f 782e 6375 7272 656e 7454 6578 7428  Box.currentText(
+000023f0: 2929 290d 0a0d 0a20 2020 2020 2020 2073  )))....        s
+00002400: 656c 662e 6564 6974 5479 7065 2e63 7572  elf.editType.cur
+00002410: 7265 6e74 496e 6465 7843 6861 6e67 6564  rentIndexChanged
+00002420: 2e63 6f6e 6e65 6374 2873 656c 662e 6368  .connect(self.ch
+00002430: 616e 6765 5f61 6c65 7274 290d 0a20 2020  ange_alert)..   
+00002440: 2020 2020 2073 656c 662e 636f 6d62 6f55       self.comboU
+00002450: 6e69 6469 722e 6375 7272 656e 7449 6e64  nidir.currentInd
+00002460: 6578 4368 616e 6765 642e 636f 6e6e 6563  exChanged.connec
+00002470: 7428 7365 6c66 2e63 6861 6e67 655f 616c  t(self.change_al
+00002480: 6572 7429 0d0a 0d0a 0d0a 2020 2020 2020  ert)......      
+00002490: 2020 7365 6c66 2e73 7069 6e42 6f78 466f    self.spinBoxFo
+000024a0: 6e74 5369 7a65 2e76 616c 7565 4368 616e  ntSize.valueChan
+000024b0: 6765 642e 636f 6e6e 6563 7428 6c61 6d62  ged.connect(lamb
+000024c0: 6461 3a20 7365 6c66 2e64 7261 7763 616e  da: self.drawcan
+000024d0: 7661 732e 7570 6461 7465 2829 290d 0a20  vas.update()).. 
+000024e0: 2020 2020 2020 2073 656c 662e 7370 696e         self.spin
+000024f0: 426f 7846 6f6e 7453 697a 655f 322e 7661  BoxFontSize_2.va
+00002500: 6c75 6543 6861 6e67 6564 2e63 6f6e 6e65  lueChanged.conne
+00002510: 6374 286c 616d 6264 613a 2073 656c 662e  ct(lambda: self.
+00002520: 6472 6177 6361 6e76 6173 2e75 7064 6174  drawcanvas.updat
+00002530: 6528 2929 0d0a 0d0a 2020 2020 2020 2020  e())....        
+00002540: 7365 6c66 2e46 696c 7465 726c 696e 6545  self.FilterlineE
+00002550: 6469 742e 7465 7874 4368 616e 6765 642e  dit.textChanged.
+00002560: 636f 6e6e 6563 7428 7365 6c66 2e75 7064  connect(self.upd
+00002570: 6174 655f 7461 626c 6529 0d0a 0d0a 2020  ate_table)....  
+00002580: 2020 2020 2020 7365 6c66 2e63 6865 636b        self.check
+00002590: 426f 782e 7374 6174 6543 6861 6e67 6564  Box.stateChanged
+000025a0: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
+000025b0: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+000025c0: 2e75 7064 6174 6528 2929 0d0a 2020 2020  .update())..    
+000025d0: 2020 2020 7365 6c66 2e63 6865 636b 426f      self.checkBo
+000025e0: 785f 322e 7374 6174 6543 6861 6e67 6564  x_2.stateChanged
+000025f0: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
+00002600: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+00002610: 2e75 7064 6174 6528 2929 0d0a 2020 2020  .update())..    
+00002620: 2020 2020 7365 6c66 2e63 6865 636b 426f      self.checkBo
+00002630: 785f 332e 7374 6174 6543 6861 6e67 6564  x_3.stateChanged
+00002640: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
+00002650: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+00002660: 2e75 7064 6174 6528 2929 0d0a 2020 2020  .update())..    
+00002670: 2020 2020 7365 6c66 2e63 6865 636b 426f      self.checkBo
+00002680: 785f 342e 7374 6174 6543 6861 6e67 6564  x_4.stateChanged
+00002690: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
+000026a0: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+000026b0: 2e75 7064 6174 6528 2929 0d0a 2020 2020  .update())..    
+000026c0: 2020 2020 7365 6c66 2e63 6865 636b 426f      self.checkBo
+000026d0: 785f 352e 7374 6174 6543 6861 6e67 6564  x_5.stateChanged
+000026e0: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
+000026f0: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+00002700: 2e75 7064 6174 6528 2929 0d0a 2020 2020  .update())..    
+00002710: 2020 2020 7365 6c66 2e63 6865 636b 426f      self.checkBo
+00002720: 785f 362e 7374 6174 6543 6861 6e67 6564  x_6.stateChanged
+00002730: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
+00002740: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+00002750: 2e75 7064 6174 6528 2929 0d0a 2020 2020  .update())..    
+00002760: 2020 2020 7365 6c66 2e63 6865 636b 426f      self.checkBo
+00002770: 785f 372e 7374 6174 6543 6861 6e67 6564  x_7.stateChanged
+00002780: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
+00002790: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+000027a0: 2e75 7064 6174 6528 2929 0d0a 2020 2020  .update())..    
+000027b0: 2020 2020 7365 6c66 2e63 6865 636b 426f      self.checkBo
+000027c0: 785f 382e 7374 6174 6543 6861 6e67 6564  x_8.stateChanged
+000027d0: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
+000027e0: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+000027f0: 2e75 7064 6174 6528 2929 0d0a 2020 2020  .update())..    
+00002800: 2020 2020 7365 6c66 2e63 6865 636b 426f      self.checkBo
+00002810: 785f 392e 7374 6174 6543 6861 6e67 6564  x_9.stateChanged
+00002820: 2e63 6f6e 6e65 6374 286c 616d 6264 613a  .connect(lambda:
+00002830: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+00002840: 2e75 7064 6174 6528 2929 0d0a 0d0a 2020  .update())....  
+00002850: 2020 2020 2020 2320 7374 6174 7573 204c        # status L
+00002860: 4544 0d0a 2020 2020 2020 2020 7365 6c66  ED..        self
+00002870: 2e74 6872 6561 6420 3d20 5154 6872 6561  .thread = QThrea
+00002880: 6428 290d 0a0d 0a20 2020 2020 2020 2073  d()....        s
+00002890: 656c 662e 776f 726b 6572 203d 2053 7461  elf.worker = Sta
+000028a0: 7475 734c 4544 2873 656c 662e 7261 6469  tusLED(self.radi
+000028b0: 6f42 7574 746f 6e29 0d0a 2020 2020 2020  oButton)..      
+000028c0: 2020 7365 6c66 2e77 6f72 6b65 722e 6d6f    self.worker.mo
+000028d0: 7665 546f 5468 7265 6164 2873 656c 662e  veToThread(self.
+000028e0: 7468 7265 6164 290d 0a20 2020 2020 2020  thread)..       
+000028f0: 2073 656c 662e 776f 726b 6572 2e66 696e   self.worker.fin
+00002900: 6973 6865 642e 636f 6e6e 6563 7428 7365  ished.connect(se
+00002910: 6c66 2e77 6f72 6b65 722e 6465 6c65 7465  lf.worker.delete
+00002920: 4c61 7465 7229 0d0a 2020 2020 2020 2020  Later)..        
+00002930: 7365 6c66 2e74 6872 6561 642e 6669 6e69  self.thread.fini
+00002940: 7368 6564 2e63 6f6e 6e65 6374 2873 656c  shed.connect(sel
+00002950: 662e 7468 7265 6164 2e64 656c 6574 654c  f.thread.deleteL
+00002960: 6174 6572 290d 0a20 2020 2020 2020 2073  ater)..        s
+00002970: 656c 662e 7468 7265 6164 2e73 7461 7274  elf.thread.start
+00002980: 6564 2e63 6f6e 6e65 6374 2873 656c 662e  ed.connect(self.
+00002990: 776f 726b 6572 2e72 756e 290d 0a20 2020  worker.run)..   
+000029a0: 2020 2020 2073 656c 662e 7468 7265 6164       self.thread
+000029b0: 2e73 7461 7274 2829 0d0a 0d0a 2020 2020  .start()....    
+000029c0: 2020 2020 7365 6c66 2e74 6865 6d65 5f6d      self.theme_m
+000029d0: 616e 6167 6572 203d 2054 6865 6d65 4d61  anager = ThemeMa
+000029e0: 6e61 6765 7228 7365 6c66 290d 0a20 2020  nager(self)..   
+000029f0: 2020 2020 2073 656c 662e 7365 7453 7479       self.setSty
+00002a00: 6c65 5368 6565 7428 7365 6c66 2e74 6865  leSheet(self.the
+00002a10: 6d65 5f6d 616e 6167 6572 2e67 6574 5f73  me_manager.get_s
+00002a20: 7479 6c65 7368 6565 7428 226d 6169 6e22  tylesheet("main"
+00002a30: 2929 0d0a 0d0a 2020 2020 2020 2020 7365  ))....        se
+00002a40: 6c66 2e63 7572 7265 6e74 5f66 696c 6520  lf.current_file 
+00002a50: 3d20 4e6f 6e65 0d0a 0d0a 2020 2020 2020  = None....      
+00002a60: 2020 2320 2d2d 0d0a 2020 2020 2020 2020    # --..        
+00002a70: 7365 6c66 2e64 7261 7763 616e 7661 7320  self.drawcanvas 
+00002a80: 3d20 6d79 5f77 6964 6765 740d 0a20 2020  = my_widget..   
+00002a90: 2020 2020 2073 656c 662e 6472 6177 6361       self.drawca
+00002aa0: 6e76 6173 2e6d 6f64 6520 3d20 2264 7261  nvas.mode = "dra
+00002ab0: 6722 0d0a 0d0a 2020 2020 2020 2020 7365  g"....        se
+00002ac0: 6c66 2e62 6163 6b75 705f 7374 7220 3d20  lf.backup_str = 
+00002ad0: 2222 0d0a 2020 2020 2020 2020 2320 7365  ""..        # se
+00002ae0: 6c66 2e73 6574 4d6f 7573 6554 7261 636b  lf.setMouseTrack
+00002af0: 696e 6728 5472 7565 290d 0a20 2020 2020  ing(True)..     
+00002b00: 2020 2023 2073 656c 662e 6e65 7874 4275     # self.nextBu
+00002b10: 7474 6f6e 2e70 7265 7373 6564 2e63 6f6e  tton.pressed.con
+00002b20: 6e65 6374 2873 656c 662e 676f 746f 5f6e  nect(self.goto_n
+00002b30: 6578 7429 0d0a 2020 2020 2020 2020 7365  ext)..        se
+00002b40: 6c66 2e62 726f 7773 6542 7574 746f 6e2e  lf.browseButton.
+00002b50: 7472 6967 6765 7265 642e 636f 6e6e 6563  triggered.connec
+00002b60: 7428 7365 6c66 2e62 726f 7773 6529 0d0a  t(self.browse)..
+00002b70: 2020 2020 2020 2020 2320 7365 6c66 2e73          # self.s
+00002b80: 6176 6542 7574 746f 6e2e 7472 6967 6765  aveButton.trigge
+00002b90: 7265 642e 636f 6e6e 6563 7428 7365 6c66  red.connect(self
+00002ba0: 2e73 6176 6529 0d0a 2020 2020 2020 2020  .save)..        
+00002bb0: 7365 6c66 2e73 6176 6541 7342 7574 746f  self.saveAsButto
+00002bc0: 6e2e 7472 6967 6765 7265 642e 636f 6e6e  n.triggered.conn
+00002bd0: 6563 7428 7365 6c66 2e73 6176 655f 646c  ect(self.save_dl
+00002be0: 6729 0d0a 2020 2020 2020 2020 7365 6c66  g)..        self
+00002bf0: 2e73 6176 6542 7569 6c64 4275 7474 6f6e  .saveBuildButton
+00002c00: 2e74 7269 6767 6572 6564 2e63 6f6e 6e65  .triggered.conne
+00002c10: 6374 2873 656c 662e 7361 7665 5f61 6e64  ct(self.save_and
+00002c20: 5f62 7569 6c64 290d 0a20 2020 2020 2020  _build)..       
+00002c30: 2023 2073 656c 662e 466c 6970 4865 6967   # self.FlipHeig
+00002c40: 6874 4275 7474 6f6e 2e70 7265 7373 6564  htButton.pressed
+00002c50: 2e63 6f6e 6e65 6374 2873 656c 662e 666c  .connect(self.fl
+00002c60: 6970 5f68 6569 6768 7429 0d0a 2020 2020  ip_height)..    
+00002c70: 2020 2020 7365 6c66 2e61 6374 696f 6e46      self.actionF
+00002c80: 6c69 705f 5669 6577 2e74 7269 6767 6572  lip_View.trigger
+00002c90: 6564 2e63 6f6e 6e65 6374 2873 656c 662e  ed.connect(self.
+00002ca0: 666c 6970 5f68 6569 6768 7429 0d0a 2020  flip_height)..  
+00002cb0: 2020 2020 2020 7365 6c66 2e61 6374 696f        self.actio
+00002cc0: 6e52 6573 746f 7265 5f4f 7269 6769 6e61  nRestore_Origina
+00002cd0: 6c5f 5369 7a65 2e74 7269 6767 6572 6564  l_Size.triggered
+00002ce0: 2e63 6f6e 6e65 6374 2873 656c 662e 7265  .connect(self.re
+00002cf0: 7374 6f72 655f 6f72 6967 696e 616c 5f73  store_original_s
+00002d00: 697a 6529 0d0a 0d0a 2020 2020 2020 2020  ize)....        
+00002d10: 7365 6c66 2e61 6374 696f 6e53 686f 775f  self.actionShow_
+00002d20: 4f75 7470 7574 5f4c 6f67 2e74 7269 6767  Output_Log.trigg
+00002d30: 6572 6564 2e63 6f6e 6e65 6374 2873 656c  ered.connect(sel
+00002d40: 662e 7368 6f77 5f6f 7574 7075 745f 6469  f.show_output_di
+00002d50: 7370 6c61 7929 0d0a 0d0a 2020 2020 2020  splay)....      
+00002d60: 2020 2320 7365 6c66 2e73 686f 7767 7261    # self.showgra
+00002d70: 7068 4275 7474 6f6e 2e74 7269 6767 6572  phButton.trigger
+00002d80: 6564 2e63 6f6e 6e65 6374 2873 656c 662e  ed.connect(self.
+00002d90: 7368 6f77 5f67 7261 7068 290d 0a20 2020  show_graph)..   
+00002da0: 2020 2020 2073 656c 662e 6765 6e4d 6174       self.genMat
+00002db0: 4275 7474 6f6e 2e74 7269 6767 6572 6564  Button.triggered
+00002dc0: 2e63 6f6e 6e65 6374 2873 656c 662e 7472  .connect(self.tr
+00002dd0: 795f 6765 6e5f 6d61 7472 6978 290d 0a20  y_gen_matrix).. 
+00002de0: 2020 2020 2020 2023 2073 656c 662e 6765         # self.ge
+00002df0: 6e43 6f64 6542 7574 746f 6e2e 7472 6967  nCodeButton.trig
+00002e00: 6765 7265 642e 636f 6e6e 6563 7428 7365  gered.connect(se
+00002e10: 6c66 2e67 656e 5f63 6f64 6529 0d0a 2020  lf.gen_code)..  
+00002e20: 2020 2020 2020 2320 7365 6c66 2e67 656e        # self.gen
+00002e30: 5465 7842 7574 746f 6e2e 7072 6573 7365  TexButton.presse
+00002e40: 642e 636f 6e6e 6563 7428 7365 6c66 2e67  d.connect(self.g
+00002e50: 656e 5f74 6578 5f64 6573 6372 6970 7469  en_tex_descripti
+00002e60: 6f6e 290d 0a20 2020 2020 2020 2073 656c  on)..        sel
+00002e70: 662e 6765 6e49 4353 4275 7474 6f6e 2e74  f.genICSButton.t
+00002e80: 7269 6767 6572 6564 2e63 6f6e 6e65 6374  riggered.connect
+00002e90: 2873 656c 662e 6765 6e5f 7465 785f 6963  (self.gen_tex_ic
+00002ea0: 7329 0d0a 0d0a 2020 2020 2020 2020 7365  s)....        se
+00002eb0: 6c66 2e67 7261 7068 7368 6f77 696e 636f  lf.graphshowinco
+00002ec0: 6d65 2e70 7265 7373 6564 2e63 6f6e 6e65  me.pressed.conne
+00002ed0: 6374 2873 656c 662e 6765 6e5f 6963 735f  ct(self.gen_ics_
+00002ee0: 7369 6e67 6c65 290d 0a20 2020 2020 2020  single)..       
+00002ef0: 2073 656c 662e 6765 6e43 4653 4275 7474   self.genCFSButt
+00002f00: 6f6e 2e70 7265 7373 6564 2e63 6f6e 6e65  on.pressed.conne
+00002f10: 6374 2873 656c 662e 6765 6e5f 6361 7368  ct(self.gen_cash
+00002f20: 666c 6f77 5f73 696e 676c 6529 0d0a 0d0a  flow_single)....
+00002f30: 2020 2020 2020 2020 7365 6c66 2e65 6469          self.edi
+00002f40: 744d 6169 6e4c 6f6f 7042 7574 746f 6e2e  tMainLoopButton.
+00002f50: 7472 6967 6765 7265 642e 636f 6e6e 6563  triggered.connec
+00002f60: 7428 7365 6c66 2e65 6469 745f 6d61 696e  t(self.edit_main
+00002f70: 6c6f 6f70 290d 0a0d 0a20 2020 2020 2020  loop)....       
+00002f80: 2073 656c 662e 6275 696c 6450 726f 6a65   self.buildProje
+00002f90: 6374 4275 7474 6f6e 2e74 7269 6767 6572  ctButton.trigger
+00002fa0: 6564 2e63 6f6e 6e65 6374 286c 616d 6264  ed.connect(lambd
+00002fb0: 613a 2073 656c 662e 6275 696c 645f 7072  a: self.build_pr
+00002fc0: 6f6a 6563 7428 6f76 6572 7772 6974 653d  oject(overwrite=
+00002fd0: 5472 7565 2929 0d0a 2020 2020 2020 2020  True))..        
+00002fe0: 7365 6c66 2e72 756e 4275 7474 6f6e 2e74  self.runButton.t
+00002ff0: 7269 6767 6572 6564 2e63 6f6e 6e65 6374  riggered.connect
+00003000: 2873 656c 662e 7275 6e5f 7072 6f6a 6563  (self.run_projec
+00003010: 7429 0d0a 0d0a 2020 2020 2020 2020 7365  t)....        se
+00003020: 6c66 2e73 686f 7274 6375 7420 3d20 5153  lf.shortcut = QS
+00003030: 686f 7274 6375 7428 514b 6579 5365 7175  hortcut(QKeySequ
+00003040: 656e 6365 2822 4374 726c 2b53 2229 2c73  ence("Ctrl+S"),s
+00003050: 656c 6629 0d0a 2020 2020 2020 2020 7365  elf)..        se
+00003060: 6c66 2e73 686f 7274 6375 742e 6163 7469  lf.shortcut.acti
+00003070: 7661 7465 642e 636f 6e6e 6563 7428 7365  vated.connect(se
+00003080: 6c66 2e73 6176 655f 616e 645f 6275 696c  lf.save_and_buil
+00003090: 6429 0d0a 2020 2020 2020 2020 7365 6c66  d)..        self
+000030a0: 2e61 6374 696f 6e41 626f 7574 2e74 7269  .actionAbout.tri
+000030b0: 6767 6572 6564 2e63 6f6e 6e65 6374 286c  ggered.connect(l
+000030c0: 616d 6264 613a 2073 656c 662e 6e6f 7469  ambda: self.noti
+000030d0: 6679 2822 7366 6374 6f6c 732d 6174 7475  fy("sfctols-attu
+000030e0: 6e65 2076 6572 2e20 302e 3220 636f 6d70  ne ver. 0.2 comp
+000030f0: 6174 6962 6c65 2077 6974 6820 7366 6374  atible with sfct
+00003100: 6f6f 6c73 203e 3d20 312e 302e 312e 2054  ools >= 1.0.1. T
+00003110: 6861 6e6b 7320 666f 7220 7573 696e 6721  hanks for using!
+00003120: 2050 6c65 6173 6520 7265 706f 7274 2062   Please report b
+00003130: 7567 7320 746f 2074 686f 6d61 732e 6261  ugs to thomas.ba
+00003140: 6c64 6175 6640 646c 722e 6465 222c 7469  ldauf@dlr.de",ti
+00003150: 746c 653d 2241 626f 7574 2074 6869 7320  tle="About this 
+00003160: 736f 6674 7761 7265 2229 290d 0a20 2020  software"))..   
+00003170: 2020 2020 2073 656c 662e 6163 7469 6f6e       self.action
+00003180: 466c 6f77 4d61 7472 6978 5f74 6f5f 4578  FlowMatrix_to_Ex
+00003190: 6365 6c5f 6669 6c65 2e74 7269 6767 6572  cel_file.trigger
+000031a0: 6564 2e63 6f6e 6e65 6374 286c 616d 6264  ed.connect(lambd
+000031b0: 613a 2073 656c 662e 6765 6e5f 6d61 7472  a: self.gen_matr
+000031c0: 6978 286d 6f64 653d 2265 7863 656c 2229  ix(mode="excel")
+000031d0: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
+000031e0: 662e 6163 7469 6f6e 5377 6974 6368 5f44  f.actionSwitch_D
+000031f0: 6172 6b5f 4272 6967 6874 5f4d 6f64 652e  ark_Bright_Mode.
+00003200: 7472 6967 6765 7265 642e 636f 6e6e 6563  triggered.connec
+00003210: 7428 7365 6c66 2e73 7769 7463 685f 7468  t(self.switch_th
+00003220: 656d 6529 0d0a 0d0a 2020 2020 2020 2020  eme)....        
+00003230: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
+00003240: 5669 6577 2e73 6574 4564 6974 5472 6967  View.setEditTrig
+00003250: 6765 7273 2851 4162 7374 7261 6374 4974  gers(QAbstractIt
+00003260: 656d 5669 6577 2e4e 6f45 6469 7454 7269  emView.NoEditTri
+00003270: 6767 6572 7329 0d0a 2020 2020 2020 2020  ggers)..        
+00003280: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
+00003290: 5669 6577 2e64 6f75 626c 6543 6c69 636b  View.doubleClick
+000032a0: 6564 2e63 6f6e 6e65 6374 2873 656c 662e  ed.connect(self.
+000032b0: 6461 7461 5f73 656c 6563 7429 0d0a 2020  data_select)..  
+000032c0: 2020 2020 2020 7365 6c66 2e74 7261 6e73        self.trans
+000032d0: 6163 7469 6f6e 5669 6577 2e73 6574 436f  actionView.setCo
+000032e0: 6c75 6d6e 5769 6474 6828 302c 2031 3230  lumnWidth(0, 120
+000032f0: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
+00003300: 662e 6172 7261 6e67 6542 7574 746f 6e2e  f.arrangeButton.
+00003310: 7072 6573 7365 642e 636f 6e6e 6563 7428  pressed.connect(
+00003320: 7365 6c66 2e61 7272 616e 6765 5f70 7265  self.arrange_pre
+00003330: 7474 7929 0d0a 2020 2020 2020 2020 7365  tty)..        se
+00003340: 6c66 2e72 656d 6f76 6542 7574 746f 6e2e  lf.removeButton.
+00003350: 7072 6573 7365 642e 636f 6e6e 6563 7428  pressed.connect(
+00003360: 7365 6c66 2e72 656d 6f76 655f 6974 656d  self.remove_item
+00003370: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
+00003380: 662e 6263 312e 7072 6573 7365 642e 636f  f.bc1.pressed.co
+00003390: 6e6e 6563 7428 6c61 6d62 6461 3a20 7365  nnect(lambda: se
+000033a0: 6c66 2e63 6861 6e67 655f 636f 6c6f 7228  lf.change_color(
+000033b0: 3129 290d 0a20 2020 2020 2020 2073 656c  1))..        sel
+000033c0: 662e 6263 322e 7072 6573 7365 642e 636f  f.bc2.pressed.co
+000033d0: 6e6e 6563 7428 6c61 6d62 6461 3a20 7365  nnect(lambda: se
+000033e0: 6c66 2e63 6861 6e67 655f 636f 6c6f 7228  lf.change_color(
+000033f0: 3229 290d 0a20 2020 2020 2020 2073 656c  2))..        sel
+00003400: 662e 6263 332e 7072 6573 7365 642e 636f  f.bc3.pressed.co
+00003410: 6e6e 6563 7428 6c61 6d62 6461 3a20 7365  nnect(lambda: se
+00003420: 6c66 2e63 6861 6e67 655f 636f 6c6f 7228  lf.change_color(
+00003430: 3329 290d 0a20 2020 2020 2020 2073 656c  3))..        sel
+00003440: 662e 6263 342e 7072 6573 7365 642e 636f  f.bc4.pressed.co
+00003450: 6e6e 6563 7428 6c61 6d62 6461 3a20 7365  nnect(lambda: se
+00003460: 6c66 2e63 6861 6e67 655f 636f 6c6f 7228  lf.change_color(
+00003470: 3429 290d 0a20 2020 2020 2020 2073 656c  4))..        sel
+00003480: 662e 6263 352e 7072 6573 7365 642e 636f  f.bc5.pressed.co
+00003490: 6e6e 6563 7428 6c61 6d62 6461 3a20 7365  nnect(lambda: se
+000034a0: 6c66 2e63 6861 6e67 655f 636f 6c6f 7228  lf.change_color(
+000034b0: 3529 290d 0a20 2020 2020 2020 2073 656c  5))..        sel
+000034c0: 662e 6263 362e 7072 6573 7365 642e 636f  f.bc6.pressed.co
+000034d0: 6e6e 6563 7428 6c61 6d62 6461 3a20 7365  nnect(lambda: se
+000034e0: 6c66 2e63 6861 6e67 655f 636f 6c6f 7228  lf.change_color(
+000034f0: 3629 290d 0a20 2020 2020 2020 2073 656c  6))..        sel
+00003500: 662e 6263 372e 7072 6573 7365 642e 636f  f.bc7.pressed.co
+00003510: 6e6e 6563 7428 6c61 6d62 6461 3a20 7365  nnect(lambda: se
+00003520: 6c66 2e63 6861 6e67 655f 636f 6c6f 7228  lf.change_color(
+00003530: 3729 290d 0a20 2020 2020 2020 2073 656c  7))..        sel
+00003540: 662e 6263 382e 7072 6573 7365 642e 636f  f.bc8.pressed.co
+00003550: 6e6e 6563 7428 6c61 6d62 6461 3a20 7365  nnect(lambda: se
+00003560: 6c66 2e63 6861 6e67 655f 636f 6c6f 7228  lf.change_color(
+00003570: 3829 290d 0a0d 0a20 2020 2020 2020 2073  8))....        s
+00003580: 656c 662e 6274 6e5f 6373 6176 652e 7072  elf.btn_csave.pr
+00003590: 6573 7365 642e 636f 6e6e 6563 7428 6c61  essed.connect(la
+000035a0: 6d62 6461 3a20 7365 6c66 2e74 6865 6d65  mbda: self.theme
+000035b0: 5f6d 616e 6167 6572 2e73 6176 655f 636f  _manager.save_co
+000035c0: 6c6f 7273 2829 290d 0a20 2020 2020 2020  lors())..       
+000035d0: 2073 656c 662e 6274 6e5f 636c 6f61 642e   self.btn_cload.
+000035e0: 7072 6573 7365 642e 636f 6e6e 6563 7428  pressed.connect(
+000035f0: 6c61 6d62 6461 3a20 7365 6c66 2e74 6865  lambda: self.the
+00003600: 6d65 5f6d 616e 6167 6572 2e6c 6f61 645f  me_manager.load_
+00003610: 636f 6c6f 7273 2829 290d 0a20 2020 2020  colors())..     
+00003620: 2020 2073 656c 662e 6274 6e5f 6372 6573     self.btn_cres
+00003630: 746f 7265 2e70 7265 7373 6564 2e63 6f6e  tore.pressed.con
+00003640: 6e65 6374 286c 616d 6264 613a 2073 656c  nect(lambda: sel
+00003650: 662e 7468 656d 655f 6d61 6e61 6765 722e  f.theme_manager.
+00003660: 7265 7374 6f72 6528 2929 0d0a 0d0a 2020  restore())....  
+00003670: 2020 2020 2020 7365 6c66 2e6d 6169 6e6c        self.mainl
+00003680: 6f6f 705f 7374 7220 3d20 2222 0d0a 0d0a  oop_str = ""....
+00003690: 2020 2020 2020 2020 7365 6c66 2e73 6574          self.set
+000036a0: 7469 6e67 735f 7374 7220 3d20 2222 220d  tings_str = """.
+000036b0: 0a6d 6574 6169 6e66 6f3a 0d0a 0961 7574  .metainfo:...aut
+000036c0: 686f 723a 2079 6f75 7220 6e61 6d65 2068  hor: your name h
+000036d0: 6572 650d 0a09 6461 7465 3a20 3230 3232  ere...date: 2022
+000036e0: 0d0a 0969 6e66 6f3a 2065 7861 6d70 6c65  ...info: example
+000036f0: 2073 6574 7469 6e67 730d 0a0d 0a68 7970   settings....hyp
+00003700: 6572 7061 7261 6d73 3a0d 0a20 2020 2020  erparams:..     
+00003710: 2020 2d20 6e61 6d65 3a20 6578 616d 706c    - name: exampl
+00003720: 650d 0a20 2020 2020 2020 2020 7661 6c75  e..         valu
+00003730: 653a 2034 322e 300d 0a20 2020 2020 2020  e: 42.0..       
+00003740: 2020 6465 7363 7269 7074 696f 6e3a 2061    description: a
+00003750: 6e20 6578 616d 706c 6520 7061 7261 6d65  n example parame
+00003760: 7465 720d 0a22 2222 0d0a 0d0a 2020 2020  ter.."""....    
+00003770: 2020 2020 7365 6c66 2e65 6469 7453 6574      self.editSet
+00003780: 7469 6e67 7342 7574 746f 6e2e 7472 6967  tingsButton.trig
+00003790: 6765 7265 642e 636f 6e6e 6563 7428 7365  gered.connect(se
+000037a0: 6c66 2e65 6469 745f 7365 7474 696e 6773  lf.edit_settings
+000037b0: 290d 0a0d 0a20 2020 2020 2020 2073 656c  )....        sel
+000037c0: 662e 6164 6442 7574 746f 6e2e 7072 6573  f.addButton.pres
+000037d0: 7365 642e 636f 6e6e 6563 7428 7365 6c66  sed.connect(self
+000037e0: 2e61 6464 5f6e 6577 2920 2320 6164 6420  .add_new) # add 
+000037f0: 616e 2061 6765 6e74 0d0a 2020 2020 2020  an agent..      
+00003800: 2020 7365 6c66 2e61 6464 4275 7474 6f6e    self.addButton
+00003810: 322e 7072 6573 7365 642e 636f 6e6e 6563  2.pressed.connec
+00003820: 7428 7365 6c66 2e61 6464 5f68 656c 7065  t(self.add_helpe
+00003830: 7229 2023 2061 6464 2061 2068 656c 7065  r) # add a helpe
+00003840: 7220 6167 656e 7420 286e 6f20 7472 616e  r agent (no tran
+00003850: 7361 6374 696f 6e73 290d 0a20 2020 2020  sactions)..     
+00003860: 2020 2073 656c 662e 6772 6170 6844 656c     self.graphDel
+00003870: 6574 6542 7574 746f 6e2e 7072 6573 7365  eteButton.presse
+00003880: 642e 636f 6e6e 6563 7428 7365 6c66 2e72  d.connect(self.r
+00003890: 656d 6f76 655f 6865 6c70 6572 290d 0a0d  emove_helper)...
+000038a0: 0a0d 0a0d 0a20 2020 2020 2020 2023 7365  .....        #se
+000038b0: 6c66 2e73 6176 6542 7574 746f 6e2e 7072  lf.saveButton.pr
+000038c0: 6573 7365 642e 636f 6e6e 6563 7428 7365  essed.connect(se
+000038d0: 6c66 2e73 6176 6529 0d0a 0d0a 2020 2020  lf.save)....    
+000038e0: 2020 2020 2320 7365 6c66 2e67 7261 7068      # self.graph
+000038f0: 5365 6c65 6374 4275 7474 6f6e 2e70 7265  SelectButton.pre
+00003900: 7373 6564 2e63 6f6e 6e65 6374 2873 656c  ssed.connect(sel
+00003910: 662e 6368 616e 6765 5f67 7261 7068 6d6f  f.change_graphmo
+00003920: 6465 5f73 656c 6563 7429 0d0a 2020 2020  de_select)..    
+00003930: 2020 2020 2320 7365 6c66 2e67 7261 7068      # self.graph
+00003940: 4472 6167 4275 7474 6f6e 2e70 7265 7373  DragButton.press
+00003950: 6564 2e63 6f6e 6e65 6374 2873 656c 662e  ed.connect(self.
+00003960: 6368 616e 6765 5f67 7261 7068 6d6f 6465  change_graphmode
+00003970: 5f64 7261 6729 0d0a 0d0a 2020 2020 2020  _drag)....      
+00003980: 2020 7365 6c66 2e67 7261 7068 4564 6974    self.graphEdit
+00003990: 4275 7474 6f6e 2e70 7265 7373 6564 2e63  Button.pressed.c
+000039a0: 6f6e 6e65 6374 2873 656c 662e 6564 6974  onnect(self.edit
+000039b0: 5f67 7261 7068 5f61 6765 6e74 290d 0a0d  _graph_agent)...
+000039c0: 0a20 2020 2020 2020 2023 666f 7220 7769  .        #for wi
+000039d0: 6467 6574 2069 6e20 5b73 656c 662e 4173  dget in [self.As
+000039e0: 7365 744c 6973 744c 6566 742c 2073 656c  setListLeft, sel
+000039f0: 662e 4173 7365 744c 6973 7452 6967 6874  f.AssetListRight
+00003a00: 2c0d 0a20 2020 2020 2020 2023 2020 2020  ,..        #    
+00003a10: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00003a20: 4c69 6162 696c 6974 794c 6973 744c 6566  LiabilityListLef
+00003a30: 742c 2073 656c 662e 4c69 6162 696c 6974  t, self.Liabilit
+00003a40: 794c 6973 7452 6967 6874 2c0d 0a20 2020  yListRight,..   
+00003a50: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00003a60: 2020 2020 2073 656c 662e 4571 7569 7479       self.Equity
+00003a70: 4c69 7374 4c65 6674 2c20 7365 6c66 2e45  ListLeft, self.E
+00003a80: 7175 6974 794c 6973 7452 6967 6874 5d3a  quityListRight]:
+00003a90: 0d0a 2020 2020 2020 2020 2320 2020 2077  ..        #    w
+00003aa0: 6964 6765 742e 7465 7874 4368 616e 6765  idget.textChange
+00003ab0: 642e 636f 6e6e 6563 7428 7365 6c66 2e75  d.connect(self.u
+00003ac0: 7064 6174 655f 6461 7461 290d 0a20 2020  pdate_data)..   
+00003ad0: 2020 2020 2073 656c 662e 6163 7469 6f6e       self.action
+00003ae0: 5377 6170 5f4c 696e 655f 496e 7465 7270  Swap_Line_Interp
+00003af0: 6f6c 6174 696f 6e2e 7472 6967 6765 7265  olation.triggere
+00003b00: 642e 636f 6e6e 6563 7428 7365 6c66 2e64  d.connect(self.d
+00003b10: 7261 7763 616e 7661 732e 7377 6170 5f69  rawcanvas.swap_i
+00003b20: 6e74 6572 706f 6c5f 7374 796c 6529 0d0a  nterpol_style)..
+00003b30: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+00003b40: 6374 696f 6e45 7870 6f72 745f 4772 6170  ctionExport_Grap
+00003b50: 685f 746f 5f50 4446 2e74 7269 6767 6572  h_to_PDF.trigger
+00003b60: 6564 2e63 6f6e 6e65 6374 2873 656c 662e  ed.connect(self.
+00003b70: 6472 6177 6361 6e76 6173 2e65 7870 6f72  drawcanvas.expor
+00003b80: 745f 7064 6629 0d0a 0d0a 2020 2020 2020  t_pdf)....      
+00003b90: 2020 7365 6c66 2e75 6470 6174 6542 7574    self.udpateBut
+00003ba0: 746f 6e2e 7072 6573 7365 642e 636f 6e6e  ton.pressed.conn
+00003bb0: 6563 7428 7365 6c66 2e75 7064 6174 655f  ect(self.update_
+00003bc0: 6461 7461 290d 0a0d 0a20 2020 2020 2020  data)....       
+00003bd0: 2073 656c 662e 6669 6c65 6e61 6d65 203d   self.filename =
+00003be0: 204e 6f6e 6520 2020 2023 2063 7572 7265   None    # curre
+00003bf0: 6e74 202e 7961 6d6c 2066 696c 650d 0a20  nt .yaml file.. 
+00003c00: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
+00003c10: 795f 6461 7461 203d 205b 5d20 2320 7374  y_data = [] # st
+00003c20: 6f72 6520 6375 7272 656e 7420 656e 7472  ore current entr
+00003c30: 6965 730d 0a20 2020 2020 2020 2073 656c  ies..        sel
+00003c40: 662e 7365 6c65 6374 696f 6e5f 6964 7820  f.selection_idx 
+00003c50: 3d20 4e6f 6e65 0d0a 0d0a 2020 2020 2020  = None....      
+00003c60: 2020 2373 656c 662e 6d61 7472 6978 5669    #self.matrixVi
+00003c70: 6577 203d 204d 6174 7269 7856 6965 7765  ew = MatrixViewe
+00003c80: 7228 7365 6c66 290d 0a20 2020 2020 2020  r(self)..       
+00003c90: 2073 656c 662e 6d6f 7665 5570 4274 6e2e   self.moveUpBtn.
+00003ca0: 7072 6573 7365 642e 636f 6e6e 6563 7428  pressed.connect(
+00003cb0: 7365 6c66 2e6d 6f76 655f 7570 290d 0a20  self.move_up).. 
+00003cc0: 2020 2020 2020 2073 656c 662e 6d6f 7665         self.move
+00003cd0: 446e 4274 6e2e 7072 6573 7365 642e 636f  DnBtn.pressed.co
+00003ce0: 6e6e 6563 7428 7365 6c66 2e6d 6f76 655f  nnect(self.move_
+00003cf0: 646f 776e 290d 0a0d 0a20 2020 2020 2020  down)....       
+00003d00: 2073 656c 662e 6669 6c74 6572 436f 6d62   self.filterComb
+00003d10: 6f2e 6974 656d 5365 6c65 6374 696f 6e43  o.itemSelectionC
+00003d20: 6861 6e67 6564 2e63 6f6e 6e65 6374 286c  hanged.connect(l
+00003d30: 616d 6264 613a 2073 656c 662e 6472 6177  ambda: self.draw
+00003d40: 6361 6e76 6173 2e75 7064 6174 6528 2929  canvas.update())
+00003d50: 0d0a 2020 2020 2020 2020 7365 6c66 2e63  ..        self.c
+00003d60: 6c65 6172 4669 6c74 6572 4275 7474 6f6e  learFilterButton
+00003d70: 2e70 7265 7373 6564 2e63 6f6e 6e65 6374  .pressed.connect
+00003d80: 2873 656c 662e 636c 6561 725f 6669 6c74  (self.clear_filt
+00003d90: 6572 290d 0a0d 0a20 2020 2020 2020 2073  er)....        s
+00003da0: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
+00003db0: 722e 7468 656d 6520 3d20 2264 6172 6b22  r.theme = "dark"
+00003dc0: 0d0a 2020 2020 2020 2020 7365 6c66 2e73  ..        self.s
+00003dd0: 7769 7463 685f 7468 656d 6528 290d 0a0d  witch_theme()...
+00003de0: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
+00003df0: 7468 656d 655f 6d61 6e61 6765 722e 7265  theme_manager.re
+00003e00: 7374 6f72 6528 290d 0a0d 0a20 2020 2020  store()....     
+00003e10: 2020 2073 656c 662e 7377 6974 6368 5f74     self.switch_t
+00003e20: 6865 6d65 2829 0d0a 2020 2020 2020 2020  heme()..        
+00003e30: 7365 6c66 2e73 7769 7463 685f 7468 656d  self.switch_them
+00003e40: 6528 290d 0a0d 0a0d 0a20 2020 2064 6566  e()......    def
+00003e50: 2063 6861 6e67 655f 636f 6c6f 7228 7365   change_color(se
+00003e60: 6c66 2c77 6869 6368 293a 0d0a 2020 2020  lf,which):..    
+00003e70: 2020 2020 636f 6c6f 7220 3d20 5143 6f6c      color = QCol
+00003e80: 6f72 4469 616c 6f67 2e67 6574 436f 6c6f  orDialog.getColo
+00003e90: 7228 290d 0a0d 0a20 2020 2020 2020 2069  r()....        i
+00003ea0: 6620 636f 6c6f 722e 6973 5661 6c69 6428  f color.isValid(
+00003eb0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00003ec0: 7072 696e 7428 2243 4841 4e47 4520 434f  print("CHANGE CO
+00003ed0: 4c4f 5222 2c20 7768 6963 682c 2063 6f6c  LOR", which, col
+00003ee0: 6f72 2e6e 616d 6528 2929 0d0a 0d0a 2020  or.name())....  
+00003ef0: 2020 2020 2020 2020 2020 6274 6e5f 7461            btn_ta
+00003f00: 626c 6520 3d20 7b0d 0a20 2020 2020 2020  ble = {..       
+00003f10: 2020 2020 2020 2020 2031 3a20 7365 6c66           1: self
+00003f20: 2e62 6331 2c0d 0a20 2020 2020 2020 2020  .bc1,..         
+00003f30: 2020 2020 2020 2032 3a20 7365 6c66 2e62         2: self.b
+00003f40: 6332 2c0d 0a20 2020 2020 2020 2020 2020  c2,..           
+00003f50: 2020 2020 2033 3a20 7365 6c66 2e62 6333       3: self.bc3
+00003f60: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00003f70: 2020 2034 3a20 7365 6c66 2e62 6334 2c0d     4: self.bc4,.
+00003f80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003f90: 2035 3a20 7365 6c66 2e62 6335 2c0d 0a20   5: self.bc5,.. 
+00003fa0: 2020 2020 2020 2020 2020 2020 2020 2036                 6
+00003fb0: 3a20 7365 6c66 2e62 6336 2c0d 0a20 2020  : self.bc6,..   
+00003fc0: 2020 2020 2020 2020 2020 2020 2037 3a20               7: 
+00003fd0: 7365 6c66 2e62 6337 2c0d 0a20 2020 2020  self.bc7,..     
+00003fe0: 2020 2020 2020 2020 2020 2038 3a20 7365             8: se
+00003ff0: 6c66 2e62 6338 2c0d 0a20 2020 2020 2020  lf.bc8,..       
+00004000: 2020 2020 207d 0d0a 0d0a 2020 2020 2020       }....      
+00004010: 2020 2020 2020 6274 6e5f 7461 626c 655b        btn_table[
+00004020: 7768 6963 685d 2e73 6574 5374 796c 6553  which].setStyleS
+00004030: 6865 6574 2822 6261 636b 6772 6f75 6e64  heet("background
+00004040: 2d63 6f6c 6f72 3a20 7267 6228 2573 2c25  -color: rgb(%s,%
+00004050: 732c 2573 293b 2225 2863 6f6c 6f72 2e72  s,%s);"%(color.r
+00004060: 6564 2829 2c63 6f6c 6f72 2e67 7265 656e  ed(),color.green
+00004070: 2829 2c63 6f6c 6f72 2e62 6c75 6528 2929  (),color.blue())
+00004080: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+00004090: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
+000040a0: 722e 636f 6c6f 7273 5b73 656c 662e 7468  r.colors[self.th
+000040b0: 656d 655f 6d61 6e61 6765 722e 7468 656d  eme_manager.them
+000040c0: 655d 5b77 6869 6368 2d31 5d20 3d20 636f  e][which-1] = co
+000040d0: 6c6f 720d 0a0d 0a0d 0a20 2020 2064 6566  lor......    def
+000040e0: 2063 6c65 6172 5f66 696c 7465 7228 7365   clear_filter(se
+000040f0: 6c66 293a 0d0a 2020 2020 2020 2020 7365  lf):..        se
+00004100: 6c66 2e66 696c 7465 7243 6f6d 626f 2e63  lf.filterCombo.c
+00004110: 6c65 6172 5365 6c65 6374 696f 6e28 290d  learSelection().
+00004120: 0a0d 0a20 2020 2064 6566 2067 656e 5f62  ...    def gen_b
+00004130: 616c 616e 6365 5f6d 6174 7269 7828 7365  alance_matrix(se
+00004140: 6c66 2c64 6574 6169 6c65 643d 5472 7565  lf,detailed=True
+00004150: 293a 0d0a 2020 2020 2020 2020 2320 6765  ):..        # ge
+00004160: 6e65 7261 7465 7320 6120 6261 6c61 6e63  nerates a balanc
+00004170: 6520 7368 6565 7420 6d61 7472 6978 2066  e sheet matrix f
+00004180: 6f72 2061 6c6c 2061 6765 6e74 730d 0a20  or all agents.. 
+00004190: 2020 2020 2020 2023 203a 7061 7261 6d3a         # :param:
+000041a0: 2064 6574 6169 6c65 643a 2073 686f 7720   detailed: show 
+000041b0: 6c61 7267 6520 6d61 7472 6978 206f 7220  large matrix or 
+000041c0: 6167 6772 6567 6174 6520 696e 6469 7669  aggregate indivi
+000041d0: 6475 616c 2072 6f77 733f 0d0a 0d0a 2020  dual rows?....  
+000041e0: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
+000041f0: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
+00004200: 5f62 616c 616e 6365 203d 2020 6465 6661  _balance =  defa
+00004210: 756c 7464 6963 7428 6c61 6d62 6461 3a20  ultdict(lambda: 
+00004220: 7b22 4974 656d 223a 5b5d 2c22 4173 7365  {"Item":[],"Asse
+00004230: 7473 223a 5b5d 2c22 4c69 6162 696c 6974  ts":[],"Liabilit
+00004240: 6965 7322 3a20 5b5d 7d29 0d0a 0d0a 0d0a  ies": []})......
+00004250: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00004260: 6669 6c65 6461 7461 2069 6e20 7365 6c66  filedata in self
+00004270: 2e65 6e74 7279 5f64 6174 613a 0d0a 0d0a  .entry_data:....
+00004280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004290: 6167 656e 7431 203d 2066 696c 6564 6174  agent1 = filedat
+000042a0: 615b 2261 6765 6e74 3122 5d2e 7374 7269  a["agent1"].stri
+000042b0: 7028 290d 0a20 2020 2020 2020 2020 2020  p()..           
+000042c0: 2020 2020 2061 6765 6e74 3220 3d20 6669       agent2 = fi
+000042d0: 6c65 6461 7461 5b22 6167 656e 7432 225d  ledata["agent2"]
+000042e0: 2e73 7472 6970 2829 0d0a 0d0a 2020 2020  .strip()....    
+000042f0: 2020 2020 2020 2020 2020 2020 6173 7365              asse
+00004300: 7473 3120 3d20 6669 6c65 6461 7461 5b22  ts1 = filedata["
+00004310: 6131 225d 0d0a 2020 2020 2020 2020 2020  a1"]..          
+00004320: 2020 2020 2020 6c69 6162 7331 203d 2066        liabs1 = f
+00004330: 696c 6564 6174 615b 226c 3122 5d20 232b  iledata["l1"] #+
+00004340: 2066 696c 6564 6174 615b 2265 3122 5d20   filedata["e1"] 
+00004350: 2b20 225c 6e22 0d0a 0d0a 2020 2020 2020  + "\n"....      
+00004360: 2020 2020 2020 2020 2020 6173 7365 7473            assets
+00004370: 3220 3d20 6669 6c65 6461 7461 5b22 6132  2 = filedata["a2
+00004380: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
+00004390: 2020 2020 6c69 6162 7332 203d 2066 696c      liabs2 = fil
+000043a0: 6564 6174 615b 226c 3222 5d20 232b 2066  edata["l2"] #+ f
+000043b0: 696c 6564 6174 615b 2265 3222 5d20 2b20  iledata["e2"] + 
+000043c0: 225c 6e22 0d0a 0d0a 2020 2020 2020 2020  "\n"....        
+000043d0: 2020 2020 2020 2020 6966 2064 6574 6169          if detai
+000043e0: 6c65 643a 0d0a 2020 2020 2020 2020 2020  led:..          
+000043f0: 2020 2020 2020 2020 2020 7375 626a 6563            subjec
+00004400: 7420 3d20 2220 2825 7329 5c6e 2220 2520  t = " (%s)\n" % 
+00004410: 6669 6c65 6461 7461 5b22 7375 626a 6563  filedata["subjec
+00004420: 7422 5d0d 0a20 2020 2020 2020 2020 2020  t"]..           
+00004430: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
+00004440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004450: 7375 626a 6563 7420 3d20 225c 6e22 0d0a  subject = "\n"..
+00004460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004470: 6d79 5f61 7373 6574 7331 203d 205b 5d0d  my_assets1 = [].
+00004480: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004490: 206d 795f 6c69 6162 7331 203d 205b 5d0d   my_liabs1 = [].
+000044a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000044b0: 206d 795f 6173 7365 7473 3220 3d20 5b5d   my_assets2 = []
+000044c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000044d0: 2020 6d79 5f6c 6961 6273 3220 3d20 5b5d    my_liabs2 = []
+000044e0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+000044f0: 2020 2020 666f 7220 6920 696e 2061 7373      for i in ass
+00004500: 6574 7331 2e73 706c 6974 2822 5c6e 2229  ets1.split("\n")
+00004510: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00004520: 2020 2020 2020 2069 6620 692e 7374 7269         if i.stri
+00004530: 7028 292e 7374 6172 7473 7769 7468 2822  p().startswith("
+00004540: 2b22 293a 0d0a 2020 2020 2020 2020 2020  +"):..          
+00004550: 2020 2020 2020 2020 2020 2020 2020 6d79                my
+00004560: 5f69 7465 6d20 3d20 692e 7370 6c69 7428  _item = i.split(
+00004570: 222b 2229 5b31 5d20 2b20 7375 626a 6563  "+")[1] + subjec
+00004580: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
+00004590: 2020 2020 2020 2020 2020 2073 6967 6e20             sign 
+000045a0: 3d20 222b 220d 0a20 2020 2020 2020 2020  = "+"..         
+000045b0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+000045c0: 692e 7374 7269 7028 292e 7374 6172 7473  i.strip().starts
+000045d0: 7769 7468 2822 2d22 293a 0d0a 2020 2020  with("-"):..    
+000045e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000045f0: 2020 2020 6d79 5f69 7465 6d20 3d20 692e      my_item = i.
+00004600: 7370 6c69 7428 222d 2229 5b31 5d20 2b20  split("-")[1] + 
+00004610: 7375 626a 6563 740d 0a20 2020 2020 2020  subject..       
+00004620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004630: 2073 6967 6e20 3d20 222d 220d 0a20 2020   sign = "-"..   
+00004640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004650: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00004660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004670: 6272 6561 6b0d 0a20 2020 2020 2020 2020  break..         
+00004680: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
+00004690: 6e65 645f 6261 6c61 6e63 655b 6167 656e  ned_balance[agen
+000046a0: 7431 5d5b 2249 7465 6d22 5d2e 6170 7065  t1]["Item"].appe
+000046b0: 6e64 286d 795f 6974 656d 290d 0a20 2020  nd(my_item)..   
+000046c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000046d0: 2063 6f6d 6269 6e65 645f 6261 6c61 6e63   combined_balanc
+000046e0: 655b 6167 656e 7431 5d5b 2241 7373 6574  e[agent1]["Asset
+000046f0: 7322 5d2e 6170 7065 6e64 2873 6967 6e2b  s"].append(sign+
+00004700: 6669 6c65 6461 7461 5b22 7175 616e 7469  filedata["quanti
+00004710: 7479 225d 2b22 5c6e 2229 0d0a 2020 2020  ty"]+"\n")..    
+00004720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004730: 636f 6d62 696e 6564 5f62 616c 616e 6365  combined_balance
+00004740: 5b61 6765 6e74 315d 5b22 4c69 6162 696c  [agent1]["Liabil
+00004750: 6974 6965 7322 5d2e 6170 7065 6e64 2822  ities"].append("
+00004760: 2229 0d0a 0d0a 2020 2020 2020 2020 2020  ")....          
+00004770: 2020 2020 2020 666f 7220 6920 696e 2061        for i in a
+00004780: 7373 6574 7332 2e73 706c 6974 2822 5c6e  ssets2.split("\n
+00004790: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
+000047a0: 2020 2020 2020 2020 2069 6620 692e 7374           if i.st
+000047b0: 7269 7028 292e 7374 6172 7473 7769 7468  rip().startswith
+000047c0: 2822 2b22 293a 0d0a 2020 2020 2020 2020  ("+"):..        
+000047d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000047e0: 6d79 5f69 7465 6d20 3d20 692e 7370 6c69  my_item = i.spli
+000047f0: 7428 222b 2229 5b31 5d20 2b20 7375 626a  t("+")[1] + subj
+00004800: 6563 740d 0a20 2020 2020 2020 2020 2020  ect..           
+00004810: 2020 2020 2020 2020 2020 2020 2073 6967               sig
+00004820: 6e20 3d20 222b 220d 0a20 2020 2020 2020  n = "+"..       
+00004830: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+00004840: 6620 692e 7374 7269 7028 292e 7374 6172  f i.strip().star
+00004850: 7473 7769 7468 2822 2d22 293a 0d0a 2020  tswith("-"):..  
+00004860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004870: 2020 2020 2020 6d79 5f69 7465 6d20 3d20        my_item = 
+00004880: 692e 7370 6c69 7428 222d 2229 5b31 5d20  i.split("-")[1] 
+00004890: 2b20 7375 626a 6563 740d 0a20 2020 2020  + subject..     
+000048a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000048b0: 2020 2073 6967 6e20 3d20 222d 220d 0a20     sign = "-".. 
+000048c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000048d0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+000048e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000048f0: 2020 6272 6561 6b0d 0a20 2020 2020 2020    break..       
+00004900: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
+00004910: 6269 6e65 645f 6261 6c61 6e63 655b 6167  bined_balance[ag
+00004920: 656e 7432 5d5b 2249 7465 6d22 5d2e 6170  ent2]["Item"].ap
+00004930: 7065 6e64 286d 795f 6974 656d 290d 0a20  pend(my_item).. 
+00004940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004950: 2020 2063 6f6d 6269 6e65 645f 6261 6c61     combined_bala
+00004960: 6e63 655b 6167 656e 7432 5d5b 2241 7373  nce[agent2]["Ass
+00004970: 6574 7322 5d2e 6170 7065 6e64 2873 6967  ets"].append(sig
+00004980: 6e2b 6669 6c65 6461 7461 5b22 7175 616e  n+filedata["quan
+00004990: 7469 7479 225d 2b22 5c6e 2229 0d0a 2020  tity"]+"\n")..  
+000049a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000049b0: 2020 636f 6d62 696e 6564 5f62 616c 616e    combined_balan
+000049c0: 6365 5b61 6765 6e74 325d 5b22 4c69 6162  ce[agent2]["Liab
+000049d0: 696c 6974 6965 7322 5d2e 6170 7065 6e64  ilities"].append
+000049e0: 2822 2229 0d0a 0d0a 0d0a 2020 2020 2020  ("")......      
+000049f0: 2020 2020 2020 2020 2020 666f 7220 6a20            for j 
+00004a00: 696e 206c 6961 6273 312e 7370 6c69 7428  in liabs1.split(
+00004a10: 225c 6e22 293a 0d0a 2020 2020 2020 2020  "\n"):..        
+00004a20: 2020 2020 2020 2020 2020 2020 6966 206a              if j
+00004a30: 2e73 7472 6970 2829 2e73 7461 7274 7377  .strip().startsw
+00004a40: 6974 6828 222b 2229 3a0d 0a20 2020 2020  ith("+"):..     
+00004a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004a60: 2020 206d 795f 6974 656d 203d 206a 2e73     my_item = j.s
+00004a70: 706c 6974 2822 2b22 295b 315d 202b 2073  plit("+")[1] + s
+00004a80: 7562 6a65 6374 0d0a 2020 2020 2020 2020  ubject..        
+00004a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004aa0: 7369 676e 203d 2022 2b22 0d0a 0d0a 2020  sign = "+"....  
+00004ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004ac0: 2020 656c 6966 206a 2e73 7472 6970 2829    elif j.strip()
+00004ad0: 2e73 7461 7274 7377 6974 6828 222d 2229  .startswith("-")
+00004ae0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00004af0: 2020 2020 2020 2020 2020 206d 795f 6974             my_it
+00004b00: 656d 203d 206a 2e73 706c 6974 2822 2d22  em = j.split("-"
+00004b10: 295b 315d 202b 2073 7562 6a65 6374 0d0a  )[1] + subject..
+00004b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004b30: 2020 2020 2020 2020 7369 676e 203d 2022          sign = "
+00004b40: 2d22 0d0a 2020 2020 2020 2020 2020 2020  -"..            
+00004b50: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00004b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004b70: 2020 2020 2020 2062 7265 616b 0d0a 2020         break..  
+00004b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004b90: 2020 636f 6d62 696e 6564 5f62 616c 616e    combined_balan
+00004ba0: 6365 5b61 6765 6e74 315d 5b22 4974 656d  ce[agent1]["Item
+00004bb0: 225d 2e61 7070 656e 6428 6d79 5f69 7465  "].append(my_ite
+00004bc0: 6d29 0d0a 2020 2020 2020 2020 2020 2020  m)..            
+00004bd0: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
+00004be0: 5f62 616c 616e 6365 5b61 6765 6e74 315d  _balance[agent1]
+00004bf0: 5b22 4c69 6162 696c 6974 6965 7322 5d2e  ["Liabilities"].
+00004c00: 6170 7065 6e64 2873 6967 6e2b 6669 6c65  append(sign+file
+00004c10: 6461 7461 5b22 7175 616e 7469 7479 225d  data["quantity"]
+00004c20: 2b22 5c6e 2229 0d0a 2020 2020 2020 2020  +"\n")..        
+00004c30: 2020 2020 2020 2020 2020 2020 636f 6d62              comb
+00004c40: 696e 6564 5f62 616c 616e 6365 5b61 6765  ined_balance[age
+00004c50: 6e74 315d 5b22 4173 7365 7473 225d 2e61  nt1]["Assets"].a
+00004c60: 7070 656e 6428 2222 290d 0a0d 0a20 2020  ppend("")....   
+00004c70: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+00004c80: 206a 2069 6e20 6c69 6162 7332 2e73 706c   j in liabs2.spl
+00004c90: 6974 2822 5c6e 2229 3a0d 0a20 2020 2020  it("\n"):..     
+00004ca0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00004cb0: 6620 6a2e 7374 7269 7028 292e 7374 6172  f j.strip().star
+00004cc0: 7473 7769 7468 2822 2b22 293a 0d0a 2020  tswith("+"):..  
+00004cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004ce0: 2020 2020 2020 6d79 5f69 7465 6d20 3d20        my_item = 
+00004cf0: 6a2e 7370 6c69 7428 222b 2229 5b31 5d20  j.split("+")[1] 
+00004d00: 2b20 7375 626a 6563 740d 0a20 2020 2020  + subject..     
+00004d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004d20: 2020 2073 6967 6e20 3d20 222b 220d 0a0d     sign = "+"...
+00004d30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004d40: 2020 2020 2065 6c69 6620 6a2e 7374 7269       elif j.stri
+00004d50: 7028 292e 7374 6172 7473 7769 7468 2822  p().startswith("
+00004d60: 2d22 293a 0d0a 2020 2020 2020 2020 2020  -"):..          
+00004d70: 2020 2020 2020 2020 2020 2020 2020 6d79                my
+00004d80: 5f69 7465 6d20 3d20 6a2e 7370 6c69 7428  _item = j.split(
+00004d90: 222d 2229 5b31 5d20 2b20 7375 626a 6563  "-")[1] + subjec
+00004da0: 740d 0a20 2020 2020 2020 2020 2020 2020  t..             
+00004db0: 2020 2020 2020 2020 2020 2073 6967 6e20             sign 
+00004dc0: 3d20 222d 220d 0a20 2020 2020 2020 2020  = "-"..         
+00004dd0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00004de0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00004df0: 2020 2020 2020 2020 2020 6272 6561 6b0d            break.
+00004e00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004e10: 2020 2020 2063 6f6d 6269 6e65 645f 6261       combined_ba
+00004e20: 6c61 6e63 655b 6167 656e 7432 5d5b 2249  lance[agent2]["I
+00004e30: 7465 6d22 5d2e 6170 7065 6e64 286d 795f  tem"].append(my_
+00004e40: 6974 656d 290d 0a20 2020 2020 2020 2020  item)..         
+00004e50: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
+00004e60: 6e65 645f 6261 6c61 6e63 655b 6167 656e  ned_balance[agen
+00004e70: 7432 5d5b 224c 6961 6269 6c69 7469 6573  t2]["Liabilities
+00004e80: 225d 2e61 7070 656e 6428 7369 676e 2b66  "].append(sign+f
+00004e90: 696c 6564 6174 615b 2271 7561 6e74 6974  iledata["quantit
+00004ea0: 7922 5d2b 225c 6e22 290d 0a20 2020 2020  y"]+"\n")..     
+00004eb0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00004ec0: 6f6d 6269 6e65 645f 6261 6c61 6e63 655b  ombined_balance[
+00004ed0: 6167 656e 7432 5d5b 2241 7373 6574 7322  agent2]["Assets"
+00004ee0: 5d2e 6170 7065 6e64 2822 2229 0d0a 0d0a  ].append("")....
+00004ef0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00004f00: 7072 696e 7428 636f 6d62 696e 6564 5f62  print(combined_b
+00004f10: 616c 616e 6365 290d 0a0d 0a20 2020 2020  alance)....     
+00004f20: 2020 2020 2020 2064 6673 203d 205b 5d0d         dfs = [].
+00004f30: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+00004f40: 206b 2c76 2069 6e20 636f 6d62 696e 6564   k,v in combined
+00004f50: 5f62 616c 616e 6365 2e69 7465 6d73 2829  _balance.items()
+00004f60: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00004f70: 2020 2064 7620 3d20 7064 2e44 6174 6146     dv = pd.DataF
+00004f80: 7261 6d65 2876 290d 0a20 2020 2020 2020  rame(v)..       
+00004f90: 2020 2020 2020 2020 2064 7620 3d20 6476           dv = dv
+00004fa0: 2e72 656e 616d 6528 636f 6c75 6d6e 733d  .rename(columns=
+00004fb0: 7b22 4c69 6162 696c 6974 6965 7322 3a22  {"Liabilities":"
+00004fc0: 4c69 6162 696c 6974 6965 7320 2825 7329  Liabilities (%s)
+00004fd0: 2225 6b2c 2022 4173 7365 7473 223a 2022  "%k, "Assets": "
+00004fe0: 4173 7365 7473 2028 2573 2922 256b 7d29  Assets (%s)"%k})
+00004ff0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00005000: 2020 2020 6966 206e 6f74 2064 6574 6169      if not detai
+00005010: 6c65 643a 0d0a 2020 2020 2020 2020 2020  led:..          
+00005020: 2020 2020 2020 2020 2020 6167 6772 6567            aggreg
+00005030: 6174 696f 6e5f 6675 6e63 7469 6f6e 7320  ation_functions 
+00005040: 3d20 7b7d 0d0a 2020 2020 2020 2020 2020  = {}..          
+00005050: 2020 2020 2020 2020 2020 666f 7220 636f            for co
+00005060: 6c20 696e 2064 762e 636f 6c75 6d6e 733a  l in dv.columns:
+00005070: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00005080: 2020 2020 2020 2020 2020 6966 2063 6f6c            if col
+00005090: 203d 3d20 2249 7465 6d22 3a0d 0a20 2020   == "Item":..   
+000050a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000050b0: 2020 2020 2020 2020 2061 6767 7265 6761           aggrega
+000050c0: 7469 6f6e 5f66 756e 6374 696f 6e73 5b63  tion_functions[c
+000050d0: 6f6c 5d20 3d20 2266 6972 7374 220d 0a20  ol] = "first".. 
+000050e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000050f0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
+00005100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005110: 2020 2020 2020 2020 2020 6167 6772 6567            aggreg
+00005120: 6174 696f 6e5f 6675 6e63 7469 6f6e 735b  ation_functions[
+00005130: 636f 6c5d 203d 2022 7375 6d22 0d0a 2020  col] = "sum"..  
+00005140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005150: 2020 6476 203d 2064 762e 6772 6f75 7062    dv = dv.groupb
+00005160: 7928 6476 5b27 4974 656d 275d 292e 6167  y(dv['Item']).ag
+00005170: 6772 6567 6174 6528 6167 6772 6567 6174  gregate(aggregat
+00005180: 696f 6e5f 6675 6e63 7469 6f6e 7329 0d0a  ion_functions)..
+00005190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000051a0: 2020 2020 6476 203d 2064 762e 6472 6f70      dv = dv.drop
+000051b0: 2863 6f6c 756d 6e73 3d22 4974 656d 2229  (columns="Item")
+000051c0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+000051d0: 2020 2020 6466 732e 6170 7065 6e64 2870      dfs.append(p
+000051e0: 642e 4461 7461 4672 616d 6528 6476 2929  d.DataFrame(dv))
+000051f0: 0d0a 0d0a 0d0a 2020 2020 2020 2020 2020  ......          
+00005200: 2020 6466 203d 2070 642e 636f 6e63 6174    df = pd.concat
+00005210: 2864 6673 2c61 7869 733d 3129 2023 2c6b  (dfs,axis=1) #,k
+00005220: 6579 7320 3d63 6f6d 6269 6e65 645f 6261  eys =combined_ba
+00005230: 6c61 6e63 652e 6b65 7973 2829 290d 0a20  lance.keys()).. 
+00005240: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00005250: 2864 662e 746f 5f73 7472 696e 6728 2929  (df.to_string())
+00005260: 0d0a 2020 2020 2020 2020 2020 2020 6466  ..            df
+00005270: 203d 2064 662e 7265 706c 6163 6528 6e70   = df.replace(np
+00005280: 2e6e 616e 2c22 2229 0d0a 0d0a 0d0a 0d0a  .nan,"")........
+00005290: 2020 2020 2020 2020 2020 2020 6d6f 6465              mode
+000052a0: 6c20 3d20 5061 6e64 6173 4d6f 6465 6c28  l = PandasModel(
+000052b0: 6466 290d 0a20 2020 2020 2020 2020 2020  df)..           
+000052c0: 206d 7669 6577 203d 204d 6174 7269 7856   mview = MatrixV
+000052d0: 6965 7765 7228 6d6f 6465 6c2c 7061 7265  iewer(model,pare
+000052e0: 6e74 3d73 656c 6629 0d0a 0d0a 2020 2020  nt=self)....    
+000052f0: 2020 2020 2020 2020 2320 6d76 6965 772e          # mview.
+00005300: 7765 6256 6965 772e 7365 7448 746d 6c28  webView.setHtml(
+00005310: 6466 5f68 746d 6c29 0d0a 2020 2020 2020  df_html)..      
+00005320: 2020 2020 2020 6966 206e 6f74 2073 656c        if not sel
+00005330: 662e 7465 7374 5f6d 6f64 653a 0d0a 2020  f.test_mode:..  
+00005340: 2020 2020 2020 2020 2020 2020 2020 6d76                mv
+00005350: 6965 772e 7368 6f77 2829 0d0a 0d0a 2020  iew.show()....  
+00005360: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
+00005370: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
+00005380: 2020 2020 2020 2020 2020 7365 6c66 2e6e            self.n
+00005390: 6f74 6966 7928 7469 746c 653d 2245 7272  otify(title="Err
+000053a0: 6f72 222c 6d65 7373 6167 653d 2245 7272  or",message="Err
+000053b0: 6f72 3a22 202b 2073 7472 2865 2929 0d0a  or:" + str(e))..
+000053c0: 0d0a 0d0a 2020 2020 6465 6620 6564 6974  ....    def edit
+000053d0: 5f6d 6169 6e6c 6f6f 7028 7365 6c66 293a  _mainloop(self):
+000053e0: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
+000053f0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00005400: 7428 2273 656c 662e 6d61 696e 6c6f 6f70  t("self.mainloop
+00005410: 5f73 7472 222c 7365 6c66 2e6d 6169 6e6c  _str",self.mainl
+00005420: 6f6f 705f 7374 7229 0d0a 2020 2020 2020  oop_str)..      
+00005430: 2020 2020 2020 6c69 6e65 7320 3d20 7365        lines = se
+00005440: 6c66 2e6d 6169 6e6c 6f6f 705f 7374 720d  lf.mainloop_str.
+00005450: 0a0d 0a20 2020 2020 2020 2020 2020 206d  ...            m
+00005460: 795f 6564 6974 203d 204d 6169 6e4c 6f6f  y_edit = MainLoo
+00005470: 7045 6469 746f 7228 7061 7265 6e74 3d73  pEditor(parent=s
+00005480: 656c 662c 2074 6578 743d 6c69 6e65 7329  elf, text=lines)
+00005490: 0d0a 2020 2020 2020 2020 2020 2020 6d79  ..            my
+000054a0: 5f65 6469 742e 7365 7453 7479 6c65 5368  _edit.setStyleSh
+000054b0: 6565 7428 7365 6c66 2e74 6865 6d65 5f6d  eet(self.theme_m
+000054c0: 616e 6167 6572 2e67 6574 5f62 6163 6b67  anager.get_backg
+000054d0: 726f 756e 645f 7374 796c 6528 2929 0d0a  round_style())..
+000054e0: 2020 2020 2020 2020 2020 2020 6d79 5f65              my_e
+000054f0: 6469 742e 7365 7453 7479 6c65 5368 6565  dit.setStyleShee
+00005500: 7428 7365 6c66 2e74 6865 6d65 5f6d 616e  t(self.theme_man
+00005510: 6167 6572 2e67 6574 5f73 7479 6c65 7368  ager.get_stylesh
+00005520: 6565 7428 226d 6169 6e22 2929 0d0a 0d0a  eet("main"))....
+00005530: 2020 2020 2020 2020 6578 6365 7074 2045          except E
+00005540: 7863 6570 7469 6f6e 2061 7320 653a 0d0a  xception as e:..
+00005550: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00005560: 2e6e 6f74 6966 7928 7374 7228 6529 2c20  .notify(str(e), 
+00005570: 7469 746c 653d 2245 7272 6f72 2229 0d0a  title="Error")..
+00005580: 0d0a 2020 2020 6465 6620 7265 7374 6f72  ..    def restor
+00005590: 655f 6f72 6967 696e 616c 5f73 697a 6528  e_original_size(
+000055a0: 7365 6c66 293a 0d0a 2020 2020 2020 2020  self):..        
+000055b0: 7365 6c66 2e73 6574 4669 7865 6453 697a  self.setFixedSiz
+000055c0: 6528 3138 3231 2c31 3031 3029 0d0a 2020  e(1821,1010)..  
+000055d0: 2020 2020 2020 7365 6c66 2e73 6574 4d61        self.setMa
+000055e0: 7869 6d75 6d53 697a 6528 3430 3030 302c  ximumSize(40000,
+000055f0: 3430 3030 3029 0d0a 0d0a 2020 2020 6465  40000)....    de
+00005600: 6620 666c 6970 5f68 6569 6768 7428 7365  f flip_height(se
+00005610: 6c66 293a 0d0a 2020 2020 2020 2020 6966  lf):..        if
+00005620: 2073 656c 662e 666c 6970 7065 643a 0d0a   self.flipped:..
+00005630: 2020 2020 2020 2020 2020 2020 5720 3d20              W = 
+00005640: 7365 6c66 2e66 7261 6d65 4765 6f6d 6574  self.frameGeomet
+00005650: 7279 2829 2e77 6964 7468 2829 0d0a 2020  ry().width()..  
+00005660: 2020 2020 2020 2020 2020 4820 3d20 7365            H = se
+00005670: 6c66 2e66 7261 6d65 4765 6f6d 6574 7279  lf.frameGeometry
+00005680: 2829 2e68 6569 6768 7428 290d 0a0d 0a20  ().height().... 
+00005690: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+000056a0: 7365 744d 696e 696d 756d 5369 7a65 2873  setMinimumSize(s
+000056b0: 656c 662e 6c61 7374 5f77 6964 7468 2c73  elf.last_width,s
+000056c0: 656c 662e 6c61 7374 5f68 6569 6768 7429  elf.last_height)
+000056d0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+000056e0: 7365 6c66 2e73 6574 4d61 7869 6d75 6d53  self.setMaximumS
+000056f0: 697a 6528 7365 6c66 2e6c 6173 745f 7769  ize(self.last_wi
+00005700: 6474 682c 7365 6c66 2e6c 6173 745f 6865  dth,self.last_he
+00005710: 6967 6874 290d 0a20 2020 2020 2020 2020  ight)..         
+00005720: 2020 2073 656c 662e 7365 744d 6178 696d     self.setMaxim
+00005730: 756d 5369 7a65 2834 3030 3030 2c34 3030  umSize(40000,400
+00005740: 3030 290d 0a20 2020 2020 2020 2020 2020  00)..           
+00005750: 2023 2073 656c 662e 7365 744d 696e 696d   # self.setMinim
+00005760: 756d 5369 7a65 2834 3030 2c34 3030 290d  umSize(400,400).
+00005770: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+00005780: 2057 203d 2073 656c 662e 6672 616d 6547   W = self.frameG
+00005790: 656f 6d65 7472 7928 292e 7769 6474 6828  eometry().width(
+000057a0: 290d 0a20 2020 2020 2020 2020 2020 2023  )..            #
+000057b0: 2073 656c 662e 466c 6970 4865 6967 6874   self.FlipHeight
+000057c0: 4275 7474 6f6e 2e73 6574 4765 6f6d 6574  Button.setGeomet
+000057d0: 7279 2869 6e74 2857 292d 3831 2d32 352c  ry(int(W)-81-25,
+000057e0: 352c 3831 2c32 3129 0d0a 0d0a 2020 2020  5,81,21)....    
+000057f0: 2020 2020 2020 2020 7365 6c66 2e66 6c69          self.fli
+00005800: 7070 6564 203d 2046 616c 7365 0d0a 2020  pped = False..  
+00005810: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00005820: 2020 2020 2020 2020 2057 203d 2073 656c           W = sel
+00005830: 662e 6672 616d 6547 656f 6d65 7472 7928  f.frameGeometry(
+00005840: 292e 7769 6474 6828 290d 0a20 2020 2020  ).width()..     
+00005850: 2020 2020 2020 2048 203d 2073 656c 662e         H = self.
+00005860: 6672 616d 6547 656f 6d65 7472 7928 292e  frameGeometry().
+00005870: 6865 6967 6874 2829 0d0a 2020 2020 2020  height()..      
+00005880: 2020 2020 2020 7365 6c66 2e6c 6173 745f        self.last_
+00005890: 7769 6474 6820 3d20 570d 0a20 2020 2020  width = W..     
+000058a0: 2020 2020 2020 2073 656c 662e 6c61 7374         self.last
+000058b0: 5f68 6569 6768 7420 3d20 480d 0a0d 0a20  _height = H.... 
+000058c0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+000058d0: 7365 7446 6978 6564 5369 7a65 2838 3030  setFixedSize(800
+000058e0: 2c37 3029 0d0a 0d0a 2020 2020 2020 2020  ,70)....        
+000058f0: 2020 2020 2357 203d 2073 656c 662e 6672      #W = self.fr
+00005900: 616d 6547 656f 6d65 7472 7928 292e 7769  ameGeometry().wi
+00005910: 6474 6828 290d 0a20 2020 2020 2020 2020  dth()..         
+00005920: 2020 2023 7365 6c66 2e46 6c69 7048 6569     #self.FlipHei
+00005930: 6768 7442 7574 746f 6e2e 7365 7447 656f  ghtButton.setGeo
+00005940: 6d65 7472 7928 696e 7428 5729 2d38 312d  metry(int(W)-81-
+00005950: 3235 2c35 2c38 312c 3231 290d 0a0d 0a20  25,5,81,21).... 
+00005960: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00005970: 666c 6970 7065 6420 3d20 5472 7565 0d0a  flipped = True..
+00005980: 0d0a 0d0a 2020 2020 6465 6620 6368 616e  ....    def chan
+00005990: 6765 5f61 6c65 7274 2873 656c 6629 3a0d  ge_alert(self):.
+000059a0: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+000059b0: 6465 5f63 6861 6e67 6573 203d 2054 7275  de_changes = Tru
+000059c0: 650d 0a20 2020 2020 2020 2023 2073 656c  e..        # sel
+000059d0: 662e 7564 7061 7465 4275 7474 6f6e 2e73  f.udpateButton.s
+000059e0: 6574 5465 7874 2822 5570 6461 7465 2056  etText("Update V
+000059f0: 616c 7565 7320 2a22 290d 0a0d 0a20 2020  alues *")....   
+00005a00: 2064 6566 2073 686f 775f 6f75 7470 7574   def show_output
+00005a10: 5f64 6973 706c 6179 2873 656c 6629 3a0d  _display(self):.
+00005a20: 0a20 2020 2020 2020 2023 2073 686f 7773  .        # shows
+00005a30: 2074 6865 206c 6f67 6765 7220 6469 7370   the logger disp
+00005a40: 6c61 7920 666f 7220 6f75 7470 7574 2071  lay for output q
+00005a50: 7561 6e74 6974 6965 730d 0a0d 0a20 2020  uantities....   
+00005a60: 2020 2020 2074 7279 3a0d 0a0d 0a20 2020       try:....   
+00005a70: 2020 2020 2020 2020 2070 6174 6820 3d20           path = 
+00005a80: 6f73 2e70 6174 682e 6469 726e 616d 6528  os.path.dirname(
+00005a90: 7365 6c66 2e63 7572 7265 6e74 5f66 696c  self.current_fil
+00005aa0: 6529 2b22 2f6f 7574 7075 742f 220d 0a20  e)+"/output/".. 
+00005ab0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00005ac0: 2822 5b44 4542 5547 204d 4553 5341 4745  ("[DEBUG MESSAGE
+00005ad0: 5d20 6f70 656e 206f 7574 7075 7420 6469  ] open output di
+00005ae0: 7370 6c61 7920 696e 2070 6174 6822 2c20  splay in path", 
+00005af0: 7061 7468 290d 0a0d 0a20 2020 2020 2020  path)....       
+00005b00: 2020 2020 206f 7574 7075 745f 6469 7370       output_disp
+00005b10: 6c61 7920 3d20 4f75 7470 7574 4469 7370  lay = OutputDisp
+00005b20: 6c61 7928 7365 6c66 2c70 6174 6820 3d20  lay(self,path = 
+00005b30: 7061 7468 290d 0a20 2020 2020 2020 2065  path)..        e
+00005b40: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
+00005b50: 6173 2065 3a0d 0a20 2020 2020 2020 2020  as e:..         
+00005b60: 2020 2073 656c 662e 6e6f 7469 6679 2873     self.notify(s
+00005b70: 7472 2865 292c 7469 746c 653d 2245 7272  tr(e),title="Err
+00005b80: 6f72 2229 0d0a 0d0a 0d0a 0d0a 2020 2020  or")........    
+00005b90: 6465 6620 7361 7665 5f61 6e64 5f62 7569  def save_and_bui
+00005ba0: 6c64 2873 656c 6629 3a0d 0a0d 0a20 2020  ld(self):....   
+00005bb0: 2020 2020 2023 202d 2d20 6372 6561 7465       # -- create
+00005bc0: 206e 6577 2073 7461 7475 7320 7369 676e   new status sign
+00005bd0: 616c 0d0a 0d0a 2020 2020 2020 2020 7365  al....        se
+00005be0: 6c66 2e77 6f72 6b65 722e 7377 6974 6368  lf.worker.switch
+00005bf0: 5f73 7461 7465 2829 0d0a 2020 2020 2020  _state()..      
+00005c00: 2020 2320 2d2d 2d0d 0a0d 0a20 2020 2020    # ---....     
+00005c10: 2020 2073 656c 662e 7361 7665 2829 0d0a     self.save()..
+00005c20: 0d0a 2020 2020 2020 2020 6120 3d20 5b5d  ..        a = []
+00005c30: 0d0a 2020 2020 2020 2020 666f 7220 6365  ..        for ce
+00005c40: 2069 6e20 436f 6465 4564 6974 6f72 2e69   in CodeEditor.i
+00005c50: 6e73 7461 6e63 6573 2e76 616c 7565 7328  nstances.values(
+00005c60: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00005c70: 6e61 6d65 7320 3d20 6365 2e73 6176 655f  names = ce.save_
+00005c80: 616e 645f 6275 696c 6428 290d 0a20 2020  and_build()..   
+00005c90: 2020 2020 2020 2020 2069 6620 6e61 6d65           if name
+00005ca0: 7320 6973 206e 6f74 204e 6f6e 653a 0d0a  s is not None:..
+00005cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005cc0: 612e 6170 7065 6e64 286e 616d 6573 290d  a.append(names).
+00005cd0: 0a0d 0a20 2020 2020 2020 2066 6f72 2061  ...        for a
+00005ce0: 6920 696e 2061 3a0d 0a20 2020 2020 2020  i in a:..       
+00005cf0: 2020 2020 2069 6620 6169 5b30 5d20 696e       if ai[0] in
+00005d00: 2043 6f64 6545 6469 746f 722e 696e 7374   CodeEditor.inst
+00005d10: 616e 6365 733a 0d0a 2020 2020 2020 2020  ances:..        
+00005d20: 2020 2020 2020 2020 436f 6465 4564 6974          CodeEdit
+00005d30: 6f72 2e69 6e73 7461 6e63 6573 5b61 695b  or.instances[ai[
+00005d40: 305d 5d20 3d20 4e6f 6e65 0d0a 2020 2020  0]] = None..    
+00005d50: 2020 2020 2020 2020 2020 2020 6465 6c20              del 
+00005d60: 436f 6465 4564 6974 6f72 2e69 6e73 7461  CodeEditor.insta
+00005d70: 6e63 6573 5b61 695b 305d 5d0d 0a20 2020  nces[ai[0]]..   
+00005d80: 2020 2020 2020 2020 2043 6f64 6545 6469           CodeEdi
+00005d90: 746f 722e 696e 7374 616e 6365 735b 6169  tor.instances[ai
+00005da0: 5b31 5d5d 203d 2061 695b 325d 0d0a 0d0a  [1]] = ai[2]....
+00005db0: 2020 2020 2020 2020 7072 696e 7428 225c          print("\
+00005dc0: 6e4e 4557 2049 4e53 5441 4e43 4553 5c6e  nNEW INSTANCES\n
+00005dd0: 222c 2043 6f64 6545 6469 746f 722e 696e  ", CodeEditor.in
+00005de0: 7374 616e 6365 7329 0d0a 0d0a 0d0a 2020  stances)......  
+00005df0: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
+00005e00: 2020 2020 2020 2020 7365 6c66 2e62 7569          self.bui
+00005e10: 6c64 5f70 726f 6a65 6374 2873 696c 656e  ld_project(silen
+00005e20: 743d 5472 7565 290d 0a20 2020 2020 2020  t=True)..       
+00005e30: 2020 2020 2073 656c 662e 7374 6174 7573       self.status
+00005e40: 4261 7228 292e 7368 6f77 4d65 7373 6167  Bar().showMessag
+00005e50: 6528 2253 6176 6564 2022 202b 2073 656c  e("Saved " + sel
+00005e60: 662e 6375 7272 656e 745f 6669 6c65 290d  f.current_file).
+00005e70: 0a0d 0a20 2020 2020 2020 2065 7863 6570  ...        excep
+00005e80: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
+00005e90: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
+00005ea0: 2073 656c 662e 6e6f 7469 6679 2873 7472   self.notify(str
+00005eb0: 2865 292c 7469 746c 653d 2245 7863 6570  (e),title="Excep
+00005ec0: 7469 6f6e 2229 0d0a 2020 2020 2020 2020  tion")..        
+00005ed0: 2020 2020 7072 696e 7428 7374 7228 6529      print(str(e)
+00005ee0: 290d 0a0d 0a0d 0a0d 0a20 2020 2064 6566  )........    def
+00005ef0: 2072 756e 5f70 726f 6a65 6374 2873 656c   run_project(sel
+00005f00: 6629 3a0d 0a0d 0a20 2020 2020 2020 2073  f):....        s
+00005f10: 656c 662e 7361 7665 5f61 6e64 5f62 7569  elf.save_and_bui
+00005f20: 6c64 2829 0d0a 0d0a 2020 2020 2020 2020  ld()....        
+00005f30: 2320 7365 6c66 2e73 686f 775f 6f75 7470  # self.show_outp
+00005f40: 7574 5f64 6973 706c 6179 2829 0d0a 0d0a  ut_display()....
+00005f50: 2020 2020 2020 2020 7365 6c66 2e73 6574          self.set
+00005f60: 4375 7273 6f72 2851 742e 5761 6974 4375  Cursor(Qt.WaitCu
+00005f70: 7273 6f72 290d 0a0d 0a20 2020 2020 2020  rsor)....       
+00005f80: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+00005f90: 2020 2023 2073 656c 662e 7461 6257 6964     # self.tabWid
+00005fa0: 6765 742e 7365 7443 7572 7265 6e74 496e  get.setCurrentIn
+00005fb0: 6465 7828 3129 0d0a 0d0a 2020 2020 2020  dex(1)....      
+00005fc0: 2020 2020 2020 2366 696c 656e 616d 6520        #filename 
+00005fd0: 3d20 6f73 2e70 6174 682e 6469 726e 616d  = os.path.dirnam
+00005fe0: 6528 7365 6c66 2e63 7572 7265 6e74 5f66  e(self.current_f
+00005ff0: 696c 6529 202b 2022 2f70 7974 686f 6e5f  ile) + "/python_
+00006000: 636f 6465 2f6d 6169 6e6c 6f6f 702e 7079  code/mainloop.py
+00006010: 220d 0a20 2020 2020 2020 2020 2020 2066  "..            f
+00006020: 696c 656e 616d 6520 3d20 6f73 2e70 6174  ilename = os.pat
+00006030: 682e 6469 726e 616d 6528 7365 6c66 2e63  h.dirname(self.c
+00006040: 7572 7265 6e74 5f66 696c 6529 202b 2022  urrent_file) + "
+00006050: 2f72 756e 6e65 722e 7079 220d 0a20 2020  /runner.py"..   
+00006060: 2020 2020 2020 2020 2066 6f6c 6465 7220           folder 
+00006070: 3d20 6f73 2e70 6174 682e 6469 726e 616d  = os.path.dirnam
+00006080: 6528 7365 6c66 2e63 7572 7265 6e74 5f66  e(self.current_f
+00006090: 696c 6529 202b 2022 2f22 0d0a 0d0a 2020  ile) + "/"....  
+000060a0: 2020 2020 2020 2020 2020 6966 2022 2022            if " "
+000060b0: 2069 6e20 6669 6c65 6e61 6d65 206f 7220   in filename or 
+000060c0: 2220 2220 696e 2066 6f6c 6465 723a 0d0a  " " in folder:..
+000060d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000060e0: 7365 6c66 2e6e 6f74 6966 7928 7469 746c  self.notify(titl
+000060f0: 653d 2249 6e76 616c 6964 2066 696c 6520  e="Invalid file 
+00006100: 6e61 6d65 222c 206d 6573 7361 6765 3d22  name", message="
+00006110: 5468 6572 6520 6172 6520 7370 6163 6573  There are spaces
+00006120: 2069 6e20 796f 7572 2066 6f6c 6465 7220   in your folder 
+00006130: 6f72 2066 696c 6520 6e61 6d65 2e20 5468  or file name. Th
+00006140: 6973 206d 6967 6874 2063 6175 7365 2070  is might cause p
+00006150: 726f 626c 656d 732e 2229 0d0a 0d0a 2020  roblems.")....  
+00006160: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+00006170: 226c 6f6f 6b75 7022 2c20 6669 6c65 6e61  "lookup", filena
+00006180: 6d65 2c20 2269 6e22 2c20 666f 6c64 6572  me, "in", folder
+00006190: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+000061a0: 206f 6c64 5f64 6972 203d 206f 732e 6765   old_dir = os.ge
+000061b0: 7463 7764 2829 0d0a 2020 2020 2020 2020  tcwd()..        
+000061c0: 2020 2020 2320 7072 696e 7428 226f 6c64      # print("old
+000061d0: 5f64 6972 222c 6f6c 645f 6469 7229 0d0a  _dir",old_dir)..
+000061e0: 0d0a 2020 2020 2020 2020 2020 2020 6f73  ..            os
+000061f0: 2e63 6864 6972 2866 6f6c 6465 7229 0d0a  .chdir(folder)..
+00006200: 2020 2020 2020 2020 2020 2020 636d 6420              cmd 
+00006210: 3d20 2263 6f6e 6461 2061 6374 6976 6174  = "conda activat
+00006220: 6520 6174 7475 6e65 202f 6b20 7079 7468  e attune /k pyth
+00006230: 6f6e 2025 7322 2025 2066 696c 656e 616d  on %s" % filenam
+00006240: 650d 0a20 2020 2020 2020 2020 2020 2070  e..            p
+00006250: 7269 6e74 2822 434f 4d4d 414e 4422 2c20  rint("COMMAND", 
+00006260: 636d 6429 0d0a 2020 2020 2020 2020 2020  cmd)..          
+00006270: 2020 6f73 2e73 7973 7465 6d28 2273 7461    os.system("sta
+00006280: 7274 2063 6d64 2020 2020 2025 7322 2025  rt cmd     %s" %
+00006290: 2063 6d64 290d 0a0d 0a20 2020 2020 2020   cmd)....       
+000062a0: 2020 2020 206f 732e 6368 6469 7228 6f6c       os.chdir(ol
+000062b0: 645f 6469 7229 0d0a 0d0a 2020 2020 2020  d_dir)....      
+000062c0: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
+000062d0: 6f6e 2061 7320 653a 0d0a 0d0a 2020 2020  on as e:....    
+000062e0: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
+000062f0: 6966 7928 7374 7228 6529 2c74 6974 6c65  ify(str(e),title
+00006300: 3d22 2229 0d0a 2020 2020 2020 2020 2020  ="")..          
+00006310: 2020 7365 6c66 2e73 6574 4375 7273 6f72    self.setCursor
+00006320: 2851 742e 4172 726f 7743 7572 736f 7229  (Qt.ArrowCursor)
+00006330: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
+00006340: 2e73 6574 4375 7273 6f72 2851 742e 4172  .setCursor(Qt.Ar
+00006350: 726f 7743 7572 736f 7229 0d0a 0d0a 2020  rowCursor)....  
+00006360: 2020 6465 6620 6275 696c 645f 7072 6f6a    def build_proj
+00006370: 6563 7428 7365 6c66 2c73 696c 656e 743d  ect(self,silent=
+00006380: 4661 6c73 652c 6f76 6572 7772 6974 653d  False,overwrite=
+00006390: 4661 6c73 6529 3a0d 0a0d 0a20 2020 2020  False):....     
+000063a0: 2020 2023 666f 6c64 6572 203d 2051 4669     #folder = QFi
+000063b0: 6c65 4469 616c 6f67 2e67 6574 4578 6973  leDialog.getExis
+000063c0: 7469 6e67 4469 7265 6374 6f72 7920 2873  tingDirectory (s
+000063d0: 656c 662c 2027 4275 696c 6420 5072 6f6a  elf, 'Build Proj
+000063e0: 6563 742e 2e2e 272c 206f 732e 6765 7463  ect...', os.getc
+000063f0: 7764 2829 290d 0a0d 0a20 2020 2020 2020  wd())....       
+00006400: 2069 6620 7365 6c66 2e63 7572 7265 6e74   if self.current
+00006410: 5f66 696c 6520 6973 204e 6f6e 653a 0d0a  _file is None:..
+00006420: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00006430: 2e6e 6f74 6966 7928 6d65 7373 6167 653d  .notify(message=
+00006440: 2243 616e 6e6f 7420 6275 696c 6420 7072  "Cannot build pr
+00006450: 6f6a 6563 742e 2050 6c65 6173 6520 7361  oject. Please sa
+00006460: 7665 2074 6f20 6669 6c65 2066 6972 7374  ve to file first
+00006470: 2e22 2c74 6974 6c65 3d22 4572 726f 7222  .",title="Error"
+00006480: 290d 0a20 2020 2020 2020 2020 2020 2072  )..            r
+00006490: 6574 7572 6e0d 0a0d 0a20 2020 2020 2020  eturn....       
+000064a0: 2066 6f6c 6465 7220 3d20 6f73 2e70 6174   folder = os.pat
+000064b0: 682e 6469 726e 616d 6528 7365 6c66 2e63  h.dirname(self.c
+000064c0: 7572 7265 6e74 5f66 696c 6529 0d0a 2020  urrent_file)..  
+000064d0: 2020 2020 2020 7072 696e 7428 2262 7569        print("bui
+000064e0: 6c64 2070 726f 6a65 6374 2069 6e20 222c  ld project in ",
+000064f0: 2066 6f6c 6465 7229 0d0a 0d0a 2020 2020   folder)....    
+00006500: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
+00006510: 2020 2020 2020 6f73 2e6d 6b64 6972 2866        os.mkdir(f
+00006520: 6f6c 6465 7220 2b20 222f 6d61 6d62 615f  older + "/mamba_
+00006530: 636f 6465 2f22 290d 0a20 2020 2020 2020  code/")..       
+00006540: 2065 7863 6570 743a 0d0a 2020 2020 2020   except:..      
+00006550: 2020 2020 2020 7061 7373 0d0a 0d0a 2020        pass....  
+00006560: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
+00006570: 2020 2020 2020 2020 6f73 2e6d 6b64 6972          os.mkdir
+00006580: 2866 6f6c 6465 7220 2b20 222f 7079 7468  (folder + "/pyth
+00006590: 6f6e 5f63 6f64 652f 2229 0d0a 2020 2020  on_code/")..    
+000065a0: 2020 2020 6578 6365 7074 3a0d 0a20 2020      except:..   
+000065b0: 2020 2020 2020 2020 2070 6173 730d 0a0d           pass...
+000065c0: 0a20 2020 2020 2020 2074 7279 3a0d 0a20  .        try:.. 
+000065d0: 2020 2020 2020 2020 2020 206f 732e 6d6b             os.mk
+000065e0: 6469 7228 666f 6c64 6572 202b 2022 2f6f  dir(folder + "/o
+000065f0: 7574 7075 742f 2229 0d0a 2020 2020 2020  utput/")..      
+00006600: 2020 6578 6365 7074 3a0d 0a20 2020 2020    except:..     
+00006610: 2020 2020 2020 2070 6173 730d 0a0d 0a20         pass.... 
+00006620: 2020 2020 2020 2074 7279 3a0d 0a0d 0a20         try:.... 
+00006630: 2020 2020 2020 2020 2020 2066 6f72 2061             for a
+00006640: 6765 6e74 2c20 636f 6465 2069 6e20 7365  gent, code in se
+00006650: 6c66 2e64 7261 7763 616e 7661 732e 636f  lf.drawcanvas.co
+00006660: 6465 5f64 6174 612e 6974 656d 7328 293a  de_data.items():
+00006670: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00006680: 2020 6966 2061 6765 6e74 2069 6e20 436f    if agent in Co
+00006690: 6465 4564 6974 6f72 2e69 6e73 7461 6e63  deEditor.instanc
+000066a0: 6573 3a20 2320 6f6e 6c79 2063 6f6e 7665  es: # only conve
+000066b0: 7274 2065 6469 7465 6420 636f 6465 0d0a  rt edited code..
+000066c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000066d0: 2020 2020 2020 2320 7772 6974 6520 6d61        # write ma
+000066e0: 6d62 6120 636f 6465 2066 6f72 2063 6f6d  mba code for com
+000066f0: 706c 6574 656e 6573 730d 0a20 2020 2020  pleteness..     
+00006700: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+00006710: 6174 6820 3d20 666f 6c64 6572 202b 2022  ath = folder + "
+00006720: 2f6d 616d 6261 5f63 6f64 652f 2573 2e70  /mamba_code/%s.p
+00006730: 7922 2025 2061 6765 6e74 2023 2066 6f72  y" % agent # for
+00006740: 6d65 7220 2e74 7874 0d0a 0d0a 2020 2020  mer .txt....    
+00006750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006760: 7072 696e 7428 2270 6174 6822 2c70 6174  print("path",pat
+00006770: 6829 0d0a 0d0a 2020 2020 2020 2020 2020  h)....          
+00006780: 2020 2020 2020 2020 2020 7769 7468 206f            with o
+00006790: 7065 6e28 7061 7468 2c20 2277 2229 2061  pen(path, "w") a
+000067a0: 7320 6669 6c65 3a0d 0a20 2020 2020 2020  s file:..       
+000067b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000067c0: 2066 696c 652e 7772 6974 6528 636f 6465   file.write(code
+000067d0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+000067e0: 2020 2020 2020 2020 2023 2077 7269 7465           # write
+000067f0: 2070 7974 686f 6e20 636f 6465 0d0a 2020   python code..  
+00006800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006810: 2020 7061 7468 203d 2066 6f6c 6465 7220    path = folder 
+00006820: 2b20 222f 7079 7468 6f6e 5f63 6f64 652f  + "/python_code/
+00006830: 2573 2e70 7922 2025 2061 6765 6e74 2e6c  %s.py" % agent.l
+00006840: 6f77 6572 2829 0d0a 0d0a 2020 2020 2020  ower()....      
+00006850: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+00006860: 696e 7428 2270 6174 6822 2c70 6174 6829  int("path",path)
+00006870: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00006880: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
+00006890: 6e28 7061 7468 2c20 2277 2229 2061 7320  n(path, "w") as 
+000068a0: 6669 6c65 3a0d 0a20 2020 2020 2020 2020  file:..         
+000068b0: 2020 2020 2020 2020 2020 2020 2020 206e                 n
+000068c0: 6577 5f63 6f64 6520 3d20 636f 6e76 6572  ew_code = conver
+000068d0: 745f 636f 6465 2863 6f64 652e 7370 6c69  t_code(code.spli
+000068e0: 7428 225c 6e22 2929 5b30 5d0d 0a20 2020  t("\n"))[0]..   
+000068f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006900: 2020 2020 206e 6577 5f63 6f64 6520 3d20       new_code = 
+00006910: 6e65 775f 636f 6465 2e65 6e63 6f64 6528  new_code.encode(
+00006920: 2275 7466 2d38 2229 2e64 6563 6f64 6528  "utf-8").decode(
+00006930: 2763 7031 3235 3227 290d 0a20 2020 2020  'cp1252')..     
+00006940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006950: 2020 2066 696c 652e 7772 6974 6528 6e65     file.write(ne
+00006960: 775f 636f 6465 2920 2320 636f 6e76 6572  w_code) # conver
+00006970: 7420 7573 696e 6720 7468 6520 6d61 6d62  t using the mamb
+00006980: 6120 696e 7465 7270 7265 7465 720d 0a0d  a interpreter...
+00006990: 0a20 2020 2020 2020 2020 2020 2023 2077  .            # w
+000069a0: 7269 7465 2073 6574 7469 6e67 7320 6669  rite settings fi
+000069b0: 6c65 0d0a 2020 2020 2020 2020 2020 2020  le..            
+000069c0: 7769 7468 206f 7065 6e28 666f 6c64 6572  with open(folder
+000069d0: 202b 2022 2f73 6574 7469 6e67 732e 796d   + "/settings.ym
+000069e0: 6c22 2c22 7722 2920 6173 2066 696c 653a  l","w") as file:
+000069f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00006a00: 2020 6669 6c65 2e77 7269 7465 2873 656c    file.write(sel
+00006a10: 662e 7365 7474 696e 6773 5f73 7472 290d  f.settings_str).
+00006a20: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+00006a30: 2077 7269 7465 2074 6865 2072 756e 6e65   write the runne
+00006a40: 7220 6669 6c65 0d0a 2020 2020 2020 2020  r file..        
+00006a50: 2020 2020 6966 2073 656c 662e 6d61 696e      if self.main
+00006a60: 6c6f 6f70 5f73 7472 203d 3d20 2222 206f  loop_str == "" o
+00006a70: 7220 6f76 6572 7772 6974 653a 0d0a 2020  r overwrite:..  
+00006a80: 2020 2020 2020 2020 2020 2020 2020 7769                wi
+00006a90: 7468 206f 7065 6e28 666f 6c64 6572 2b22  th open(folder+"
+00006aa0: 2f72 756e 6e65 722e 7079 222c 2277 2229  /runner.py","w")
+00006ab0: 2061 7320 6669 6c65 3a0d 0a20 2020 2020   as file:..     
+00006ac0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00006ad0: 696c 652e 7772 6974 6528 2266 726f 6d20  ile.write("from 
+00006ae0: 7079 7468 6f6e 5f63 6f64 652e 6d61 696e  python_code.main
+00006af0: 6c6f 6f70 2069 6d70 6f72 7420 7275 6e5c  loop import run\
+00006b00: 6e5c 6e72 756e 2829 5c6e 2229 0d0a 0d0a  n\nrun()\n")....
+00006b10: 2020 2020 2020 2020 2020 2020 2320 7772              # wr
+00006b20: 6974 6520 6d61 696e 2073 696d 756c 6174  ite main simulat
+00006b30: 696f 6e20 6669 6c65 0d0a 2020 2020 2020  ion file..      
+00006b40: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
+00006b50: 666f 6c64 6572 202b 2022 2f70 7974 686f  folder + "/pytho
+00006b60: 6e5f 636f 6465 2f6d 6169 6e6c 6f6f 702e  n_code/mainloop.
+00006b70: 7079 222c 2277 2229 2061 7320 6669 6c65  py","w") as file
+00006b80: 3a0d 0a20 2020 2020 2020 2020 2020 2023  :..            #
+00006b90: 7769 7468 206f 7065 6e28 666f 6c64 6572  with open(folder
+00006ba0: 202b 2022 2e2f 6d61 696e 6c6f 6f70 2e70   + "./mainloop.p
+00006bb0: 7922 2c22 7722 2920 6173 2066 696c 653a  y","w") as file:
+00006bc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00006bd0: 2020 6966 2073 656c 662e 6d61 696e 6c6f    if self.mainlo
+00006be0: 6f70 5f73 7472 203d 3d20 2222 206f 7220  op_str == "" or 
+00006bf0: 6f76 6572 7772 6974 653a 0d0a 0d0a 2020  overwrite:....  
+00006c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006c10: 2020 6966 206f 7665 7277 7269 7465 3a0d    if overwrite:.
+00006c20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00006c30: 2020 2020 2020 2020 2079 6573 203d 2073           yes = s
+00006c40: 656c 662e 6173 6b5f 7175 6573 7469 6f6e  elf.ask_question
+00006c50: 2827 272c 2022 5741 524e 494e 4720 2d20  ('', "WARNING - 
+00006c60: 596f 7520 6172 6520 6162 6f75 7420 746f  You are about to
+00006c70: 2063 7265 6174 6520 6120 6672 6573 6820   create a fresh 
+00006c80: 6d61 696e 2073 6372 6970 742e 2054 6869  main script. Thi
+00006c90: 7320 636f 756c 6420 706f 7465 6e74 6961  s could potentia
+00006ca0: 6c6c 7920 6f76 6572 7772 6974 6520 7072  lly overwrite pr
+00006cb0: 6576 696f 7573 2076 6572 7369 6f6e 7320  evious versions 
+00006cc0: 2869 6620 616e 7929 2e5c 6e54 6869 7320  (if any).\nThis 
+00006cd0: 6f70 6572 6174 696f 6e20 6361 6e6e 6f74  operation cannot
+00006ce0: 2062 6520 7265 7665 7274 6564 2e20 436f   be reverted. Co
+00006cf0: 6e74 696e 7565 3f22 290d 0a20 2020 2020  ntinue?")..     
+00006d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006d10: 2020 2069 6620 6e6f 7420 7965 733a 0d0a     if not yes:..
+00006d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006d30: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00006d40: 726e 0d0a 0d0a 2020 2020 2020 2020 2020  rn....          
+00006d50: 2020 2020 2020 2020 2020 6966 206f 7665            if ove
+00006d60: 7277 7269 7465 2061 6e64 2073 656c 662e  rwrite and self.
+00006d70: 6d61 696e 6c6f 6f70 5f73 7472 2021 3d20  mainloop_str != 
+00006d80: 2222 3a0d 0a20 2020 2020 2020 2020 2020  "":..           
+00006d90: 2020 2020 2020 2020 2020 2020 2077 6974               wit
+00006da0: 6820 6f70 656e 2866 6f6c 6465 7220 2b20  h open(folder + 
+00006db0: 222f 7079 7468 6f6e 5f63 6f64 652f 6d61  "/python_code/ma
+00006dc0: 696e 6c6f 6f70 5f62 6163 6b75 702e 7079  inloop_backup.py
+00006dd0: 222c 2277 2229 2061 7320 6261 636b 7570  ","w") as backup
+00006de0: 6669 6c65 3a0d 0a20 2020 2020 2020 2020  file:..         
+00006df0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00006e00: 7769 7468 206f 7065 6e28 666f 6c64 6572  with open(folder
+00006e10: 202b 2022 2e2f 6d61 696e 6c6f 6f70 5f62   + "./mainloop_b
+00006e20: 6163 6b75 702e 7079 222c 2277 2229 2061  ackup.py","w") a
+00006e30: 7320 6261 636b 7570 6669 6c65 3a0d 0a20  s backupfile:.. 
+00006e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006e50: 2020 2020 2020 2020 2020 2062 6163 6b75             backu
+00006e60: 7066 696c 652e 7772 6974 6528 7365 6c66  pfile.write(self
+00006e70: 2e6d 6169 6e6c 6f6f 705f 7374 722e 7265  .mainloop_str.re
+00006e80: 706c 6163 6528 225c 7422 2c22 2020 2020  place("\t","    
+00006e90: 2229 290d 0a0d 0a20 2020 2020 2020 2020  "))....         
+00006ea0: 2020 2020 2020 2020 2020 2073 696d 755f             simu_
+00006eb0: 7374 7220 3d20 2222 220d 0a5c 225c 225c  str = """..\"\"\
+00006ec0: 220d 0a54 6869 7320 7468 6520 6d61 696e  "..This the main
+00006ed0: 2041 424d 2053 696d 756c 6174 696f 6e20   ABM Simulation 
+00006ee0: 6669 6c65 0d0a 4372 6574 6165 6420 7769  file..Cretaed wi
+00006ef0: 7468 204d 414d 4241 2047 5549 0d0a 0d0a  th MAMBA GUI....
+00006f00: 4061 7574 686f 723a 203c 596f 7572 206e  @author: <Your n
+00006f10: 616d 653e 0d0a 4064 6174 653a 203c 596f  ame>..@date: <Yo
+00006f20: 7572 2064 6174 653e 0d0a 5c22 5c22 5c22  ur date>..\"\"\"
+00006f30: 0d0a 0d0a 6672 6f6d 2073 6663 746f 6f6c  ....from sfctool
+00006f40: 7320 696d 706f 7274 2041 6765 6e74 2c20  s import Agent, 
+00006f50: 576f 726c 642c 2053 6574 7469 6e67 732c  World, Settings,
+00006f60: 2043 6c6f 636b 2c20 466c 6f77 4d61 7472   Clock, FlowMatr
+00006f70: 6978 0d0a 2222 220d 0a20 2020 2020 2020  ix.."""..       
+00006f80: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+00006f90: 2061 6765 6e74 2069 6e20 7365 6c66 2e64   agent in self.d
+00006fa0: 7261 7763 616e 7661 732e 636f 6465 5f64  rawcanvas.code_d
+00006fb0: 6174 612e 6b65 7973 2829 3a0d 0a20 2020  ata.keys():..   
+00006fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006fd0: 2020 2020 2073 696d 755f 7374 7220 2b3d       simu_str +=
+00006fe0: 2022 6672 6f6d 2070 7974 686f 6e5f 636f   "from python_co
+00006ff0: 6465 2e25 7320 696d 706f 7274 2025 735c  de.%s import %s\
+00007000: 6e22 2025 2028 6167 656e 742e 6c6f 7765  n" % (agent.lowe
+00007010: 7228 292c 6167 656e 742e 6361 7069 7461  r(),agent.capita
+00007020: 6c69 7a65 2829 290d 0a0d 0a20 2020 2020  lize())....     
+00007030: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00007040: 696d 755f 7374 7220 2b3d 2022 2222 0d0a  imu_str += """..
+00007050: 0d0a 6465 6620 6974 6572 2829 3a0d 0a20  ..def iter():.. 
+00007060: 2020 205c 225c 225c 220d 0a20 2020 2074     \"\"\"..    t
+00007070: 6869 7320 6973 206f 6e65 2069 7465 7261  his is one itera
+00007080: 7469 6f6e 0d0a 2020 2020 5c22 5c22 5c22  tion..    \"\"\"
+00007090: 0d0a 0d0a 2020 2020 2320 544f 444f 206d  ....    # TODO m
+000070a0: 6f64 6966 7920 6974 6572 6174 696f 6e20  odify iteration 
+000070b0: 6865 7265 0d0a 2222 220d 0a0d 0a20 2020  here.."""....   
+000070c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000070d0: 2066 6f72 2061 6765 6e74 2069 6e20 7365   for agent in se
+000070e0: 6c66 2e64 7261 7763 616e 7661 732e 636f  lf.drawcanvas.co
+000070f0: 6465 5f64 6174 612e 6b65 7973 2829 3a0d  de_data.keys():.
+00007100: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007110: 2020 2020 2020 2020 2061 203d 2061 6765           a = age
+00007120: 6e74 2e63 6170 6974 616c 697a 6528 290d  nt.capitalize().
+00007130: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007140: 2020 2020 2020 2020 2073 696d 755f 7374           simu_st
+00007150: 7220 2b3d 2022 5c74 666f 7220 6120 696e  r += "\tfor a in
+00007160: 2057 6f72 6c64 2829 2e67 6574 5f61 6765   World().get_age
+00007170: 6e74 735f 6f66 5f74 7970 6528 2725 7327  nts_of_type('%s'
+00007180: 293a 5c6e 5c74 5c74 7072 696e 7428 2744  ):\n\t\tprint('D
+00007190: 6f20 736f 6d65 7468 696e 6720 7769 7468  o something with
+000071a0: 2720 2b20 7374 7228 6129 295c 6e5c 6e22  ' + str(a))\n\n"
+000071b0: 2025 2028 6129 0d0a 2020 2020 2020 2020   % (a)..        
+000071c0: 2020 2020 2020 2020 2020 2020 7369 6d75              simu
+000071d0: 5f73 7472 202b 3d20 2222 225c 6e0d 0a64  _str += """\n..d
+000071e0: 6566 2072 756e 2829 3a0d 0a20 2020 205c  ef run():..    \
+000071f0: 225c 225c 220d 0a20 2020 2074 6869 7320  "\"\"..    this 
+00007200: 6973 2074 6865 206d 6169 6e20 7369 6d75  is the main simu
+00007210: 6c61 7469 6f6e 206c 6f6f 700d 0a20 2020  lation loop..   
+00007220: 205c 225c 225c 220d 0a22 2222 0d0a 0d0a   \"\"\".."""....
+00007230: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00007240: 2020 2020 2020 7369 6d75 5f73 7472 202b        simu_str +
+00007250: 3d20 2222 225c 6e0d 0a0d 0a20 2020 2053  = """\n....    S
+00007260: 6574 7469 6e67 7328 292e 7265 6164 285c  ettings().read(\
+00007270: 2273 6574 7469 6e67 732e 796d 6c5c 2229  "settings.yml\")
+00007280: 2023 2072 6561 6420 7365 7474 696e 6773   # read settings
+00007290: 2066 696c 650d 0a0d 0a20 2020 205c 225c   file....    \"\
+000072a0: 225c 220d 0a20 2020 2053 696d 756c 6174  "\"..    Simulat
+000072b0: 696f 6e20 7061 7261 6d65 7465 7273 0d0a  ion parameters..
+000072c0: 2020 2020 5c22 5c22 5c22 0d0a 0d0a 2020      \"\"\"....  
+000072d0: 2020 2320 6e75 6d62 6572 206f 6620 6167    # number of ag
+000072e0: 656e 7473 2074 6f20 6265 2063 7265 6174  ents to be creat
+000072f0: 6564 0d0a 2222 220d 0a0d 0a20 2020 2020  ed.."""....     
+00007300: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00007310: 6f72 2061 6765 6e74 2069 6e20 7365 6c66  or agent in self
+00007320: 2e64 7261 7763 616e 7661 732e 636f 6465  .drawcanvas.code
+00007330: 5f64 6174 612e 6b65 7973 2829 3a0d 0a20  _data.keys():.. 
+00007340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007350: 2020 2020 2020 2073 696d 755f 7374 7220         simu_str 
+00007360: 2b3d 2022 5c74 4e5f 2573 203d 2031 5c6e  += "\tN_%s = 1\n
+00007370: 2220 2520 6167 656e 742e 6361 7069 7461  " % agent.capita
+00007380: 6c69 7a65 2829 0d0a 2020 2020 2020 2020  lize()..        
+00007390: 2020 2020 2020 2020 2020 2020 7369 6d75              simu
+000073a0: 5f73 7472 202b 3d20 2222 220d 0a20 2020  _str += """..   
+000073b0: 2023 2054 4f44 4f5e 2073 6574 2074 6865   # TODO^ set the
+000073c0: 2063 6f72 7265 6374 2076 616c 7565 0d0a   correct value..
+000073d0: 0d0a 2020 2020 2320 6e75 6d62 6572 206f  ..    # number o
+000073e0: 6620 7369 6d75 6c61 7469 6f6e 2073 7465  f simulation ste
+000073f0: 7073 0d0a 2020 2020 5420 3d20 3130 300d  ps..    T = 100.
+00007400: 0a0d 0a20 2020 2023 2054 4f44 4f5e 2073  ...    # TODO^ s
+00007410: 6574 2074 6865 2063 6f72 7265 6374 2076  et the correct v
+00007420: 616c 7565 730d 0a0d 0a20 2020 2023 2063  alues....    # c
+00007430: 7265 6174 6520 4167 656e 7473 3a0d 0a22  reate Agents:.."
+00007440: 2222 0d0a 2020 2020 2020 2020 2020 2020  ""..            
+00007450: 2020 2020 2020 2020 666f 7220 6167 656e          for agen
+00007460: 7420 696e 2073 656c 662e 6472 6177 6361  t in self.drawca
+00007470: 6e76 6173 2e63 6f64 655f 6461 7461 2e6b  nvas.code_data.k
+00007480: 6579 7328 293a 0d0a 2020 2020 2020 2020  eys():..        
+00007490: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000074a0: 6120 3d20 6167 656e 742e 6361 7069 7461  a = agent.capita
+000074b0: 6c69 7a65 2829 0d0a 2020 2020 2020 2020  lize()..        
+000074c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000074d0: 7369 6d75 5f73 7472 202b 3d20 225c 745b  simu_str += "\t[
+000074e0: 2573 2829 2066 6f72 2069 2069 6e20 7261  %s() for i in ra
+000074f0: 6e67 6528 4e5f 2573 295d 5c6e 2220 2520  nge(N_%s)]\n" % 
+00007500: 2861 2c61 290d 0a0d 0a20 2020 2020 2020  (a,a)....       
+00007510: 2020 2020 2020 2020 2020 2020 2073 696d               sim
+00007520: 755f 7374 7220 2b3d 2022 5c6e 220d 0a20  u_str += "\n".. 
+00007530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007540: 2020 2073 696d 755f 7374 7220 2b3d 2022     simu_str += "
+00007550: 5c74 2320 696e 7465 722d 6c69 6e6b 2061  \t# inter-link a
+00007560: 6765 6e74 7320 5c6e 220d 0a0d 0a20 2020  gents \n"....   
+00007570: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007580: 2073 696d 755f 7374 7220 2b3d 2022 5c74   simu_str += "\t
+00007590: 576f 726c 6428 292e 6c69 6e6b 2829 5c6e  World().link()\n
+000075a0: 5c6e 220d 0a0d 0a20 2020 2020 2020 2020  \n"....         
+000075b0: 2020 2020 2020 2020 2020 2023 2066 6f72             # for
+000075c0: 2061 6765 6e74 2069 6e20 7365 6c66 2e64   agent in self.d
+000075d0: 7261 7763 616e 7661 732e 636f 6465 5f64  rawcanvas.code_d
+000075e0: 6174 612e 6b65 7973 2829 3a0d 0a20 2020  ata.keys():..   
+000075f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007600: 2023 2020 2020 6120 3d20 6167 656e 742e   #    a = agent.
+00007610: 6361 7069 7461 6c69 7a65 2829 0d0a 2020  capitalize()..  
+00007620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007630: 2020 2320 2020 2073 696d 755f 7374 7220    #    simu_str 
+00007640: 2b3d 2022 5c74 5b69 2e6c 696e 6b28 2920  += "\t[i.link() 
+00007650: 666f 7220 6920 696e 2025 735f 7069 6c65  for i in %s_pile
+00007660: 5d5c 6e22 2025 2028 6129 0d0a 0d0a 2020  ]\n" % (a)....  
+00007670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007680: 2020 7369 6d75 5f73 7472 202b 3d20 2222    simu_str += ""
+00007690: 220d 0a20 2020 2066 6f72 2069 2069 6e20  "..    for i in 
+000076a0: 7261 6e67 6528 5429 3a0d 0a20 2020 2020  range(T):..     
+000076b0: 2020 2069 7465 7228 290d 0a0d 0a20 2020     iter()....   
+000076c0: 2020 2020 2023 2054 4f44 4f20 7772 6974       # TODO writ
+000076d0: 6520 6f75 7470 7574 7320 6865 7265 202e  e outputs here .
+000076e0: 2e2e 0d0a 0d0a 2020 2020 2020 2020 436c  ......        Cl
+000076f0: 6f63 6b28 292e 7469 636b 2829 0d0a 0d0a  ock().tick()....
+00007700: 2020 2020 7072 696e 7428 466c 6f77 4d61      print(FlowMa
+00007710: 7472 6978 2829 2e74 6f5f 7374 7269 6e67  trix().to_string
+00007720: 2829 290d 0a22 2222 0d0a 2020 2020 2020  ()).."""..      
+00007730: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00007740: 6c66 2e6d 6169 6e6c 6f6f 705f 7374 7220  lf.mainloop_str 
+00007750: 3d20 7369 6d75 5f73 7472 0d0a 0d0a 2020  = simu_str....  
+00007760: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00007770: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00007780: 2020 2020 2020 2020 2073 696d 755f 7374           simu_st
+00007790: 7220 3d20 7365 6c66 2e6d 6169 6e6c 6f6f  r = self.mainloo
+000077a0: 705f 7374 720d 0a0d 0a20 2020 2020 2020  p_str....       
+000077b0: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
+000077c0: 5349 4d55 2053 5452 222c 2073 696d 755f  SIMU STR", simu_
+000077d0: 7374 7229 0d0a 2020 2020 2020 2020 2020  str)..          
+000077e0: 2020 2020 2020 6669 6c65 2e77 7269 7465        file.write
+000077f0: 2873 696d 755f 7374 722e 7265 706c 6163  (simu_str.replac
+00007800: 6528 225c 7422 2c22 2020 2020 2229 290d  e("\t","    ")).
+00007810: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00007820: 2020 2069 6620 6e6f 7420 7369 6c65 6e74     if not silent
+00007830: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00007840: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
+00007850: 6679 2822 5072 6f6a 6563 7420 6669 6c65  fy("Project file
+00007860: 7320 6275 696c 7421 222c 7469 746c 653d  s built!",title=
+00007870: 2253 7563 6365 7373 2229 0d0a 0d0a 2020  "Success")....  
+00007880: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00007890: 6c66 2e67 656e 5f63 6f64 6528 2920 2320  lf.gen_code() # 
+000078a0: 6765 6e65 7261 7465 2074 7261 6e73 6163  generate transac
+000078b0: 7469 6f6e 732e 7079 0d0a 0d0a 2020 2020  tions.py....    
+000078c0: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+000078d0: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
+000078e0: 2020 2020 2020 2020 6578 6365 7074 696f          exceptio
+000078f0: 6e5f 7479 7065 2c20 6578 6365 7074 696f  n_type, exceptio
+00007900: 6e5f 6f62 6a65 6374 2c20 6578 6365 7074  n_object, except
+00007910: 696f 6e5f 7472 6163 6562 6163 6b20 3d20  ion_traceback = 
+00007920: 7379 732e 6578 635f 696e 666f 2829 0d0a  sys.exc_info()..
+00007930: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00007940: 2e6e 6f74 6966 7928 2243 6f75 6c64 206e  .notify("Could n
+00007950: 6f74 2062 7569 6c64 2070 726f 6a65 6374  ot build project
+00007960: 2e5c 6e22 202b 2073 7472 2865 7863 6570  .\n" + str(excep
+00007970: 7469 6f6e 5f6f 626a 6563 7429 202b 2073  tion_object) + s
+00007980: 7472 2865 7863 6570 7469 6f6e 5f74 7261  tr(exception_tra
+00007990: 6365 6261 636b 292c 7469 746c 653d 2245  ceback),title="E
+000079a0: 7272 6f72 206f 6e20 5072 6f6a 6563 7420  rror on Project 
+000079b0: 4275 696c 6422 290d 0a0d 0a20 2020 2064  Build")....    d
+000079c0: 6566 2061 7574 6f5f 6261 636b 7570 2873  ef auto_backup(s
+000079d0: 656c 6629 3a0d 0a20 2020 2020 2020 2074  elf):..        t
+000079e0: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
+000079f0: 2066 6f6c 6465 7220 3d20 7365 6c66 2e63   folder = self.c
+00007a00: 7572 7265 6e74 5f66 696c 650d 0a20 2020  urrent_file..   
+00007a10: 2020 2020 2020 2020 2069 6620 666f 6c64           if fold
+00007a20: 6572 2069 7320 6e6f 7420 4e6f 6e65 3a0d  er is not None:.
+00007a30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007a40: 2073 656c 662e 7361 7665 6173 2866 6f6c   self.saveas(fol
+00007a50: 6465 725b 3a2d 365d 202b 225f 6175 746f  der[:-6] +"_auto
+00007a60: 6261 636b 7570 2e73 6663 746c 2229 2023  backup.sfctl") #
+00007a70: 206d 616b 6573 2061 2062 6163 6b75 7020   makes a backup 
+00007a80: 6669 6c65 0d0a 2020 2020 2020 2020 2020  file..          
+00007a90: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
+00007aa0: 2020 2020 2020 2020 2023 2073 656c 662e           # self.
+00007ab0: 6e6f 7469 6679 2822 596f 7520 6172 6520  notify("You are 
+00007ac0: 776f 726b 696e 6720 6f6e 2061 2062 6c61  working on a bla
+00007ad0: 6e6b 2070 726f 6a65 6374 2066 696c 652e  nk project file.
+00007ae0: 2050 6c65 6173 6520 7361 7665 2079 6f75   Please save you
+00007af0: 7220 6368 616e 6765 7320 736f 6f6e 2e22  r changes soon."
+00007b00: 2c20 7469 746c 653d 2257 6172 6e69 6e67  , title="Warning
+00007b10: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
+00007b20: 2020 2020 7365 6c66 2e73 7461 7475 7342      self.statusB
+00007b30: 6172 2829 2e73 686f 774d 6573 7361 6765  ar().showMessage
+00007b40: 2822 5741 524e 494e 473a 2059 6f75 2061  ("WARNING: You a
+00007b50: 7265 2077 6f72 6b69 6e67 206f 6e20 6120  re working on a 
+00007b60: 626c 616e 6b20 7072 6f6a 6563 7420 6669  blank project fi
+00007b70: 6c65 2e20 506c 6561 7365 2073 6176 6520  le. Please save 
+00007b80: 796f 7572 2063 6861 6e67 6573 2073 6f6f  your changes soo
+00007b90: 6e2e 2229 0d0a 2020 2020 2020 2020 6578  n.")..        ex
+00007ba0: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
+00007bb0: 7320 653a 0d0a 2020 2020 2020 2020 2020  s e:..          
+00007bc0: 2020 7365 6c66 2e6e 6f74 6966 7928 7374    self.notify(st
+00007bd0: 7228 6529 2c20 7469 746c 653d 2245 7272  r(e), title="Err
+00007be0: 6f72 206f 6e20 4175 746f 4261 636b 7570  or on AutoBackup
+00007bf0: 2229 0d0a 0d0a 2020 2020 6465 6620 6564  ")....    def ed
+00007c00: 6974 5f73 6574 7469 6e67 7328 7365 6c66  it_settings(self
+00007c10: 293a 0d0a 2020 2020 2020 2020 6966 2073  ):..        if s
+00007c20: 656c 662e 7365 7474 696e 6773 5f73 7472  elf.settings_str
+00007c30: 203d 3d22 2220 6f72 2073 656c 662e 7365   =="" or self.se
+00007c40: 7474 696e 6773 5f73 7472 2069 7320 4e6f  ttings_str is No
+00007c50: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
+00007c60: 2073 656c 662e 6e6f 7469 6679 286d 6573   self.notify(mes
+00007c70: 7361 6765 3d22 536f 6d65 7468 696e 6720  sage="Something 
+00007c80: 7765 6e74 2077 726f 6e67 2e20 4861 7665  went wrong. Have
+00007c90: 2079 6f75 2062 7569 6c74 2074 6865 2070   you built the p
+00007ca0: 726f 6a65 6374 3f22 2c74 6974 6c65 3d22  roject?",title="
+00007cb0: 4572 726f 7222 290d 0a20 2020 2020 2020  Error")..       
+00007cc0: 2020 2020 2072 6574 7572 6e0d 0a0d 0a20       return.... 
+00007cd0: 2020 2020 2020 206d 795f 6564 6974 203d         my_edit =
+00007ce0: 2053 6574 7469 6e67 7345 6469 746f 7228   SettingsEditor(
+00007cf0: 7061 7265 6e74 3d73 656c 662c 2074 6578  parent=self, tex
+00007d00: 743d 7365 6c66 2e73 6574 7469 6e67 735f  t=self.settings_
+00007d10: 7374 7229 0d0a 0d0a 2020 2020 6465 6620  str)....    def 
+00007d20: 6564 6974 5f67 7261 7068 5f61 6765 6e74  edit_graph_agent
+00007d30: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+00007d40: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+00007d50: 2e65 6469 745f 6167 656e 7428 290d 0a0d  .edit_agent()...
+00007d60: 0a20 2020 2064 6566 2063 6861 6e67 655f  .    def change_
+00007d70: 6772 6170 686d 6f64 655f 7365 6c65 6374  graphmode_select
+00007d80: 2873 656c 6629 3a0d 0a0d 0a20 2020 2020  (self):....     
+00007d90: 2020 2073 656c 662e 6472 6177 6361 6e76     self.drawcanv
+00007da0: 6173 2e6d 6f64 6520 3d20 2273 656c 6563  as.mode = "selec
+00007db0: 7422 0d0a 0d0a 2020 2020 6465 6620 6368  t"....    def ch
+00007dc0: 616e 6765 5f67 7261 7068 6d6f 6465 5f64  ange_graphmode_d
+00007dd0: 7261 6728 7365 6c66 293a 0d0a 0d0a 2020  rag(self):....  
+00007de0: 2020 2020 2020 7365 6c66 2e64 7261 7763        self.drawc
+00007df0: 616e 7661 732e 6d6f 6465 203d 2022 6472  anvas.mode = "dr
+00007e00: 6167 220d 0a0d 0a20 2020 2064 6566 2061  ag"....    def a
+00007e10: 7272 616e 6765 5f70 7265 7474 7928 7365  rrange_pretty(se
+00007e20: 6c66 293a 0d0a 2020 2020 2020 2020 7365  lf):..        se
+00007e30: 6c66 2e75 7064 6174 655f 7461 626c 6528  lf.update_table(
+00007e40: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00007e50: 6472 6177 6361 6e76 6173 2e61 7272 616e  drawcanvas.arran
+00007e60: 6765 5f70 7265 7474 7928 290d 0a0d 0a0d  ge_pretty().....
+00007e70: 0a20 2020 2064 6566 2075 7064 6174 655f  .    def update_
+00007e80: 6772 6170 6869 6373 5f64 6174 6128 7365  graphics_data(se
+00007e90: 6c66 2c20 626f 782c 2063 6f6e 6e29 3a0d  lf, box, conn):.
+00007ea0: 0a20 2020 2020 2020 2070 6173 730d 0a0d  .        pass...
+00007eb0: 0a0d 0a20 2020 2064 6566 2073 7769 7463  ...    def switc
+00007ec0: 685f 7468 656d 6528 7365 6c66 293a 0d0a  h_theme(self):..
+00007ed0: 0d0a 0d0a 2020 2020 2020 2020 2320 6672  ....        # fr
+00007ee0: 6f6d 2071 745f 6d61 7465 7269 616c 2069  om qt_material i
+00007ef0: 6d70 6f72 7420 6170 706c 795f 7374 796c  mport apply_styl
+00007f00: 6573 6865 6574 0d0a 0d0a 2020 2020 2020  esheet....      
+00007f10: 2020 6966 2073 656c 662e 7468 656d 655f    if self.theme_
+00007f20: 6d61 6e61 6765 722e 7468 656d 6520 3d3d  manager.theme ==
+00007f30: 2022 6461 726b 223a 0d0a 2020 2020 2020   "dark":..      
+00007f40: 2020 2020 2020 7365 6c66 2e74 6865 6d65        self.theme
+00007f50: 5f6d 616e 6167 6572 2e74 6865 6d65 203d  _manager.theme =
+00007f60: 2022 6272 6967 6874 220d 0a0d 0a20 2020   "bright"....   
+00007f70: 2020 2020 2065 6c69 6620 7365 6c66 2e74       elif self.t
+00007f80: 6865 6d65 5f6d 616e 6167 6572 2e74 6865  heme_manager.the
+00007f90: 6d65 203d 3d20 2262 7269 6768 7422 3a0d  me == "bright":.
+00007fa0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00007fb0: 662e 7468 656d 655f 6d61 6e61 6765 722e  f.theme_manager.
+00007fc0: 7468 656d 6520 3d20 2264 6172 6b22 0d0a  theme = "dark"..
+00007fd0: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
+00007fe0: 2e73 6574 5374 796c 6553 6865 6574 2873  .setStyleSheet(s
+00007ff0: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
+00008000: 722e 6765 745f 7374 796c 6573 6865 6574  r.get_stylesheet
+00008010: 2822 6d61 696e 2229 290d 0a0d 0a20 2020  ("main"))....   
+00008020: 2020 2020 2073 656c 662e 7468 656d 655f       self.theme_
+00008030: 6d61 6e61 6765 722e 7265 7374 6f72 655f  manager.restore_
+00008040: 6275 7474 6f6e 7328 290d 0a0d 0a20 2020  buttons()....   
+00008050: 2020 2020 2073 656c 662e 7461 6257 6964       self.tabWid
+00008060: 6765 745f 322e 7365 7453 7479 6c65 5368  get_2.setStyleSh
+00008070: 6565 7428 7365 6c66 2e74 6865 6d65 5f6d  eet(self.theme_m
+00008080: 616e 6167 6572 2e67 6574 5f62 6163 6b67  anager.get_backg
+00008090: 726f 756e 645f 7374 796c 6528 2929 0d0a  round_style())..
+000080a0: 2020 2020 2020 2020 7365 6c66 2e64 6f63          self.doc
+000080b0: 6b57 6964 6765 745f 332e 7365 7453 7479  kWidget_3.setSty
+000080c0: 6c65 5368 6565 7428 7365 6c66 2e74 6865  leSheet(self.the
+000080d0: 6d65 5f6d 616e 6167 6572 2e67 6574 5f62  me_manager.get_b
+000080e0: 6163 6b67 726f 756e 645f 7374 796c 6528  ackground_style(
+000080f0: 2929 0d0a 2020 2020 2020 2020 7365 6c66  ))..        self
+00008100: 2e64 6f63 6b57 6964 6765 745f 342e 7365  .dockWidget_4.se
+00008110: 7453 7479 6c65 5368 6565 7428 7365 6c66  tStyleSheet(self
+00008120: 2e74 6865 6d65 5f6d 616e 6167 6572 2e67  .theme_manager.g
+00008130: 6574 5f62 6163 6b67 726f 756e 645f 7374  et_background_st
+00008140: 796c 6528 2929 0d0a 2020 2020 2020 2020  yle())..        
+00008150: 7365 6c66 2e64 6f63 6b57 6964 6765 745f  self.dockWidget_
+00008160: 352e 7365 7453 7479 6c65 5368 6565 7428  5.setStyleSheet(
+00008170: 7365 6c66 2e74 6865 6d65 5f6d 616e 6167  self.theme_manag
+00008180: 6572 2e67 6574 5f62 6163 6b67 726f 756e  er.get_backgroun
+00008190: 645f 7374 796c 6528 2929 0d0a 0d0a 2020  d_style())....  
+000081a0: 2020 2020 2020 7365 6c66 2e77 6964 6765        self.widge
+000081b0: 742e 7365 7453 7479 6c65 5368 6565 7428  t.setStyleSheet(
+000081c0: 7365 6c66 2e74 6865 6d65 5f6d 616e 6167  self.theme_manag
+000081d0: 6572 2e67 6574 5f62 6163 6b67 726f 756e  er.get_backgroun
+000081e0: 645f 7374 796c 6528 2929 0d0a 0d0a 2020  d_style())....  
+000081f0: 2020 2020 2020 7365 6c66 2e64 6f63 6b57        self.dockW
+00008200: 6964 6765 745f 372e 7365 7453 7479 6c65  idget_7.setStyle
+00008210: 5368 6565 7428 7365 6c66 2e74 6865 6d65  Sheet(self.theme
+00008220: 5f6d 616e 6167 6572 2e67 6574 5f62 6163  _manager.get_bac
+00008230: 6b67 726f 756e 645f 7374 796c 6528 2929  kground_style())
+00008240: 0d0a 2020 2020 2020 2020 7365 6c66 2e74  ..        self.t
+00008250: 6162 5769 6467 6574 2e73 6574 5374 796c  abWidget.setStyl
+00008260: 6553 6865 6574 2873 656c 662e 7468 656d  eSheet(self.them
+00008270: 655f 6d61 6e61 6765 722e 6765 745f 6261  e_manager.get_ba
+00008280: 636b 6772 6f75 6e64 5f73 7479 6c65 2829  ckground_style()
+00008290: 290d 0a0d 0a20 2020 2020 2020 2066 6f72  )....        for
+000082a0: 2063 6520 696e 2043 6f64 6545 6469 746f   ce in CodeEdito
+000082b0: 722e 696e 7374 616e 6365 732e 7661 6c75  r.instances.valu
+000082c0: 6573 2829 3a0d 0a20 2020 2020 2020 2020  es():..         
+000082d0: 2020 2063 652e 7365 7453 7479 6c65 5368     ce.setStyleSh
+000082e0: 6565 7428 7365 6c66 2e74 6865 6d65 5f6d  eet(self.theme_m
+000082f0: 616e 6167 6572 2e67 6574 5f62 6163 6b67  anager.get_backg
+00008300: 726f 756e 645f 7374 796c 6528 2929 0d0a  round_style())..
+00008310: 0d0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+00008320: 6765 6e74 3145 6469 742e 7365 7453 7479  gent1Edit.setSty
+00008330: 6c65 5368 6565 7428 7365 6c66 2e74 6865  leSheet(self.the
+00008340: 6d65 5f6d 616e 6167 6572 2e67 6574 5f62  me_manager.get_b
+00008350: 6163 6b67 726f 756e 645f 7374 796c 6528  ackground_style(
+00008360: 2929 0d0a 2020 2020 2020 2020 7365 6c66  ))..        self
+00008370: 2e61 6765 6e74 3245 6469 742e 7365 7453  .agent2Edit.setS
+00008380: 7479 6c65 5368 6565 7428 7365 6c66 2e74  tyleSheet(self.t
+00008390: 6865 6d65 5f6d 616e 6167 6572 2e67 6574  heme_manager.get
+000083a0: 5f62 6163 6b67 726f 756e 645f 7374 796c  _background_styl
+000083b0: 6528 2929 0d0a 0d0a 2020 2020 2020 2020  e())....        
+000083c0: 7472 793a 0d0a 0d0a 2020 2020 2020 2020  try:....        
+000083d0: 2020 2020 6966 204d 6169 6e4c 6f6f 7045      if MainLoopE
+000083e0: 6469 746f 722e 696e 7374 616e 6365 2069  ditor.instance i
+000083f0: 7320 6e6f 7420 4e6f 6e65 3a0d 0a20 2020  s not None:..   
+00008400: 2020 2020 2020 2020 2020 2020 2069 6e73               ins
+00008410: 7420 3d20 4d61 696e 4c6f 6f70 4564 6974  t = MainLoopEdit
+00008420: 6f72 2e69 6e73 7461 6e63 650d 0a20 2020  or.instance..   
+00008430: 2020 2020 2020 2020 2020 2020 2069 6e73               ins
+00008440: 742e 7365 7453 7479 6c65 5368 6565 7428  t.setStyleSheet(
+00008450: 7365 6c66 2e74 6865 6d65 5f6d 616e 6167  self.theme_manag
+00008460: 6572 2e67 6574 5f62 6163 6b67 726f 756e  er.get_backgroun
+00008470: 645f 7374 796c 6528 2929 0d0a 2020 2020  d_style())..    
+00008480: 2020 2020 2020 2020 2020 2020 696e 7374              inst
+00008490: 2e73 6574 5374 796c 6553 6865 6574 2873  .setStyleSheet(s
+000084a0: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
+000084b0: 722e 6765 745f 7374 796c 6573 6865 6574  r.get_stylesheet
+000084c0: 2822 6d61 696e 2229 290d 0a0d 0a20 2020  ("main"))....   
+000084d0: 2020 2020 2065 7863 6570 743a 0d0a 0d0a       except:....
+000084e0: 2020 2020 2020 2020 2020 2020 7061 7373              pass
+000084f0: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
+00008500: 2e75 7064 6174 655f 7461 626c 6528 290d  .update_table().
+00008510: 0a0d 0a20 2020 2020 2020 2023 2073 656c  ...        # sel
+00008520: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
+00008530: 772e 7365 7453 7479 6c65 5368 6565 7428  w.setStyleSheet(
+00008540: 7365 6c66 2e74 6865 6d65 5f6d 616e 6167  self.theme_manag
+00008550: 6572 2e67 6574 5f74 6162 6c65 5f73 7479  er.get_table_sty
+00008560: 6c65 2829 290d 0a0d 0a20 2020 2064 6566  le())....    def
+00008570: 2061 736b 5f71 7565 7374 696f 6e28 7365   ask_question(se
+00008580: 6c66 2c74 6974 6c65 2c6d 6573 7361 6765  lf,title,message
+00008590: 293a 0d0a 2020 2020 2020 2020 2320 6173  ):..        # as
+000085a0: 6b20 6120 7175 6573 7469 6f6e 2079 6573  k a question yes
+000085b0: 202f 206e 6f0d 0a20 2020 2020 2020 206d   / no..        m
+000085c0: 7367 203d 2051 4d65 7373 6167 6542 6f78  sg = QMessageBox
+000085d0: 2851 4d65 7373 6167 6542 6f78 2e51 7565  (QMessageBox.Que
+000085e0: 7374 696f 6e2c 0d0a 2020 2020 2020 2020  stion,..        
+000085f0: 2020 2020 2020 2020 7469 746c 652c 206d          title, m
+00008600: 6573 7361 6765 2c62 7574 746f 6e73 3d51  essage,buttons=Q
+00008610: 4d65 7373 6167 6542 6f78 2e59 6573 207c  MessageBox.Yes |
+00008620: 2051 4d65 7373 6167 6542 6f78 2e4e 6f2c   QMessageBox.No,
+00008630: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00008640: 2020 7061 7265 6e74 3d73 656c 6629 0d0a    parent=self)..
+00008650: 2020 2020 2020 2020 6d73 672e 7365 7457          msg.setW
+00008660: 696e 646f 7754 6974 6c65 2874 6974 6c65  indowTitle(title
+00008670: 290d 0a20 2020 2020 2020 206d 7367 2e73  )..        msg.s
+00008680: 6574 5374 796c 6553 6865 6574 2873 656c  etStyleSheet(sel
+00008690: 662e 7468 656d 655f 6d61 6e61 6765 722e  f.theme_manager.
+000086a0: 6765 745f 6e6f 7469 6669 6361 7469 6f6e  get_notification
+000086b0: 5f73 7479 6c65 2829 290d 0a20 2020 2020  _style())..     
+000086c0: 2020 206d 7367 2e65 7865 635f 2829 0d0a     msg.exec_()..
+000086d0: 2020 2020 2020 2020 7265 706c 7920 3d20          reply = 
+000086e0: 6d73 672e 7374 616e 6461 7264 4275 7474  msg.standardButt
+000086f0: 6f6e 286d 7367 2e63 6c69 636b 6564 4275  on(msg.clickedBu
+00008700: 7474 6f6e 2829 290d 0a0d 0a20 2020 2020  tton())....     
+00008710: 2020 2069 6620 7265 706c 7920 3d3d 206d     if reply == m
+00008720: 7367 2e59 6573 3a0d 0a20 2020 2020 2020  sg.Yes:..       
+00008730: 2020 2020 2072 6574 7572 6e20 5472 7565       return True
+00008740: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
+00008750: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00008760: 7572 6e20 4661 6c73 650d 0a0d 0a20 2020  urn False....   
+00008770: 2064 6566 206e 6f74 6966 7928 7365 6c66   def notify(self
+00008780: 2c6d 6573 7361 6765 2c74 6974 6c65 293a  ,message,title):
+00008790: 0d0a 2020 2020 2020 2020 236d 7367 203d  ..        #msg =
+000087a0: 2051 4d65 7373 6167 6542 6f78 2873 656c   QMessageBox(sel
+000087b0: 6629 0d0a 2020 2020 2020 2020 6d73 6720  f)..        msg 
+000087c0: 3d20 514d 6573 7361 6765 426f 7828 7365  = QMessageBox(se
+000087d0: 6c66 290d 0a20 2020 2020 2020 206d 7367  lf)..        msg
+000087e0: 2e73 6574 5769 6e64 6f77 5469 746c 6528  .setWindowTitle(
+000087f0: 7469 746c 6529 0d0a 2020 2020 2020 2020  title)..        
+00008800: 6d73 672e 7365 7454 6578 7428 6d65 7373  msg.setText(mess
+00008810: 6167 6529 0d0a 2020 2020 2020 2020 236d  age)..        #m
+00008820: 7367 2e73 6574 5374 796c 6553 6865 6574  sg.setStyleSheet
+00008830: 2873 656c 662e 7374 796c 6573 6865 6574  (self.stylesheet
+00008840: 290d 0a20 2020 2020 2020 2023 2067 6574  )..        # get
+00008850: 2062 6163 6b67 726f 756e 6420 636f 6c6f   background colo
+00008860: 7220 6672 6f6d 2074 6865 6d65 206d 616e  r from theme man
+00008870: 6167 6572 0d0a 2020 2020 2020 2020 2320  ager..        # 
+00008880: 6765 7420 666f 7265 6772 6f75 6e64 2063  get foreground c
+00008890: 6f6c 6f72 2066 726f 6d20 7468 656d 6520  olor from theme 
+000088a0: 6d61 6e61 6765 720d 0a20 2020 2020 2020  manager..       
+000088b0: 2073 7479 6c65 203d 2073 656c 662e 7468   style = self.th
+000088c0: 656d 655f 6d61 6e61 6765 722e 6765 745f  eme_manager.get_
+000088d0: 6e6f 7469 6669 6361 7469 6f6e 5f73 7479  notification_sty
+000088e0: 6c65 2829 0d0a 2020 2020 2020 2020 6d73  le()..        ms
+000088f0: 672e 7365 7453 7479 6c65 5368 6565 7428  g.setStyleSheet(
+00008900: 7374 796c 6529 0d0a 2020 2020 2020 2020  style)..        
+00008910: 6d73 672e 6f70 656e 2829 0d0a 0d0a 0d0a  msg.open()......
+00008920: 2020 2020 6465 6620 636c 6561 6e75 705f      def cleanup_
+00008930: 7472 616e 7361 6374 696f 6e5f 6461 7461  transaction_data
+00008940: 2873 656c 662c 6461 7461 293a 0d0a 2020  (self,data):..  
+00008950: 2020 2020 2020 2222 220d 0a20 2020 2020        """..     
+00008960: 2020 2063 6c65 616e 7320 7570 2074 7261     cleans up tra
+00008970: 6e73 6163 7469 6f6e 2064 6174 6120 6672  nsaction data fr
+00008980: 6f6d 206f 6c64 2066 696c 6520 7665 7273  om old file vers
+00008990: 696f 6e73 0d0a 2020 2020 2020 2020 2222  ions..        ""
+000089a0: 220d 0a20 2020 2020 2020 2074 7279 3a0d  "..        try:.
+000089b0: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+000089c0: 6e74 2822 6f6c 645f 6461 7461 222c 6461  nt("old_data",da
+000089d0: 7461 290d 0a20 2020 2020 2020 2020 2020  ta)..           
+000089e0: 2023 2064 6174 6120 3d20 6469 6374 2864   # data = dict(d
+000089f0: 6174 6129 0d0a 2020 2020 2020 2020 2020  ata)..          
+00008a00: 2020 6e65 775f 6461 7461 203d 207b 2261    new_data = {"a
+00008a10: 6765 6e74 7322 3a7b 7d2c 2274 7261 6e73  gents":{},"trans
+00008a20: 6163 7469 6f6e 7322 3a5b 5d2c 2262 6f78  actions":[],"box
+00008a30: 5f70 6f73 6974 696f 6e73 223a 7b7d 2c20  _positions":{}, 
+00008a40: 226c 6162 656c 5f70 6f73 6974 696f 6e73  "label_positions
+00008a50: 223a 7b7d 2c22 7468 656d 6522 3a4e 6f6e  ":{},"theme":Non
+00008a60: 657d 2023 2064 6174 612e 636f 7079 2829  e} # data.copy()
+00008a70: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00008a80: 6e65 775f 6461 7461 5b22 7472 616e 7361  new_data["transa
+00008a90: 6374 696f 6e73 225d 203d 2064 6174 615b  ctions"] = data[
+00008aa0: 2274 7261 6e73 6163 7469 6f6e 7322 5d2e  "transactions"].
+00008ab0: 636f 7079 2829 0d0a 0d0a 2020 2020 2020  copy()....      
+00008ac0: 2020 2020 2020 666f 7220 6b2c 7620 696e        for k,v in
+00008ad0: 2064 6174 612e 6974 656d 7328 293a 0d0a   data.items():..
+00008ae0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00008af0: 2020 6966 206b 203d 3d20 2274 6865 6d65    if k == "theme
+00008b00: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+00008b10: 2020 2020 2020 2020 6e65 775f 6461 7461          new_data
+00008b20: 5b22 7468 656d 6522 5d20 3d20 6461 7461  ["theme"] = data
+00008b30: 5b6b 5d20 2320 7b22 676c 6f62 616c 7468  [k] # {"globalth
+00008b40: 656d 6522 3a20 6272 6967 6874 2f64 6172  eme": bright/dar
+00008b50: 6b2c 2022 636f 6c6f 7273 223a 2063 6f6c  k, "colors": col
+00008b60: 6f72 737d 2023 206c 6f61 6420 7468 6520  ors} # load the 
+00008b70: 636f 6c6f 7220 7468 656d 650d 0a0d 0a20  color theme.... 
+00008b80: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00008b90: 6620 6b20 3d3d 2022 6167 656e 7473 223a  f k == "agents":
+00008ba0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00008bb0: 2020 2020 2020 666f 7220 6b32 2c76 3220        for k2,v2 
+00008bc0: 696e 2064 6174 615b 6b5d 2e69 7465 6d73  in data[k].items
+00008bd0: 2829 3a0d 0a0d 0a20 2020 2020 2020 2020  ():....         
+00008be0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00008bf0: 2031 2e20 7265 6e61 6d65 2061 6765 6e74   1. rename agent
+00008c00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00008c10: 2020 2020 2020 2020 2020 7072 696e 7428            print(
+00008c20: 2252 454e 414d 4520 4147 454e 5453 2e2e  "RENAME AGENTS..
+00008c30: 2e22 290d 0a20 2020 2020 2020 2020 2020  .")..           
+00008c40: 2020 2020 2020 2020 2020 2020 206e 6577               new
+00008c50: 5f63 6f64 655f 6c69 6e65 7320 3d20 5b5d  _code_lines = []
+00008c60: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00008c70: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00008c80: 6c69 6e65 2069 6e20 7632 2e73 706c 6974  line in v2.split
+00008c90: 2822 5c6e 2229 3a0d 0a20 2020 2020 2020  ("\n"):..       
+00008ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008cb0: 2020 2020 2069 6620 2241 4745 4e54 2220       if "AGENT" 
+00008cc0: 696e 206c 696e 653a 2023 2020 616e 6420  in line: #  and 
+00008cd0: 6c65 6e28 6c69 6e65 2920 3e3d 2039 3a0d  len(line) >= 9:.
+00008ce0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008d00: 206e 6c69 6e65 203d 206c 696e 655b 3a39   nline = line[:9
+00008d10: 5d20 2b20 6361 6d65 6c28 6c69 6e65 5b39  ] + camel(line[9
+00008d20: 5d29 202b 206c 696e 655b 3130 3a5d 0d0a  ]) + line[10:]..
 00008d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008d40: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-00008d50: 2220 2020 7265 6e61 6d65 6422 2c20 6c69  "   renamed", li
-00008d60: 6e65 2c6e 6c69 6e65 290d 0a0d 0a20 2020  ne,nline)....   
-00008d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008d80: 2020 2020 2020 2020 2065 6c69 6620 2243           elif "C
-00008d90: 4c41 5353 2220 696e 206c 696e 653a 2023  LASS" in line: #
-00008da0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00008d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008d50: 7072 696e 7428 2220 2020 7265 6e61 6d65  print("   rename
+00008d60: 6422 2c20 6c69 6e65 2c6e 6c69 6e65 290d  d", line,nline).
+00008d70: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00008d80: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00008d90: 6c69 6620 2243 4c41 5353 2220 696e 206c  lif "CLASS" in l
+00008da0: 696e 653a 2023 0d0a 2020 2020 2020 2020  ine: #..        
 00008db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008dc0: 2020 6e6c 696e 6520 3d20 206c 696e 655b    nline =  line[
-00008dd0: 3a39 5d20 2b20 6361 6d65 6c28 6c69 6e65  :9] + camel(line
-00008de0: 5b39 5d29 202b 206c 696e 655b 3130 3a5d  [9]) + line[10:]
-00008df0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00008dc0: 2020 2020 2020 2020 6e6c 696e 6520 3d20          nline = 
+00008dd0: 206c 696e 655b 3a39 5d20 2b20 6361 6d65   line[:9] + came
+00008de0: 6c28 6c69 6e65 5b39 5d29 202b 206c 696e  l(line[9]) + lin
+00008df0: 655b 3130 3a5d 0d0a 2020 2020 2020 2020  e[10:]..        
 00008e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008e10: 2020 7072 696e 7428 2220 2020 7265 6e61    print("   rena
-00008e20: 6d65 6422 2c20 6c69 6e65 2c6e 6c69 6e65  med", line,nline
-00008e30: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00008e10: 2020 2020 2020 2020 7072 696e 7428 2220          print(" 
+00008e20: 2020 7265 6e61 6d65 6422 2c20 6c69 6e65    renamed", line
+00008e30: 2c6e 6c69 6e65 290d 0a0d 0a20 2020 2020  ,nline)....     
 00008e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008e50: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+00008e50: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
 00008e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008e70: 2020 2020 2020 2020 6e6c 696e 6520 3d20          nline = 
-00008e80: 6c69 6e65 2023 2022 4e4f 5420 464f 554e  line # "NOT FOUN
-00008e90: 4422 2023 206c 696e 650d 0a20 2020 2020  D" # line..     
-00008ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008eb0: 2020 2020 2020 2023 2070 7269 6e74 2822         # print("
-00008ec0: 6e6c 696e 6522 2c6e 6c69 6e65 2c22 6f6c  nline",nline,"ol
-00008ed0: 6422 2c76 3229 0d0a 0d0a 2020 2020 2020  d",v2)....      
+00008e70: 2020 2020 2020 2020 2020 2020 2020 6e6c                nl
+00008e80: 696e 6520 3d20 6c69 6e65 2023 2022 4e4f  ine = line # "NO
+00008e90: 5420 464f 554e 4422 2023 206c 696e 650d  T FOUND" # line.
+00008ea0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00008eb0: 2020 2020 2020 2020 2020 2020 2023 2070               # p
+00008ec0: 7269 6e74 2822 6e6c 696e 6522 2c6e 6c69  rint("nline",nli
+00008ed0: 6e65 2c22 6f6c 6422 2c76 3229 0d0a 0d0a  ne,"old",v2)....
 00008ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008ef0: 2020 2020 2020 6e65 775f 636f 6465 5f6c        new_code_l
-00008f00: 696e 6573 2e61 7070 656e 6428 6e6c 696e  ines.append(nlin
-00008f10: 6529 0d0a 0d0a 2020 2020 2020 2020 2020  e)....          
+00008ef0: 2020 2020 2020 2020 2020 2020 6e65 775f              new_
+00008f00: 636f 6465 5f6c 696e 6573 2e61 7070 656e  code_lines.appen
+00008f10: 6428 6e6c 696e 6529 0d0a 0d0a 2020 2020  d(nline)....    
 00008f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008f30: 2020 7061 7373 0d0a 0d0a 2020 2020 2020    pass....      
+00008f30: 2020 2020 2020 2020 7061 7373 0d0a 0d0a          pass....
 00008f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008f50: 2020 6e65 775f 636f 6465 203d 2022 5c6e    new_code = "\n
-00008f60: 222e 6a6f 696e 286e 6577 5f63 6f64 655f  ".join(new_code_
-00008f70: 6c69 6e65 7329 0d0a 0d0a 2020 2020 2020  lines)....      
+00008f50: 2020 2020 2020 2020 6e65 775f 636f 6465          new_code
+00008f60: 203d 2022 5c6e 222e 6a6f 696e 286e 6577   = "\n".join(new
+00008f70: 5f63 6f64 655f 6c69 6e65 7329 0d0a 0d0a  _code_lines)....
 00008f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008f90: 2020 6167 656e 745f 6e61 6d65 203d 2063    agent_name = c
-00008fa0: 616d 656c 2873 7472 286b 3229 290d 0a20  amel(str(k2)).. 
-00008fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008fc0: 2020 2020 2020 2070 7269 6e74 2822 2020         print("  
-00008fd0: 2020 6167 656e 7420 6e61 6d65 222c 2073    agent name", s
-00008fe0: 7472 286b 3229 2c20 222d 3e22 202c 2063  tr(k2), "->" , c
-00008ff0: 616d 656c 2873 7472 286b 3229 2929 0d0a  amel(str(k2)))..
-00009000: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00009010: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00009020: 7472 286b 3229 2069 6e20 6461 7461 5b22  tr(k2) in data["
-00009030: 626f 785f 706f 7369 7469 6f6e 7322 5d3a  box_positions"]:
-00009040: 2023 2074 7279 2069 6620 6167 656e 7420   # try if agent 
-00009050: 6973 2070 6c61 6365 6420 736f 6d65 7768  is placed somewh
-00009060: 6572 650d 0a0d 0a20 2020 2020 2020 2020  ere....         
+00008f90: 2020 2020 2020 2020 6167 656e 745f 6e61          agent_na
+00008fa0: 6d65 203d 2063 616d 656c 2873 7472 286b  me = camel(str(k
+00008fb0: 3229 290d 0a20 2020 2020 2020 2020 2020  2))..           
+00008fc0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+00008fd0: 6e74 2822 2020 2020 6167 656e 7420 6e61  nt("    agent na
+00008fe0: 6d65 222c 2073 7472 286b 3229 2c20 222d  me", str(k2), "-
+00008ff0: 3e22 202c 2063 616d 656c 2873 7472 286b  >" , camel(str(k
+00009000: 3229 2929 0d0a 0d0a 0d0a 2020 2020 2020  2)))......      
+00009010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009020: 2020 6966 2073 7472 286b 3229 2069 6e20    if str(k2) in 
+00009030: 6461 7461 5b22 626f 785f 706f 7369 7469  data["box_positi
+00009040: 6f6e 7322 5d3a 2023 2074 7279 2069 6620  ons"]: # try if 
+00009050: 6167 656e 7420 6973 2070 6c61 6365 6420  agent is placed 
+00009060: 736f 6d65 7768 6572 650d 0a0d 0a20 2020  somewhere....   
 00009070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009080: 2020 206e 6577 5f64 6174 615b 2261 6765     new_data["age
-00009090: 6e74 7322 5d5b 6167 656e 745f 6e61 6d65  nts"][agent_name
-000090a0: 5d20 3d20 6e65 775f 636f 6465 0d0a 0d0a  ] = new_code....
-000090b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000090c0: 2020 2020 2020 2020 2020 2020 2320 322e              # 2.
-000090d0: 2061 7373 6967 6e20 6e65 7720 626f 7820   assign new box 
-000090e0: 706f 7369 7469 6f6e 0d0a 2020 2020 2020  position..      
+00009080: 2020 2020 2020 2020 206e 6577 5f64 6174           new_dat
+00009090: 615b 2261 6765 6e74 7322 5d5b 6167 656e  a["agents"][agen
+000090a0: 745f 6e61 6d65 5d20 3d20 6e65 775f 636f  t_name] = new_co
+000090b0: 6465 0d0a 0d0a 2020 2020 2020 2020 2020  de....          
+000090c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000090d0: 2020 2320 322e 2061 7373 6967 6e20 6e65    # 2. assign ne
+000090e0: 7720 626f 7820 706f 7369 7469 6f6e 0d0a  w box position..
 000090f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009100: 2020 2020 2020 7072 696e 7428 2241 5353        print("ASS
-00009110: 4947 4e20 4e45 5720 424f 5820 504f 5349  IGN NEW BOX POSI
-00009120: 5449 4f4e 532e 2e2e 2229 0d0a 0d0a 2020  TIONS...")....  
-00009130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009140: 2020 2020 2020 2020 2020 6f6c 645f 706f            old_po
-00009150: 7320 3d20 6461 7461 5b22 626f 785f 706f  s = data["box_po
-00009160: 7369 7469 6f6e 7322 5d5b 7374 7228 6b32  sitions"][str(k2
-00009170: 295d 0d0a 2020 2020 2020 2020 2020 2020  )]..            
+00009100: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00009110: 7428 2241 5353 4947 4e20 4e45 5720 424f  t("ASSIGN NEW BO
+00009120: 5820 504f 5349 5449 4f4e 532e 2e2e 2229  X POSITIONS...")
+00009130: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00009140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009150: 6f6c 645f 706f 7320 3d20 6461 7461 5b22  old_pos = data["
+00009160: 626f 785f 706f 7369 7469 6f6e 7322 5d5b  box_positions"][
+00009170: 7374 7228 6b32 295d 0d0a 2020 2020 2020  str(k2)]..      
 00009180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009190: 6e65 775f 6461 7461 5b22 626f 785f 706f  new_data["box_po
-000091a0: 7369 7469 6f6e 7322 5d5b 6167 656e 745f  sitions"][agent_
-000091b0: 6e61 6d65 5d20 3d20 6f6c 645f 706f 730d  name] = old_pos.
-000091c0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-000091d0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
-000091e0: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
-000091f0: 775f 6461 7461 5b6b 5d20 3d20 760d 0a0d  w_data[k] = v...
-00009200: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-00009210: 6e74 2822 5245 4e41 4d45 2054 5241 4e53  nt("RENAME TRANS
-00009220: 4143 5449 4f4e 532e 2e2e 2229 0d0a 2020  ACTIONS...")..  
-00009230: 2020 2020 2020 2020 2020 2320 332e 2072            # 3. r
-00009240: 656e 616d 6520 7472 616e 7361 6374 696f  ename transactio
-00009250: 6e73 0d0a 2020 2020 2020 2020 2020 2020  ns..            
-00009260: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
-00009270: 2020 2020 2020 666f 7220 692c 7420 696e        for i,t in
-00009280: 2065 6e75 6d65 7261 7465 286c 6973 7428   enumerate(list(
-00009290: 6461 7461 5b22 7472 616e 7361 6374 696f  data["transactio
-000092a0: 6e73 225d 2929 3a0d 0a20 2020 2020 2020  ns"])):..       
-000092b0: 2020 2020 2020 2020 2020 2020 206e 6577               new
-000092c0: 5f64 6174 615b 2274 7261 6e73 6163 7469  _data["transacti
-000092d0: 6f6e 7322 5d5b 695d 5b22 6167 656e 7431  ons"][i]["agent1
-000092e0: 225d 203d 2063 616d 656c 2864 6174 615b  "] = camel(data[
-000092f0: 2274 7261 6e73 6163 7469 6f6e 7322 5d5b  "transactions"][
-00009300: 695d 5b22 6167 656e 7431 225d 2920 232e  i]["agent1"]) #.
-00009310: 6361 7069 7461 6c69 7a65 2829 0d0a 2020  capitalize()..  
-00009320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009330: 2020 6e65 775f 6461 7461 5b22 7472 616e    new_data["tran
-00009340: 7361 6374 696f 6e73 225d 5b69 5d5b 2261  sactions"][i]["a
-00009350: 6765 6e74 3222 5d20 3d20 6361 6d65 6c28  gent2"] = camel(
-00009360: 6461 7461 5b22 7472 616e 7361 6374 696f  data["transactio
-00009370: 6e73 225d 5b69 5d5b 2261 6765 6e74 3222  ns"][i]["agent2"
-00009380: 5d29 2023 2e63 6170 6974 616c 697a 6528  ]) #.capitalize(
-00009390: 290d 0a20 2020 2020 2020 2020 2020 2065  )..            e
-000093a0: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
-000093b0: 6173 2065 3a0d 0a20 2020 2020 2020 2020  as e:..         
-000093c0: 2020 2020 2020 2065 7863 6570 7469 6f6e         exception
-000093d0: 5f74 7970 652c 2065 7863 6570 7469 6f6e  _type, exception
-000093e0: 5f6f 626a 6563 742c 2065 7863 6570 7469  _object, excepti
-000093f0: 6f6e 5f74 7261 6365 6261 636b 203d 2073  on_traceback = s
-00009400: 7973 2e65 7863 5f69 6e66 6f28 290d 0a20  ys.exc_info().. 
-00009410: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00009420: 696c 656e 616d 6520 3d20 6578 6365 7074  ilename = except
-00009430: 696f 6e5f 7472 6163 6562 6163 6b2e 7462  ion_traceback.tb
-00009440: 5f66 7261 6d65 2e66 5f63 6f64 652e 636f  _frame.f_code.co
-00009450: 5f66 696c 656e 616d 650d 0a20 2020 2020  _filename..     
-00009460: 2020 2020 2020 2020 2020 206c 696e 655f             line_
-00009470: 6e75 6d62 6572 203d 2065 7863 6570 7469  number = excepti
-00009480: 6f6e 5f74 7261 6365 6261 636b 2e74 625f  on_traceback.tb_
-00009490: 6c69 6e65 6e6f 0d0a 2020 2020 2020 2020  lineno..        
-000094a0: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
-000094b0: 6966 7928 2253 6f6d 6574 6869 6e67 2077  ify("Something w
-000094c0: 656e 2077 726f 6e67 2077 6865 6e20 696e  en wrong when in
-000094d0: 7365 7274 696e 6720 7468 6520 7472 616e  serting the tran
-000094e0: 7361 6374 696f 6e73 3a5c 6e22 202b 2073  sactions:\n" + s
-000094f0: 7472 2865 2920 2b20 225c 6e4c 696e 653a  tr(e) + "\nLine:
-00009500: 2220 2b20 7374 7228 6c69 6e65 5f6e 756d  " + str(line_num
-00009510: 6265 7229 2c74 6974 6c65 3d22 4572 726f  ber),title="Erro
-00009520: 7222 290d 0a0d 0a20 2020 2020 2020 2020  r")....         
-00009530: 2020 2072 6574 7572 6e20 6e65 775f 6461     return new_da
-00009540: 7461 0d0a 2020 2020 2020 2020 6578 6365  ta..        exce
-00009550: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
-00009560: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00009570: 6578 6365 7074 696f 6e5f 7479 7065 2c20  exception_type, 
-00009580: 6578 6365 7074 696f 6e5f 6f62 6a65 6374  exception_object
-00009590: 2c20 6578 6365 7074 696f 6e5f 7472 6163  , exception_trac
-000095a0: 6562 6163 6b20 3d20 7379 732e 6578 635f  eback = sys.exc_
-000095b0: 696e 666f 2829 0d0a 2020 2020 2020 2020  info()..        
-000095c0: 2020 2020 6669 6c65 6e61 6d65 203d 2065      filename = e
-000095d0: 7863 6570 7469 6f6e 5f74 7261 6365 6261  xception_traceba
-000095e0: 636b 2e74 625f 6672 616d 652e 665f 636f  ck.tb_frame.f_co
-000095f0: 6465 2e63 6f5f 6669 6c65 6e61 6d65 0d0a  de.co_filename..
-00009600: 2020 2020 2020 2020 2020 2020 6c69 6e65              line
-00009610: 5f6e 756d 6265 7220 3d20 6578 6365 7074  _number = except
-00009620: 696f 6e5f 7472 6163 6562 6163 6b2e 7462  ion_traceback.tb
-00009630: 5f6c 696e 656e 6f0d 0a0d 0a20 2020 2020  _lineno....     
-00009640: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
-00009650: 6679 2822 436f 756c 7420 6e6f 7420 6f70  fy("Coult not op
-00009660: 746e 2074 6865 2070 726f 6a65 6374 2066  tn the project f
-00009670: 696c 652e 2049 7320 6974 2061 6e20 6f6c  ile. Is it an ol
-00009680: 6420 7665 7273 696f 6e3f 5c6e 2045 7272  d version?\n Err
-00009690: 6f72 2069 6e20 4c69 6e65 2025 693a 2022  or in Line %i: "
-000096a0: 256c 696e 655f 6e75 6d62 6572 202b 2073  %line_number + s
-000096b0: 7472 2865 292c 7469 746c 653d 2245 7272  tr(e),title="Err
-000096c0: 6f72 2229 0d0a 0d0a 2020 2020 6465 6620  or")....    def 
-000096d0: 6e6f 7469 6679 5f74 6f6f 6c74 6970 2873  notify_tooltip(s
-000096e0: 656c 662c 7768 6963 6829 3a0d 0a20 2020  elf,which):..   
-000096f0: 2020 2020 2074 7420 3d20 7768 6963 682e       tt = which.
-00009700: 746f 6f6c 5469 7020 2829 0d0a 2020 2020  toolTip ()..    
-00009710: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
-00009720: 7469 746c 653d 2254 6970 222c 6d65 7373  title="Tip",mess
-00009730: 6167 653d 7374 7228 7474 2929 0d0a 0d0a  age=str(tt))....
-00009740: 0d0a 2020 2020 6465 6620 7265 7369 7a65  ..    def resize
-00009750: 4576 656e 7428 7365 6c66 2c20 6576 656e  Event(self, even
-00009760: 7429 3a0d 0a20 2020 2020 2020 2070 7269  t):..        pri
-00009770: 6e74 2822 7265 7369 7a65 2229 0d0a 0d0a  nt("resize")....
-00009780: 2020 2020 2020 2020 2373 656c 662e 6472          #self.dr
-00009790: 6177 6361 6e76 6173 2e70 6172 656e 742e  awcanvas.parent.
-000097a0: 7265 7369 7a65 5f66 7261 6d65 2829 0d0a  resize_frame()..
-000097b0: 2020 2020 2020 2020 5174 5769 6467 6574          QtWidget
-000097c0: 732e 514d 6169 6e57 696e 646f 772e 7265  s.QMainWindow.re
-000097d0: 7369 7a65 4576 656e 7428 7365 6c66 2c20  sizeEvent(self, 
-000097e0: 6576 656e 7429 0d0a 0d0a 2020 2020 2020  event)....      
-000097f0: 2020 2320 7265 7369 7a65 2074 7261 6e73    # resize trans
-00009800: 6163 7469 6f6e 0d0a 2020 2020 2020 2020  action..        
-00009810: 7720 3d20 3734 310d 0a20 2020 2020 2020  w = 741..       
-00009820: 2068 203d 2031 3931 202b 206d 6178 2830   h = 191 + max(0
-00009830: 2c73 656c 662e 6672 616d 6547 656f 6d65  ,self.frameGeome
-00009840: 7472 7928 292e 6865 6967 6874 2829 2d39  try().height()-9
-00009850: 3835 290d 0a20 2020 2020 2020 2073 656c  85)..        sel
-00009860: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
-00009870: 772e 7061 7265 6e74 203d 2073 656c 662e  w.parent = self.
-00009880: 646f 636b 5769 6467 6574 5f35 0d0a 2020  dockWidget_5..  
-00009890: 2020 2020 2020 2320 7365 6c66 2e74 7261        # self.tra
-000098a0: 6e73 6163 7469 6f6e 5669 6577 2e73 6574  nsactionView.set
-000098b0: 4765 6f6d 6574 7279 2833 302c 3635 2c77  Geometry(30,65,w
-000098c0: 2c68 2920 2320 3330 2c36 3730 2c77 2c68  ,h) # 30,670,w,h
-000098d0: 290d 0a0d 0a20 2020 2020 2020 2023 7365  )....        #se
-000098e0: 6c66 2e6c 6162 656c 5f31 372e 7365 7447  lf.label_17.setG
-000098f0: 656f 6d65 7472 7928 3130 2c73 656c 662e  eometry(10,self.
-00009900: 6672 616d 6547 656f 6d65 7472 7928 292e  frameGeometry().
-00009910: 6865 6967 6874 2829 2d31 3530 2c31 3331  height()-150,131
-00009920: 2c38 3929 2023 206c 6f67 6f0d 0a20 2020  ,89) # logo..   
-00009930: 2020 2020 2023 7365 6c66 2e6c 6162 656c       #self.label
-00009940: 5f31 372e 7365 7456 6973 6962 6c65 2846  _17.setVisible(F
-00009950: 616c 7365 290d 0a0d 0a20 2020 2020 2020  alse)....       
-00009960: 2073 656c 662e 7261 6469 6f42 7574 746f   self.radioButto
-00009970: 6e2e 7365 7447 656f 6d65 7472 7928 302c  n.setGeometry(0,
-00009980: 7365 6c66 2e66 7261 6d65 4765 6f6d 6574  self.frameGeomet
-00009990: 7279 2829 2e68 6569 6768 7428 292d 3238  ry().height()-28
-000099a0: 2c32 322c 3232 290d 0a0d 0a20 2020 2064  ,22,22)....    d
-000099b0: 6566 2062 726f 7773 6528 7365 6c66 293a  ef browse(self):
-000099c0: 0d0a 0d0a 0d0a 2020 2020 2020 2020 7472  ......        tr
-000099d0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-000099e0: 6669 6c65 6e61 6d65 203d 2051 4669 6c65  filename = QFile
-000099f0: 4469 616c 6f67 2e67 6574 4f70 656e 4669  Dialog.getOpenFi
-00009a00: 6c65 4e61 6d65 2873 656c 662c 2027 4f70  leName(self, 'Op
-00009a10: 656e 2066 696c 6527 2c6f 732e 6765 7463  en file',os.getc
-00009a20: 7764 2829 2c20 2261 7474 756e 6520 4669  wd(), "attune Fi
-00009a30: 6c65 7320 282a 2e73 6663 746c 293b 3b4d  les (*.sfctl);;M
-00009a40: 414d 4241 2046 696c 6573 2028 2a2e 6d61  AMBA Files (*.ma
-00009a50: 6d62 6129 3b3b 5472 616e 7361 6374 696f  mba);;Transactio
-00009a60: 6e20 4669 6c65 7320 282a 2e74 7261 6e73  n Files (*.trans
-00009a70: 2922 295b 305d 0d0a 2020 2020 2020 2020  )")[0]..        
-00009a80: 6578 6365 7074 3a0d 0a20 2020 2020 2020  except:..       
-00009a90: 2020 2020 2073 656c 662e 6e6f 7469 6679       self.notify
-00009aa0: 2822 5365 656d 7320 6173 2069 6620 7468  ("Seems as if th
-00009ab0: 6520 7072 6f6a 6563 7473 2066 6f6c 6465  e projects folde
-00009ac0: 7220 646f 6573 206e 6f74 2079 6574 2065  r does not yet e
-00009ad0: 7869 7374 2e20 706c 6561 7365 2063 7265  xist. please cre
-00009ae0: 6174 6520 6974 206d 616e 7561 6c6c 7920  ate it manually 
-00009af0: 696e 2074 6865 2070 6172 656e 7420 6469  in the parent di
-00009b00: 7265 6374 6f72 7920 6f66 2073 7263 222c  rectory of src",
-00009b10: 2074 6974 6c65 3d22 5072 6f6a 6563 7473   title="Projects
-00009b20: 2066 6f6c 6465 7222 290d 0a0d 0a0d 0a20   folder")...... 
-00009b30: 2020 2020 2020 2023 2072 656d 6f76 6520         # remove 
-00009b40: 616c 6c20 7461 6273 2066 726f 6d20 7461  all tabs from ta
-00009b50: 6220 7769 6467 6574 0d0a 2020 2020 2020  b widget..      
-00009b60: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
-00009b70: 2831 2c73 656c 662e 7461 6257 6964 6765  (1,self.tabWidge
-00009b80: 742e 636f 756e 7428 2929 3a0d 0a20 2020  t.count()):..   
-00009b90: 2020 2020 2020 2020 2074 6162 203d 2073           tab = s
-00009ba0: 656c 662e 7461 6257 6964 6765 742e 7769  elf.tabWidget.wi
-00009bb0: 6467 6574 2831 290d 0a20 2020 2020 2020  dget(1)..       
-00009bc0: 2020 2020 2073 656c 662e 7461 6257 6964       self.tabWid
-00009bd0: 6765 742e 7265 6d6f 7665 5461 6228 3129  get.removeTab(1)
-00009be0: 0d0a 2020 2020 2020 2020 2020 2020 6465  ..            de
-00009bf0: 6c20 7461 620d 0a0d 0a20 2020 2020 2020  l tab....       
-00009c00: 2043 6f64 6545 6469 746f 722e 696e 7374   CodeEditor.inst
-00009c10: 616e 6365 7320 3d20 7b7d 0d0a 0d0a 0d0a  ances = {}......
-00009c20: 2020 2020 2020 2020 6669 6c65 6e61 6d65          filename
-00009c30: 5f62 6163 6b75 7020 3d20 7365 6c66 2e66  _backup = self.f
-00009c40: 696c 656e 616d 650d 0a20 2020 2020 2020  ilename..       
-00009c50: 2063 7572 7265 6e74 5f66 696c 655f 6261   current_file_ba
-00009c60: 636b 7570 203d 2073 656c 662e 6375 7272  ckup = self.curr
-00009c70: 656e 745f 6669 6c65 0d0a 0d0a 2020 2020  ent_file....    
-00009c80: 2020 2020 7365 6c66 2e66 696c 656e 616d      self.filenam
-00009c90: 6520 3d20 6669 6c65 6e61 6d65 0d0a 2020  e = filename..  
-00009ca0: 2020 2020 2020 7365 6c66 2e63 7572 7265        self.curre
-00009cb0: 6e74 5f66 696c 6520 3d20 6669 6c65 6e61  nt_file = filena
-00009cc0: 6d65 0d0a 0d0a 2020 2020 2020 2020 7365  me....        se
-00009cd0: 6c66 2e6c 6162 656c 5f66 6e61 6d65 2e73  lf.label_fname.s
-00009ce0: 6574 5465 7874 2866 696c 656e 616d 6529  etText(filename)
-00009cf0: 0d0a 0d0a 2020 2020 2020 2020 7472 793a  ....        try:
-00009d00: 0d0a 2020 2020 2020 2020 2020 2020 7072  ..            pr
-00009d10: 696e 7428 2246 494c 454e 414d 4522 2c66  int("FILENAME",f
-00009d20: 696c 656e 616d 6529 0d0a 0d0a 2020 2020  ilename)....    
-00009d30: 2020 2020 2020 2020 2320 6c6f 6164 2065          # load e
-00009d40: 6e74 7269 6573 2069 6e74 6f20 7468 6520  ntries into the 
-00009d50: 6c69 7374 0d0a 2020 2020 2020 2020 2020  list..          
-00009d60: 2020 7769 7468 206f 7065 6e28 6669 6c65    with open(file
-00009d70: 6e61 6d65 2c20 2772 2729 2061 7320 7374  name, 'r') as st
-00009d80: 7265 616d 3a0d 0a0d 0a20 2020 2020 2020  ream:....       
-00009d90: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
-00009da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009db0: 2020 2074 7261 6e73 6163 7469 6f6e 5f64     transaction_d
-00009dc0: 6174 6120 3d20 7365 6c66 2e63 6c65 616e  ata = self.clean
-00009dd0: 7570 5f74 7261 6e73 6163 7469 6f6e 5f64  up_transaction_d
-00009de0: 6174 6128 7961 6d6c 2e73 6166 655f 6c6f  ata(yaml.safe_lo
-00009df0: 6164 2873 7472 6561 6d29 290d 0a20 2020  ad(stream))..   
-00009e00: 2020 2020 2020 2020 2020 2020 2065 7863               exc
-00009e10: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
-00009e20: 2065 3a0d 0a20 2020 2020 2020 2020 2020   e:..           
-00009e30: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
-00009e40: 7469 6679 2822 4572 726f 7220 7265 7472  tify("Error retr
-00009e50: 6569 7669 6e67 2074 6865 2074 7261 6e73  eiving the trans
-00009e60: 6163 7469 6f6e 2064 6174 6120 6672 6f6d  action data from
-00009e70: 2074 6865 2073 6f75 7263 6520 6669 6c65   the source file
-00009e80: 2e20 4162 6f72 7469 6e67 2e5c 6e22 2b73  . Aborting.\n"+s
-00009e90: 7472 2865 292c 7469 746c 653d 2245 7272  tr(e),title="Err
-00009ea0: 6f72 2229 0d0a 0d0a 2020 2020 2020 2020  or")....        
-00009eb0: 2020 2020 2020 2020 7072 696e 7428 2274          print("t
-00009ec0: 7261 6e73 6163 7469 6f6e 5f64 6174 6122  ransaction_data"
-00009ed0: 2c74 7261 6e73 6163 7469 6f6e 5f64 6174  ,transaction_dat
-00009ee0: 6129 0d0a 2020 2020 2020 2020 2020 2020  a)..            
-00009ef0: 2020 2020 7472 793a 0d0a 0d0a 2020 2020      try:....    
-00009f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009f10: 2320 7472 7920 746f 206c 6f61 6420 6e6f  # try to load no
-00009f20: 7465 730d 0a20 2020 2020 2020 2020 2020  tes..           
-00009f30: 2020 2020 2020 2020 2069 6620 226e 6f74           if "not
-00009f40: 6573 2220 696e 2074 7261 6e73 6163 7469  es" in transacti
-00009f50: 6f6e 5f64 6174 613a 0d0a 2020 2020 2020  on_data:..      
+00009190: 2020 2020 2020 6e65 775f 6461 7461 5b22        new_data["
+000091a0: 626f 785f 706f 7369 7469 6f6e 7322 5d5b  box_positions"][
+000091b0: 6167 656e 745f 6e61 6d65 5d20 3d20 6f6c  agent_name] = ol
+000091c0: 645f 706f 730d 0a0d 0a20 2020 2020 2020  d_pos....       
+000091d0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
+000091e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000091f0: 2020 2020 6e65 775f 6461 7461 5b6b 5d20      new_data[k] 
+00009200: 3d20 760d 0a0d 0a20 2020 2020 2020 2020  = v....         
+00009210: 2020 2070 7269 6e74 2822 5245 4e41 4d45     print("RENAME
+00009220: 2054 5241 4e53 4143 5449 4f4e 532e 2e2e   TRANSACTIONS...
+00009230: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
+00009240: 2320 332e 2072 656e 616d 6520 7472 616e  # 3. rename tran
+00009250: 7361 6374 696f 6e73 0d0a 2020 2020 2020  sactions..      
+00009260: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
+00009270: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00009280: 692c 7420 696e 2065 6e75 6d65 7261 7465  i,t in enumerate
+00009290: 286c 6973 7428 6461 7461 5b22 7472 616e  (list(data["tran
+000092a0: 7361 6374 696f 6e73 225d 2929 3a0d 0a20  sactions"])):.. 
+000092b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000092c0: 2020 206e 6577 5f64 6174 615b 2274 7261     new_data["tra
+000092d0: 6e73 6163 7469 6f6e 7322 5d5b 695d 5b22  nsactions"][i]["
+000092e0: 6167 656e 7431 225d 203d 2063 616d 656c  agent1"] = camel
+000092f0: 2864 6174 615b 2274 7261 6e73 6163 7469  (data["transacti
+00009300: 6f6e 7322 5d5b 695d 5b22 6167 656e 7431  ons"][i]["agent1
+00009310: 225d 2920 232e 6361 7069 7461 6c69 7a65  "]) #.capitalize
+00009320: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+00009330: 2020 2020 2020 2020 6e65 775f 6461 7461          new_data
+00009340: 5b22 7472 616e 7361 6374 696f 6e73 225d  ["transactions"]
+00009350: 5b69 5d5b 2261 6765 6e74 3222 5d20 3d20  [i]["agent2"] = 
+00009360: 6361 6d65 6c28 6461 7461 5b22 7472 616e  camel(data["tran
+00009370: 7361 6374 696f 6e73 225d 5b69 5d5b 2261  sactions"][i]["a
+00009380: 6765 6e74 3222 5d29 2023 2e63 6170 6974  gent2"]) #.capit
+00009390: 616c 697a 6528 290d 0a20 2020 2020 2020  alize()..       
+000093a0: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
+000093b0: 7074 696f 6e20 6173 2065 3a0d 0a20 2020  ption as e:..   
+000093c0: 2020 2020 2020 2020 2020 2020 2065 7863               exc
+000093d0: 6570 7469 6f6e 5f74 7970 652c 2065 7863  eption_type, exc
+000093e0: 6570 7469 6f6e 5f6f 626a 6563 742c 2065  eption_object, e
+000093f0: 7863 6570 7469 6f6e 5f74 7261 6365 6261  xception_traceba
+00009400: 636b 203d 2073 7973 2e65 7863 5f69 6e66  ck = sys.exc_inf
+00009410: 6f28 290d 0a20 2020 2020 2020 2020 2020  o()..           
+00009420: 2020 2020 2066 696c 656e 616d 6520 3d20       filename = 
+00009430: 6578 6365 7074 696f 6e5f 7472 6163 6562  exception_traceb
+00009440: 6163 6b2e 7462 5f66 7261 6d65 2e66 5f63  ack.tb_frame.f_c
+00009450: 6f64 652e 636f 5f66 696c 656e 616d 650d  ode.co_filename.
+00009460: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009470: 206c 696e 655f 6e75 6d62 6572 203d 2065   line_number = e
+00009480: 7863 6570 7469 6f6e 5f74 7261 6365 6261  xception_traceba
+00009490: 636b 2e74 625f 6c69 6e65 6e6f 0d0a 2020  ck.tb_lineno..  
+000094a0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+000094b0: 6c66 2e6e 6f74 6966 7928 2253 6f6d 6574  lf.notify("Somet
+000094c0: 6869 6e67 2077 656e 2077 726f 6e67 2077  hing wen wrong w
+000094d0: 6865 6e20 696e 7365 7274 696e 6720 7468  hen inserting th
+000094e0: 6520 7472 616e 7361 6374 696f 6e73 3a5c  e transactions:\
+000094f0: 6e22 202b 2073 7472 2865 2920 2b20 225c  n" + str(e) + "\
+00009500: 6e4c 696e 653a 2220 2b20 7374 7228 6c69  nLine:" + str(li
+00009510: 6e65 5f6e 756d 6265 7229 2c74 6974 6c65  ne_number),title
+00009520: 3d22 4572 726f 7222 290d 0a0d 0a20 2020  ="Error")....   
+00009530: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00009540: 6e65 775f 6461 7461 0d0a 2020 2020 2020  new_data..      
+00009550: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
+00009560: 6f6e 2061 7320 653a 0d0a 2020 2020 2020  on as e:..      
+00009570: 2020 2020 2020 6578 6365 7074 696f 6e5f        exception_
+00009580: 7479 7065 2c20 6578 6365 7074 696f 6e5f  type, exception_
+00009590: 6f62 6a65 6374 2c20 6578 6365 7074 696f  object, exceptio
+000095a0: 6e5f 7472 6163 6562 6163 6b20 3d20 7379  n_traceback = sy
+000095b0: 732e 6578 635f 696e 666f 2829 0d0a 2020  s.exc_info()..  
+000095c0: 2020 2020 2020 2020 2020 6669 6c65 6e61            filena
+000095d0: 6d65 203d 2065 7863 6570 7469 6f6e 5f74  me = exception_t
+000095e0: 7261 6365 6261 636b 2e74 625f 6672 616d  raceback.tb_fram
+000095f0: 652e 665f 636f 6465 2e63 6f5f 6669 6c65  e.f_code.co_file
+00009600: 6e61 6d65 0d0a 2020 2020 2020 2020 2020  name..          
+00009610: 2020 6c69 6e65 5f6e 756d 6265 7220 3d20    line_number = 
+00009620: 6578 6365 7074 696f 6e5f 7472 6163 6562  exception_traceb
+00009630: 6163 6b2e 7462 5f6c 696e 656e 6f0d 0a0d  ack.tb_lineno...
+00009640: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00009650: 662e 6e6f 7469 6679 2822 436f 756c 7420  f.notify("Coult 
+00009660: 6e6f 7420 6f70 746e 2074 6865 2070 726f  not optn the pro
+00009670: 6a65 6374 2066 696c 652e 2049 7320 6974  ject file. Is it
+00009680: 2061 6e20 6f6c 6420 7665 7273 696f 6e3f   an old version?
+00009690: 5c6e 2045 7272 6f72 2069 6e20 4c69 6e65  \n Error in Line
+000096a0: 2025 693a 2022 256c 696e 655f 6e75 6d62   %i: "%line_numb
+000096b0: 6572 202b 2073 7472 2865 292c 7469 746c  er + str(e),titl
+000096c0: 653d 2245 7272 6f72 2229 0d0a 0d0a 2020  e="Error")....  
+000096d0: 2020 6465 6620 6e6f 7469 6679 5f74 6f6f    def notify_too
+000096e0: 6c74 6970 2873 656c 662c 7768 6963 6829  ltip(self,which)
+000096f0: 3a0d 0a20 2020 2020 2020 2074 7420 3d20  :..        tt = 
+00009700: 7768 6963 682e 746f 6f6c 5469 7020 2829  which.toolTip ()
+00009710: 0d0a 2020 2020 2020 2020 7365 6c66 2e6e  ..        self.n
+00009720: 6f74 6966 7928 7469 746c 653d 2254 6970  otify(title="Tip
+00009730: 222c 6d65 7373 6167 653d 7374 7228 7474  ",message=str(tt
+00009740: 2929 0d0a 0d0a 0d0a 2020 2020 6465 6620  ))......    def 
+00009750: 7265 7369 7a65 4576 656e 7428 7365 6c66  resizeEvent(self
+00009760: 2c20 6576 656e 7429 3a0d 0a20 2020 2020  , event):..     
+00009770: 2020 2070 7269 6e74 2822 7265 7369 7a65     print("resize
+00009780: 2229 0d0a 0d0a 2020 2020 2020 2020 2373  ")....        #s
+00009790: 656c 662e 6472 6177 6361 6e76 6173 2e70  elf.drawcanvas.p
+000097a0: 6172 656e 742e 7265 7369 7a65 5f66 7261  arent.resize_fra
+000097b0: 6d65 2829 0d0a 2020 2020 2020 2020 5174  me()..        Qt
+000097c0: 5769 6467 6574 732e 514d 6169 6e57 696e  Widgets.QMainWin
+000097d0: 646f 772e 7265 7369 7a65 4576 656e 7428  dow.resizeEvent(
+000097e0: 7365 6c66 2c20 6576 656e 7429 0d0a 0d0a  self, event)....
+000097f0: 2020 2020 2020 2020 2320 7265 7369 7a65          # resize
+00009800: 2074 7261 6e73 6163 7469 6f6e 0d0a 2020   transaction..  
+00009810: 2020 2020 2020 7720 3d20 3734 310d 0a20        w = 741.. 
+00009820: 2020 2020 2020 2068 203d 2031 3931 202b         h = 191 +
+00009830: 206d 6178 2830 2c73 656c 662e 6672 616d   max(0,self.fram
+00009840: 6547 656f 6d65 7472 7928 292e 6865 6967  eGeometry().heig
+00009850: 6874 2829 2d39 3835 290d 0a20 2020 2020  ht()-985)..     
+00009860: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
+00009870: 696f 6e56 6965 772e 7061 7265 6e74 203d  ionView.parent =
+00009880: 2073 656c 662e 646f 636b 5769 6467 6574   self.dockWidget
+00009890: 5f35 0d0a 2020 2020 2020 2020 2320 7365  _5..        # se
+000098a0: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
+000098b0: 6577 2e73 6574 4765 6f6d 6574 7279 2833  ew.setGeometry(3
+000098c0: 302c 3635 2c77 2c68 2920 2320 3330 2c36  0,65,w,h) # 30,6
+000098d0: 3730 2c77 2c68 290d 0a0d 0a20 2020 2020  70,w,h)....     
+000098e0: 2020 2023 7365 6c66 2e6c 6162 656c 5f31     #self.label_1
+000098f0: 372e 7365 7447 656f 6d65 7472 7928 3130  7.setGeometry(10
+00009900: 2c73 656c 662e 6672 616d 6547 656f 6d65  ,self.frameGeome
+00009910: 7472 7928 292e 6865 6967 6874 2829 2d31  try().height()-1
+00009920: 3530 2c31 3331 2c38 3929 2023 206c 6f67  50,131,89) # log
+00009930: 6f0d 0a20 2020 2020 2020 2023 7365 6c66  o..        #self
+00009940: 2e6c 6162 656c 5f31 372e 7365 7456 6973  .label_17.setVis
+00009950: 6962 6c65 2846 616c 7365 290d 0a0d 0a20  ible(False).... 
+00009960: 2020 2020 2020 2073 656c 662e 7261 6469         self.radi
+00009970: 6f42 7574 746f 6e2e 7365 7447 656f 6d65  oButton.setGeome
+00009980: 7472 7928 302c 7365 6c66 2e66 7261 6d65  try(0,self.frame
+00009990: 4765 6f6d 6574 7279 2829 2e68 6569 6768  Geometry().heigh
+000099a0: 7428 292d 3238 2c32 322c 3232 290d 0a0d  t()-28,22,22)...
+000099b0: 0a20 2020 2064 6566 2062 726f 7773 6528  .    def browse(
+000099c0: 7365 6c66 293a 0d0a 0d0a 0d0a 2020 2020  self):......    
+000099d0: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
+000099e0: 2020 2020 2020 6669 6c65 6e61 6d65 203d        filename =
+000099f0: 2051 4669 6c65 4469 616c 6f67 2e67 6574   QFileDialog.get
+00009a00: 4f70 656e 4669 6c65 4e61 6d65 2873 656c  OpenFileName(sel
+00009a10: 662c 2027 4f70 656e 2066 696c 6527 2c6f  f, 'Open file',o
+00009a20: 732e 6765 7463 7764 2829 2c20 2261 7474  s.getcwd(), "att
+00009a30: 756e 6520 4669 6c65 7320 282a 2e73 6663  une Files (*.sfc
+00009a40: 746c 293b 3b4d 414d 4241 2046 696c 6573  tl);;MAMBA Files
+00009a50: 2028 2a2e 6d61 6d62 6129 3b3b 5472 616e   (*.mamba);;Tran
+00009a60: 7361 6374 696f 6e20 4669 6c65 7320 282a  saction Files (*
+00009a70: 2e74 7261 6e73 2922 295b 305d 0d0a 2020  .trans)")[0]..  
+00009a80: 2020 2020 2020 6578 6365 7074 3a0d 0a20        except:.. 
+00009a90: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00009aa0: 6e6f 7469 6679 2822 5365 656d 7320 6173  notify("Seems as
+00009ab0: 2069 6620 7468 6520 7072 6f6a 6563 7473   if the projects
+00009ac0: 2066 6f6c 6465 7220 646f 6573 206e 6f74   folder does not
+00009ad0: 2079 6574 2065 7869 7374 2e20 706c 6561   yet exist. plea
+00009ae0: 7365 2063 7265 6174 6520 6974 206d 616e  se create it man
+00009af0: 7561 6c6c 7920 696e 2074 6865 2070 6172  ually in the par
+00009b00: 656e 7420 6469 7265 6374 6f72 7920 6f66  ent directory of
+00009b10: 2073 7263 222c 2074 6974 6c65 3d22 5072   src", title="Pr
+00009b20: 6f6a 6563 7473 2066 6f6c 6465 7222 290d  ojects folder").
+00009b30: 0a0d 0a0d 0a20 2020 2020 2020 2023 2072  .....        # r
+00009b40: 656d 6f76 6520 616c 6c20 7461 6273 2066  emove all tabs f
+00009b50: 726f 6d20 7461 6220 7769 6467 6574 0d0a  rom tab widget..
+00009b60: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
+00009b70: 2072 616e 6765 2831 2c73 656c 662e 7461   range(1,self.ta
+00009b80: 6257 6964 6765 742e 636f 756e 7428 2929  bWidget.count())
+00009b90: 3a0d 0a20 2020 2020 2020 2020 2020 2074  :..            t
+00009ba0: 6162 203d 2073 656c 662e 7461 6257 6964  ab = self.tabWid
+00009bb0: 6765 742e 7769 6467 6574 2831 290d 0a20  get.widget(1).. 
+00009bc0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00009bd0: 7461 6257 6964 6765 742e 7265 6d6f 7665  tabWidget.remove
+00009be0: 5461 6228 3129 0d0a 2020 2020 2020 2020  Tab(1)..        
+00009bf0: 2020 2020 6465 6c20 7461 620d 0a0d 0a20      del tab.... 
+00009c00: 2020 2020 2020 2043 6f64 6545 6469 746f         CodeEdito
+00009c10: 722e 696e 7374 616e 6365 7320 3d20 7b7d  r.instances = {}
+00009c20: 0d0a 0d0a 0d0a 2020 2020 2020 2020 6669  ......        fi
+00009c30: 6c65 6e61 6d65 5f62 6163 6b75 7020 3d20  lename_backup = 
+00009c40: 7365 6c66 2e66 696c 656e 616d 650d 0a20  self.filename.. 
+00009c50: 2020 2020 2020 2063 7572 7265 6e74 5f66         current_f
+00009c60: 696c 655f 6261 636b 7570 203d 2073 656c  ile_backup = sel
+00009c70: 662e 6375 7272 656e 745f 6669 6c65 0d0a  f.current_file..
+00009c80: 0d0a 2020 2020 2020 2020 7365 6c66 2e66  ..        self.f
+00009c90: 696c 656e 616d 6520 3d20 6669 6c65 6e61  ilename = filena
+00009ca0: 6d65 0d0a 2020 2020 2020 2020 7365 6c66  me..        self
+00009cb0: 2e63 7572 7265 6e74 5f66 696c 6520 3d20  .current_file = 
+00009cc0: 6669 6c65 6e61 6d65 0d0a 0d0a 2020 2020  filename....    
+00009cd0: 2020 2020 7365 6c66 2e6c 6162 656c 5f66      self.label_f
+00009ce0: 6e61 6d65 2e73 6574 5465 7874 2866 696c  name.setText(fil
+00009cf0: 656e 616d 6529 0d0a 0d0a 2020 2020 2020  ename)....      
+00009d00: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
+00009d10: 2020 2020 7072 696e 7428 2246 494c 454e      print("FILEN
+00009d20: 414d 4522 2c66 696c 656e 616d 6529 0d0a  AME",filename)..
+00009d30: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00009d40: 6c6f 6164 2065 6e74 7269 6573 2069 6e74  load entries int
+00009d50: 6f20 7468 6520 6c69 7374 0d0a 2020 2020  o the list..    
+00009d60: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
+00009d70: 6e28 6669 6c65 6e61 6d65 2c20 2772 2729  n(filename, 'r')
+00009d80: 2061 7320 7374 7265 616d 3a0d 0a0d 0a20   as stream:.... 
+00009d90: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+00009da0: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
+00009db0: 2020 2020 2020 2020 2074 7261 6e73 6163           transac
+00009dc0: 7469 6f6e 5f64 6174 6120 3d20 7365 6c66  tion_data = self
+00009dd0: 2e63 6c65 616e 7570 5f74 7261 6e73 6163  .cleanup_transac
+00009de0: 7469 6f6e 5f64 6174 6128 7961 6d6c 2e73  tion_data(yaml.s
+00009df0: 6166 655f 6c6f 6164 2873 7472 6561 6d29  afe_load(stream)
+00009e00: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00009e10: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
+00009e20: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
+00009e30: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00009e40: 656c 662e 6e6f 7469 6679 2822 4572 726f  elf.notify("Erro
+00009e50: 7220 7265 7472 6569 7669 6e67 2074 6865  r retreiving the
+00009e60: 2074 7261 6e73 6163 7469 6f6e 2064 6174   transaction dat
+00009e70: 6120 6672 6f6d 2074 6865 2073 6f75 7263  a from the sourc
+00009e80: 6520 6669 6c65 2e20 4162 6f72 7469 6e67  e file. Aborting
+00009e90: 2e5c 6e22 2b73 7472 2865 292c 7469 746c  .\n"+str(e),titl
+00009ea0: 653d 2245 7272 6f72 2229 0d0a 0d0a 2020  e="Error")....  
+00009eb0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+00009ec0: 696e 7428 2274 7261 6e73 6163 7469 6f6e  int("transaction
+00009ed0: 5f64 6174 6122 2c74 7261 6e73 6163 7469  _data",transacti
+00009ee0: 6f6e 5f64 6174 6129 0d0a 2020 2020 2020  on_data)..      
+00009ef0: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
+00009f00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00009f10: 2020 2020 2020 2320 7472 7920 746f 206c        # try to l
+00009f20: 6f61 6420 6e6f 7465 730d 0a20 2020 2020  oad notes..     
+00009f30: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00009f40: 6620 226e 6f74 6573 2220 696e 2074 7261  f "notes" in tra
+00009f50: 6e73 6163 7469 6f6e 5f64 6174 613a 0d0a  nsaction_data:..
 00009f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009f70: 2020 7365 6c66 2e6e 6f74 6573 4564 6974    self.notesEdit
-00009f80: 2e73 6574 506c 6169 6e54 6578 7428 7472  .setPlainText(tr
-00009f90: 616e 7361 6374 696f 6e5f 6461 7461 5b22  ansaction_data["
-00009fa0: 6e6f 7465 7322 5d29 0d0a 0d0a 2020 2020  notes"])....    
-00009fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009fc0: 2320 7472 7920 746f 206c 6f61 6420 636f  # try to load co
-00009fd0: 6c6f 7220 7468 656d 650d 0a20 2020 2020  lor theme..     
-00009fe0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00009ff0: 6620 7472 616e 7361 6374 696f 6e5f 6461  f transaction_da
-0000a000: 7461 5b22 7468 656d 6522 5d20 6973 206e  ta["theme"] is n
-0000a010: 6f74 204e 6f6e 653a 0d0a 2020 2020 2020  ot None:..      
+00009f70: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
+00009f80: 6573 4564 6974 2e73 6574 506c 6169 6e54  esEdit.setPlainT
+00009f90: 6578 7428 7472 616e 7361 6374 696f 6e5f  ext(transaction_
+00009fa0: 6461 7461 5b22 6e6f 7465 7322 5d29 0d0a  data["notes"])..
+00009fb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00009fc0: 2020 2020 2020 2320 7472 7920 746f 206c        # try to l
+00009fd0: 6f61 6420 636f 6c6f 7220 7468 656d 650d  oad color theme.
+00009fe0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009ff0: 2020 2020 2069 6620 7472 616e 7361 6374       if transact
+0000a000: 696f 6e5f 6461 7461 5b22 7468 656d 6522  ion_data["theme"
+0000a010: 5d20 6973 206e 6f74 204e 6f6e 653a 0d0a  ] is not None:..
 0000a020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a030: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
+0000a030: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
 0000a040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a050: 2020 2020 7468 656d 655f 666e 616d 6520      theme_fname 
-0000a060: 3d20 7472 616e 7361 6374 696f 6e5f 6461  = transaction_da
-0000a070: 7461 5b22 7468 656d 6522 5d5b 2263 6f6c  ta["theme"]["col
-0000a080: 6f72 7322 5d0d 0a20 2020 2020 2020 2020  ors"]..         
+0000a050: 2020 2020 2020 2020 2020 7468 656d 655f            theme_
+0000a060: 666e 616d 6520 3d20 7472 616e 7361 6374  fname = transact
+0000a070: 696f 6e5f 6461 7461 5b22 7468 656d 6522  ion_data["theme"
+0000a080: 5d5b 2263 6f6c 6f72 7322 5d0d 0a20 2020  ]["colors"]..   
 0000a090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a0a0: 2020 2067 7468 656d 6520 3d20 7472 616e     gtheme = tran
-0000a0b0: 7361 6374 696f 6e5f 6461 7461 5b22 7468  saction_data["th
-0000a0c0: 656d 6522 5d5b 2267 6c6f 6261 6c74 6865  eme"]["globalthe
-0000a0d0: 6d65 225d 0d0a 2020 2020 2020 2020 2020  me"]..          
+0000a0a0: 2020 2020 2020 2020 2067 7468 656d 6520           gtheme 
+0000a0b0: 3d20 7472 616e 7361 6374 696f 6e5f 6461  = transaction_da
+0000a0c0: 7461 5b22 7468 656d 6522 5d5b 2267 6c6f  ta["theme"]["glo
+0000a0d0: 6261 6c74 6865 6d65 225d 0d0a 2020 2020  baltheme"]..    
 0000a0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a0f0: 2020 6966 2073 656c 662e 7468 656d 655f    if self.theme_
-0000a100: 6d61 6e61 6765 722e 7468 656d 6520 213d  manager.theme !=
-0000a110: 2067 7468 656d 653a 0d0a 2020 2020 2020   gtheme:..      
+0000a0f0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+0000a100: 7468 656d 655f 6d61 6e61 6765 722e 7468  theme_manager.th
+0000a110: 656d 6520 213d 2067 7468 656d 653a 0d0a  eme != gtheme:..
 0000a120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a130: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
-0000a140: 7769 7463 685f 7468 656d 6528 290d 0a20  witch_theme().. 
-0000a150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a160: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000a170: 7468 656d 655f 6d61 6e61 6765 722e 6c6f  theme_manager.lo
-0000a180: 6164 5f63 6f6c 6f72 7328 7468 656d 655f  ad_colors(theme_
-0000a190: 666e 616d 6529 0d0a 0d0a 2020 2020 2020  fname)....      
+0000a130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a140: 7365 6c66 2e73 7769 7463 685f 7468 656d  self.switch_them
+0000a150: 6528 290d 0a20 2020 2020 2020 2020 2020  e()..           
+0000a160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a170: 2073 656c 662e 7468 656d 655f 6d61 6e61   self.theme_mana
+0000a180: 6765 722e 6c6f 6164 5f63 6f6c 6f72 7328  ger.load_colors(
+0000a190: 7468 656d 655f 666e 616d 6529 0d0a 0d0a  theme_fname)....
 0000a1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a1b0: 2020 6578 6365 7074 3a0d 0a20 2020 2020    except:..     
-0000a1c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a1d0: 2020 2020 2020 2073 656c 662e 7374 6174         self.stat
-0000a1e0: 7573 4261 7228 292e 7368 6f77 4d65 7373  usBar().showMess
-0000a1f0: 6167 6528 2243 6f75 6c64 206e 6f74 206c  age("Could not l
-0000a200: 6f61 6420 636f 6c6f 7220 7468 656d 652e  oad color theme.
-0000a210: 2046 616c 6c62 6163 6b20 746f 2073 7461   Fallback to sta
-0000a220: 6e61 7264 2074 6865 6d65 2229 0d0a 0d0a  nard theme")....
-0000a230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a240: 2020 2020 2320 6e65 7720 666f 726d 6174      # new format
-0000a250: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000a260: 2020 2020 2020 7365 6c66 2e65 6e74 7279        self.entry
-0000a270: 5f64 6174 6120 3d20 7472 616e 7361 6374  _data = transact
-0000a280: 696f 6e5f 6461 7461 5b22 7472 616e 7361  ion_data["transa
-0000a290: 6374 696f 6e73 225d 0d0a 2020 2020 2020  ctions"]..      
-0000a2a0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000a2b0: 6c66 2e64 7261 7763 616e 7661 732e 636c  lf.drawcanvas.cl
-0000a2c0: 6561 7228 636c 6561 7261 6c6c 3d54 7275  ear(clearall=Tru
-0000a2d0: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
-0000a2e0: 2020 2020 2020 2020 2320 6164 6420 7468          # add th
-0000a2f0: 6520 6865 6c70 6572 2061 6765 6e74 730d  e helper agents.
-0000a300: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000a310: 2020 2020 2020 2066 6f72 206b 2c76 2069         for k,v i
-0000a320: 6e20 7472 616e 7361 6374 696f 6e5f 6461  n transaction_da
-0000a330: 7461 5b22 6167 656e 7473 225d 2e69 7465  ta["agents"].ite
-0000a340: 6d73 2829 3a0d 0a20 2020 2020 2020 2020  ms():..         
-0000a350: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0000a360: 656c 662e 6472 6177 6361 6e76 6173 2e61  elf.drawcanvas.a
-0000a370: 6464 5f61 6765 6e74 286b 2920 2320 2e63  dd_agent(k) # .c
-0000a380: 6170 6974 616c 697a 6528 2929 0d0a 2020  apitalize())..  
-0000a390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a3a0: 2020 2020 2020 7072 696e 7428 2241 6464        print("Add
-0000a3b0: 2061 6765 6e74 222c 206b 2920 232e 6361   agent", k) #.ca
-0000a3c0: 7069 7461 6c69 7a65 2829 290d 0a0d 0a20  pitalize()).... 
-0000a3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a3e0: 2020 2023 2061 6464 2074 6865 2074 7261     # add the tra
-0000a3f0: 6e73 6163 7469 6f6e 7320 2863 6f6e 6e65  nsactions (conne
-0000a400: 6374 6f72 7320 616e 6420 626f 7865 7329  ctors and boxes)
-0000a410: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000a420: 2020 2020 2020 7365 6c66 2e75 7064 6174        self.updat
-0000a430: 655f 7461 626c 6528 290d 0a0d 0a20 2020  e_table()....   
-0000a440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a450: 2023 206c 6f61 6420 6167 656e 7427 7320   # load agent's 
-0000a460: 636f 6465 730d 0a0d 0a20 2020 2020 2020  codes....       
-0000a470: 2020 2020 2020 2020 2020 2020 2023 2066               # f
-0000a480: 6972 7374 2c20 636f 6d70 6172 6520 6966  irst, compare if
-0000a490: 2074 6865 2063 6f64 6520 696e 2074 6865   the code in the
-0000a4a0: 2066 696c 6520 7472 6565 2028 6966 2061   file tree (if a
-0000a4b0: 6e79 2920 636f 7272 6573 706f 6e64 7320  ny) corresponds 
-0000a4c0: 746f 2074 6865 2063 6f64 6520 696e 2074  to the code in t
-0000a4d0: 6865 202e 7366 6374 6c20 6669 6c65 0d0a  he .sfctl file..
-0000a4e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000a4f0: 2020 2020 2020 2320 6368 6563 6b20 6966        # check if
-0000a500: 2066 696c 6520 7472 6565 2069 7320 6578   file tree is ex
-0000a510: 6973 7465 6e74 0d0a 2020 2020 2020 2020  istent..        
-0000a520: 2020 2020 2020 2020 2020 2020 6d79 5f61              my_a
-0000a530: 6765 6e74 7320 3d20 6c69 7374 2874 7261  gents = list(tra
-0000a540: 6e73 6163 7469 6f6e 5f64 6174 615b 2261  nsaction_data["a
-0000a550: 6765 6e74 7322 5d2e 6b65 7973 2829 290d  gents"].keys()).
-0000a560: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000a570: 2020 2020 2020 2023 2067 6574 2064 6972         # get dir
-0000a580: 6563 746f 7279 2066 726f 6d20 6669 6c65  ectory from file
-0000a590: 6e61 6d65 0d0a 2020 2020 2020 2020 2020  name..          
-0000a5a0: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
-0000a5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a5c0: 2020 2020 2020 2020 7072 696e 7428 2243          print("C
-0000a5d0: 4845 434b 2044 4952 4543 544f 5259 2046  HECK DIRECTORY F
-0000a5e0: 4f52 2055 5044 4154 4553 222c 2066 696c  OR UPDATES", fil
-0000a5f0: 656e 616d 6529 0d0a 2020 2020 2020 2020  ename)..        
+0000a1b0: 2020 2020 2020 2020 6578 6365 7074 3a0d          except:.
+0000a1c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a1d0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0000a1e0: 662e 7374 6174 7573 4261 7228 292e 7368  f.statusBar().sh
+0000a1f0: 6f77 4d65 7373 6167 6528 2243 6f75 6c64  owMessage("Could
+0000a200: 206e 6f74 206c 6f61 6420 636f 6c6f 7220   not load color 
+0000a210: 7468 656d 652e 2046 616c 6c62 6163 6b20  theme. Fallback 
+0000a220: 746f 2073 7461 6e61 7264 2074 6865 6d65  to stanard theme
+0000a230: 2229 0d0a 0d0a 2020 2020 2020 2020 2020  ")....          
+0000a240: 2020 2020 2020 2020 2020 2320 6e65 7720            # new 
+0000a250: 666f 726d 6174 0d0a 2020 2020 2020 2020  format..        
+0000a260: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000a270: 2e65 6e74 7279 5f64 6174 6120 3d20 7472  .entry_data = tr
+0000a280: 616e 7361 6374 696f 6e5f 6461 7461 5b22  ansaction_data["
+0000a290: 7472 616e 7361 6374 696f 6e73 225d 0d0a  transactions"]..
+0000a2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a2b0: 2020 2020 7365 6c66 2e64 7261 7763 616e      self.drawcan
+0000a2c0: 7661 732e 636c 6561 7228 636c 6561 7261  vas.clear(cleara
+0000a2d0: 6c6c 3d54 7275 6529 0d0a 2020 2020 2020  ll=True)..      
+0000a2e0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0000a2f0: 6164 6420 7468 6520 6865 6c70 6572 2061  add the helper a
+0000a300: 6765 6e74 730d 0a0d 0a20 2020 2020 2020  gents....       
+0000a310: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+0000a320: 206b 2c76 2069 6e20 7472 616e 7361 6374   k,v in transact
+0000a330: 696f 6e5f 6461 7461 5b22 6167 656e 7473  ion_data["agents
+0000a340: 225d 2e69 7465 6d73 2829 3a0d 0a20 2020  "].items():..   
+0000a350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a360: 2020 2020 2073 656c 662e 6472 6177 6361       self.drawca
+0000a370: 6e76 6173 2e61 6464 5f61 6765 6e74 286b  nvas.add_agent(k
+0000a380: 2920 2320 2e63 6170 6974 616c 697a 6528  ) # .capitalize(
+0000a390: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
+0000a3a0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+0000a3b0: 7428 2241 6464 2061 6765 6e74 222c 206b  t("Add agent", k
+0000a3c0: 2920 232e 6361 7069 7461 6c69 7a65 2829  ) #.capitalize()
+0000a3d0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0000a3e0: 2020 2020 2020 2020 2023 2061 6464 2074           # add t
+0000a3f0: 6865 2074 7261 6e73 6163 7469 6f6e 7320  he transactions 
+0000a400: 2863 6f6e 6e65 6374 6f72 7320 616e 6420  (connectors and 
+0000a410: 626f 7865 7329 0d0a 2020 2020 2020 2020  boxes)..        
+0000a420: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000a430: 2e75 7064 6174 655f 7461 626c 6528 290d  .update_table().
+0000a440: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000a450: 2020 2020 2020 2023 206c 6f61 6420 6167         # load ag
+0000a460: 656e 7427 7320 636f 6465 730d 0a0d 0a20  ent's codes.... 
+0000a470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a480: 2020 2023 2066 6972 7374 2c20 636f 6d70     # first, comp
+0000a490: 6172 6520 6966 2074 6865 2063 6f64 6520  are if the code 
+0000a4a0: 696e 2074 6865 2066 696c 6520 7472 6565  in the file tree
+0000a4b0: 2028 6966 2061 6e79 2920 636f 7272 6573   (if any) corres
+0000a4c0: 706f 6e64 7320 746f 2074 6865 2063 6f64  ponds to the cod
+0000a4d0: 6520 696e 2074 6865 202e 7366 6374 6c20  e in the .sfctl 
+0000a4e0: 6669 6c65 0d0a 0d0a 2020 2020 2020 2020  file....        
+0000a4f0: 2020 2020 2020 2020 2020 2020 2320 6368              # ch
+0000a500: 6563 6b20 6966 2066 696c 6520 7472 6565  eck if file tree
+0000a510: 2069 7320 6578 6973 7465 6e74 0d0a 2020   is existent..  
+0000a520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a530: 2020 6d79 5f61 6765 6e74 7320 3d20 6c69    my_agents = li
+0000a540: 7374 2874 7261 6e73 6163 7469 6f6e 5f64  st(transaction_d
+0000a550: 6174 615b 2261 6765 6e74 7322 5d2e 6b65  ata["agents"].ke
+0000a560: 7973 2829 290d 0a0d 0a20 2020 2020 2020  ys())....       
+0000a570: 2020 2020 2020 2020 2020 2020 2023 2067               # g
+0000a580: 6574 2064 6972 6563 746f 7279 2066 726f  et directory fro
+0000a590: 6d20 6669 6c65 6e61 6d65 0d0a 2020 2020  m filename..    
+0000a5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a5b0: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+0000a5c0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+0000a5d0: 696e 7428 2243 4845 434b 2044 4952 4543  int("CHECK DIREC
+0000a5e0: 544f 5259 2046 4f52 2055 5044 4154 4553  TORY FOR UPDATES
+0000a5f0: 222c 2066 696c 656e 616d 6529 0d0a 2020  ", filename)..  
 0000a600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a610: 6669 6c65 7061 7468 203d 206f 732e 7061  filepath = os.pa
-0000a620: 7468 2e64 6972 6e61 6d65 286f 732e 7061  th.dirname(os.pa
-0000a630: 7468 2e61 6273 7061 7468 2866 696c 656e  th.abspath(filen
-0000a640: 616d 6529 290d 0a20 2020 2020 2020 2020  ame))..         
-0000a650: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-0000a660: 616d 6261 5f70 6174 6820 3d20 6669 6c65  amba_path = file
-0000a670: 7061 7468 202b 2022 2f6d 616d 6261 5f63  path + "/mamba_c
-0000a680: 6f64 6522 0d0a 2020 2020 2020 2020 2020  ode"..          
-0000a690: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-0000a6a0: 696e 7428 226d 616d 6261 2070 6174 6822  int("mamba path"
-0000a6b0: 2c6d 616d 6261 5f70 6174 6829 0d0a 0d0a  ,mamba_path)....
-0000a6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a6d0: 2020 2020 2020 2020 6d73 6720 3d20 2249          msg = "I
-0000a6e0: 2068 6176 6520 6465 7465 6374 6564 2061   have detected a
-0000a6f0: 2064 6576 6961 7469 6f6e 2062 6574 7765   deviation betwe
-0000a700: 656e 2074 6865 202f 6d61 6d62 615f 636f  en the /mamba_co
-0000a710: 6465 2f20 6469 7265 6374 6f72 7920 616e  de/ directory an
-0000a720: 6420 7468 6520 636f 6465 2073 746f 7265  d the code store
-0000a730: 6420 696e 2074 6869 7320 6669 6c65 2122  d in this file!"
-0000a740: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000a750: 2020 2020 2020 2020 2020 6d73 6720 2b3d            msg +=
-0000a760: 2022 2041 6666 6563 7465 6420 6669 6c65   " Affected file
-0000a770: 733a 5c6e 5c6e 220d 0a0d 0a20 2020 2020  s:\n\n"....     
-0000a780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a790: 2020 2073 7562 5f6e 616d 6573 203d 206e     sub_names = n
-0000a7a0: 6578 7428 6f73 2e77 616c 6b28 6d61 6d62  ext(os.walk(mamb
-0000a7b0: 615f 7061 7468 292c 2028 4e6f 6e65 2c20  a_path), (None, 
-0000a7c0: 4e6f 6e65 2c20 5b5d 2929 5b32 5d20 2023  None, []))[2]  #
-0000a7d0: 205b 5d20 6966 206e 6f20 6669 6c65 0d0a   [] if no file..
-0000a7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a7f0: 2020 2020 2020 2020 616c 745f 7472 616e          alt_tran
-0000a800: 7361 6374 696f 6e5f 6461 7461 203d 207b  saction_data = {
-0000a810: 7d0d 0a20 2020 2020 2020 2020 2020 2020  }..             
-0000a820: 2020 2020 2020 2020 2020 2061 6c74 5f64             alt_d
-0000a830: 6966 6673 203d 207b 7d0d 0a0d 0a20 2020  iffs = {}....   
-0000a840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a850: 2020 2020 2066 6f72 2066 6920 696e 2073       for fi in s
-0000a860: 7562 5f6e 616d 6573 3a0d 0a0d 0a20 2020  ub_names:....   
-0000a870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a880: 2020 2020 2020 2020 2023 2063 6865 636b           # check
-0000a890: 2066 696c 656e 616d 6520 666f 7220 6167   filename for ag
-0000a8a0: 656e 740d 0a20 2020 2020 2020 2020 2020  ent..           
+0000a610: 2020 2020 2020 6669 6c65 7061 7468 203d        filepath =
+0000a620: 206f 732e 7061 7468 2e64 6972 6e61 6d65   os.path.dirname
+0000a630: 286f 732e 7061 7468 2e61 6273 7061 7468  (os.path.abspath
+0000a640: 2866 696c 656e 616d 6529 290d 0a20 2020  (filename))..   
+0000a650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a660: 2020 2020 206d 616d 6261 5f70 6174 6820       mamba_path 
+0000a670: 3d20 6669 6c65 7061 7468 202b 2022 2f6d  = filepath + "/m
+0000a680: 616d 6261 5f63 6f64 6522 0d0a 2020 2020  amba_code"..    
+0000a690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a6a0: 2020 2020 7072 696e 7428 226d 616d 6261      print("mamba
+0000a6b0: 2070 6174 6822 2c6d 616d 6261 5f70 6174   path",mamba_pat
+0000a6c0: 6829 0d0a 0d0a 2020 2020 2020 2020 2020  h)....          
+0000a6d0: 2020 2020 2020 2020 2020 2020 2020 6d73                ms
+0000a6e0: 6720 3d20 2249 2068 6176 6520 6465 7465  g = "I have dete
+0000a6f0: 6374 6564 2061 2064 6576 6961 7469 6f6e  cted a deviation
+0000a700: 2062 6574 7765 656e 2074 6865 202f 6d61   between the /ma
+0000a710: 6d62 615f 636f 6465 2f20 6469 7265 6374  mba_code/ direct
+0000a720: 6f72 7920 616e 6420 7468 6520 636f 6465  ory and the code
+0000a730: 2073 746f 7265 6420 696e 2074 6869 7320   stored in this 
+0000a740: 6669 6c65 2122 0d0a 2020 2020 2020 2020  file!"..        
+0000a750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a760: 6d73 6720 2b3d 2022 2041 6666 6563 7465  msg += " Affecte
+0000a770: 6420 6669 6c65 733a 5c6e 5c6e 220d 0a0d  d files:\n\n"...
+0000a780: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a790: 2020 2020 2020 2020 2073 7562 5f6e 616d           sub_nam
+0000a7a0: 6573 203d 206e 6578 7428 6f73 2e77 616c  es = next(os.wal
+0000a7b0: 6b28 6d61 6d62 615f 7061 7468 292c 2028  k(mamba_path), (
+0000a7c0: 4e6f 6e65 2c20 4e6f 6e65 2c20 5b5d 2929  None, None, []))
+0000a7d0: 5b32 5d20 2023 205b 5d20 6966 206e 6f20  [2]  # [] if no 
+0000a7e0: 6669 6c65 0d0a 2020 2020 2020 2020 2020  file..          
+0000a7f0: 2020 2020 2020 2020 2020 2020 2020 616c                al
+0000a800: 745f 7472 616e 7361 6374 696f 6e5f 6461  t_transaction_da
+0000a810: 7461 203d 207b 7d0d 0a20 2020 2020 2020  ta = {}..       
+0000a820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a830: 2061 6c74 5f64 6966 6673 203d 207b 7d0d   alt_diffs = {}.
+0000a840: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000a850: 2020 2020 2020 2020 2020 2066 6f72 2066             for f
+0000a860: 6920 696e 2073 7562 5f6e 616d 6573 3a0d  i in sub_names:.
+0000a870: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000a880: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000a890: 2063 6865 636b 2066 696c 656e 616d 6520   check filename 
+0000a8a0: 666f 7220 6167 656e 740d 0a20 2020 2020  for agent..     
 0000a8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a8c0: 2061 6e61 6d65 203d 2063 616d 656c 2866   aname = camel(f
-0000a8d0: 695b 3a2d 345d 2920 2320 2e63 6170 6974  i[:-4]) # .capit
-0000a8e0: 616c 697a 6528 290d 0a0d 0a20 2020 2020  alize()....     
-0000a8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a900: 2020 2020 2020 2070 7269 6e74 2822 4669         print("Fi
-0000a910: 6c65 2022 2c61 6e61 6d65 290d 0a20 2020  le ",aname)..   
-0000a920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a930: 2020 2020 2020 2020 2069 6620 616e 616d           if anam
-0000a940: 6520 696e 206d 795f 6167 656e 7473 3a0d  e in my_agents:.
-0000a950: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000a8c0: 2020 2020 2020 2061 6e61 6d65 203d 2063         aname = c
+0000a8d0: 616d 656c 2866 695b 3a2d 345d 2920 2320  amel(fi[:-4]) # 
+0000a8e0: 2e63 6170 6974 616c 697a 6528 290d 0a0d  .capitalize()...
+0000a8f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000a900: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+0000a910: 6e74 2822 4669 6c65 2022 2c61 6e61 6d65  nt("File ",aname
+0000a920: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0000a930: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0000a940: 6620 616e 616d 6520 696e 206d 795f 6167  f aname in my_ag
+0000a950: 656e 7473 3a0d 0a0d 0a20 2020 2020 2020  ents:....       
 0000a960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a970: 2020 2023 2072 6561 6420 7468 6973 2066     # read this f
-0000a980: 696c 650d 0a20 2020 2020 2020 2020 2020  ile..           
+0000a970: 2020 2020 2020 2020 2023 2072 6561 6420           # read 
+0000a980: 7468 6973 2066 696c 650d 0a20 2020 2020  this file..     
 0000a990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a9a0: 2020 2020 2077 6974 6820 6f70 656e 286d       with open(m
-0000a9b0: 616d 6261 5f70 6174 682b 222f 2220 2b20  amba_path+"/" + 
-0000a9c0: 6669 2c22 7222 2920 6173 2066 696c 653a  fi,"r") as file:
-0000a9d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000a9a0: 2020 2020 2020 2020 2020 2077 6974 6820             with 
+0000a9b0: 6f70 656e 286d 616d 6261 5f70 6174 682b  open(mamba_path+
+0000a9c0: 222f 2220 2b20 6669 2c22 7222 2920 6173  "/" + fi,"r") as
+0000a9d0: 2066 696c 653a 0d0a 2020 2020 2020 2020   file:..        
 0000a9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a9f0: 2020 2020 2020 636f 6465 203d 2066 696c        code = fil
-0000aa00: 652e 7265 6164 2829 0d0a 0d0a 2020 2020  e.read()....    
-0000aa10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a9f0: 2020 2020 2020 2020 2020 2020 636f 6465              code
+0000aa00: 203d 2066 696c 652e 7265 6164 2829 0d0a   = file.read()..
+0000aa10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
 0000aa20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aa30: 2320 7072 696e 7428 2264 6576 206d 616d  # print("dev mam
-0000aa40: 6261 2066 6f6c 6465 723a 2022 2c63 6f64  ba folder: ",cod
-0000aa50: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
+0000aa30: 2020 2020 2020 2320 7072 696e 7428 2264        # print("d
+0000aa40: 6576 206d 616d 6261 2066 6f6c 6465 723a  ev mamba folder:
+0000aa50: 2022 2c63 6f64 6529 0d0a 2020 2020 2020   ",code)..      
 0000aa60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aa70: 2020 2020 2020 2020 2320 7072 696e 7428          # print(
-0000aa80: 2264 6576 2073 6663 746c 2066 696c 653a  "dev sfctl file:
-0000aa90: 222c 2074 7261 6e73 6163 7469 6f6e 5f64  ", transaction_d
-0000aaa0: 6174 615b 2261 6765 6e74 7322 5d5b 616e  ata["agents"][an
-0000aab0: 616d 655d 290d 0a0d 0a20 2020 2020 2020  ame])....       
+0000aa70: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0000aa80: 7072 696e 7428 2264 6576 2073 6663 746c  print("dev sfctl
+0000aa90: 2066 696c 653a 222c 2074 7261 6e73 6163   file:", transac
+0000aaa0: 7469 6f6e 5f64 6174 615b 2261 6765 6e74  tion_data["agent
+0000aab0: 7322 5d5b 616e 616d 655d 290d 0a0d 0a20  s"][aname]).... 
 0000aac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aad0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000aae0: 636f 6465 2e73 7472 6970 2829 2021 3d20  code.strip() != 
-0000aaf0: 7472 616e 7361 6374 696f 6e5f 6461 7461  transaction_data
-0000ab00: 5b22 6167 656e 7473 225d 5b61 6e61 6d65  ["agents"][aname
-0000ab10: 5d2e 7374 7269 7028 293a 0d0a 0d0a 2020  ].strip():....  
-0000ab20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aae0: 2020 2069 6620 636f 6465 2e73 7472 6970     if code.strip
+0000aaf0: 2829 2021 3d20 7472 616e 7361 6374 696f  () != transactio
+0000ab00: 6e5f 6461 7461 5b22 6167 656e 7473 225d  n_data["agents"]
+0000ab10: 5b61 6e61 6d65 5d2e 7374 7269 7028 293a  [aname].strip():
+0000ab20: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
 0000ab30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab40: 2020 2020 2020 7072 696e 7428 2244 4556        print("DEV
-0000ab50: 4941 5449 4f4e 2064 6574 6563 7465 6420  IATION detected 
-0000ab60: 696e 2022 2c61 6e61 6d65 290d 0a0d 0a0d  in ",aname).....
-0000ab70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000ab40: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+0000ab50: 7428 2244 4556 4941 5449 4f4e 2064 6574  t("DEVIATION det
+0000ab60: 6563 7465 6420 696e 2022 2c61 6e61 6d65  ected in ",aname
+0000ab70: 290d 0a0d 0a0d 0a20 2020 2020 2020 2020  )......         
 0000ab80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ab90: 2020 2020 2020 2020 2061 6c74 5f74 7261           alt_tra
-0000aba0: 6e73 6163 7469 6f6e 5f64 6174 615b 616e  nsaction_data[an
-0000abb0: 616d 655d 203d 2063 6f64 650d 0a0d 0a20  ame] = code.... 
-0000abc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ab90: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0000aba0: 6c74 5f74 7261 6e73 6163 7469 6f6e 5f64  lt_transaction_d
+0000abb0: 6174 615b 616e 616d 655d 203d 2063 6f64  ata[aname] = cod
+0000abc0: 650d 0a0d 0a20 2020 2020 2020 2020 2020  e....           
 0000abd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000abe0: 2020 2020 2020 2064 6966 6620 3d20 205b         diff =  [
-0000abf0: 6c69 2066 6f72 206c 6920 696e 2064 6966  li for li in dif
-0000ac00: 666c 6962 2e6e 6469 6666 2863 6f64 652e  flib.ndiff(code.
-0000ac10: 7374 7269 7028 292c 2074 7261 6e73 6163  strip(), transac
-0000ac20: 7469 6f6e 5f64 6174 615b 2261 6765 6e74  tion_data["agent
-0000ac30: 7322 5d5b 616e 616d 655d 2e73 7472 6970  s"][aname].strip
-0000ac40: 2829 2920 6966 206c 695b 305d 2021 3d20  ()) if li[0] != 
-0000ac50: 2720 275d 0d0a 2020 2020 2020 2020 2020  ' ']..          
+0000abe0: 2020 2020 2020 2020 2020 2020 2064 6966               dif
+0000abf0: 6620 3d20 205b 6c69 2066 6f72 206c 6920  f =  [li for li 
+0000ac00: 696e 2064 6966 666c 6962 2e6e 6469 6666  in difflib.ndiff
+0000ac10: 2863 6f64 652e 7374 7269 7028 292c 2074  (code.strip(), t
+0000ac20: 7261 6e73 6163 7469 6f6e 5f64 6174 615b  ransaction_data[
+0000ac30: 2261 6765 6e74 7322 5d5b 616e 616d 655d  "agents"][aname]
+0000ac40: 2e73 7472 6970 2829 2920 6966 206c 695b  .strip()) if li[
+0000ac50: 305d 2021 3d20 2720 275d 0d0a 2020 2020  0] != ' ']..    
 0000ac60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ac70: 2020 2020 2020 2020 2020 2020 2020 616c                al
-0000ac80: 745f 6469 6666 735b 616e 616d 655d 203d  t_diffs[aname] =
-0000ac90: 2073 7472 2864 6966 6629 0d0a 0d0a 2020   str(diff)....  
-0000aca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ac70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ac80: 2020 2020 616c 745f 6469 6666 735b 616e      alt_diffs[an
+0000ac90: 616d 655d 203d 2073 7472 2864 6966 6629  ame] = str(diff)
+0000aca0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
 0000acb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000acc0: 2020 2020 2020 7374 7264 6966 6620 3d20        strdiff = 
-0000acd0: 7374 7228 6469 6666 292e 7374 7269 7028  str(diff).strip(
-0000ace0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0000acc0: 2020 2020 2020 2020 2020 2020 7374 7264              strd
+0000acd0: 6966 6620 3d20 7374 7228 6469 6666 292e  iff = str(diff).
+0000ace0: 7374 7269 7028 290d 0a0d 0a20 2020 2020  strip()....     
 0000acf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ad00: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000ad10: 6c65 6e28 7374 7264 6966 6629 203e 2034  len(strdiff) > 4
-0000ad20: 303a 0d0a 2020 2020 2020 2020 2020 2020  0:..            
+0000ad00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ad10: 2020 2069 6620 6c65 6e28 7374 7264 6966     if len(strdif
+0000ad20: 6629 203e 2034 303a 0d0a 2020 2020 2020  f) > 40:..      
 0000ad30: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ad40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ad50: 7374 7264 6966 6620 3d20 7374 7264 6966  strdiff = strdif
-0000ad60: 665b 3a37 5d20 2b20 222e 2e2e 220d 0a20  f[:7] + "...".. 
-0000ad70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ad50: 2020 2020 2020 7374 7264 6966 6620 3d20        strdiff = 
+0000ad60: 7374 7264 6966 665b 3a37 5d20 2b20 222e  strdiff[:7] + ".
+0000ad70: 2e2e 220d 0a20 2020 2020 2020 2020 2020  .."..           
 0000ad80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ad90: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-0000ada0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ad90: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+0000ada0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
 0000adb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000adc0: 2020 2020 2020 2020 2020 7374 7264 6966            strdif
-0000add0: 6620 3d20 7374 7264 6966 660d 0a0d 0a20  f = strdiff.... 
-0000ade0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000adc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000add0: 7374 7264 6966 6620 3d20 7374 7264 6966  strdiff = strdif
+0000ade0: 660d 0a0d 0a20 2020 2020 2020 2020 2020  f....           
 0000adf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ae00: 2020 2020 2020 206d 7367 202b 3d20 6669         msg += fi
-0000ae10: 202b 2022 3a20 2220 2b20 7374 7264 6966   + ": " + strdif
-0000ae20: 6620 2b20 225c 6e22 0d0a 2020 2020 2020  f + "\n"..      
+0000ae00: 2020 2020 2020 2020 2020 2020 206d 7367               msg
+0000ae10: 202b 3d20 6669 202b 2022 3a20 2220 2b20   += fi + ": " + 
+0000ae20: 7374 7264 6966 6620 2b20 225c 6e22 0d0a  strdiff + "\n"..
 0000ae30: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0000ae40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ae50: 2020 7072 696e 7428 6469 6666 290d 0a20    print(diff).. 
-0000ae60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ae50: 2020 2020 2020 2020 7072 696e 7428 6469          print(di
+0000ae60: 6666 290d 0a20 2020 2020 2020 2020 2020  ff)..           
 0000ae70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ae80: 2020 2020 2020 2070 7269 6e74 2822 5c6e         print("\n
-0000ae90: 2229 0d0a 0d0a 2020 2020 2020 2020 2020  ")....          
-0000aea0: 2020 2020 2020 2020 2020 2020 2020 6d73                ms
-0000aeb0: 6720 2b3d 2022 5c6e 446f 2079 6f75 2077  g += "\nDo you w
-0000aec0: 616e 7420 746f 2061 6461 7074 2074 6865  ant to adapt the
-0000aed0: 2065 7874 6572 6e61 6c20 6368 616e 6765   external change
-0000aee0: 733f 220d 0a20 2020 2020 2020 2020 2020  s?"..           
-0000aef0: 2020 2020 2020 2020 2020 2020 2023 2073               # s
-0000af00: 656c 662e 6e6f 7469 6679 286d 7367 2c74  elf.notify(msg,t
-0000af10: 6974 6c65 3d22 4368 616e 6765 7320 4465  itle="Changes De
-0000af20: 7465 6374 6564 2229 0d0a 0d0a 2020 2020  tected")....    
-0000af30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000af40: 2020 2020 6966 206c 656e 2861 6c74 5f74      if len(alt_t
-0000af50: 7261 6e73 6163 7469 6f6e 5f64 6174 6129  ransaction_data)
-0000af60: 203e 2030 3a0d 0a0d 0a20 2020 2020 2020   > 0:....       
+0000ae80: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+0000ae90: 6e74 2822 5c6e 2229 0d0a 0d0a 2020 2020  nt("\n")....    
+0000aea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000aeb0: 2020 2020 6d73 6720 2b3d 2022 5c6e 446f      msg += "\nDo
+0000aec0: 2079 6f75 2077 616e 7420 746f 2061 6461   you want to ada
+0000aed0: 7074 2074 6865 2065 7874 6572 6e61 6c20  pt the external 
+0000aee0: 6368 616e 6765 733f 220d 0a20 2020 2020  changes?"..     
+0000aef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000af00: 2020 2023 2073 656c 662e 6e6f 7469 6679     # self.notify
+0000af10: 286d 7367 2c74 6974 6c65 3d22 4368 616e  (msg,title="Chan
+0000af20: 6765 7320 4465 7465 6374 6564 2229 0d0a  ges Detected")..
+0000af30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000af40: 2020 2020 2020 2020 2020 6966 206c 656e            if len
+0000af50: 2861 6c74 5f74 7261 6e73 6163 7469 6f6e  (alt_transaction
+0000af60: 5f64 6174 6129 203e 2030 3a0d 0a0d 0a20  _data) > 0:.... 
 0000af70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000af80: 2020 2020 2071 6d20 3d20 514d 6573 7361       qm = QMessa
-0000af90: 6765 426f 7828 7365 6c66 290d 0a20 2020  geBox(self)..   
-0000afa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000afb0: 2020 2020 2020 2020 2071 6d2e 7365 7457           qm.setW
-0000afc0: 696e 646f 7754 6974 6c65 2822 4361 7574  indowTitle("Caut
-0000afd0: 696f 6e22 290d 0a20 2020 2020 2020 2020  ion")..         
+0000af80: 2020 2020 2020 2020 2020 2071 6d20 3d20             qm = 
+0000af90: 514d 6573 7361 6765 426f 7828 7365 6c66  QMessageBox(self
+0000afa0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0000afb0: 2020 2020 2020 2020 2020 2020 2020 2071                 q
+0000afc0: 6d2e 7365 7457 696e 646f 7754 6974 6c65  m.setWindowTitle
+0000afd0: 2822 4361 7574 696f 6e22 290d 0a20 2020  ("Caution")..   
 0000afe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000aff0: 2020 2023 2071 6d2e 7365 7454 6578 7428     # qm.setText(
-0000b000: 6d65 7373 6167 6529 0d0a 2020 2020 2020  message)..      
+0000aff0: 2020 2020 2020 2020 2023 2071 6d2e 7365           # qm.se
+0000b000: 7454 6578 7428 6d65 7373 6167 6529 0d0a  tText(message)..
 0000b010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b020: 2020 2020 2020 7374 796c 6520 3d20 7365        style = se
-0000b030: 6c66 2e74 6865 6d65 5f6d 616e 6167 6572  lf.theme_manager
-0000b040: 2e67 6574 5f6e 6f74 6966 6963 6174 696f  .get_notificatio
-0000b050: 6e5f 7374 796c 6528 290d 0a20 2020 2020  n_style()..     
-0000b060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b070: 2020 2020 2020 2071 6d2e 7365 7453 7479         qm.setSty
-0000b080: 6c65 5368 6565 7428 7374 796c 6529 0d0a  leSheet(style)..
-0000b090: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0000b020: 2020 2020 2020 2020 2020 2020 7374 796c              styl
+0000b030: 6520 3d20 7365 6c66 2e74 6865 6d65 5f6d  e = self.theme_m
+0000b040: 616e 6167 6572 2e67 6574 5f6e 6f74 6966  anager.get_notif
+0000b050: 6963 6174 696f 6e5f 7374 796c 6528 290d  ication_style().
+0000b060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000b070: 2020 2020 2020 2020 2020 2020 2071 6d2e               qm.
+0000b080: 7365 7453 7479 6c65 5368 6565 7428 7374  setStyleSheet(st
+0000b090: 796c 6529 0d0a 0d0a 0d0a 2020 2020 2020  yle)......      
 0000b0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b0b0: 7265 7420 3d20 716d 2e71 7565 7374 696f  ret = qm.questio
-0000b0c0: 6e28 7365 6c66 2c27 4361 7574 696f 6e27  n(self,'Caution'
-0000b0d0: 2c20 6d73 6720 2c20 716d 2e59 6573 207c  , msg , qm.Yes |
-0000b0e0: 2071 6d2e 4e6f 290d 0a0d 0a20 2020 2020   qm.No)....     
-0000b0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b100: 2020 2020 2020 2069 6620 7265 7420 3d3d         if ret ==
-0000b110: 2071 6d2e 5965 733a 0d0a 2020 2020 2020   qm.Yes:..      
+0000b0b0: 2020 2020 2020 7265 7420 3d20 716d 2e71        ret = qm.q
+0000b0c0: 7565 7374 696f 6e28 7365 6c66 2c27 4361  uestion(self,'Ca
+0000b0d0: 7574 696f 6e27 2c20 6d73 6720 2c20 716d  ution', msg , qm
+0000b0e0: 2e59 6573 207c 2071 6d2e 4e6f 290d 0a0d  .Yes | qm.No)...
+0000b0f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000b100: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0000b110: 7265 7420 3d3d 2071 6d2e 5965 733a 0d0a  ret == qm.Yes:..
 0000b120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b130: 2020 2020 2020 2020 2020 666f 7220 6b2c            for k,
-0000b140: 7620 696e 2061 6c74 5f74 7261 6e73 6163  v in alt_transac
-0000b150: 7469 6f6e 5f64 6174 612e 6974 656d 7328  tion_data.items(
-0000b160: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0000b130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b140: 666f 7220 6b2c 7620 696e 2061 6c74 5f74  for k,v in alt_t
+0000b150: 7261 6e73 6163 7469 6f6e 5f64 6174 612e  ransaction_data.
+0000b160: 6974 656d 7328 293a 0d0a 2020 2020 2020  items():..      
 0000b170: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b180: 2020 2020 2020 2020 7472 616e 7361 6374          transact
-0000b190: 696f 6e5f 6461 7461 5b22 6167 656e 7473  ion_data["agents
-0000b1a0: 225d 5b6b 5d20 3d20 616c 745f 7472 616e  "][k] = alt_tran
-0000b1b0: 7361 6374 696f 6e5f 6461 7461 5b6b 5d0d  saction_data[k].
-0000b1c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b1d0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0000b1e0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0000b180: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+0000b190: 616e 7361 6374 696f 6e5f 6461 7461 5b22  ansaction_data["
+0000b1a0: 6167 656e 7473 225d 5b6b 5d20 3d20 616c  agents"][k] = al
+0000b1b0: 745f 7472 616e 7361 6374 696f 6e5f 6461  t_transaction_da
+0000b1c0: 7461 5b6b 5d0d 0a20 2020 2020 2020 2020  ta[k]..         
+0000b1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b1e0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
 0000b1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b200: 2020 2020 7061 7373 0d0a 0d0a 2020 2020      pass....    
-0000b210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b220: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
-0000b230: 2061 7320 653a 0d0a 2020 2020 2020 2020   as e:..        
+0000b200: 2020 2020 2020 2020 2020 7061 7373 0d0a            pass..
+0000b210: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000b220: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
+0000b230: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
 0000b240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b250: 7072 696e 7428 2253 4f4d 4554 4849 4e47  print("SOMETHING
-0000b260: 2057 454e 5420 5752 4f4e 4722 290d 0a20   WENT WRONG").. 
-0000b270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b280: 2020 2020 2020 2070 7269 6e74 2873 7472         print(str
-0000b290: 2865 2929 0d0a 0d0a 2020 2020 2020 2020  (e))....        
-0000b2a0: 2020 2020 2020 2020 2020 2020 230d 0a0d              #...
-0000b2b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000b2c0: 2020 2020 2073 656c 662e 6472 6177 6361       self.drawca
-0000b2d0: 6e76 6173 2e63 6f64 655f 6461 7461 203d  nvas.code_data =
-0000b2e0: 2074 7261 6e73 6163 7469 6f6e 5f64 6174   transaction_dat
-0000b2f0: 615b 2261 6765 6e74 7322 5d0d 0a20 2020  a["agents"]..   
-0000b300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b310: 2070 7269 6e74 2822 434f 4445 2044 4154   print("CODE DAT
-0000b320: 4122 2c74 7261 6e73 6163 7469 6f6e 5f64  A",transaction_d
-0000b330: 6174 615b 2261 6765 6e74 7322 5d29 0d0a  ata["agents"])..
-0000b340: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000b350: 2020 2020 2020 2320 6d6f 7665 2074 6865        # move the
-0000b360: 2062 6f78 6573 2074 6f20 7468 6520 7361   boxes to the sa
-0000b370: 7665 6420 706f 7369 7469 6f6e 730d 0a20  ved positions.. 
-0000b380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b390: 2020 2073 656c 662e 6472 6177 6361 6e76     self.drawcanv
-0000b3a0: 6173 2e72 6570 6f73 6974 696f 6e28 7472  as.reposition(tr
-0000b3b0: 616e 7361 6374 696f 6e5f 6461 7461 5b22  ansaction_data["
-0000b3c0: 626f 785f 706f 7369 7469 6f6e 7322 5d29  box_positions"])
-0000b3d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000b3e0: 2020 2020 2020 7365 6c66 2e73 6574 7469        self.setti
-0000b3f0: 6e67 735f 7374 7220 3d20 7472 616e 7361  ngs_str = transa
-0000b400: 6374 696f 6e5f 6461 7461 5b22 7365 7474  ction_data["sett
-0000b410: 696e 6773 225d 0d0a 0d0a 2020 2020 2020  ings"]....      
-0000b420: 2020 2020 2020 2020 2020 2020 2020 7472                tr
-0000b430: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-0000b440: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000b450: 2e6d 6169 6e6c 6f6f 705f 7374 7220 3d20  .mainloop_str = 
-0000b460: 7472 616e 7361 6374 696f 6e5f 6461 7461  transaction_data
-0000b470: 5b22 6d61 696e 6c6f 6f70 225d 0d0a 2020  ["mainloop"]..  
-0000b480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b490: 2020 6578 6365 7074 3a0d 0a20 2020 2020    except:..     
-0000b4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b4b0: 2020 2070 7269 6e74 2822 4e4f 204d 4149     print("NO MAI
-0000b4c0: 4e4c 4f4f 5020 464f 4e44 2e20 534b 4950  NLOOP FOND. SKIP
-0000b4d0: 5049 4e47 2229 0d0a 0d0a 2020 2020 2020  PING")....      
-0000b4e0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000b4f0: 6c66 2e73 7461 7475 7342 6172 2829 2e73  lf.statusBar().s
-0000b500: 686f 774d 6573 7361 6765 2822 4f70 656e  howMessage("Open
-0000b510: 6564 2066 696c 6520 2220 2b20 6669 6c65  ed file " + file
-0000b520: 6e61 6d65 290d 0a0d 0a20 2020 2020 2020  name)....       
-0000b530: 2020 2020 2020 2020 2065 7863 6570 743a           except:
-0000b540: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000b550: 2020 2020 2020 2020 2320 6f6c 6420 666f          # old fo
-0000b560: 726d 6174 2061 7320 6661 6c6c 6261 636b  rmat as fallback
-0000b570: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000b580: 2020 2020 2020 7365 6c66 2e65 6e74 7279        self.entry
-0000b590: 5f64 6174 6120 3d20 7472 616e 7361 6374  _data = transact
-0000b5a0: 696f 6e5f 6461 7461 0d0a 2020 2020 2020  ion_data..      
-0000b5b0: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000b5c0: 6c66 2e64 7261 7763 616e 7661 732e 636f  lf.drawcanvas.co
-0000b5d0: 6465 5f64 6174 6120 3d20 7472 616e 7361  de_data = transa
-0000b5e0: 6374 696f 6e5f 6461 7461 5b22 6167 656e  ction_data["agen
-0000b5f0: 7473 225d 0d0a 2020 2020 2020 2020 2020  ts"]..          
-0000b600: 2020 2020 2020 2020 2020 7365 6c66 2e75            self.u
-0000b610: 7064 6174 655f 7461 626c 6528 290d 0a20  pdate_table().. 
-0000b620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b630: 2020 2070 7269 6e74 2822 7741 524e 494e     print("wARNIN
-0000b640: 4720 2d20 4641 4c4c 4241 434b 2054 4f20  G - FALLBACK TO 
-0000b650: 4f4c 4420 4649 4c45 2046 4f52 4d41 5421  OLD FILE FORMAT!
-0000b660: 2229 0d0a 0d0a 2020 2020 2020 2020 2020  ")....          
-0000b670: 2020 2020 2020 2320 7365 6c66 2e66 696c        # self.fil
-0000b680: 6545 6469 742e 7365 7454 6578 7428 6669  eEdit.setText(fi
-0000b690: 6c65 6e61 6d65 290d 0a0d 0a20 2020 2020  lename)....     
-0000b6a0: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-0000b6b0: 696f 6e20 6173 2065 203a 0d0a 0d0a 2020  ion as e :....  
-0000b6c0: 2020 2020 2020 2020 2020 2320 7365 6c66            # self
-0000b6d0: 2e6e 6f74 6966 7928 6d65 7373 6167 653d  .notify(message=
-0000b6e0: 2253 6f6d 6574 6869 6e67 2077 656e 7420  "Something went 
-0000b6f0: 7772 6f6e 6720 7768 656e 206f 7065 6e69  wrong when openi
-0000b700: 6e67 2074 6865 2066 696c 653a 5c6e 2025  ng the file:\n %
-0000b710: 7322 2573 7472 2865 292c 7469 746c 653d  s"%str(e),title=
-0000b720: 2245 7272 6f72 2229 0d0a 2020 2020 2020  "Error")..      
-0000b730: 2020 2020 2020 7365 6c66 2e66 696c 656e        self.filen
-0000b740: 616d 6520 3d20 6669 6c65 6e61 6d65 5f62  ame = filename_b
-0000b750: 6163 6b75 700d 0a20 2020 2020 2020 2020  ackup..         
-0000b760: 2020 2073 656c 662e 6375 7265 6e74 5f66     self.curent_f
-0000b770: 696c 6520 3d20 6375 7272 656e 745f 6669  ile = current_fi
-0000b780: 6c65 5f62 6163 6b75 700d 0a20 2020 2020  le_backup..     
-0000b790: 2020 2020 2020 2069 6620 7374 7228 7365         if str(se
-0000b7a0: 6c66 2e63 7572 7265 6e74 5f66 696c 6529  lf.current_file)
-0000b7b0: 2021 3d20 2222 3a0d 0a20 2020 2020 2020   != "":..       
-0000b7c0: 2020 2020 2020 2020 2073 656c 662e 7374           self.st
-0000b7d0: 6174 7573 4261 7228 292e 7368 6f77 4d65  atusBar().showMe
-0000b7e0: 7373 6167 6528 2243 616e 6365 6c6c 6564  ssage("Cancelled
-0000b7f0: 2e20 5265 7374 6f72 6564 2066 696c 6520  . Restored file 
-0000b800: 2725 7327 2220 2520 7374 7228 7365 6c66  '%s'" % str(self
-0000b810: 2e63 7572 7265 6e74 5f66 696c 6529 290d  .current_file)).
-0000b820: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
-0000b830: 7570 6461 7465 5f74 6162 6c65 2829 0d0a  update_table()..
-0000b840: 2020 2020 2020 2020 7365 6c66 2e74 6865          self.the
-0000b850: 6d65 5f6d 616e 6167 6572 2e72 6573 746f  me_manager.resto
-0000b860: 7265 2829 0d0a 0d0a 2020 2020 2020 2020  re()....        
-0000b870: 666f 7220 626f 7820 696e 2073 656c 662e  for box in self.
-0000b880: 6472 6177 6361 6e76 6173 2e62 6f78 6573  drawcanvas.boxes
-0000b890: 3a0d 0a20 2020 2020 2020 2020 2020 2062  :..            b
-0000b8a0: 6f78 2e65 6469 745f 6167 656e 7428 290d  ox.edit_agent().
-0000b8b0: 0a0d 0a20 2020 2064 6566 2065 6e74 7279  ...    def entry
-0000b8c0: 5f74 6f5f 7661 6c73 2873 656c 662c 656e  _to_vals(self,en
-0000b8d0: 7472 792c 2061 6765 6e74 2c77 6869 6368  try, agent,which
-0000b8e0: 293a 0d0a 0d0a 2020 2020 2020 2020 6966  ):....        if
-0000b8f0: 206e 6f74 2062 6f6f 6c28 7265 6765 782e   not bool(regex.
-0000b900: 6669 6e64 616c 6c28 2228 5b2b 2d5d 2b29  findall("([+-]+)
-0000b910: 222c 2065 6e74 7279 2929 3a0d 0a20 2020  ", entry)):..   
-0000b920: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
-0000b930: 7469 6679 286d 6573 7361 6765 3d22 5369  tify(message="Si
-0000b940: 676e 2063 6f72 7275 7074 6564 2069 6e20  gn corrupted in 
-0000b950: 656e 7472 7920 2573 2028 2573 206f 6620  entry %s (%s of 
-0000b960: 2573 2922 2528 656e 7472 792c 7768 6963  %s)"%(entry,whic
-0000b970: 682c 6167 656e 7429 2c74 6974 6c65 3d22  h,agent),title="
-0000b980: 4572 726f 7222 290d 0a20 2020 2020 2020  Error")..       
-0000b990: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
-0000b9a0: 2c20 4e6f 6e65 2c20 4e6f 6e65 0d0a 0d0a  , None, None....
-0000b9b0: 2020 2020 2020 2020 6966 2072 6567 6578          if regex
-0000b9c0: 2e66 696e 6461 6c6c 2822 285b 2b2d 5d2b  .findall("([+-]+
-0000b9d0: 2922 2c20 656e 7472 7929 5b30 5d20 3d3d  )", entry)[0] ==
-0000b9e0: 2022 2d22 3a0d 0a20 2020 2020 2020 2020   "-":..         
-0000b9f0: 2020 2073 6967 6e20 3d20 222d 220d 0a20     sign = "-".. 
-0000ba00: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-0000ba10: 2020 2020 2020 2020 2020 7369 676e 203d            sign =
-0000ba20: 2022 2b22 0d0a 0d0a 2020 2020 2020 2020   "+"....        
-0000ba30: 776f 7264 7320 3d20 7265 6765 782e 6669  words = regex.fi
-0000ba40: 6e64 616c 6c28 2228 5b5c 775c 735d 2b29  ndall("([\w\s]+)
-0000ba50: 222c 2065 6e74 7279 290d 0a0d 0a20 2020  ", entry)....   
-0000ba60: 2020 2020 2069 7465 6d20 3d20 2222 0d0a       item = ""..
-0000ba70: 2020 2020 2020 2020 7369 6c65 6e74 203d          silent =
-0000ba80: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
-0000ba90: 666f 7220 776f 7264 2069 6e20 776f 7264  for word in word
-0000baa0: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-0000bab0: 6966 2077 6f72 6420 213d 2022 7322 3a0d  if word != "s":.
-0000bac0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000bad0: 2069 7465 6d20 2b3d 2077 6f72 642e 7374   item += word.st
-0000bae0: 7269 7028 2920 2b20 2220 220d 0a20 2020  rip() + " "..   
-0000baf0: 2020 2020 2020 2020 2065 6c69 6620 776f           elif wo
-0000bb00: 7264 203d 3d20 2273 223a 0d0a 2020 2020  rd == "s":..    
-0000bb10: 2020 2020 2020 2020 2020 2020 7369 6c65              sile
-0000bb20: 6e74 203d 2054 7275 650d 0a0d 0a20 2020  nt = True....   
-0000bb30: 2020 2020 2069 7465 6d20 3d20 6974 656d       item = item
-0000bb40: 2e73 7472 6970 2829 0d0a 0d0a 2020 2020  .strip()....    
-0000bb50: 2020 2020 7265 7475 726e 2073 6967 6e2c      return sign,
-0000bb60: 2069 7465 6d2c 2073 696c 656e 740d 0a0d   item, silent...
-0000bb70: 0a0d 0a20 2020 2064 6566 2075 7064 6174  ...    def updat
-0000bb80: 655f 7461 626c 6528 7365 6c66 293a 0d0a  e_table(self):..
-0000bb90: 2020 2020 2020 2020 2373 656c 662e 7365          #self.se
-0000bba0: 6c65 6374 696f 6e5f 6964 7820 3d20 4e6f  lection_idx = No
-0000bbb0: 6e65 0d0a 2020 2020 2020 2020 7365 6c66  ne..        self
-0000bbc0: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
-0000bbd0: 2e73 6574 526f 7743 6f75 6e74 2830 290d  .setRowCount(0).
-0000bbe0: 0a0d 0a20 2020 2020 2020 2023 2073 656c  ...        # sel
-0000bbf0: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
-0000bc00: 772e 6d6f 6465 6c28 292e 7365 7454 6f72  w.model().setTor
-0000bc10: 697a 6f6e 7461 6c48 6561 6465 7249 7465  izontalHeaderIte
-0000bc20: 6d28 2030 2c20 5154 6162 6c65 5769 6467  m( 0, QTableWidg
-0000bc30: 6574 4974 656d 2822 4e61 6d65 2229 290d  etItem("Name")).
-0000bc40: 0a20 2020 2020 2020 2023 2073 656c 662e  .        # self.
-0000bc50: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
-0000bc60: 6d6f 6465 6c28 292e 7365 7454 6f72 697a  model().setToriz
-0000bc70: 6f6e 7461 6c48 6561 6465 7249 7465 6d28  ontalHeaderItem(
-0000bc80: 2031 2c20 5154 6162 6c65 5769 6467 6574   1, QTableWidget
-0000bc90: 4974 656d 2822 5368 6f72 7420 4e61 6d65  Item("Short Name
-0000bca0: 2229 290d 0a20 2020 2020 2020 2023 2073  "))..        # s
-0000bcb0: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
-0000bcc0: 6965 772e 6d6f 6465 6c28 292e 7365 7454  iew.model().setT
-0000bcd0: 6f72 697a 6f6e 7461 6c48 6561 6465 7249  orizontalHeaderI
-0000bce0: 7465 6d28 2032 2c20 5154 6162 6c65 5769  tem( 2, QTableWi
-0000bcf0: 6467 6574 4974 656d 2822 556e 6964 6972  dgetItem("Unidir
-0000bd00: 6563 7469 6f6e 616c 2229 290d 0a20 2020  ectional"))..   
-0000bd10: 2020 2020 2023 2073 656c 662e 7472 616e       # self.tran
-0000bd20: 7361 6374 696f 6e56 6965 772e 6d6f 6465  sactionView.mode
-0000bd30: 6c28 292e 7365 7454 6f72 697a 6f6e 7461  l().setTorizonta
-0000bd40: 6c48 6561 6465 7249 7465 6d28 2033 2c20  lHeaderItem( 3, 
-0000bd50: 5154 6162 6c65 5769 6467 6574 4974 656d  QTableWidgetItem
-0000bd60: 2822 466c 6f77 2229 290d 0a0d 0a20 2020  ("Flow"))....   
-0000bd70: 2020 2020 2023 2069 6e73 6572 7420 6e65       # insert ne
-0000bd80: 7720 726f 7773 2069 6620 6e65 6564 6564  w rows if needed
-0000bd90: 0d0a 2020 2020 2020 2020 726f 775f 636f  ..        row_co
-0000bda0: 756e 7420 3d20 7365 6c66 2e74 7261 6e73  unt = self.trans
-0000bdb0: 6163 7469 6f6e 5669 6577 2e72 6f77 436f  actionView.rowCo
-0000bdc0: 756e 7428 290d 0a0d 0a20 2020 2020 2020  unt()....       
-0000bdd0: 2069 6620 7365 6c66 2e65 6e74 7279 5f64   if self.entry_d
-0000bde0: 6174 6120 6973 204e 6f6e 653a 0d0a 2020  ata is None:..  
-0000bdf0: 2020 2020 2020 2020 2020 7365 6c66 2e6e            self.n
-0000be00: 6f74 6966 7928 2244 6174 6120 6973 2065  otify("Data is e
-0000be10: 6d70 7479 206f 7220 636f 7272 7570 7465  mpty or corrupte
-0000be20: 642e 2053 6f6d 6574 6869 6e67 2077 656e  d. Something wen
-0000be30: 7420 7772 6f6e 6722 2c20 7469 746c 653d  t wrong", title=
-0000be40: 2246 6174 616c 2045 7272 6f72 2229 0d0a  "Fatal Error")..
-0000be50: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0000be60: 726e 0d0a 0d0a 2020 2020 2020 2020 6966  rn....        if
-0000be70: 2072 6f77 5f63 6f75 6e74 203c 206c 656e   row_count < len
-0000be80: 2873 656c 662e 656e 7472 795f 6461 7461  (self.entry_data
-0000be90: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0000bea0: 666f 7220 6920 696e 2072 616e 6765 286c  for i in range(l
-0000beb0: 656e 2873 656c 662e 656e 7472 795f 6461  en(self.entry_da
-0000bec0: 7461 292d 726f 775f 636f 756e 7429 3a0d  ta)-row_count):.
-0000bed0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000bee0: 2073 656c 662e 7472 616e 7361 6374 696f   self.transactio
-0000bef0: 6e56 6965 772e 696e 7365 7274 526f 7728  nView.insertRow(
-0000bf00: 726f 775f 636f 756e 7429 0d0a 0d0a 2020  row_count)....  
-0000bf10: 2020 2020 2020 7365 6c66 2e64 7261 7763        self.drawc
-0000bf20: 616e 7661 732e 636c 6561 7228 290d 0a20  anvas.clear().. 
-0000bf30: 2020 2020 2020 2073 656c 662e 6669 6c74         self.filt
-0000bf40: 6572 436f 6d62 6f2e 636c 6561 7228 290d  erCombo.clear().
-0000bf50: 0a20 2020 2020 2020 2073 656c 662e 6669  .        self.fi
-0000bf60: 6c74 6572 5f65 6e74 7269 6573 203d 205b  lter_entries = [
-0000bf70: 5d0d 0a0d 0a20 2020 2020 2020 2066 6f72  ]....        for
-0000bf80: 2069 2c64 6174 6120 696e 2065 6e75 6d65   i,data in enume
-0000bf90: 7261 7465 2873 656c 662e 656e 7472 795f  rate(self.entry_
-0000bfa0: 6461 7461 293a 0d0a 2020 2020 2020 2020  data):..        
-0000bfb0: 2020 2020 2320 6578 6973 7473 3120 3d20      # exists1 = 
-0000bfc0: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
-0000bfd0: 6368 6563 6b5f 6578 6973 7428 6461 7461  check_exist(data
-0000bfe0: 5b22 6167 656e 7431 225d 2e63 6170 6974  ["agent1"].capit
-0000bff0: 616c 697a 6528 2929 0d0a 2020 2020 2020  alize())..      
-0000c000: 2020 2020 2020 2320 6578 6973 7473 3220        # exists2 
-0000c010: 3d20 7365 6c66 2e64 7261 7763 616e 7661  = self.drawcanva
-0000c020: 732e 6368 6563 6b5f 6578 6973 7428 6461  s.check_exist(da
-0000c030: 7461 5b22 6167 656e 7432 225d 2e63 6170  ta["agent2"].cap
-0000c040: 6974 616c 697a 6528 2929 0d0a 0d0a 2020  italize())....  
-0000c050: 2020 2020 2020 2020 2020 626f 7831 203d            box1 =
-0000c060: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
-0000c070: 2e61 6464 5f61 6765 6e74 2863 616d 656c  .add_agent(camel
-0000c080: 2864 6174 615b 2261 6765 6e74 3122 5d29  (data["agent1"])
-0000c090: 2920 2320 2e63 6170 6974 616c 697a 6528  ) # .capitalize(
-0000c0a0: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-0000c0b0: 626f 7832 203d 2073 656c 662e 6472 6177  box2 = self.draw
-0000c0c0: 6361 6e76 6173 2e61 6464 5f61 6765 6e74  canvas.add_agent
-0000c0d0: 2863 616d 656c 2864 6174 615b 2261 6765  (camel(data["age
-0000c0e0: 6e74 3222 5d29 2920 232e 6361 7069 7461  nt2"])) #.capita
-0000c0f0: 6c69 7a65 2829 290d 0a0d 0a20 2020 2020  lize())....     
-0000c100: 2020 2020 2020 2023 2063 6f72 7265 6374         # correct
-0000c110: 206e 756d 6265 7220 6f66 2063 6f6e 6e65   number of conne
-0000c120: 6374 696f 6e73 2066 6f72 2065 7869 7374  ctions for exist
-0000c130: 696e 6720 6167 656e 7473 0d0a 2020 2020  ing agents..    
-0000c140: 2020 2020 2020 2020 626f 7831 2e6e 5f63          box1.n_c
-0000c150: 6f6e 6e65 6374 696f 6e73 203d 2030 0d0a  onnections = 0..
-0000c160: 2020 2020 2020 2020 2020 2020 626f 7832              box2
-0000c170: 2e6e 5f63 6f6e 6e65 6374 696f 6e73 203d  .n_connections =
-0000c180: 2030 0d0a 0d0a 2020 2020 2020 2020 2320   0....        # 
-0000c190: 7570 6461 7465 2074 6865 2064 6174 610d  update the data.
-0000c1a0: 0a20 2020 2020 2020 2066 6f72 2069 2c20  .        for i, 
-0000c1b0: 6461 7461 2069 6e20 656e 756d 6572 6174  data in enumerat
-0000c1c0: 6528 7365 6c66 2e65 6e74 7279 5f64 6174  e(self.entry_dat
-0000c1d0: 6129 3a0d 0a20 2020 2020 2020 2020 2020  a):..           
-0000c1e0: 2070 7269 6e74 2864 6174 6129 0d0a 0d0a   print(data)....
-0000c1f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000c200: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
-0000c210: 2e73 6574 4974 656d 2869 2c20 302c 2051  .setItem(i, 0, Q
-0000c220: 5461 626c 6557 6964 6765 7449 7465 6d28  TableWidgetItem(
-0000c230: 6461 7461 5b22 7375 626a 6563 7422 5d29  data["subject"])
-0000c240: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-0000c250: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
-0000c260: 6965 772e 7365 7449 7465 6d28 692c 2031  iew.setItem(i, 1
-0000c270: 2c20 5154 6162 6c65 5769 6467 6574 4974  , QTableWidgetIt
-0000c280: 656d 2863 616d 656c 2864 6174 615b 2261  em(camel(data["a
-0000c290: 6765 6e74 3122 5d29 2929 2023 202e 6361  gent1"]))) # .ca
-0000c2a0: 7069 7461 6c69 7a65 2829 2929 0d0a 2020  pitalize()))..  
-0000c2b0: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
-0000c2c0: 7261 6e73 6163 7469 6f6e 5669 6577 2e73  ransactionView.s
-0000c2d0: 6574 4974 656d 2869 2c20 322c 2051 5461  etItem(i, 2, QTa
-0000c2e0: 626c 6557 6964 6765 7449 7465 6d28 6361  bleWidgetItem(ca
-0000c2f0: 6d65 6c28 6461 7461 5b22 6167 656e 7432  mel(data["agent2
-0000c300: 225d 2929 2920 2320 2e63 6170 6974 616c  "]))) # .capital
-0000c310: 697a 6528 2929 290d 0a20 2020 2020 2020  ize()))..       
-0000c320: 2020 2020 2073 656c 662e 7472 616e 7361       self.transa
-0000c330: 6374 696f 6e56 6965 772e 7365 7449 7465  ctionView.setIte
-0000c340: 6d28 692c 2033 2c20 5154 6162 6c65 5769  m(i, 3, QTableWi
-0000c350: 6467 6574 4974 656d 2864 6174 615b 2273  dgetItem(data["s
-0000c360: 686f 7274 6e61 6d65 225d 2929 0d0a 2020  hortname"]))..  
-0000c370: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
-0000c380: 7261 6e73 6163 7469 6f6e 5669 6577 2e73  ransactionView.s
-0000c390: 6574 4974 656d 2869 2c20 342c 2051 5461  etItem(i, 4, QTa
-0000c3a0: 626c 6557 6964 6765 7449 7465 6d28 6461  bleWidgetItem(da
-0000c3b0: 7461 5b22 6b69 6e64 225d 2929 0d0a 2020  ta["kind"]))..  
-0000c3c0: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
-0000c3d0: 7261 6e73 6163 7469 6f6e 5669 6577 2e73  ransactionView.s
-0000c3e0: 6574 4974 656d 2869 2c20 352c 2051 5461  etItem(i, 5, QTa
-0000c3f0: 626c 6557 6964 6765 7449 7465 6d28 7374  bleWidgetItem(st
-0000c400: 7228 6461 7461 5b22 756e 692d 6469 7265  r(data["uni-dire
-0000c410: 6374 696f 6e61 6c22 5d29 2929 0d0a 2020  ctional"])))..  
-0000c420: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
-0000c430: 7261 6e73 6163 7469 6f6e 5669 6577 2e73  ransactionView.s
-0000c440: 6574 4974 656d 2869 2c20 362c 2051 5461  etItem(i, 6, QTa
-0000c450: 626c 6557 6964 6765 7449 7465 6d28 7374  bleWidgetItem(st
-0000c460: 7228 6461 7461 5b22 7175 616e 7469 7479  r(data["quantity
-0000c470: 225d 2929 290d 0a20 2020 2020 2020 2020  "])))..         
-0000c480: 2020 2023 2073 656c 662e 7472 616e 7361     # self.transa
-0000c490: 6374 696f 6e56 6965 772e 7365 6c65 6374  ctionView.select
-0000c4a0: 696f 6e4d 6f64 656c 2829 2e73 656c 6563  ionModel().selec
-0000c4b0: 7465 6452 6f77 7328 290d 0a0d 0a20 2020  tedRows()....   
-0000c4c0: 2020 2020 2020 2020 2062 6f78 3120 3d20           box1 = 
-0000c4d0: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
-0000c4e0: 6164 645f 6167 656e 7428 6361 6d65 6c28  add_agent(camel(
-0000c4f0: 6461 7461 5b22 6167 656e 7431 225d 2929  data["agent1"]))
-0000c500: 2023 2e63 6170 6974 616c 697a 6528 2929   #.capitalize())
-0000c510: 0d0a 2020 2020 2020 2020 2020 2020 626f  ..            bo
-0000c520: 7832 203d 2073 656c 662e 6472 6177 6361  x2 = self.drawca
-0000c530: 6e76 6173 2e61 6464 5f61 6765 6e74 2863  nvas.add_agent(c
-0000c540: 616d 656c 2864 6174 615b 2261 6765 6e74  amel(data["agent
-0000c550: 3222 5d29 2920 232e 6361 7069 7461 6c69  2"])) #.capitali
-0000c560: 7a65 2829 290d 0a0d 0a20 2020 2020 2020  ze())....       
-0000c570: 2020 2020 206d 795f 6974 656d 7320 3d20       my_items = 
-0000c580: 5b5d 0d0a 0d0a 2020 2020 2020 2020 2020  []....          
-0000c590: 2020 616c 6c65 6e74 7269 6573 203d 2022    allentries = "
-0000c5a0: 5c6e 222e 6a6f 696e 285b 6461 7461 5b22  \n".join([data["
-0000c5b0: 6c31 225d 2c20 6461 7461 5b22 6131 225d  l1"], data["a1"]
-0000c5c0: 2c20 6461 7461 5b22 6531 225d 2c20 6461  , data["e1"], da
-0000c5d0: 7461 5b22 6c32 225d 2c20 6461 7461 5b22  ta["l2"], data["
-0000c5e0: 6132 225d 2c20 6461 7461 5b22 6532 225d  a2"], data["e2"]
-0000c5f0: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
-0000c600: 666f 7220 7375 625f 6974 656d 2069 6e20  for sub_item in 
-0000c610: 616c 6c65 6e74 7269 6573 2e73 706c 6974  allentries.split
-0000c620: 2822 5c6e 2229 3a0d 0a20 2020 2020 2020  ("\n"):..       
-0000c630: 2020 2020 2020 2020 2066 6f72 2073 7562           for sub
-0000c640: 5f65 6e74 7279 2069 6e20 7375 625f 6974  _entry in sub_it
-0000c650: 656d 2e73 706c 6974 2822 5c6e 2229 3a0d  em.split("\n"):.
-0000c660: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000c670: 2020 2020 2065 6e74 7279 203d 2073 7562       entry = sub
-0000c680: 5f65 6e74 7279 2e72 6570 6c61 6365 2822  _entry.replace("
-0000c690: 2d22 2c22 2229 2e72 6570 6c61 6365 2822  -","").replace("
-0000c6a0: 2b22 2c22 2229 2e73 7472 6970 2829 0d0a  +","").strip()..
-0000c6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c6c0: 2020 2020 6966 2065 6e74 7279 2021 3d20      if entry != 
-0000c6d0: 2022 223a 0d0a 2020 2020 2020 2020 2020   "":..          
-0000c6e0: 2020 2020 2020 2020 2020 2020 2020 6d79                my
-0000c6f0: 5f69 7465 6d73 2e61 7070 656e 6428 656e  _items.append(en
-0000c700: 7472 7929 0d0a 0d0a 2020 2020 2020 2020  try)....        
-0000c710: 2020 2020 7365 6c66 2e64 7261 7763 616e      self.drawcan
-0000c720: 7661 732e 6164 645f 636f 6e6e 6563 7469  vas.add_connecti
-0000c730: 6f6e 2862 6f78 312c 626f 7832 2c20 6e61  on(box1,box2, na
-0000c740: 6d65 3d20 6461 7461 5b22 7368 6f72 746e  me= data["shortn
-0000c750: 616d 6522 5d2c 7375 626a 6563 743d 6461  ame"],subject=da
-0000c760: 7461 5b22 7375 626a 6563 7422 5d2c 6974  ta["subject"],it
-0000c770: 656d 733d 6d79 5f69 7465 6d73 290d 0a0d  ems=my_items)...
-0000c780: 0a20 2020 2020 2020 2020 2020 2023 2075  .            # u
-0000c790: 7064 6174 6520 7468 6520 6669 6c74 6572  pdate the filter
-0000c7a0: 2076 616c 7565 730d 0a20 2020 2020 2020   values..       
-0000c7b0: 2020 2020 2066 6f72 2065 6e74 7279 2069       for entry i
-0000c7c0: 6e20 6d79 5f69 7465 6d73 3a0d 0a20 2020  n my_items:..   
-0000c7d0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000c7e0: 656e 7472 7920 6e6f 7420 696e 2073 656c  entry not in sel
-0000c7f0: 662e 6669 6c74 6572 5f65 6e74 7269 6573  f.filter_entries
-0000c800: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0000c810: 2020 2020 2020 2073 656c 662e 6669 6c74         self.filt
-0000c820: 6572 5f65 6e74 7269 6573 2e61 7070 656e  er_entries.appen
-0000c830: 6428 656e 7472 7929 0d0a 0d0a 2020 2020  d(entry)....    
-0000c840: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-0000c850: 2020 2020 2020 2320 7365 6172 6368 2066        # search f
-0000c860: 6f72 2061 206d 6174 6368 2069 6e20 7468  or a match in th
-0000c870: 6520 6669 6c74 6572 0d0a 0d0a 2020 2020  e filter....    
-0000c880: 2020 2020 2020 2020 666f 756e 645f 6964          found_id
-0000c890: 7873 203d 205b 5d0d 0a20 2020 2020 2020  xs = []..       
-0000c8a0: 2020 2020 2073 6561 7263 685f 7374 7220       search_str 
-0000c8b0: 3d20 7365 6c66 2e46 696c 7465 726c 696e  = self.Filterlin
-0000c8c0: 6545 6469 742e 7465 7874 2829 0d0a 0d0a  eEdit.text()....
-0000c8d0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-0000c8e0: 6561 7263 685f 7374 7220 213d 2022 223a  earch_str != "":
-0000c8f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000c900: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
-0000c910: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-0000c920: 6920 696e 2072 616e 6765 2873 656c 662e  i in range(self.
-0000c930: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
-0000c940: 726f 7743 6f75 6e74 2829 293a 0d0a 0d0a  rowCount()):....
-0000c950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c960: 2020 2020 2020 2020 666f 7220 6a20 696e          for j in
-0000c970: 2072 616e 6765 2873 656c 662e 7472 616e   range(self.tran
-0000c980: 7361 6374 696f 6e56 6965 772e 636f 6c75  sactionView.colu
-0000c990: 6d6e 436f 756e 7428 2929 3a0d 0a0d 0a20  mnCount()):.... 
-0000c9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c9b0: 2020 2020 2020 2020 2020 2065 6e74 7279             entry
-0000c9c0: 5f73 7472 203d 2073 656c 662e 7472 616e  _str = self.tran
-0000c9d0: 7361 6374 696f 6e56 6965 772e 6974 656d  sactionView.item
-0000c9e0: 2869 2c6a 292e 7465 7874 2829 0d0a 0d0a  (i,j).text()....
-0000c9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ca00: 2020 2020 2020 2020 2020 2020 6966 2065              if e
-0000ca10: 6e74 7279 5f73 7472 2e66 696e 6428 7365  ntry_str.find(se
-0000ca20: 6172 6368 5f73 7472 2920 3e20 2d31 3a0d  arch_str) > -1:.
-0000ca30: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0000ca40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ca50: 2020 2066 6f75 6e64 5f69 6478 732e 6170     found_idxs.ap
-0000ca60: 7065 6e64 2869 290d 0a20 2020 2020 2020  pend(i)..       
-0000ca70: 2020 2020 2020 2020 2065 7863 6570 7420           except 
-0000ca80: 4578 6365 7074 696f 6e20 6173 2065 3a0d  Exception as e:.
-0000ca90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000caa0: 2020 2020 2070 7269 6e74 2822 4578 6365       print("Exce
-0000cab0: 7074 696f 6e3a 222c 2073 7472 2865 2929  ption:", str(e))
-0000cac0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0000cad0: 666f 7220 666f 756e 645f 6964 7820 696e  for found_idx in
-0000cae0: 2066 6f75 6e64 5f69 6478 733a 0d0a 2020   found_idxs:..  
-0000caf0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0000cb00: 6869 6768 6c69 6768 7420 6f63 6375 7261  highlight occura
-0000cb10: 6e63 6573 0d0a 2020 2020 2020 2020 2020  nces..          
-0000cb20: 2020 2020 2020 666f 7220 6a20 696e 2072        for j in r
-0000cb30: 616e 6765 2873 656c 662e 7472 616e 7361  ange(self.transa
-0000cb40: 6374 696f 6e56 6965 772e 636f 6c75 6d6e  ctionView.column
-0000cb50: 436f 756e 7428 2929 3a0d 0a20 2020 2020  Count()):..     
-0000cb60: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0000cb70: 7279 3a0d 0a0d 0a20 2020 2020 2020 2020  ry:....         
-0000cb80: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000cb90: 6620 7365 6c66 2e74 6865 6d65 5f6d 616e  f self.theme_man
-0000cba0: 6167 6572 2e74 6865 6d65 203d 3d20 2262  ager.theme == "b
-0000cbb0: 7269 6768 7422 3a0d 0a0d 0a20 2020 2020  right":....     
-0000cbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cbd0: 2020 2020 2020 2023 206c 6967 6874 206d         # light m
-0000cbe0: 6f64 650d 0a20 2020 2020 2020 2020 2020  ode..           
+0000b250: 2020 2020 2020 7072 696e 7428 2253 4f4d        print("SOM
+0000b260: 4554 4849 4e47 2057 454e 5420 5752 4f4e  ETHING WENT WRON
+0000b270: 4722 290d 0a20 2020 2020 2020 2020 2020  G")..           
+0000b280: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+0000b290: 6e74 2873 7472 2865 2929 0d0a 0d0a 2020  nt(str(e))....  
+0000b2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b2b0: 2020 230d 0a20 2020 2020 2020 2020 2020    #..           
+0000b2c0: 2020 2020 2020 2020 200d 0a20 2020 2020           ..     
+0000b2d0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000b2e0: 656c 662e 6472 6177 6361 6e76 6173 2e63  elf.drawcanvas.c
+0000b2f0: 6f64 655f 6461 7461 203d 2074 7261 6e73  ode_data = trans
+0000b300: 6163 7469 6f6e 5f64 6174 615b 2261 6765  action_data["age
+0000b310: 6e74 7322 5d0d 0a20 2020 2020 2020 2020  nts"]..         
+0000b320: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+0000b330: 2822 434f 4445 2044 4154 4122 2c74 7261  ("CODE DATA",tra
+0000b340: 6e73 6163 7469 6f6e 5f64 6174 615b 2261  nsaction_data["a
+0000b350: 6765 6e74 7322 5d29 0d0a 0d0a 2020 2020  gents"])....    
+0000b360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b370: 2320 6d6f 7665 2074 6865 2062 6f78 6573  # move the boxes
+0000b380: 2074 6f20 7468 6520 7361 7665 6420 706f   to the saved po
+0000b390: 7369 7469 6f6e 730d 0a20 2020 2020 2020  sitions..       
+0000b3a0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0000b3b0: 662e 6472 6177 6361 6e76 6173 2e72 6570  f.drawcanvas.rep
+0000b3c0: 6f73 6974 696f 6e28 7472 616e 7361 6374  osition(transact
+0000b3d0: 696f 6e5f 6461 7461 5b22 626f 785f 706f  ion_data["box_po
+0000b3e0: 7369 7469 6f6e 7322 5d29 0d0a 0d0a 2020  sitions"])....  
+0000b3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b400: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
+0000b410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b420: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
+0000b430: 7265 706f 7369 7469 6f6e 5f6c 6162 656c  reposition_label
+0000b440: 7328 7472 616e 7361 6374 696f 6e5f 6461  s(transaction_da
+0000b450: 7461 5b22 6c61 6265 6c5f 706f 7369 7469  ta["label_positi
+0000b460: 6f6e 7322 5d29 0d0a 2020 2020 2020 2020  ons"])..        
+0000b470: 2020 2020 2020 2020 2020 2020 6578 6365              exce
+0000b480: 7074 3a0d 0a20 2020 2020 2020 2020 2020  pt:..           
+0000b490: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+0000b4a0: 6e74 2822 436f 756c 6420 6e6f 7420 6c6f  nt("Could not lo
+0000b4b0: 6164 206c 6162 656c 2070 6f73 6974 696f  ad label positio
+0000b4c0: 6e73 2e20 5265 7365 7474 696e 6720 746f  ns. Resetting to
+0000b4d0: 207a 6572 6f2e 2229 0d0a 0d0a 2020 2020   zero.")....    
+0000b4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b4f0: 7365 6c66 2e73 6574 7469 6e67 735f 7374  self.settings_st
+0000b500: 7220 3d20 7472 616e 7361 6374 696f 6e5f  r = transaction_
+0000b510: 6461 7461 5b22 7365 7474 696e 6773 225d  data["settings"]
+0000b520: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0000b530: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+0000b540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b550: 2020 2020 2020 7365 6c66 2e6d 6169 6e6c        self.mainl
+0000b560: 6f6f 705f 7374 7220 3d20 7472 616e 7361  oop_str = transa
+0000b570: 6374 696f 6e5f 6461 7461 5b22 6d61 696e  ction_data["main
+0000b580: 6c6f 6f70 225d 0d0a 2020 2020 2020 2020  loop"]..        
+0000b590: 2020 2020 2020 2020 2020 2020 6578 6365              exce
+0000b5a0: 7074 3a0d 0a20 2020 2020 2020 2020 2020  pt:..           
+0000b5b0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+0000b5c0: 6e74 2822 4e4f 204d 4149 4e4c 4f4f 5020  nt("NO MAINLOOP 
+0000b5d0: 464f 4e44 2e20 534b 4950 5049 4e47 2229  FOND. SKIPPING")
+0000b5e0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0000b5f0: 2020 2020 2020 2020 7365 6c66 2e73 7461          self.sta
+0000b600: 7475 7342 6172 2829 2e73 686f 774d 6573  tusBar().showMes
+0000b610: 7361 6765 2822 4f70 656e 6564 2066 696c  sage("Opened fil
+0000b620: 6520 2220 2b20 6669 6c65 6e61 6d65 290d  e " + filename).
+0000b630: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000b640: 2020 2065 7863 6570 743a 0d0a 0d0a 2020     except:....  
+0000b650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b660: 2020 2320 6f6c 6420 666f 726d 6174 2061    # old format a
+0000b670: 7320 6661 6c6c 6261 636b 0d0a 2020 2020  s fallback..    
+0000b680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b690: 7365 6c66 2e65 6e74 7279 5f64 6174 6120  self.entry_data 
+0000b6a0: 3d20 7472 616e 7361 6374 696f 6e5f 6461  = transaction_da
+0000b6b0: 7461 0d0a 2020 2020 2020 2020 2020 2020  ta..            
+0000b6c0: 2020 2020 2020 2020 7365 6c66 2e64 7261          self.dra
+0000b6d0: 7763 616e 7661 732e 636f 6465 5f64 6174  wcanvas.code_dat
+0000b6e0: 6120 3d20 7472 616e 7361 6374 696f 6e5f  a = transaction_
+0000b6f0: 6461 7461 5b22 6167 656e 7473 225d 0d0a  data["agents"]..
+0000b700: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b710: 2020 2020 7365 6c66 2e75 7064 6174 655f      self.update_
+0000b720: 7461 626c 6528 290d 0a20 2020 2020 2020  table()..       
+0000b730: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+0000b740: 6e74 2822 7741 524e 494e 4720 2d20 4641  nt("wARNING - FA
+0000b750: 4c4c 4241 434b 2054 4f20 4f4c 4420 4649  LLBACK TO OLD FI
+0000b760: 4c45 2046 4f52 4d41 5421 2229 0d0a 0d0a  LE FORMAT!")....
+0000b770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b780: 2320 7365 6c66 2e66 696c 6545 6469 742e  # self.fileEdit.
+0000b790: 7365 7454 6578 7428 6669 6c65 6e61 6d65  setText(filename
+0000b7a0: 290d 0a0d 0a20 2020 2020 2020 2065 7863  )....        exc
+0000b7b0: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
+0000b7c0: 2065 203a 0d0a 0d0a 2020 2020 2020 2020   e :....        
+0000b7d0: 2020 2020 2320 7365 6c66 2e6e 6f74 6966      # self.notif
+0000b7e0: 7928 6d65 7373 6167 653d 2253 6f6d 6574  y(message="Somet
+0000b7f0: 6869 6e67 2077 656e 7420 7772 6f6e 6720  hing went wrong 
+0000b800: 7768 656e 206f 7065 6e69 6e67 2074 6865  when opening the
+0000b810: 2066 696c 653a 5c6e 2025 7322 2573 7472   file:\n %s"%str
+0000b820: 2865 292c 7469 746c 653d 2245 7272 6f72  (e),title="Error
+0000b830: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
+0000b840: 7365 6c66 2e66 696c 656e 616d 6520 3d20  self.filename = 
+0000b850: 6669 6c65 6e61 6d65 5f62 6163 6b75 700d  filename_backup.
+0000b860: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0000b870: 662e 6375 7265 6e74 5f66 696c 6520 3d20  f.curent_file = 
+0000b880: 6375 7272 656e 745f 6669 6c65 5f62 6163  current_file_bac
+0000b890: 6b75 700d 0a20 2020 2020 2020 2020 2020  kup..           
+0000b8a0: 2069 6620 7374 7228 7365 6c66 2e63 7572   if str(self.cur
+0000b8b0: 7265 6e74 5f66 696c 6529 2021 3d20 2222  rent_file) != ""
+0000b8c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000b8d0: 2020 2073 656c 662e 7374 6174 7573 4261     self.statusBa
+0000b8e0: 7228 292e 7368 6f77 4d65 7373 6167 6528  r().showMessage(
+0000b8f0: 2243 616e 6365 6c6c 6564 2e20 5265 7374  "Cancelled. Rest
+0000b900: 6f72 6564 2066 696c 6520 2725 7327 2220  ored file '%s'" 
+0000b910: 2520 7374 7228 7365 6c66 2e63 7572 7265  % str(self.curre
+0000b920: 6e74 5f66 696c 6529 290d 0a0d 0a20 2020  nt_file))....   
+0000b930: 2020 2020 2023 2075 7064 6174 6520 7472       # update tr
+0000b940: 616e 7361 6374 696f 6e20 7461 626c 650d  ansaction table.
+0000b950: 0a20 2020 2020 2020 2073 656c 662e 7570  .        self.up
+0000b960: 6461 7465 5f74 6162 6c65 2829 0d0a 0d0a  date_table()....
+0000b970: 2020 2020 2020 2020 2320 7570 6461 7465          # update
+0000b980: 2074 6865 6d65 0d0a 2020 2020 2020 2020   theme..        
+0000b990: 7365 6c66 2e74 6865 6d65 5f6d 616e 6167  self.theme_manag
+0000b9a0: 6572 2e72 6573 746f 7265 2829 0d0a 0d0a  er.restore()....
+0000b9b0: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+0000b9c0: 2020 2020 2020 2020 2020 666e 616d 652c            fname,
+0000b9d0: 2066 696c 655f 6578 7465 6e73 696f 6e20   file_extension 
+0000b9e0: 3d20 6f73 2e70 6174 682e 7370 6c69 7465  = os.path.splite
+0000b9f0: 7874 2873 656c 662e 6669 6c65 6e61 6d65  xt(self.filename
+0000ba00: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+0000ba10: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
+0000ba20: 722e 6c6f 6164 5f63 6f6c 6f72 7328 666e  r.load_colors(fn
+0000ba30: 616d 6520 2b20 222e 7366 6374 6865 6d65  ame + ".sfctheme
+0000ba40: 2229 0d0a 0d0a 2020 2020 2020 2020 6578  ")....        ex
+0000ba50: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
+0000ba60: 7320 653a 0d0a 2020 2020 2020 2020 2020  s e:..          
+0000ba70: 2020 7072 696e 7428 2263 6f75 6c64 206e    print("could n
+0000ba80: 6f74 206c 6f61 6420 7468 656d 653a 2022  ot load theme: "
+0000ba90: 2c20 7374 7228 6529 290d 0a0d 0a20 2020  , str(e))....   
+0000baa0: 2020 2020 2023 2075 7064 6174 6520 626f       # update bo
+0000bab0: 7865 730d 0a20 2020 2020 2020 2066 6f72  xes..        for
+0000bac0: 2062 6f78 2069 6e20 7365 6c66 2e64 7261   box in self.dra
+0000bad0: 7763 616e 7661 732e 626f 7865 733a 0d0a  wcanvas.boxes:..
+0000bae0: 2020 2020 2020 2020 2020 2020 626f 782e              box.
+0000baf0: 6564 6974 5f61 6765 6e74 2829 0d0a 0d0a  edit_agent()....
+0000bb00: 2020 2020 6465 6620 656e 7472 795f 746f      def entry_to
+0000bb10: 5f76 616c 7328 7365 6c66 2c65 6e74 7279  _vals(self,entry
+0000bb20: 2c20 6167 656e 742c 7768 6963 6829 3a0d  , agent,which):.
+0000bb30: 0a0d 0a20 2020 2020 2020 2069 6620 6e6f  ...        if no
+0000bb40: 7420 626f 6f6c 2872 6567 6578 2e66 696e  t bool(regex.fin
+0000bb50: 6461 6c6c 2822 285b 2b2d 5d2b 2922 2c20  dall("([+-]+)", 
+0000bb60: 656e 7472 7929 293a 0d0a 2020 2020 2020  entry)):..      
+0000bb70: 2020 2020 2020 7365 6c66 2e6e 6f74 6966        self.notif
+0000bb80: 7928 6d65 7373 6167 653d 2253 6967 6e20  y(message="Sign 
+0000bb90: 636f 7272 7570 7465 6420 696e 2065 6e74  corrupted in ent
+0000bba0: 7279 2025 7320 2825 7320 6f66 2025 7329  ry %s (%s of %s)
+0000bbb0: 2225 2865 6e74 7279 2c77 6869 6368 2c61  "%(entry,which,a
+0000bbc0: 6765 6e74 292c 7469 746c 653d 2245 7272  gent),title="Err
+0000bbd0: 6f72 2229 0d0a 2020 2020 2020 2020 2020  or")..          
+0000bbe0: 2020 7265 7475 726e 204e 6f6e 652c 204e    return None, N
+0000bbf0: 6f6e 652c 204e 6f6e 650d 0a0d 0a20 2020  one, None....   
+0000bc00: 2020 2020 2069 6620 7265 6765 782e 6669       if regex.fi
+0000bc10: 6e64 616c 6c28 2228 5b2b 2d5d 2b29 222c  ndall("([+-]+)",
+0000bc20: 2065 6e74 7279 295b 305d 203d 3d20 222d   entry)[0] == "-
+0000bc30: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+0000bc40: 7369 676e 203d 2022 2d22 0d0a 2020 2020  sign = "-"..    
+0000bc50: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
+0000bc60: 2020 2020 2020 2073 6967 6e20 3d20 222b         sign = "+
+0000bc70: 220d 0a0d 0a20 2020 2020 2020 2077 6f72  "....        wor
+0000bc80: 6473 203d 2072 6567 6578 2e66 696e 6461  ds = regex.finda
+0000bc90: 6c6c 2822 285b 5c77 5c73 5d2b 2922 2c20  ll("([\w\s]+)", 
+0000bca0: 656e 7472 7929 0d0a 0d0a 2020 2020 2020  entry)....      
+0000bcb0: 2020 6974 656d 203d 2022 220d 0a20 2020    item = ""..   
+0000bcc0: 2020 2020 2073 696c 656e 7420 3d20 4661       silent = Fa
+0000bcd0: 6c73 650d 0a20 2020 2020 2020 2066 6f72  lse..        for
+0000bce0: 2077 6f72 6420 696e 2077 6f72 6473 3a0d   word in words:.
+0000bcf0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000bd00: 776f 7264 2021 3d20 2273 223a 0d0a 2020  word != "s":..  
+0000bd10: 2020 2020 2020 2020 2020 2020 2020 6974                it
+0000bd20: 656d 202b 3d20 776f 7264 2e73 7472 6970  em += word.strip
+0000bd30: 2829 202b 2022 2022 0d0a 2020 2020 2020  () + " "..      
+0000bd40: 2020 2020 2020 656c 6966 2077 6f72 6420        elif word 
+0000bd50: 3d3d 2022 7322 3a0d 0a20 2020 2020 2020  == "s":..       
+0000bd60: 2020 2020 2020 2020 2073 696c 656e 7420           silent 
+0000bd70: 3d20 5472 7565 0d0a 0d0a 2020 2020 2020  = True....      
+0000bd80: 2020 6974 656d 203d 2069 7465 6d2e 7374    item = item.st
+0000bd90: 7269 7028 290d 0a0d 0a20 2020 2020 2020  rip()....       
+0000bda0: 2072 6574 7572 6e20 7369 676e 2c20 6974   return sign, it
+0000bdb0: 656d 2c20 7369 6c65 6e74 0d0a 0d0a 0d0a  em, silent......
+0000bdc0: 2020 2020 6465 6620 7570 6461 7465 5f74      def update_t
+0000bdd0: 6162 6c65 2873 656c 6629 3a0d 0a20 2020  able(self):..   
+0000bde0: 2020 2020 2023 7365 6c66 2e73 656c 6563       #self.selec
+0000bdf0: 7469 6f6e 5f69 6478 203d 204e 6f6e 650d  tion_idx = None.
+0000be00: 0a20 2020 2020 2020 2073 656c 662e 7472  .        self.tr
+0000be10: 616e 7361 6374 696f 6e56 6965 772e 7365  ansactionView.se
+0000be20: 7452 6f77 436f 756e 7428 3029 0d0a 0d0a  tRowCount(0)....
+0000be30: 2020 2020 2020 2020 2320 7365 6c66 2e74          # self.t
+0000be40: 7261 6e73 6163 7469 6f6e 5669 6577 2e6d  ransactionView.m
+0000be50: 6f64 656c 2829 2e73 6574 546f 7269 7a6f  odel().setTorizo
+0000be60: 6e74 616c 4865 6164 6572 4974 656d 2820  ntalHeaderItem( 
+0000be70: 302c 2051 5461 626c 6557 6964 6765 7449  0, QTableWidgetI
+0000be80: 7465 6d28 224e 616d 6522 2929 0d0a 2020  tem("Name"))..  
+0000be90: 2020 2020 2020 2320 7365 6c66 2e74 7261        # self.tra
+0000bea0: 6e73 6163 7469 6f6e 5669 6577 2e6d 6f64  nsactionView.mod
+0000beb0: 656c 2829 2e73 6574 546f 7269 7a6f 6e74  el().setTorizont
+0000bec0: 616c 4865 6164 6572 4974 656d 2820 312c  alHeaderItem( 1,
+0000bed0: 2051 5461 626c 6557 6964 6765 7449 7465   QTableWidgetIte
+0000bee0: 6d28 2253 686f 7274 204e 616d 6522 2929  m("Short Name"))
+0000bef0: 0d0a 2020 2020 2020 2020 2320 7365 6c66  ..        # self
+0000bf00: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
+0000bf10: 2e6d 6f64 656c 2829 2e73 6574 546f 7269  .model().setTori
+0000bf20: 7a6f 6e74 616c 4865 6164 6572 4974 656d  zontalHeaderItem
+0000bf30: 2820 322c 2051 5461 626c 6557 6964 6765  ( 2, QTableWidge
+0000bf40: 7449 7465 6d28 2255 6e69 6469 7265 6374  tItem("Unidirect
+0000bf50: 696f 6e61 6c22 2929 0d0a 2020 2020 2020  ional"))..      
+0000bf60: 2020 2320 7365 6c66 2e74 7261 6e73 6163    # self.transac
+0000bf70: 7469 6f6e 5669 6577 2e6d 6f64 656c 2829  tionView.model()
+0000bf80: 2e73 6574 546f 7269 7a6f 6e74 616c 4865  .setTorizontalHe
+0000bf90: 6164 6572 4974 656d 2820 332c 2051 5461  aderItem( 3, QTa
+0000bfa0: 626c 6557 6964 6765 7449 7465 6d28 2246  bleWidgetItem("F
+0000bfb0: 6c6f 7722 2929 0d0a 0d0a 2020 2020 2020  low"))....      
+0000bfc0: 2020 2320 696e 7365 7274 206e 6577 2072    # insert new r
+0000bfd0: 6f77 7320 6966 206e 6565 6465 640d 0a20  ows if needed.. 
+0000bfe0: 2020 2020 2020 2072 6f77 5f63 6f75 6e74         row_count
+0000bff0: 203d 2073 656c 662e 7472 616e 7361 6374   = self.transact
+0000c000: 696f 6e56 6965 772e 726f 7743 6f75 6e74  ionView.rowCount
+0000c010: 2829 0d0a 0d0a 2020 2020 2020 2020 6966  ()....        if
+0000c020: 2073 656c 662e 656e 7472 795f 6461 7461   self.entry_data
+0000c030: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
+0000c040: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
+0000c050: 6679 2822 4461 7461 2069 7320 656d 7074  fy("Data is empt
+0000c060: 7920 6f72 2063 6f72 7275 7074 6564 2e20  y or corrupted. 
+0000c070: 536f 6d65 7468 696e 6720 7765 6e74 2077  Something went w
+0000c080: 726f 6e67 222c 2074 6974 6c65 3d22 4661  rong", title="Fa
+0000c090: 7461 6c20 4572 726f 7222 290d 0a20 2020  tal Error")..   
+0000c0a0: 2020 2020 2020 2020 2072 6574 7572 6e0d           return.
+0000c0b0: 0a0d 0a20 2020 2020 2020 2069 6620 726f  ...        if ro
+0000c0c0: 775f 636f 756e 7420 3c20 6c65 6e28 7365  w_count < len(se
+0000c0d0: 6c66 2e65 6e74 7279 5f64 6174 6129 3a0d  lf.entry_data):.
+0000c0e0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+0000c0f0: 2069 2069 6e20 7261 6e67 6528 6c65 6e28   i in range(len(
+0000c100: 7365 6c66 2e65 6e74 7279 5f64 6174 6129  self.entry_data)
+0000c110: 2d72 6f77 5f63 6f75 6e74 293a 0d0a 2020  -row_count):..  
+0000c120: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0000c130: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
+0000c140: 6577 2e69 6e73 6572 7452 6f77 2872 6f77  ew.insertRow(row
+0000c150: 5f63 6f75 6e74 290d 0a0d 0a20 2020 2020  _count)....     
+0000c160: 2020 2073 656c 662e 6472 6177 6361 6e76     self.drawcanv
+0000c170: 6173 2e63 6c65 6172 2829 0d0a 2020 2020  as.clear()..    
+0000c180: 2020 2020 7365 6c66 2e66 696c 7465 7243      self.filterC
+0000c190: 6f6d 626f 2e63 6c65 6172 2829 0d0a 2020  ombo.clear()..  
+0000c1a0: 2020 2020 2020 7365 6c66 2e66 696c 7465        self.filte
+0000c1b0: 725f 656e 7472 6965 7320 3d20 5b5d 0d0a  r_entries = []..
+0000c1c0: 0d0a 2020 2020 2020 2020 666f 7220 692c  ..        for i,
+0000c1d0: 6461 7461 2069 6e20 656e 756d 6572 6174  data in enumerat
+0000c1e0: 6528 7365 6c66 2e65 6e74 7279 5f64 6174  e(self.entry_dat
+0000c1f0: 6129 3a0d 0a20 2020 2020 2020 2020 2020  a):..           
+0000c200: 2023 2065 7869 7374 7331 203d 2073 656c   # exists1 = sel
+0000c210: 662e 6472 6177 6361 6e76 6173 2e63 6865  f.drawcanvas.che
+0000c220: 636b 5f65 7869 7374 2864 6174 615b 2261  ck_exist(data["a
+0000c230: 6765 6e74 3122 5d2e 6361 7069 7461 6c69  gent1"].capitali
+0000c240: 7a65 2829 290d 0a20 2020 2020 2020 2020  ze())..         
+0000c250: 2020 2023 2065 7869 7374 7332 203d 2073     # exists2 = s
+0000c260: 656c 662e 6472 6177 6361 6e76 6173 2e63  elf.drawcanvas.c
+0000c270: 6865 636b 5f65 7869 7374 2864 6174 615b  heck_exist(data[
+0000c280: 2261 6765 6e74 3222 5d2e 6361 7069 7461  "agent2"].capita
+0000c290: 6c69 7a65 2829 290d 0a0d 0a20 2020 2020  lize())....     
+0000c2a0: 2020 2020 2020 2062 6f78 3120 3d20 7365         box1 = se
+0000c2b0: 6c66 2e64 7261 7763 616e 7661 732e 6164  lf.drawcanvas.ad
+0000c2c0: 645f 6167 656e 7428 6361 6d65 6c28 6461  d_agent(camel(da
+0000c2d0: 7461 5b22 6167 656e 7431 225d 2929 2023  ta["agent1"])) #
+0000c2e0: 202e 6361 7069 7461 6c69 7a65 2829 290d   .capitalize()).
+0000c2f0: 0a20 2020 2020 2020 2020 2020 2062 6f78  .            box
+0000c300: 3220 3d20 7365 6c66 2e64 7261 7763 616e  2 = self.drawcan
+0000c310: 7661 732e 6164 645f 6167 656e 7428 6361  vas.add_agent(ca
+0000c320: 6d65 6c28 6461 7461 5b22 6167 656e 7432  mel(data["agent2
+0000c330: 225d 2929 2023 2e63 6170 6974 616c 697a  "])) #.capitaliz
+0000c340: 6528 2929 0d0a 0d0a 2020 2020 2020 2020  e())....        
+0000c350: 2020 2020 2320 636f 7272 6563 7420 6e75      # correct nu
+0000c360: 6d62 6572 206f 6620 636f 6e6e 6563 7469  mber of connecti
+0000c370: 6f6e 7320 666f 7220 6578 6973 7469 6e67  ons for existing
+0000c380: 2061 6765 6e74 730d 0a20 2020 2020 2020   agents..       
+0000c390: 2020 2020 2062 6f78 312e 6e5f 636f 6e6e       box1.n_conn
+0000c3a0: 6563 7469 6f6e 7320 3d20 300d 0a20 2020  ections = 0..   
+0000c3b0: 2020 2020 2020 2020 2062 6f78 322e 6e5f           box2.n_
+0000c3c0: 636f 6e6e 6563 7469 6f6e 7320 3d20 300d  connections = 0.
+0000c3d0: 0a0d 0a20 2020 2020 2020 2023 2075 7064  ...        # upd
+0000c3e0: 6174 6520 7468 6520 6461 7461 0d0a 2020  ate the data..  
+0000c3f0: 2020 2020 2020 666f 7220 692c 2064 6174        for i, dat
+0000c400: 6120 696e 2065 6e75 6d65 7261 7465 2873  a in enumerate(s
+0000c410: 656c 662e 656e 7472 795f 6461 7461 293a  elf.entry_data):
+0000c420: 0d0a 2020 2020 2020 2020 2020 2020 7072  ..            pr
+0000c430: 696e 7428 6461 7461 290d 0a0d 0a20 2020  int(data)....   
+0000c440: 2020 2020 2020 2020 2073 656c 662e 7472           self.tr
+0000c450: 616e 7361 6374 696f 6e56 6965 772e 7365  ansactionView.se
+0000c460: 7449 7465 6d28 692c 2030 2c20 5154 6162  tItem(i, 0, QTab
+0000c470: 6c65 5769 6467 6574 4974 656d 2864 6174  leWidgetItem(dat
+0000c480: 615b 2273 7562 6a65 6374 225d 2929 0d0a  a["subject"]))..
+0000c490: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000c4a0: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
+0000c4b0: 2e73 6574 4974 656d 2869 2c20 312c 2051  .setItem(i, 1, Q
+0000c4c0: 5461 626c 6557 6964 6765 7449 7465 6d28  TableWidgetItem(
+0000c4d0: 6361 6d65 6c28 6461 7461 5b22 6167 656e  camel(data["agen
+0000c4e0: 7431 225d 2929 2920 2320 2e63 6170 6974  t1"]))) # .capit
+0000c4f0: 616c 697a 6528 2929 290d 0a20 2020 2020  alize()))..     
+0000c500: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
+0000c510: 7361 6374 696f 6e56 6965 772e 7365 7449  sactionView.setI
+0000c520: 7465 6d28 692c 2032 2c20 5154 6162 6c65  tem(i, 2, QTable
+0000c530: 5769 6467 6574 4974 656d 2863 616d 656c  WidgetItem(camel
+0000c540: 2864 6174 615b 2261 6765 6e74 3222 5d29  (data["agent2"])
+0000c550: 2929 2023 202e 6361 7069 7461 6c69 7a65  )) # .capitalize
+0000c560: 2829 2929 0d0a 2020 2020 2020 2020 2020  ()))..          
+0000c570: 2020 7365 6c66 2e74 7261 6e73 6163 7469    self.transacti
+0000c580: 6f6e 5669 6577 2e73 6574 4974 656d 2869  onView.setItem(i
+0000c590: 2c20 332c 2051 5461 626c 6557 6964 6765  , 3, QTableWidge
+0000c5a0: 7449 7465 6d28 6461 7461 5b22 7368 6f72  tItem(data["shor
+0000c5b0: 746e 616d 6522 5d29 290d 0a20 2020 2020  tname"]))..     
+0000c5c0: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
+0000c5d0: 7361 6374 696f 6e56 6965 772e 7365 7449  sactionView.setI
+0000c5e0: 7465 6d28 692c 2034 2c20 5154 6162 6c65  tem(i, 4, QTable
+0000c5f0: 5769 6467 6574 4974 656d 2864 6174 615b  WidgetItem(data[
+0000c600: 226b 696e 6422 5d29 290d 0a20 2020 2020  "kind"]))..     
+0000c610: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
+0000c620: 7361 6374 696f 6e56 6965 772e 7365 7449  sactionView.setI
+0000c630: 7465 6d28 692c 2035 2c20 5154 6162 6c65  tem(i, 5, QTable
+0000c640: 5769 6467 6574 4974 656d 2873 7472 2864  WidgetItem(str(d
+0000c650: 6174 615b 2275 6e69 2d64 6972 6563 7469  ata["uni-directi
+0000c660: 6f6e 616c 225d 2929 290d 0a20 2020 2020  onal"])))..     
+0000c670: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
+0000c680: 7361 6374 696f 6e56 6965 772e 7365 7449  sactionView.setI
+0000c690: 7465 6d28 692c 2036 2c20 5154 6162 6c65  tem(i, 6, QTable
+0000c6a0: 5769 6467 6574 4974 656d 2873 7472 2864  WidgetItem(str(d
+0000c6b0: 6174 615b 2271 7561 6e74 6974 7922 5d29  ata["quantity"])
+0000c6c0: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
+0000c6d0: 2320 7365 6c66 2e74 7261 6e73 6163 7469  # self.transacti
+0000c6e0: 6f6e 5669 6577 2e73 656c 6563 7469 6f6e  onView.selection
+0000c6f0: 4d6f 6465 6c28 292e 7365 6c65 6374 6564  Model().selected
+0000c700: 526f 7773 2829 0d0a 0d0a 2020 2020 2020  Rows()....      
+0000c710: 2020 2020 2020 626f 7831 203d 2073 656c        box1 = sel
+0000c720: 662e 6472 6177 6361 6e76 6173 2e61 6464  f.drawcanvas.add
+0000c730: 5f61 6765 6e74 2863 616d 656c 2864 6174  _agent(camel(dat
+0000c740: 615b 2261 6765 6e74 3122 5d29 2920 232e  a["agent1"])) #.
+0000c750: 6361 7069 7461 6c69 7a65 2829 290d 0a20  capitalize()).. 
+0000c760: 2020 2020 2020 2020 2020 2062 6f78 3220             box2 
+0000c770: 3d20 7365 6c66 2e64 7261 7763 616e 7661  = self.drawcanva
+0000c780: 732e 6164 645f 6167 656e 7428 6361 6d65  s.add_agent(came
+0000c790: 6c28 6461 7461 5b22 6167 656e 7432 225d  l(data["agent2"]
+0000c7a0: 2929 2023 2e63 6170 6974 616c 697a 6528  )) #.capitalize(
+0000c7b0: 2929 0d0a 0d0a 2020 2020 2020 2020 2020  ))....          
+0000c7c0: 2020 6d79 5f69 7465 6d73 203d 205b 5d0d    my_items = [].
+0000c7d0: 0a0d 0a20 2020 2020 2020 2020 2020 2061  ...            a
+0000c7e0: 6c6c 656e 7472 6965 7320 3d20 225c 6e22  llentries = "\n"
+0000c7f0: 2e6a 6f69 6e28 5b64 6174 615b 226c 3122  .join([data["l1"
+0000c800: 5d2c 2064 6174 615b 2261 3122 5d2c 2064  ], data["a1"], d
+0000c810: 6174 615b 2265 3122 5d2c 2064 6174 615b  ata["e1"], data[
+0000c820: 226c 3222 5d2c 2064 6174 615b 2261 3222  "l2"], data["a2"
+0000c830: 5d2c 2064 6174 615b 2265 3222 5d5d 290d  ], data["e2"]]).
+0000c840: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+0000c850: 2073 7562 5f69 7465 6d20 696e 2061 6c6c   sub_item in all
+0000c860: 656e 7472 6965 732e 7370 6c69 7428 225c  entries.split("\
+0000c870: 6e22 293a 0d0a 2020 2020 2020 2020 2020  n"):..          
+0000c880: 2020 2020 2020 666f 7220 7375 625f 656e        for sub_en
+0000c890: 7472 7920 696e 2073 7562 5f69 7465 6d2e  try in sub_item.
+0000c8a0: 7370 6c69 7428 225c 6e22 293a 0d0a 2020  split("\n"):..  
+0000c8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c8c0: 2020 656e 7472 7920 3d20 7375 625f 656e    entry = sub_en
+0000c8d0: 7472 792e 7265 706c 6163 6528 222d 222c  try.replace("-",
+0000c8e0: 2222 292e 7265 706c 6163 6528 222b 222c  "").replace("+",
+0000c8f0: 2222 292e 7374 7269 7028 290d 0a20 2020  "").strip()..   
+0000c900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c910: 2069 6620 656e 7472 7920 213d 2020 2222   if entry !=  ""
+0000c920: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000c930: 2020 2020 2020 2020 2020 206d 795f 6974             my_it
+0000c940: 656d 732e 6170 7065 6e64 2865 6e74 7279  ems.append(entry
+0000c950: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0000c960: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+0000c970: 2e61 6464 5f63 6f6e 6e65 6374 696f 6e28  .add_connection(
+0000c980: 626f 7831 2c62 6f78 322c 206e 616d 653d  box1,box2, name=
+0000c990: 2064 6174 615b 2273 686f 7274 6e61 6d65   data["shortname
+0000c9a0: 225d 2c73 7562 6a65 6374 3d64 6174 615b  "],subject=data[
+0000c9b0: 2273 7562 6a65 6374 225d 2c69 7465 6d73  "subject"],items
+0000c9c0: 3d6d 795f 6974 656d 7329 0d0a 0d0a 2020  =my_items)....  
+0000c9d0: 2020 2020 2020 2020 2020 2320 7570 6461            # upda
+0000c9e0: 7465 2074 6865 2066 696c 7465 7220 7661  te the filter va
+0000c9f0: 6c75 6573 0d0a 2020 2020 2020 2020 2020  lues..          
+0000ca00: 2020 666f 7220 656e 7472 7920 696e 206d    for entry in m
+0000ca10: 795f 6974 656d 733a 0d0a 2020 2020 2020  y_items:..      
+0000ca20: 2020 2020 2020 2020 2020 6966 2065 6e74            if ent
+0000ca30: 7279 206e 6f74 2069 6e20 7365 6c66 2e66  ry not in self.f
+0000ca40: 696c 7465 725f 656e 7472 6965 733a 0d0a  ilter_entries:..
+0000ca50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ca60: 2020 2020 7365 6c66 2e66 696c 7465 725f      self.filter_
+0000ca70: 656e 7472 6965 732e 6170 7065 6e64 2865  entries.append(e
+0000ca80: 6e74 7279 290d 0a0d 0a20 2020 2020 2020  ntry)....       
+0000ca90: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+0000caa0: 2020 2023 2073 6561 7263 6820 666f 7220     # search for 
+0000cab0: 6120 6d61 7463 6820 696e 2074 6865 2066  a match in the f
+0000cac0: 696c 7465 720d 0a0d 0a20 2020 2020 2020  ilter....       
+0000cad0: 2020 2020 2066 6f75 6e64 5f69 6478 7320       found_idxs 
+0000cae0: 3d20 5b5d 0d0a 2020 2020 2020 2020 2020  = []..          
+0000caf0: 2020 7365 6172 6368 5f73 7472 203d 2073    search_str = s
+0000cb00: 656c 662e 4669 6c74 6572 6c69 6e65 4564  elf.FilterlineEd
+0000cb10: 6974 2e74 6578 7428 290d 0a0d 0a20 2020  it.text()....   
+0000cb20: 2020 2020 2020 2020 2069 6620 7365 6172           if sear
+0000cb30: 6368 5f73 7472 2021 3d20 2222 3a0d 0a20  ch_str != "":.. 
+0000cb40: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+0000cb50: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
+0000cb60: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
+0000cb70: 6e20 7261 6e67 6528 7365 6c66 2e74 7261  n range(self.tra
+0000cb80: 6e73 6163 7469 6f6e 5669 6577 2e72 6f77  nsactionView.row
+0000cb90: 436f 756e 7428 2929 3a0d 0a0d 0a20 2020  Count()):....   
+0000cba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cbb0: 2020 2020 2066 6f72 206a 2069 6e20 7261       for j in ra
+0000cbc0: 6e67 6528 7365 6c66 2e74 7261 6e73 6163  nge(self.transac
+0000cbd0: 7469 6f6e 5669 6577 2e63 6f6c 756d 6e43  tionView.columnC
+0000cbe0: 6f75 6e74 2829 293a 0d0a 0d0a 2020 2020  ount()):....    
 0000cbf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cc00: 2073 656c 662e 7472 616e 7361 6374 696f   self.transactio
-0000cc10: 6e56 6965 772e 6974 656d 2866 6f75 6e64  nView.item(found
-0000cc20: 5f69 6478 2c20 6a29 2e73 6574 4261 636b  _idx, j).setBack
-0000cc30: 6772 6f75 6e64 2851 7447 7569 2e51 436f  ground(QtGui.QCo
-0000cc40: 6c6f 7228 3232 372c 2031 3636 2c20 3136  lor(227, 166, 16
-0000cc50: 3629 290d 0a20 2020 2020 2020 2020 2020  6))..           
-0000cc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cc70: 2073 656c 662e 7472 616e 7361 6374 696f   self.transactio
-0000cc80: 6e56 6965 772e 6974 656d 2866 6f75 6e64  nView.item(found
-0000cc90: 5f69 6478 2c20 6a29 2e73 6574 466f 7265  _idx, j).setFore
-0000cca0: 6772 6f75 6e64 2851 7447 7569 2e51 436f  ground(QtGui.QCo
-0000ccb0: 6c6f 7228 3138 302c 2031 382c 2031 3829  lor(180, 18, 18)
-0000ccc0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0000ccd0: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0000cce0: 653a 0d0a 0d0a 2020 2020 2020 2020 2020  e:....          
-0000ccf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cd00: 2020 2320 6461 726b 206d 6f64 650d 0a20    # dark mode.. 
-0000cd10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cd20: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000cd30: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
-0000cd40: 6974 656d 2866 6f75 6e64 5f69 6478 2c20  item(found_idx, 
-0000cd50: 6a29 2e73 6574 4261 636b 6772 6f75 6e64  j).setBackground
-0000cd60: 2851 7447 7569 2e51 436f 6c6f 7228 3132  (QtGui.QColor(12
-0000cd70: 302c 2031 3230 2c20 3132 3029 290d 0a20  0, 120, 120)).. 
-0000cd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cd90: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000cda0: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
-0000cdb0: 6974 656d 2866 6f75 6e64 5f69 6478 2c20  item(found_idx, 
-0000cdc0: 6a29 2e73 6574 466f 7265 6772 6f75 6e64  j).setForeground
-0000cdd0: 2851 7447 7569 2e51 436f 6c6f 7228 3530  (QtGui.QColor(50
-0000cde0: 2c20 3530 2c20 3530 2929 0d0a 0d0a 2020  , 50, 50))....  
-0000cdf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ce00: 2020 6578 6365 7074 3a0d 0a20 2020 2020    except:..     
+0000cc00: 2020 2020 2020 2020 656e 7472 795f 7374          entry_st
+0000cc10: 7220 3d20 7365 6c66 2e74 7261 6e73 6163  r = self.transac
+0000cc20: 7469 6f6e 5669 6577 2e69 7465 6d28 692c  tionView.item(i,
+0000cc30: 6a29 2e74 6578 7428 290d 0a0d 0a20 2020  j).text()....   
+0000cc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cc50: 2020 2020 2020 2020 2069 6620 656e 7472           if entr
+0000cc60: 795f 7374 722e 6669 6e64 2873 6561 7263  y_str.find(searc
+0000cc70: 685f 7374 7229 203e 202d 313a 0d0a 0d0a  h_str) > -1:....
+0000cc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cca0: 666f 756e 645f 6964 7873 2e61 7070 656e  found_idxs.appen
+0000ccb0: 6428 6929 0d0a 2020 2020 2020 2020 2020  d(i)..          
+0000ccc0: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
+0000ccd0: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
+0000cce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ccf0: 2020 7072 696e 7428 2245 7863 6570 7469    print("Excepti
+0000cd00: 6f6e 3a22 2c20 7374 7228 6529 290d 0a0d  on:", str(e))...
+0000cd10: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+0000cd20: 2066 6f75 6e64 5f69 6478 2069 6e20 666f   found_idx in fo
+0000cd30: 756e 645f 6964 7873 3a0d 0a20 2020 2020  und_idxs:..     
+0000cd40: 2020 2020 2020 2020 2020 2023 2068 6967             # hig
+0000cd50: 686c 6967 6874 206f 6363 7572 616e 6365  hlight occurance
+0000cd60: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
+0000cd70: 2020 2066 6f72 206a 2069 6e20 7261 6e67     for j in rang
+0000cd80: 6528 7365 6c66 2e74 7261 6e73 6163 7469  e(self.transacti
+0000cd90: 6f6e 5669 6577 2e63 6f6c 756d 6e43 6f75  onView.columnCou
+0000cda0: 6e74 2829 293a 0d0a 2020 2020 2020 2020  nt()):..        
+0000cdb0: 2020 2020 2020 2020 2020 2020 7472 793a              try:
+0000cdc0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0000cdd0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0000cde0: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
+0000cdf0: 722e 7468 656d 6520 3d3d 2022 6272 6967  r.theme == "brig
+0000ce00: 6874 223a 0d0a 0d0a 2020 2020 2020 2020  ht":....        
 0000ce10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ce20: 2020 2070 6173 730d 0a20 2020 2020 2020     pass..       
-0000ce30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ce40: 2023 2061 766f 6964 7320 4e6f 6e65 2070   # avoids None p
-0000ce50: 6f69 6e74 6572 2077 6865 6e20 6120 7472  ointer when a tr
-0000ce60: 616e 7361 6374 696f 6e20 6973 2064 656c  ansaction is del
-0000ce70: 6574 6564 0d0a 2020 2020 2020 2020 6578  eted..        ex
-0000ce80: 6365 7074 3a0d 0a20 2020 2020 2020 2020  cept:..         
-0000ce90: 2020 2070 6173 730d 0a0d 0a0d 0a20 2020     pass......   
-0000cea0: 2020 2020 2066 6f72 2065 6e74 7279 2069       for entry i
-0000ceb0: 6e20 7365 6c66 2e66 696c 7465 725f 656e  n self.filter_en
-0000cec0: 7472 6965 733a 0d0a 2020 2020 2020 2020  tries:..        
-0000ced0: 2020 2020 7365 6c66 2e66 696c 7465 7243      self.filterC
-0000cee0: 6f6d 626f 2e61 6464 4974 656d 2865 6e74  ombo.addItem(ent
-0000cef0: 7279 290d 0a0d 0a20 2020 2020 2020 2073  ry)....        s
-0000cf00: 656c 662e 6472 6177 6361 6e76 6173 2e75  elf.drawcanvas.u
-0000cf10: 7064 6174 6528 290d 0a20 2020 2020 2020  pdate()..       
-0000cf20: 2073 656c 662e 6d61 6465 5f63 6861 6e67   self.made_chang
-0000cf30: 6573 203d 2046 616c 7365 0d0a 0d0a 0d0a  es = False......
-0000cf40: 0d0a 0d0a 2020 2020 6465 6620 6d6f 7665  ....    def move
-0000cf50: 5f64 6f77 6e28 7365 6c66 293a 0d0a 2020  _down(self):..  
-0000cf60: 2020 2020 2020 2320 6d6f 7665 2073 656c        # move sel
-0000cf70: 6563 7465 6420 7472 616e 7361 6374 696f  ected transactio
-0000cf80: 6e20 7570 2069 6e20 7461 626c 650d 0a20  n up in table.. 
-0000cf90: 2020 2020 2020 2073 656c 6563 7465 645f         selected_
-0000cfa0: 726f 7773 203d 2073 6f72 7465 6428 7365  rows = sorted(se
-0000cfb0: 7428 696e 6465 782e 726f 7728 2920 666f  t(index.row() fo
-0000cfc0: 7220 696e 6465 7820 696e 0d0a 2020 2020  r index in..    
+0000ce20: 2020 2020 2320 6c69 6768 7420 6d6f 6465      # light mode
+0000ce30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000ce40: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0000ce50: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
+0000ce60: 6577 2e69 7465 6d28 666f 756e 645f 6964  ew.item(found_id
+0000ce70: 782c 206a 292e 7365 7442 6163 6b67 726f  x, j).setBackgro
+0000ce80: 756e 6428 5174 4775 692e 5143 6f6c 6f72  und(QtGui.QColor
+0000ce90: 2832 3237 2c20 3136 362c 2031 3636 2929  (227, 166, 166))
+0000cea0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000ceb0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0000cec0: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
+0000ced0: 6577 2e69 7465 6d28 666f 756e 645f 6964  ew.item(found_id
+0000cee0: 782c 206a 292e 7365 7446 6f72 6567 726f  x, j).setForegro
+0000cef0: 756e 6428 5174 4775 692e 5143 6f6c 6f72  und(QtGui.QColor
+0000cf00: 2831 3830 2c20 3138 2c20 3138 2929 0d0a  (180, 18, 18))..
+0000cf10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000cf20: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
+0000cf30: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000cf40: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0000cf50: 2064 6172 6b20 6d6f 6465 0d0a 2020 2020   dark mode..    
+0000cf60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cf70: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
+0000cf80: 6e73 6163 7469 6f6e 5669 6577 2e69 7465  nsactionView.ite
+0000cf90: 6d28 666f 756e 645f 6964 782c 206a 292e  m(found_idx, j).
+0000cfa0: 7365 7442 6163 6b67 726f 756e 6428 5174  setBackground(Qt
+0000cfb0: 4775 692e 5143 6f6c 6f72 2831 3230 2c20  Gui.QColor(120, 
+0000cfc0: 3132 302c 2031 3230 2929 0d0a 2020 2020  120, 120))..    
 0000cfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cfe0: 2020 2020 2020 7365 6c66 2e74 7261 6e73        self.trans
-0000cff0: 6163 7469 6f6e 5669 6577 2e73 656c 6563  actionView.selec
-0000d000: 7465 6449 6e64 6578 6573 2829 2929 0d0a  tedIndexes()))..
-0000d010: 0d0a 2020 2020 2020 2020 6966 206c 656e  ..        if len
-0000d020: 2873 656c 6563 7465 645f 726f 7773 2920  (selected_rows) 
-0000d030: 3d3d 2030 3a0d 0a20 2020 2020 2020 2020  == 0:..         
-0000d040: 2020 2070 7269 6e74 2822 6e6f 2073 656c     print("no sel
-0000d050: 6563 7465 6420 726f 7773 2229 0d0a 2020  ected rows")..  
-0000d060: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0000d070: 0d0a 0d0a 2020 2020 2020 2020 7365 6c65  ....        sele
-0000d080: 6374 696f 6e20 3d20 7365 6c65 6374 6564  ction = selected
-0000d090: 5f72 6f77 735b 305d 0d0a 0d0a 2020 2020  _rows[0]....    
-0000d0a0: 2020 2020 6e75 6d62 6572 5f6f 665f 6974      number_of_it
-0000d0b0: 656d 7320 3d20 7365 6c66 2e74 7261 6e73  ems = self.trans
-0000d0c0: 6163 7469 6f6e 5669 6577 2e72 6f77 436f  actionView.rowCo
-0000d0d0: 756e 7428 290d 0a20 2020 2020 2020 206e  unt()..        n
-0000d0e0: 756d 6265 725f 6f66 5f63 6f6c 756d 6e73  umber_of_columns
-0000d0f0: 203d 2073 656c 662e 7472 616e 7361 6374   = self.transact
-0000d100: 696f 6e56 6965 772e 636f 6c75 6d6e 436f  ionView.columnCo
-0000d110: 756e 7428 290d 0a0d 0a20 2020 2020 2020  unt()....       
-0000d120: 2074 7279 3a0d 0a0d 0a20 2020 2020 2020   try:....       
-0000d130: 2020 2020 2069 6620 7365 6c65 6374 696f       if selectio
-0000d140: 6e20 3c20 6e75 6d62 6572 5f6f 665f 6974  n < number_of_it
-0000d150: 656d 732d 313a 0d0a 2020 2020 2020 2020  ems-1:..        
-0000d160: 2020 2020 2020 2020 6375 7272 656e 7452          currentR
-0000d170: 6f77 203d 2073 656c 662e 7472 616e 7361  ow = self.transa
-0000d180: 6374 696f 6e56 6965 772e 6375 7272 656e  ctionView.curren
-0000d190: 7452 6f77 2829 0d0a 0d0a 2020 2020 2020  tRow()....      
-0000d1a0: 2020 2020 2020 2020 2020 666f 7220 6a20            for j 
-0000d1b0: 696e 2072 616e 6765 286e 756d 6265 725f  in range(number_
-0000d1c0: 6f66 5f63 6f6c 756d 6e73 293a 0d0a 2020  of_columns):..  
-0000d1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d1e0: 2020 6375 7272 656e 7449 7465 6d20 3d20    currentItem = 
-0000d1f0: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
-0000d200: 5669 6577 2e74 616b 6549 7465 6d28 6375  View.takeItem(cu
-0000d210: 7272 656e 7452 6f77 2c6a 290d 0a20 2020  rrentRow,j)..   
+0000cfe0: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
+0000cff0: 6e73 6163 7469 6f6e 5669 6577 2e69 7465  nsactionView.ite
+0000d000: 6d28 666f 756e 645f 6964 782c 206a 292e  m(found_idx, j).
+0000d010: 7365 7446 6f72 6567 726f 756e 6428 5174  setForeground(Qt
+0000d020: 4775 692e 5143 6f6c 6f72 2835 302c 2035  Gui.QColor(50, 5
+0000d030: 302c 2035 3029 290d 0a0d 0a20 2020 2020  0, 50))....     
+0000d040: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+0000d050: 7863 6570 743a 0d0a 2020 2020 2020 2020  xcept:..        
+0000d060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d070: 7061 7373 0d0a 2020 2020 2020 2020 2020  pass..          
+0000d080: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+0000d090: 6176 6f69 6473 204e 6f6e 6520 706f 696e  avoids None poin
+0000d0a0: 7465 7220 7768 656e 2061 2074 7261 6e73  ter when a trans
+0000d0b0: 6163 7469 6f6e 2069 7320 6465 6c65 7465  action is delete
+0000d0c0: 640d 0a20 2020 2020 2020 2065 7863 6570  d..        excep
+0000d0d0: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
+0000d0e0: 7061 7373 0d0a 0d0a 0d0a 2020 2020 2020  pass......      
+0000d0f0: 2020 666f 7220 656e 7472 7920 696e 2073    for entry in s
+0000d100: 656c 662e 6669 6c74 6572 5f65 6e74 7269  elf.filter_entri
+0000d110: 6573 3a0d 0a20 2020 2020 2020 2020 2020  es:..           
+0000d120: 2073 656c 662e 6669 6c74 6572 436f 6d62   self.filterComb
+0000d130: 6f2e 6164 6449 7465 6d28 656e 7472 7929  o.addItem(entry)
+0000d140: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
+0000d150: 2e64 7261 7763 616e 7661 732e 7570 6461  .drawcanvas.upda
+0000d160: 7465 2829 0d0a 2020 2020 2020 2020 7365  te()..        se
+0000d170: 6c66 2e6d 6164 655f 6368 616e 6765 7320  lf.made_changes 
+0000d180: 3d20 4661 6c73 650d 0a0d 0a0d 0a0d 0a0d  = False.........
+0000d190: 0a20 2020 2064 6566 206d 6f76 655f 646f  .    def move_do
+0000d1a0: 776e 2873 656c 6629 3a0d 0a20 2020 2020  wn(self):..     
+0000d1b0: 2020 2023 206d 6f76 6520 7365 6c65 6374     # move select
+0000d1c0: 6564 2074 7261 6e73 6163 7469 6f6e 2075  ed transaction u
+0000d1d0: 7020 696e 2074 6162 6c65 0d0a 2020 2020  p in table..    
+0000d1e0: 2020 2020 7365 6c65 6374 6564 5f72 6f77      selected_row
+0000d1f0: 7320 3d20 736f 7274 6564 2873 6574 2869  s = sorted(set(i
+0000d200: 6e64 6578 2e72 6f77 2829 2066 6f72 2069  ndex.row() for i
+0000d210: 6e64 6578 2069 6e0d 0a20 2020 2020 2020  ndex in..       
 0000d220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d230: 2073 7769 7463 6849 7465 6d20 3d20 7365   switchItem = se
-0000d240: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
-0000d250: 6577 2e74 616b 6549 7465 6d28 6375 7272  ew.takeItem(curr
-0000d260: 656e 7452 6f77 2b31 2c6a 290d 0a0d 0a20  entRow+1,j).... 
-0000d270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d280: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
-0000d290: 696f 6e56 6965 772e 7365 7449 7465 6d28  ionView.setItem(
-0000d2a0: 6375 7272 656e 7452 6f77 202b 2031 2c20  currentRow + 1, 
-0000d2b0: 6a2c 2063 7572 7265 6e74 4974 656d 290d  j, currentItem).
-0000d2c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000d2d0: 2020 2020 2073 656c 662e 7472 616e 7361       self.transa
-0000d2e0: 6374 696f 6e56 6965 772e 7365 7449 7465  ctionView.setIte
-0000d2f0: 6d28 6375 7272 656e 7452 6f77 2c20 6a2c  m(currentRow, j,
-0000d300: 2073 7769 7463 6849 7465 6d29 0d0a 0d0a   switchItem)....
-0000d310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d320: 2020 2020 7377 6974 6368 5f65 6e74 7279      switch_entry
-0000d330: 203d 2073 656c 662e 656e 7472 795f 6461   = self.entry_da
-0000d340: 7461 5b63 7572 7265 6e74 526f 772b 315d  ta[currentRow+1]
-0000d350: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000d360: 2020 2020 2020 6375 7272 656e 745f 656e        current_en
-0000d370: 7472 7920 3d20 7365 6c66 2e65 6e74 7279  try = self.entry
-0000d380: 5f64 6174 615b 6375 7272 656e 7452 6f77  _data[currentRow
-0000d390: 5d0d 0a0d 0a20 2020 2020 2020 2020 2020  ]....           
-0000d3a0: 2020 2020 2020 2020 2073 656c 662e 656e           self.en
-0000d3b0: 7472 795f 6461 7461 5b63 7572 7265 6e74  try_data[current
-0000d3c0: 526f 775d 203d 2073 7769 7463 685f 656e  Row] = switch_en
-0000d3d0: 7472 790d 0a20 2020 2020 2020 2020 2020  try..           
-0000d3e0: 2020 2020 2020 2020 2073 656c 662e 656e           self.en
-0000d3f0: 7472 795f 6461 7461 5b63 7572 7265 6e74  try_data[current
-0000d400: 526f 772b 315d 203d 2063 7572 7265 6e74  Row+1] = current
-0000d410: 5f65 6e74 7279 0d0a 0d0a 2020 2020 2020  _entry....      
-0000d420: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
-0000d430: 7261 6e73 6163 7469 6f6e 5669 6577 2e63  ransactionView.c
-0000d440: 6c65 6172 5365 6c65 6374 696f 6e28 290d  learSelection().
-0000d450: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000d460: 2073 656c 662e 7472 616e 7361 6374 696f   self.transactio
-0000d470: 6e56 6965 772e 7365 7443 7572 7265 6e74  nView.setCurrent
-0000d480: 4365 6c6c 2863 7572 7265 6e74 526f 772b  Cell(currentRow+
-0000d490: 312c 3029 0d0a 0d0a 2020 2020 2020 2020  1,0)....        
-0000d4a0: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
-0000d4b0: 2061 7320 653a 0d0a 2020 2020 2020 2020   as e:..        
-0000d4c0: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
-0000d4d0: 2265 7272 6f72 3a20 222b 7374 7228 6529  "error: "+str(e)
-0000d4e0: 2c20 7469 746c 653d 2245 7272 6f72 2229  , title="Error")
-0000d4f0: 0d0a 0d0a 0d0a 2020 2020 6465 6620 6d6f  ......    def mo
-0000d500: 7665 5f75 7028 7365 6c66 293a 0d0a 2020  ve_up(self):..  
-0000d510: 2020 2020 2020 2320 6d6f 7665 2073 656c        # move sel
-0000d520: 6563 7465 6420 7472 616e 7361 6374 696f  ected transactio
-0000d530: 6e20 7570 2069 6e20 7461 626c 650d 0a20  n up in table.. 
-0000d540: 2020 2020 2020 2073 656c 6563 7465 645f         selected_
-0000d550: 726f 7773 203d 2073 6f72 7465 6428 7365  rows = sorted(se
-0000d560: 7428 696e 6465 782e 726f 7728 2920 666f  t(index.row() fo
-0000d570: 7220 696e 6465 7820 696e 0d0a 2020 2020  r index in..    
-0000d580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d590: 2020 2020 2020 7365 6c66 2e74 7261 6e73        self.trans
-0000d5a0: 6163 7469 6f6e 5669 6577 2e73 656c 6563  actionView.selec
-0000d5b0: 7465 6449 6e64 6578 6573 2829 2929 0d0a  tedIndexes()))..
-0000d5c0: 0d0a 2020 2020 2020 2020 6966 206c 656e  ..        if len
-0000d5d0: 2873 656c 6563 7465 645f 726f 7773 2920  (selected_rows) 
-0000d5e0: 3d3d 2030 3a0d 0a20 2020 2020 2020 2020  == 0:..         
-0000d5f0: 2020 2070 7269 6e74 2822 6e6f 2073 656c     print("no sel
-0000d600: 6563 7465 6420 726f 7773 2229 0d0a 2020  ected rows")..  
-0000d610: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0000d620: 0d0a 0d0a 2020 2020 2020 2020 7365 6c65  ....        sele
-0000d630: 6374 696f 6e20 3d20 7365 6c65 6374 6564  ction = selected
-0000d640: 5f72 6f77 735b 305d 0d0a 0d0a 2020 2020  _rows[0]....    
-0000d650: 2020 2020 6e75 6d62 6572 5f6f 665f 6974      number_of_it
-0000d660: 656d 7320 3d20 7365 6c66 2e74 7261 6e73  ems = self.trans
-0000d670: 6163 7469 6f6e 5669 6577 2e72 6f77 436f  actionView.rowCo
-0000d680: 756e 7428 290d 0a20 2020 2020 2020 206e  unt()..        n
-0000d690: 756d 6265 725f 6f66 5f63 6f6c 756d 6e73  umber_of_columns
-0000d6a0: 203d 2073 656c 662e 7472 616e 7361 6374   = self.transact
-0000d6b0: 696f 6e56 6965 772e 636f 6c75 6d6e 436f  ionView.columnCo
-0000d6c0: 756e 7428 290d 0a0d 0a20 2020 2020 2020  unt()....       
-0000d6d0: 2074 7279 3a0d 0a0d 0a20 2020 2020 2020   try:....       
-0000d6e0: 2020 2020 2069 6620 7365 6c65 6374 696f       if selectio
-0000d6f0: 6e20 3e3d 2031 3a0d 0a20 2020 2020 2020  n >= 1:..       
-0000d700: 2020 2020 2020 2020 2063 7572 7265 6e74           current
-0000d710: 526f 7720 3d20 7365 6c66 2e74 7261 6e73  Row = self.trans
-0000d720: 6163 7469 6f6e 5669 6577 2e63 7572 7265  actionView.curre
-0000d730: 6e74 526f 7728 290d 0a0d 0a20 2020 2020  ntRow()....     
-0000d740: 2020 2020 2020 2020 2020 2066 6f72 206a             for j
-0000d750: 2069 6e20 7261 6e67 6528 6e75 6d62 6572   in range(number
-0000d760: 5f6f 665f 636f 6c75 6d6e 7329 3a0d 0a20  _of_columns):.. 
-0000d770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d780: 2020 2063 7572 7265 6e74 4974 656d 203d     currentItem =
-0000d790: 2073 656c 662e 7472 616e 7361 6374 696f   self.transactio
-0000d7a0: 6e56 6965 772e 7461 6b65 4974 656d 2863  nView.takeItem(c
-0000d7b0: 7572 7265 6e74 526f 772c 6a29 0d0a 2020  urrentRow,j)..  
-0000d7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d7d0: 2020 7377 6974 6368 4974 656d 203d 2073    switchItem = s
-0000d7e0: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
-0000d7f0: 6965 772e 7461 6b65 4974 656d 2863 7572  iew.takeItem(cur
-0000d800: 7265 6e74 526f 772d 312c 6a29 0d0a 0d0a  rentRow-1,j)....
-0000d810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d820: 2020 2020 7365 6c66 2e74 7261 6e73 6163      self.transac
-0000d830: 7469 6f6e 5669 6577 2e73 6574 4974 656d  tionView.setItem
-0000d840: 2863 7572 7265 6e74 526f 7720 2d20 312c  (currentRow - 1,
-0000d850: 206a 2c20 6375 7272 656e 7449 7465 6d29   j, currentItem)
-0000d860: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000d870: 2020 2020 2020 7365 6c66 2e74 7261 6e73        self.trans
-0000d880: 6163 7469 6f6e 5669 6577 2e73 6574 4974  actionView.setIt
-0000d890: 656d 2863 7572 7265 6e74 526f 772c 206a  em(currentRow, j
-0000d8a0: 2c20 7377 6974 6368 4974 656d 290d 0a0d  , switchItem)...
-0000d8b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000d8c0: 2020 2020 2073 7769 7463 685f 656e 7472       switch_entr
-0000d8d0: 7920 3d20 7365 6c66 2e65 6e74 7279 5f64  y = self.entry_d
-0000d8e0: 6174 615b 6375 7272 656e 7452 6f77 2d31  ata[currentRow-1
-0000d8f0: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
-0000d900: 2020 2020 2020 2063 7572 7265 6e74 5f65         current_e
-0000d910: 6e74 7279 203d 2073 656c 662e 656e 7472  ntry = self.entr
-0000d920: 795f 6461 7461 5b63 7572 7265 6e74 526f  y_data[currentRo
-0000d930: 775d 0d0a 0d0a 2020 2020 2020 2020 2020  w]....          
-0000d940: 2020 2020 2020 2020 2020 7365 6c66 2e65            self.e
-0000d950: 6e74 7279 5f64 6174 615b 6375 7272 656e  ntry_data[curren
-0000d960: 7452 6f77 5d20 3d20 7377 6974 6368 5f65  tRow] = switch_e
-0000d970: 6e74 7279 0d0a 2020 2020 2020 2020 2020  ntry..          
-0000d980: 2020 2020 2020 2020 2020 7365 6c66 2e65            self.e
-0000d990: 6e74 7279 5f64 6174 615b 6375 7272 656e  ntry_data[curren
-0000d9a0: 7452 6f77 2d31 5d20 3d20 6375 7272 656e  tRow-1] = curren
-0000d9b0: 745f 656e 7472 790d 0a0d 0a20 2020 2020  t_entry....     
-0000d9c0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000d9d0: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
-0000d9e0: 636c 6561 7253 656c 6563 7469 6f6e 2829  clearSelection()
-0000d9f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0000da00: 2020 7365 6c66 2e74 7261 6e73 6163 7469    self.transacti
-0000da10: 6f6e 5669 6577 2e73 6574 4375 7272 656e  onView.setCurren
-0000da20: 7443 656c 6c28 6375 7272 656e 7452 6f77  tCell(currentRow
-0000da30: 2d31 2c30 290d 0a0d 0a20 2020 2020 2020  -1,0)....       
-0000da40: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
-0000da50: 6e20 6173 2065 3a0d 0a20 2020 2020 2020  n as e:..       
-0000da60: 2020 2020 2073 656c 662e 6e6f 7469 6679       self.notify
-0000da70: 2822 6572 726f 723a 2022 2b73 7472 2865  ("error: "+str(e
-0000da80: 292c 2074 6974 6c65 3d22 4572 726f 7222  ), title="Error"
-0000da90: 290d 0a0d 0a20 2020 2064 6566 2064 6174  )....    def dat
-0000daa0: 615f 7365 6c65 6374 2873 656c 6629 3a0d  a_select(self):.
-0000dab0: 0a0d 0a20 2020 2020 2020 2023 7365 6c65  ...        #sele
-0000dac0: 6374 6564 5f72 6f77 7320 3d20 7365 6c66  cted_rows = self
-0000dad0: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
-0000dae0: 2e73 656c 6563 7469 6f6e 4d6f 6465 6c28  .selectionModel(
-0000daf0: 292e 7365 6c65 6374 6564 526f 7773 2829  ).selectedRows()
-0000db00: 0d0a 2020 2020 2020 2020 7365 6c65 6374  ..        select
-0000db10: 6564 5f72 6f77 7320 3d20 736f 7274 6564  ed_rows = sorted
-0000db20: 2873 6574 2869 6e64 6578 2e72 6f77 2829  (set(index.row()
-0000db30: 2066 6f72 2069 6e64 6578 2069 6e0d 0a20   for index in.. 
+0000d230: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
+0000d240: 696f 6e56 6965 772e 7365 6c65 6374 6564  ionView.selected
+0000d250: 496e 6465 7865 7328 2929 290d 0a0d 0a20  Indexes())).... 
+0000d260: 2020 2020 2020 2069 6620 6c65 6e28 7365         if len(se
+0000d270: 6c65 6374 6564 5f72 6f77 7329 203d 3d20  lected_rows) == 
+0000d280: 303a 0d0a 2020 2020 2020 2020 2020 2020  0:..            
+0000d290: 7072 696e 7428 226e 6f20 7365 6c65 6374  print("no select
+0000d2a0: 6564 2072 6f77 7322 290d 0a20 2020 2020  ed rows")..     
+0000d2b0: 2020 2020 2020 2072 6574 7572 6e0d 0a0d         return...
+0000d2c0: 0a20 2020 2020 2020 2073 656c 6563 7469  .        selecti
+0000d2d0: 6f6e 203d 2073 656c 6563 7465 645f 726f  on = selected_ro
+0000d2e0: 7773 5b30 5d0d 0a0d 0a20 2020 2020 2020  ws[0]....       
+0000d2f0: 206e 756d 6265 725f 6f66 5f69 7465 6d73   number_of_items
+0000d300: 203d 2073 656c 662e 7472 616e 7361 6374   = self.transact
+0000d310: 696f 6e56 6965 772e 726f 7743 6f75 6e74  ionView.rowCount
+0000d320: 2829 0d0a 2020 2020 2020 2020 6e75 6d62  ()..        numb
+0000d330: 6572 5f6f 665f 636f 6c75 6d6e 7320 3d20  er_of_columns = 
+0000d340: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
+0000d350: 5669 6577 2e63 6f6c 756d 6e43 6f75 6e74  View.columnCount
+0000d360: 2829 0d0a 0d0a 2020 2020 2020 2020 7472  ()....        tr
+0000d370: 793a 0d0a 0d0a 2020 2020 2020 2020 2020  y:....          
+0000d380: 2020 6966 2073 656c 6563 7469 6f6e 203c    if selection <
+0000d390: 206e 756d 6265 725f 6f66 5f69 7465 6d73   number_of_items
+0000d3a0: 2d31 3a0d 0a20 2020 2020 2020 2020 2020  -1:..           
+0000d3b0: 2020 2020 2063 7572 7265 6e74 526f 7720       currentRow 
+0000d3c0: 3d20 7365 6c66 2e74 7261 6e73 6163 7469  = self.transacti
+0000d3d0: 6f6e 5669 6577 2e63 7572 7265 6e74 526f  onView.currentRo
+0000d3e0: 7728 290d 0a0d 0a20 2020 2020 2020 2020  w()....         
+0000d3f0: 2020 2020 2020 2066 6f72 206a 2069 6e20         for j in 
+0000d400: 7261 6e67 6528 6e75 6d62 6572 5f6f 665f  range(number_of_
+0000d410: 636f 6c75 6d6e 7329 3a0d 0a20 2020 2020  columns):..     
+0000d420: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0000d430: 7572 7265 6e74 4974 656d 203d 2073 656c  urrentItem = sel
+0000d440: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
+0000d450: 772e 7461 6b65 4974 656d 2863 7572 7265  w.takeItem(curre
+0000d460: 6e74 526f 772c 6a29 0d0a 2020 2020 2020  ntRow,j)..      
+0000d470: 2020 2020 2020 2020 2020 2020 2020 7377                sw
+0000d480: 6974 6368 4974 656d 203d 2073 656c 662e  itchItem = self.
+0000d490: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
+0000d4a0: 7461 6b65 4974 656d 2863 7572 7265 6e74  takeItem(current
+0000d4b0: 526f 772b 312c 6a29 0d0a 0d0a 2020 2020  Row+1,j)....    
+0000d4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d4d0: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
+0000d4e0: 5669 6577 2e73 6574 4974 656d 2863 7572  View.setItem(cur
+0000d4f0: 7265 6e74 526f 7720 2b20 312c 206a 2c20  rentRow + 1, j, 
+0000d500: 6375 7272 656e 7449 7465 6d29 0d0a 2020  currentItem)..  
+0000d510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d520: 2020 7365 6c66 2e74 7261 6e73 6163 7469    self.transacti
+0000d530: 6f6e 5669 6577 2e73 6574 4974 656d 2863  onView.setItem(c
+0000d540: 7572 7265 6e74 526f 772c 206a 2c20 7377  urrentRow, j, sw
+0000d550: 6974 6368 4974 656d 290d 0a0d 0a20 2020  itchItem)....   
+0000d560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d570: 2073 7769 7463 685f 656e 7472 7920 3d20   switch_entry = 
+0000d580: 7365 6c66 2e65 6e74 7279 5f64 6174 615b  self.entry_data[
+0000d590: 6375 7272 656e 7452 6f77 2b31 5d0d 0a20  currentRow+1].. 
+0000d5a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d5b0: 2020 2063 7572 7265 6e74 5f65 6e74 7279     current_entry
+0000d5c0: 203d 2073 656c 662e 656e 7472 795f 6461   = self.entry_da
+0000d5d0: 7461 5b63 7572 7265 6e74 526f 775d 0d0a  ta[currentRow]..
+0000d5e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000d5f0: 2020 2020 2020 7365 6c66 2e65 6e74 7279        self.entry
+0000d600: 5f64 6174 615b 6375 7272 656e 7452 6f77  _data[currentRow
+0000d610: 5d20 3d20 7377 6974 6368 5f65 6e74 7279  ] = switch_entry
+0000d620: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000d630: 2020 2020 2020 7365 6c66 2e65 6e74 7279        self.entry
+0000d640: 5f64 6174 615b 6375 7272 656e 7452 6f77  _data[currentRow
+0000d650: 2b31 5d20 3d20 6375 7272 656e 745f 656e  +1] = current_en
+0000d660: 7472 790d 0a0d 0a20 2020 2020 2020 2020  try....         
+0000d670: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
+0000d680: 7361 6374 696f 6e56 6965 772e 636c 6561  sactionView.clea
+0000d690: 7253 656c 6563 7469 6f6e 2829 0d0a 2020  rSelection()..  
+0000d6a0: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0000d6b0: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
+0000d6c0: 6577 2e73 6574 4375 7272 656e 7443 656c  ew.setCurrentCel
+0000d6d0: 6c28 6375 7272 656e 7452 6f77 2b31 2c30  l(currentRow+1,0
+0000d6e0: 290d 0a0d 0a20 2020 2020 2020 2065 7863  )....        exc
+0000d6f0: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
+0000d700: 2065 3a0d 0a20 2020 2020 2020 2020 2020   e:..           
+0000d710: 2073 656c 662e 6e6f 7469 6679 2822 6572   self.notify("er
+0000d720: 726f 723a 2022 2b73 7472 2865 292c 2074  ror: "+str(e), t
+0000d730: 6974 6c65 3d22 4572 726f 7222 290d 0a0d  itle="Error")...
+0000d740: 0a0d 0a20 2020 2064 6566 206d 6f76 655f  ...    def move_
+0000d750: 7570 2873 656c 6629 3a0d 0a20 2020 2020  up(self):..     
+0000d760: 2020 2023 206d 6f76 6520 7365 6c65 6374     # move select
+0000d770: 6564 2074 7261 6e73 6163 7469 6f6e 2075  ed transaction u
+0000d780: 7020 696e 2074 6162 6c65 0d0a 2020 2020  p in table..    
+0000d790: 2020 2020 7365 6c65 6374 6564 5f72 6f77      selected_row
+0000d7a0: 7320 3d20 736f 7274 6564 2873 6574 2869  s = sorted(set(i
+0000d7b0: 6e64 6578 2e72 6f77 2829 2066 6f72 2069  ndex.row() for i
+0000d7c0: 6e64 6578 2069 6e0d 0a20 2020 2020 2020  ndex in..       
+0000d7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d7e0: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
+0000d7f0: 696f 6e56 6965 772e 7365 6c65 6374 6564  ionView.selected
+0000d800: 496e 6465 7865 7328 2929 290d 0a0d 0a20  Indexes())).... 
+0000d810: 2020 2020 2020 2069 6620 6c65 6e28 7365         if len(se
+0000d820: 6c65 6374 6564 5f72 6f77 7329 203d 3d20  lected_rows) == 
+0000d830: 303a 0d0a 2020 2020 2020 2020 2020 2020  0:..            
+0000d840: 7072 696e 7428 226e 6f20 7365 6c65 6374  print("no select
+0000d850: 6564 2072 6f77 7322 290d 0a20 2020 2020  ed rows")..     
+0000d860: 2020 2020 2020 2072 6574 7572 6e0d 0a0d         return...
+0000d870: 0a20 2020 2020 2020 2073 656c 6563 7469  .        selecti
+0000d880: 6f6e 203d 2073 656c 6563 7465 645f 726f  on = selected_ro
+0000d890: 7773 5b30 5d0d 0a0d 0a20 2020 2020 2020  ws[0]....       
+0000d8a0: 206e 756d 6265 725f 6f66 5f69 7465 6d73   number_of_items
+0000d8b0: 203d 2073 656c 662e 7472 616e 7361 6374   = self.transact
+0000d8c0: 696f 6e56 6965 772e 726f 7743 6f75 6e74  ionView.rowCount
+0000d8d0: 2829 0d0a 2020 2020 2020 2020 6e75 6d62  ()..        numb
+0000d8e0: 6572 5f6f 665f 636f 6c75 6d6e 7320 3d20  er_of_columns = 
+0000d8f0: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
+0000d900: 5669 6577 2e63 6f6c 756d 6e43 6f75 6e74  View.columnCount
+0000d910: 2829 0d0a 0d0a 2020 2020 2020 2020 7472  ()....        tr
+0000d920: 793a 0d0a 0d0a 2020 2020 2020 2020 2020  y:....          
+0000d930: 2020 6966 2073 656c 6563 7469 6f6e 203e    if selection >
+0000d940: 3d20 313a 0d0a 2020 2020 2020 2020 2020  = 1:..          
+0000d950: 2020 2020 2020 6375 7272 656e 7452 6f77        currentRow
+0000d960: 203d 2073 656c 662e 7472 616e 7361 6374   = self.transact
+0000d970: 696f 6e56 6965 772e 6375 7272 656e 7452  ionView.currentR
+0000d980: 6f77 2829 0d0a 0d0a 2020 2020 2020 2020  ow()....        
+0000d990: 2020 2020 2020 2020 666f 7220 6a20 696e          for j in
+0000d9a0: 2072 616e 6765 286e 756d 6265 725f 6f66   range(number_of
+0000d9b0: 5f63 6f6c 756d 6e73 293a 0d0a 2020 2020  _columns):..    
+0000d9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d9d0: 6375 7272 656e 7449 7465 6d20 3d20 7365  currentItem = se
+0000d9e0: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
+0000d9f0: 6577 2e74 616b 6549 7465 6d28 6375 7272  ew.takeItem(curr
+0000da00: 656e 7452 6f77 2c6a 290d 0a20 2020 2020  entRow,j)..     
+0000da10: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000da20: 7769 7463 6849 7465 6d20 3d20 7365 6c66  witchItem = self
+0000da30: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
+0000da40: 2e74 616b 6549 7465 6d28 6375 7272 656e  .takeItem(curren
+0000da50: 7452 6f77 2d31 2c6a 290d 0a0d 0a20 2020  tRow-1,j)....   
+0000da60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000da70: 2073 656c 662e 7472 616e 7361 6374 696f   self.transactio
+0000da80: 6e56 6965 772e 7365 7449 7465 6d28 6375  nView.setItem(cu
+0000da90: 7272 656e 7452 6f77 202d 2031 2c20 6a2c  rrentRow - 1, j,
+0000daa0: 2063 7572 7265 6e74 4974 656d 290d 0a20   currentItem).. 
+0000dab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dac0: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
+0000dad0: 696f 6e56 6965 772e 7365 7449 7465 6d28  ionView.setItem(
+0000dae0: 6375 7272 656e 7452 6f77 2c20 6a2c 2073  currentRow, j, s
+0000daf0: 7769 7463 6849 7465 6d29 0d0a 0d0a 2020  witchItem)....  
+0000db00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000db10: 2020 7377 6974 6368 5f65 6e74 7279 203d    switch_entry =
+0000db20: 2073 656c 662e 656e 7472 795f 6461 7461   self.entry_data
+0000db30: 5b63 7572 7265 6e74 526f 772d 315d 0d0a  [currentRow-1]..
 0000db40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000db50: 2020 2020 2020 2020 2073 656c 662e 7472           self.tr
-0000db60: 616e 7361 6374 696f 6e56 6965 772e 7365  ansactionView.se
-0000db70: 6c65 6374 6564 496e 6465 7865 7328 2929  lectedIndexes())
-0000db80: 290d 0a0d 0a20 2020 2020 2020 2069 6620  )....        if 
-0000db90: 6c65 6e28 7365 6c65 6374 6564 5f72 6f77  len(selected_row
-0000dba0: 7329 203d 3d20 303a 0d0a 2020 2020 2020  s) == 0:..      
-0000dbb0: 2020 2020 2020 7072 696e 7428 226e 6f20        print("no 
-0000dbc0: 7365 6c65 6374 6564 2072 6f77 7322 290d  selected rows").
-0000dbd0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0000dbe0: 7572 6e0d 0a0d 0a20 2020 2020 2020 2073  urn....        s
-0000dbf0: 656c 6563 7469 6f6e 203d 2073 656c 6563  election = selec
-0000dc00: 7465 645f 726f 7773 5b30 5d0d 0a0d 0a20  ted_rows[0].... 
-0000dc10: 2020 2020 2020 2073 656c 662e 726f 775f         self.row_
-0000dc20: 7365 6c65 6374 2873 656c 6563 7469 6f6e  select(selection
-0000dc30: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0000dc40: 6d61 6465 5f63 6861 6e67 6573 203d 2046  made_changes = F
-0000dc50: 616c 7365 0d0a 0d0a 0d0a 2020 2020 6465  alse......    de
-0000dc60: 6620 6461 7461 5f73 656c 6563 745f 7768  f data_select_wh
-0000dc70: 6572 6528 7365 6c66 2c65 7870 7229 3a0d  ere(self,expr):.
-0000dc80: 0a20 2020 2020 2020 2070 7269 6e74 2822  .        print("
-0000dc90: 6461 7461 2073 656c 6563 7420 7768 6572  data select wher
-0000dca0: 6522 2c65 7870 7229 0d0a 0d0a 2020 2020  e",expr)....    
-0000dcb0: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
-0000dcc0: 6765 2873 656c 662e 7472 616e 7361 6374  ge(self.transact
-0000dcd0: 696f 6e56 6965 772e 726f 7743 6f75 6e74  ionView.rowCount
-0000dce0: 2829 293a 0d0a 2020 2020 2020 2020 2020  ()):..          
-0000dcf0: 2020 2020 2020 6d79 5f65 6e74 7279 203d        my_entry =
-0000dd00: 2073 656c 662e 7472 616e 7361 6374 696f   self.transactio
-0000dd10: 6e56 6965 772e 6974 656d 2869 2c20 3329  nView.item(i, 3)
-0000dd20: 2e74 6578 7428 290d 0a0d 0a20 2020 2020  .text()....     
-0000dd30: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-0000dd40: 2822 2e2e 2e22 2c69 2c6d 795f 656e 7472  ("...",i,my_entr
-0000dd50: 7929 0d0a 2020 2020 2020 2020 2020 2020  y)..            
-0000dd60: 2020 2020 6966 206d 795f 656e 7472 7920      if my_entry 
-0000dd70: 3d3d 2065 7870 7220 6f72 206d 795f 656e  == expr or my_en
-0000dd80: 7472 792e 6c6f 7765 7228 2920 3d3d 2065  try.lower() == e
-0000dd90: 7870 722e 6c6f 7765 7228 293a 0d0a 0d0a  xpr.lower():....
-0000dda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ddb0: 2020 2020 7365 6c66 2e72 6f77 5f73 656c      self.row_sel
-0000ddc0: 6563 7428 6929 0d0a 2020 2020 2020 2020  ect(i)..        
-0000ddd0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0000dde0: 726e 0d0a 0d0a 2020 2020 6465 6620 726f  rn....    def ro
-0000ddf0: 775f 7365 6c65 6374 2873 656c 662c 7365  w_select(self,se
-0000de00: 6c65 6374 696f 6e29 3a0d 0a0d 0a20 2020  lection):....   
-0000de10: 2020 2020 2023 2063 6f6c 6f72 2074 6865       # color the
-0000de20: 2073 656c 6563 7465 6420 726f 770d 0a20   selected row.. 
-0000de30: 2020 2020 2020 2023 2067 6228 3233 332c         # gb(233,
-0000de40: 2032 3334 2c20 3232 3729 3b0d 0a0d 0a20   234, 227);.... 
-0000de50: 2020 2020 2020 2073 656c 662e 7365 6c65         self.sele
-0000de60: 6374 696f 6e5f 6964 7820 3d20 4e6f 6e65  ction_idx = None
-0000de70: 0d0a 0d0a 2020 2020 2020 2020 6966 2073  ....        if s
-0000de80: 656c 662e 6d61 6465 5f63 6861 6e67 6573  elf.made_changes
-0000de90: 3a0d 0a20 2020 2020 2020 2020 2020 2079  :..            y
-0000dea0: 6573 203d 2073 656c 662e 6173 6b5f 7175  es = self.ask_qu
-0000deb0: 6573 7469 6f6e 2822 5761 726e 696e 6722  estion("Warning"
-0000dec0: 2c20 2259 6f75 2061 7265 2061 626f 7574  , "You are about
-0000ded0: 2074 6f20 6368 616e 6765 2074 6f20 616e   to change to an
-0000dee0: 6f74 6865 7220 7472 616e 7361 6374 696f  other transactio
-0000def0: 6e20 616e 6420 7769 7468 6472 6177 2074  n and withdraw t
-0000df00: 6865 2063 6861 6e67 6573 2079 6f75 206d  he changes you m
-0000df10: 6164 652e 2043 6f6e 7469 6e75 653f 2229  ade. Continue?")
-0000df20: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-0000df30: 206e 6f74 2079 6573 3a0d 0a20 2020 2020   not yes:..     
-0000df40: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0000df50: 6e0d 0a0d 0a20 2020 2020 2020 2074 7279  n....        try
-0000df60: 3a0d 0a20 2020 2020 2020 2020 2020 2022  :..            "
-0000df70: 2222 0d0a 2020 2020 2020 2020 2020 2020  ""..            
-0000df80: 6966 2073 656c 662e 7365 6c65 6374 696f  if self.selectio
-0000df90: 6e5f 6964 7820 6973 206e 6f74 204e 6f6e  n_idx is not Non
-0000dfa0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0000dfb0: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
-0000dfc0: 6765 2873 656c 662e 7472 616e 7361 6374  ge(self.transact
-0000dfd0: 696f 6e56 6965 772e 636f 6c75 6d6e 436f  ionView.columnCo
-0000dfe0: 756e 7428 2929 3a0d 0a20 2020 2020 2020  unt()):..       
-0000dff0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0000e000: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
-0000e010: 772e 6974 656d 2873 656c 662e 7365 6c65  w.item(self.sele
-0000e020: 6374 696f 6e5f 6964 782c 2069 292e 7365  ction_idx, i).se
-0000e030: 7442 6163 6b67 726f 756e 6428 5174 4775  tBackground(QtGu
-0000e040: 692e 5143 6f6c 6f72 2832 3333 2c20 3233  i.QColor(233, 23
-0000e050: 342c 2032 3237 2929 0d0a 2020 2020 2020  4, 227))..      
-0000e060: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0000e070: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
-0000e080: 6577 2e73 6372 6f6c 6c54 6f49 7465 6d28  ew.scrollToItem(
-0000e090: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
-0000e0a0: 5669 6577 2e69 7465 6d28 7365 6c65 6374  View.item(select
-0000e0b0: 696f 6e2c 2069 2929 0d0a 2020 2020 2020  ion, i))..      
-0000e0c0: 2020 2020 2020 666f 7220 6920 696e 2072        for i in r
-0000e0d0: 616e 6765 2873 656c 662e 7472 616e 7361  ange(self.transa
-0000e0e0: 6374 696f 6e56 6965 772e 636f 6c75 6d6e  ctionView.column
-0000e0f0: 436f 756e 7428 2929 3a0d 0a20 2020 2020  Count()):..     
-0000e100: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000e110: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
-0000e120: 6974 656d 2873 656c 6563 7469 6f6e 2c20  item(selection, 
-0000e130: 6929 2e73 6574 4261 636b 6772 6f75 6e64  i).setBackground
-0000e140: 2851 7447 7569 2e51 436f 6c6f 7228 3539  (QtGui.QColor(59
-0000e150: 2c20 3539 2c20 3135 3929 290d 0a20 2020  , 59, 159))..   
-0000e160: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-0000e170: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
-0000e180: 772e 7363 726f 6c6c 546f 4974 656d 2873  w.scrollToItem(s
-0000e190: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
-0000e1a0: 6965 772e 6974 656d 2873 656c 6563 7469  iew.item(selecti
-0000e1b0: 6f6e 2c20 6929 290d 0a20 2020 2020 2020  on, i))..       
-0000e1c0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-0000e1d0: 2020 2020 2020 7365 6c66 2e74 7261 6e73        self.trans
-0000e1e0: 6163 7469 6f6e 5669 6577 2e63 6c65 6172  actionView.clear
-0000e1f0: 5365 6c65 6374 696f 6e28 290d 0a20 2020  Selection()..   
-0000e200: 2020 2020 2020 2020 2073 656c 662e 7472           self.tr
-0000e210: 616e 7361 6374 696f 6e56 6965 772e 7365  ansactionView.se
-0000e220: 7443 7572 7265 6e74 4365 6c6c 2873 656c  tCurrentCell(sel
-0000e230: 6563 7469 6f6e 2c33 290d 0a0d 0a0d 0a0d  ection,3).......
-0000e240: 0a20 2020 2020 2020 2065 7863 6570 743a  .        except:
-0000e250: 0d0a 2020 2020 2020 2020 2020 2020 7061  ..            pa
-0000e260: 7373 0d0a 0d0a 2020 2020 2020 2020 7472  ss....        tr
-0000e270: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-0000e280: 7365 6c66 2e73 656c 6563 7469 6f6e 5f69  self.selection_i
-0000e290: 6478 203d 2073 656c 6563 7469 6f6e 0d0a  dx = selection..
-0000e2a0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-0000e2b0: 7428 2273 656c 6563 7469 6f6e 222c 7365  t("selection",se
-0000e2c0: 6c65 6374 696f 6e29 0d0a 0d0a 2020 2020  lection)....    
-0000e2d0: 2020 2020 2020 2020 6461 7461 203d 2073          data = s
-0000e2e0: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
-0000e2f0: 656c 6563 7469 6f6e 5d0d 0a0d 0a20 2020  election]....   
-0000e300: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
-0000e310: 6461 7461 222c 2064 6174 6129 0d0a 0d0a  data", data)....
-0000e320: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000e330: 2e41 7373 6574 4c69 7374 4c65 6674 2e63  .AssetListLeft.c
-0000e340: 6c65 6172 2829 0d0a 2020 2020 2020 2020  lear()..        
-0000e350: 2020 2020 7365 6c66 2e4c 6961 6269 6c69      self.Liabili
-0000e360: 7479 4c69 7374 4c65 6674 2e63 6c65 6172  tyListLeft.clear
-0000e370: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-0000e380: 7365 6c66 2e4c 6961 6269 6c69 7479 4c69  self.LiabilityLi
-0000e390: 7374 5269 6768 742e 636c 6561 7228 290d  stRight.clear().
-0000e3a0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0000e3b0: 662e 4173 7365 744c 6973 7452 6967 6874  f.AssetListRight
-0000e3c0: 2e63 6c65 6172 2829 0d0a 2020 2020 2020  .clear()..      
-0000e3d0: 2020 2020 2020 7365 6c66 2e45 7175 6974        self.Equit
-0000e3e0: 794c 6973 744c 6566 742e 636c 6561 7228  yListLeft.clear(
-0000e3f0: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-0000e400: 656c 662e 4571 7569 7479 4c69 7374 5269  elf.EquityListRi
-0000e410: 6768 742e 636c 6561 7228 290d 0a0d 0a20  ght.clear().... 
-0000e420: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000e430: 4173 7365 744c 6973 744c 6566 742e 7365  AssetListLeft.se
-0000e440: 7450 6c61 696e 5465 7874 2864 6174 615b  tPlainText(data[
-0000e450: 2261 3122 5d29 0d0a 2020 2020 2020 2020  "a1"])..        
-0000e460: 2020 2020 7365 6c66 2e41 7373 6574 4c69      self.AssetLi
-0000e470: 7374 5269 6768 742e 7365 7450 6c61 696e  stRight.setPlain
-0000e480: 5465 7874 2864 6174 615b 2261 3222 5d29  Text(data["a2"])
-0000e490: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0000e4a0: 6c66 2e4c 6961 6269 6c69 7479 4c69 7374  lf.LiabilityList
-0000e4b0: 4c65 6674 2e73 6574 506c 6169 6e54 6578  Left.setPlainTex
-0000e4c0: 7428 6461 7461 5b22 6c31 225d 2920 2023  t(data["l1"])  #
-0000e4d0: 202b 6461 7461 5b22 6531 225d 290d 0a20   +data["e1"]).. 
-0000e4e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000e4f0: 4c69 6162 696c 6974 794c 6973 7452 6967  LiabilityListRig
-0000e500: 6874 2e73 6574 506c 6169 6e54 6578 7428  ht.setPlainText(
-0000e510: 6461 7461 5b22 6c32 225d 2920 2320 2b64  data["l2"]) # +d
-0000e520: 6174 615b 2265 3222 5d29 0d0a 2020 2020  ata["e2"])..    
-0000e530: 2020 2020 2020 2020 7365 6c66 2e45 7175          self.Equ
-0000e540: 6974 794c 6973 744c 6566 742e 7365 7450  ityListLeft.setP
-0000e550: 6c61 696e 5465 7874 2864 6174 615b 2265  lainText(data["e
-0000e560: 3122 5d29 0d0a 2020 2020 2020 2020 2020  1"])..          
-0000e570: 2020 7365 6c66 2e45 7175 6974 794c 6973    self.EquityLis
-0000e580: 7452 6967 6874 2e73 6574 506c 6169 6e54  tRight.setPlainT
-0000e590: 6578 7428 6461 7461 5b22 6532 225d 290d  ext(data["e2"]).
-0000e5a0: 0a0d 0a20 2020 2020 2020 2020 2020 2073  ...            s
-0000e5b0: 656c 662e 6167 656e 7431 4564 6974 2e73  elf.agent1Edit.s
-0000e5c0: 6574 5465 7874 2863 616d 656c 2864 6174  etText(camel(dat
-0000e5d0: 615b 2261 6765 6e74 3122 5d29 2920 232e  a["agent1"])) #.
-0000e5e0: 6361 7069 7461 6c69 7a65 2829 290d 0a20  capitalize()).. 
-0000e5f0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000e600: 6167 656e 7432 4564 6974 2e73 6574 5465  agent2Edit.setTe
-0000e610: 7874 2863 616d 656c 2864 6174 615b 2261  xt(camel(data["a
-0000e620: 6765 6e74 3222 5d29 2920 2320 2e63 6170  gent2"])) # .cap
-0000e630: 6974 616c 697a 6528 2929 0d0a 0d0a 2020  italize())....  
-0000e640: 2020 2020 2020 2020 2020 7365 6c66 2e72            self.r
-0000e650: 6567 6973 7465 7246 6c6f 7742 6f78 2e73  egisterFlowBox.s
-0000e660: 6574 4375 7272 656e 7449 6e64 6578 2873  etCurrentIndex(s
-0000e670: 656c 662e 7265 6769 7374 6572 466c 6f77  elf.registerFlow
-0000e680: 426f 782e 6669 6e64 5465 7874 2873 7472  Box.findText(str
-0000e690: 2864 6174 615b 226c 6f67 2074 7261 6e73  (data["log trans
-0000e6a0: 6163 7469 6f6e 225d 2929 290d 0a0d 0a20  action"]))).... 
-0000e6b0: 2020 2020 2020 2020 2020 2063 6173 6866             cashf
-0000e6c0: 6c6f 7731 203d 2064 6174 615b 2263 6173  low1 = data["cas
-0000e6d0: 6866 6c6f 7731 225d 206f 7220 224e 6f6e  hflow1"] or "Non
-0000e6e0: 6522 0d0a 2020 2020 2020 2020 2020 2020  e"..            
-0000e6f0: 6361 7368 666c 6f77 3220 3d20 6461 7461  cashflow2 = data
-0000e700: 5b22 6361 7368 666c 6f77 3222 5d20 6f72  ["cashflow2"] or
-0000e710: 2022 4e6f 6e65 220d 0a20 2020 2020 2020   "None"..       
-0000e720: 2020 2020 2073 656c 662e 636f 6d62 6f43       self.comboC
-0000e730: 6173 684c 6566 742e 7365 7443 7572 7265  ashLeft.setCurre
-0000e740: 6e74 496e 6465 7828 7365 6c66 2e63 6f6d  ntIndex(self.com
-0000e750: 626f 4361 7368 4c65 6674 2e66 696e 6454  boCashLeft.findT
-0000e760: 6578 7428 7374 7228 6361 7368 666c 6f77  ext(str(cashflow
-0000e770: 3129 2929 0d0a 2020 2020 2020 2020 2020  1)))..          
-0000e780: 2020 7365 6c66 2e63 6f6d 626f 4361 7368    self.comboCash
-0000e790: 5269 6768 742e 7365 7443 7572 7265 6e74  Right.setCurrent
-0000e7a0: 496e 6465 7828 7365 6c66 2e63 6f6d 626f  Index(self.combo
-0000e7b0: 4361 7368 5269 6768 742e 6669 6e64 5465  CashRight.findTe
-0000e7c0: 7874 2873 7472 2863 6173 6866 6c6f 7732  xt(str(cashflow2
-0000e7d0: 2929 290d 0a0d 0a20 2020 2020 2020 2020  )))....         
-0000e7e0: 2020 2074 7274 7970 6520 3d20 6461 7461     trtype = data
-0000e7f0: 5b22 6b69 6e64 225d 206f 7220 224b 412d  ["kind"] or "KA-
-0000e800: 3e4b 4122 0d0a 2020 2020 2020 2020 2020  >KA"..          
-0000e810: 2020 7365 6c66 2e65 6469 7454 7970 652e    self.editType.
-0000e820: 7365 7443 7572 7265 6e74 496e 6465 7828  setCurrentIndex(
-0000e830: 7365 6c66 2e65 6469 7454 7970 652e 6669  self.editType.fi
-0000e840: 6e64 5465 7874 2873 7472 2874 7274 7970  ndText(str(trtyp
-0000e850: 6529 2929 0d0a 0d0a 2020 2020 2020 2020  e)))....        
-0000e860: 2020 2020 6963 7331 203d 2064 6174 615b      ics1 = data[
-0000e870: 2269 6e63 6f6d 6531 225d 206f 7220 224e  "income1"] or "N
-0000e880: 6f6e 6522 0d0a 2020 2020 2020 2020 2020  one"..          
-0000e890: 2020 6963 7332 203d 2064 6174 615b 2269    ics2 = data["i
-0000e8a0: 6e63 6f6d 6532 225d 206f 7220 224e 6f6e  ncome2"] or "Non
-0000e8b0: 6522 0d0a 2020 2020 2020 2020 2020 2020  e"..            
-0000e8c0: 7365 6c66 2e63 6f6d 626f 496e 636f 6d65  self.comboIncome
-0000e8d0: 4c65 6674 2e73 6574 4375 7272 656e 7449  Left.setCurrentI
-0000e8e0: 6e64 6578 2873 656c 662e 636f 6d62 6f49  ndex(self.comboI
-0000e8f0: 6e63 6f6d 654c 6566 742e 6669 6e64 5465  ncomeLeft.findTe
-0000e900: 7874 2869 6373 3129 290d 0a20 2020 2020  xt(ics1))..     
-0000e910: 2020 2020 2020 2073 656c 662e 636f 6d62         self.comb
-0000e920: 6f49 6e63 6f6d 6552 6967 6874 2e73 6574  oIncomeRight.set
-0000e930: 4375 7272 656e 7449 6e64 6578 2873 656c  CurrentIndex(sel
-0000e940: 662e 636f 6d62 6f49 6e63 6f6d 6552 6967  f.comboIncomeRig
-0000e950: 6874 2e66 696e 6454 6578 7428 6963 7332  ht.findText(ics2
-0000e960: 2929 0d0a 0d0a 2020 2020 2020 2020 2020  ))....          
-0000e970: 2020 7365 6c66 2e65 6469 7451 7561 6e74    self.editQuant
-0000e980: 6974 792e 7365 7454 6578 7428 6461 7461  ity.setText(data
-0000e990: 5b22 7175 616e 7469 7479 225d 290d 0a20  ["quantity"]).. 
-0000e9a0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000e9b0: 6564 6974 5375 626a 6563 742e 7365 7454  editSubject.setT
-0000e9c0: 6578 7428 6461 7461 5b22 7375 626a 6563  ext(data["subjec
-0000e9d0: 7422 5d29 0d0a 0d0a 2020 2020 2020 2020  t"])....        
-0000e9e0: 2020 2020 7365 6c66 2e64 7261 7763 616e      self.drawcan
-0000e9f0: 7661 732e 6869 6768 6c69 6768 745f 636f  vas.highlight_co
-0000ea00: 6e6e 6563 746f 7228 6461 7461 5b22 7368  nnector(data["sh
-0000ea10: 6f72 746e 616d 6522 5d29 0d0a 0d0a 2020  ortname"])....  
-0000ea20: 2020 2020 2020 2020 2020 6966 2022 6465            if "de
-0000ea30: 7363 7269 7074 696f 6e22 2069 6e20 6461  scription" in da
-0000ea40: 7461 3a0d 0a20 2020 2020 2020 2020 2020  ta:..           
-0000ea50: 2020 2020 2073 656c 662e 6564 6974 4465       self.editDe
-0000ea60: 7363 7269 7074 696f 6e2e 7365 7454 6578  scription.setTex
-0000ea70: 7428 6461 7461 5b22 6465 7363 7269 7074  t(data["descript
-0000ea80: 696f 6e22 5d29 0d0a 2020 2020 2020 2020  ion"])..        
-0000ea90: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-0000eaa0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000eab0: 6564 6974 4465 7363 7269 7074 696f 6e2e  editDescription.
-0000eac0: 7365 7454 6578 7428 2222 290d 0a20 2020  setText("")..   
-0000ead0: 2020 2020 2020 2020 2073 656c 662e 6564           self.ed
-0000eae0: 6974 5368 6f72 746e 616d 652e 7365 7454  itShortname.setT
-0000eaf0: 6578 7428 6461 7461 5b22 7368 6f72 746e  ext(data["shortn
-0000eb00: 616d 6522 5d29 0d0a 0d0a 2020 2020 2020  ame"])....      
-0000eb10: 2020 2020 2020 756e 6964 6972 203d 2073        unidir = s
-0000eb20: 7472 2864 6174 615b 2275 6e69 2d64 6972  tr(data["uni-dir
-0000eb30: 6563 7469 6f6e 616c 225d 2920 6f72 2022  ectional"]) or "
-0000eb40: 4e6f 6e65 220d 0a20 2020 2020 2020 2020  None"..         
-0000eb50: 2020 2073 656c 662e 636f 6d62 6f55 6e69     self.comboUni
-0000eb60: 6469 722e 7365 7443 7572 7265 6e74 496e  dir.setCurrentIn
-0000eb70: 6465 7828 7365 6c66 2e63 6f6d 626f 556e  dex(self.comboUn
-0000eb80: 6964 6972 2e66 696e 6454 6578 7428 756e  idir.findText(un
-0000eb90: 6964 6972 2929 0d0a 0d0a 2020 2020 2020  idir))....      
-0000eba0: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
-0000ebb0: 6f6e 2061 7320 653a 0d0a 2020 2020 2020  on as e:..      
-0000ebc0: 2020 2020 2020 7365 6c66 2e6e 6f74 6966        self.notif
-0000ebd0: 7928 7374 7228 6529 2c74 6974 6c65 3d22  y(str(e),title="
-0000ebe0: 4572 726f 7222 290d 0a0d 0a20 2020 2020  Error")....     
-0000ebf0: 2020 2073 656c 662e 6d61 6465 5f63 6861     self.made_cha
-0000ec00: 6e67 6573 203d 2046 616c 7365 0d0a 0d0a  nges = False....
-0000ec10: 2020 2020 6465 6620 7570 6461 7465 5f64      def update_d
-0000ec20: 6174 6128 7365 6c66 293a 0d0a 2020 2020  ata(self):..    
-0000ec30: 2020 2020 6966 2073 656c 662e 7365 6c65      if self.sele
-0000ec40: 6374 696f 6e5f 6964 7820 6973 204e 6f6e  ction_idx is Non
-0000ec50: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0000ec60: 7265 7475 726e 0d0a 0d0a 2020 2020 2020  return....      
-0000ec70: 2020 7365 6c66 2e65 6e74 7279 5f64 6174    self.entry_dat
-0000ec80: 615b 7365 6c66 2e73 656c 6563 7469 6f6e  a[self.selection
-0000ec90: 5f69 6478 5d5b 2261 3122 5d20 3d20 7365  _idx]["a1"] = se
-0000eca0: 6c66 2e41 7373 6574 4c69 7374 4c65 6674  lf.AssetListLeft
-0000ecb0: 2e74 6f50 6c61 696e 5465 7874 2829 0d0a  .toPlainText()..
-0000ecc0: 2020 2020 2020 2020 7365 6c66 2e65 6e74          self.ent
-0000ecd0: 7279 5f64 6174 615b 7365 6c66 2e73 656c  ry_data[self.sel
-0000ece0: 6563 7469 6f6e 5f69 6478 5d5b 2261 3222  ection_idx]["a2"
-0000ecf0: 5d20 3d20 7365 6c66 2e41 7373 6574 4c69  ] = self.AssetLi
-0000ed00: 7374 5269 6768 742e 746f 506c 6169 6e54  stRight.toPlainT
-0000ed10: 6578 7428 290d 0a20 2020 2020 2020 2073  ext()..        s
-0000ed20: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
-0000ed30: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
-0000ed40: 785d 5b22 6c31 225d 203d 2073 656c 662e  x]["l1"] = self.
-0000ed50: 4c69 6162 696c 6974 794c 6973 744c 6566  LiabilityListLef
-0000ed60: 742e 746f 506c 6169 6e54 6578 7428 290d  t.toPlainText().
-0000ed70: 0a20 2020 2020 2020 2073 656c 662e 656e  .        self.en
-0000ed80: 7472 795f 6461 7461 5b73 656c 662e 7365  try_data[self.se
-0000ed90: 6c65 6374 696f 6e5f 6964 785d 5b22 6c32  lection_idx]["l2
-0000eda0: 225d 203d 2073 656c 662e 4c69 6162 696c  "] = self.Liabil
-0000edb0: 6974 794c 6973 7452 6967 6874 2e74 6f50  ityListRight.toP
-0000edc0: 6c61 696e 5465 7874 2829 0d0a 2020 2020  lainText()..    
-0000edd0: 2020 2020 7365 6c66 2e65 6e74 7279 5f64      self.entry_d
-0000ede0: 6174 615b 7365 6c66 2e73 656c 6563 7469  ata[self.selecti
-0000edf0: 6f6e 5f69 6478 5d5b 2265 3122 5d20 3d20  on_idx]["e1"] = 
-0000ee00: 7365 6c66 2e45 7175 6974 794c 6973 744c  self.EquityListL
-0000ee10: 6566 742e 746f 506c 6169 6e54 6578 7428  eft.toPlainText(
-0000ee20: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-0000ee30: 656e 7472 795f 6461 7461 5b73 656c 662e  entry_data[self.
-0000ee40: 7365 6c65 6374 696f 6e5f 6964 785d 5b22  selection_idx]["
-0000ee50: 6532 225d 203d 2073 656c 662e 4571 7569  e2"] = self.Equi
-0000ee60: 7479 4c69 7374 5269 6768 742e 746f 506c  tyListRight.toPl
-0000ee70: 6169 6e54 6578 7428 290d 0a0d 0a20 2020  ainText()....   
-0000ee80: 2020 2020 2073 656c 662e 656e 7472 795f       self.entry_
-0000ee90: 6461 7461 5b73 656c 662e 7365 6c65 6374  data[self.select
-0000eea0: 696f 6e5f 6964 785d 5b22 6131 225d 2020  ion_idx]["a1"]  
-0000eeb0: 3d20 7365 6c66 2e41 7373 6574 4c69 7374  = self.AssetList
-0000eec0: 4c65 6674 2e74 6f50 6c61 696e 5465 7874  Left.toPlainText
-0000eed0: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
-0000eee0: 2e65 6e74 7279 5f64 6174 615b 7365 6c66  .entry_data[self
-0000eef0: 2e73 656c 6563 7469 6f6e 5f69 6478 5d5b  .selection_idx][
-0000ef00: 2261 3222 5d20 3d20 7365 6c66 2e41 7373  "a2"] = self.Ass
-0000ef10: 6574 4c69 7374 5269 6768 742e 746f 506c  etListRight.toPl
-0000ef20: 6169 6e54 6578 7428 290d 0a20 2020 2020  ainText()..     
-0000ef30: 2020 2073 656c 662e 656e 7472 795f 6461     self.entry_da
-0000ef40: 7461 5b73 656c 662e 7365 6c65 6374 696f  ta[self.selectio
-0000ef50: 6e5f 6964 785d 5b22 6c31 225d 2020 3d20  n_idx]["l1"]  = 
-0000ef60: 7365 6c66 2e4c 6961 6269 6c69 7479 4c69  self.LiabilityLi
-0000ef70: 7374 4c65 6674 2e74 6f50 6c61 696e 5465  stLeft.toPlainTe
-0000ef80: 7874 2829 0d0a 2020 2020 2020 2020 7365  xt()..        se
-0000ef90: 6c66 2e65 6e74 7279 5f64 6174 615b 7365  lf.entry_data[se
-0000efa0: 6c66 2e73 656c 6563 7469 6f6e 5f69 6478  lf.selection_idx
-0000efb0: 5d5b 226c 3222 5d20 203d 2073 656c 662e  ]["l2"]  = self.
-0000efc0: 4c69 6162 696c 6974 794c 6973 7452 6967  LiabilityListRig
-0000efd0: 6874 2e74 6f50 6c61 696e 5465 7874 2829  ht.toPlainText()
-0000efe0: 0d0a 2020 2020 2020 2020 7365 6c66 2e65  ..        self.e
-0000eff0: 6e74 7279 5f64 6174 615b 7365 6c66 2e73  ntry_data[self.s
-0000f000: 656c 6563 7469 6f6e 5f69 6478 5d5b 2265  election_idx]["e
-0000f010: 3122 5d20 203d 2073 656c 662e 4571 7569  1"]  = self.Equi
-0000f020: 7479 4c69 7374 4c65 6674 2e74 6f50 6c61  tyListLeft.toPla
-0000f030: 696e 5465 7874 2829 0d0a 2020 2020 2020  inText()..      
-0000f040: 2020 7365 6c66 2e65 6e74 7279 5f64 6174    self.entry_dat
-0000f050: 615b 7365 6c66 2e73 656c 6563 7469 6f6e  a[self.selection
-0000f060: 5f69 6478 5d5b 2265 3222 5d20 203d 2073  _idx]["e2"]  = s
-0000f070: 656c 662e 4571 7569 7479 4c69 7374 5269  elf.EquityListRi
-0000f080: 6768 742e 746f 506c 6169 6e54 6578 7428  ght.toPlainText(
-0000f090: 290d 0a0d 0a20 2020 2020 2020 206f 6e6c  )....        onl
-0000f0a0: 795f 7265 6e61 6d65 203d 2054 7275 650d  y_rename = True.
-0000f0b0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-0000f0c0: 2e65 6e74 7279 5f64 6174 615b 7365 6c66  .entry_data[self
-0000f0d0: 2e73 656c 6563 7469 6f6e 5f69 6478 5d5b  .selection_idx][
-0000f0e0: 2261 6765 6e74 3122 5d20 2021 3d20 7365  "agent1"]  != se
-0000f0f0: 6c66 2e61 6765 6e74 3145 6469 742e 7465  lf.agent1Edit.te
-0000f100: 7874 2829 3a0d 0a20 2020 2020 2020 2020  xt():..         
-0000f110: 2020 206f 6e6c 795f 7265 6e61 6d65 203d     only_rename =
-0000f120: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
-0000f130: 6966 2073 656c 662e 656e 7472 795f 6461  if self.entry_da
-0000f140: 7461 5b73 656c 662e 7365 6c65 6374 696f  ta[self.selectio
-0000f150: 6e5f 6964 785d 5b22 6167 656e 7432 225d  n_idx]["agent2"]
-0000f160: 2020 213d 7365 6c66 2e61 6765 6e74 3245    !=self.agent2E
-0000f170: 6469 742e 7465 7874 2829 3a0d 0a20 2020  dit.text():..   
-0000f180: 2020 2020 2020 2020 206f 6e6c 795f 7265           only_re
-0000f190: 6e61 6d65 203d 2046 616c 7365 0d0a 0d0a  name = False....
-0000f1a0: 0d0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
-0000f1b0: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
-0000f1c0: 2e63 6865 636b 5f65 7869 7374 2873 656c  .check_exist(sel
-0000f1d0: 662e 6167 656e 7431 4564 6974 2e74 6578  f.agent1Edit.tex
-0000f1e0: 7428 2929 3a0d 0a20 2020 2020 2020 2020  t()):..         
-0000f1f0: 2020 2069 6620 7365 6c66 2e61 6765 6e74     if self.agent
-0000f200: 3145 6469 742e 7465 7874 2829 2e73 7472  1Edit.text().str
-0000f210: 6970 2829 2021 3d20 2222 3a0d 0a20 2020  ip() != "":..   
-0000f220: 2020 2020 2020 2020 2020 2020 2079 6573               yes
-0000f230: 203d 2073 656c 662e 6173 6b5f 7175 6573   = self.ask_ques
-0000f240: 7469 6f6e 2827 272c 2254 6865 2061 6765  tion('',"The age
-0000f250: 6e74 2025 7320 646f 6573 206e 6f74 2065  nt %s does not e
-0000f260: 7869 7374 2e5c 6e44 6f20 796f 7520 7769  xist.\nDo you wi
-0000f270: 7368 2074 6f20 636f 6e74 696e 7565 2061  sh to continue a
-0000f280: 6e64 2061 7574 6f6d 6174 6963 616c 6c79  nd automatically
-0000f290: 2063 7265 6174 6520 6120 6e65 7720 6167   create a new ag
-0000f2a0: 656e 743f 2225 7365 6c66 2e61 6765 6e74  ent?"%self.agent
-0000f2b0: 3145 6469 742e 7465 7874 2829 290d 0a20  1Edit.text()).. 
-0000f2c0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000f2d0: 6620 6e6f 7420 7965 733a 0d0a 2020 2020  f not yes:..    
-0000f2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f2f0: 7265 7475 726e 0d0a 0d0a 2020 2020 2020  return....      
-0000f300: 2020 6966 206e 6f74 2073 656c 662e 6472    if not self.dr
-0000f310: 6177 6361 6e76 6173 2e63 6865 636b 5f65  awcanvas.check_e
-0000f320: 7869 7374 2873 656c 662e 6167 656e 7432  xist(self.agent2
-0000f330: 4564 6974 2e74 6578 7428 2929 3a0d 0a20  Edit.text()):.. 
-0000f340: 2020 2020 2020 2020 2020 2069 6620 7365             if se
-0000f350: 6c66 2e61 6765 6e74 3245 6469 742e 7465  lf.agent2Edit.te
-0000f360: 7874 2829 2e73 7472 6970 2829 2021 3d20  xt().strip() != 
-0000f370: 2222 3a0d 0a20 2020 2020 2020 2020 2020  "":..           
-0000f380: 2020 2020 2079 6573 203d 2073 656c 662e       yes = self.
-0000f390: 6173 6b5f 7175 6573 7469 6f6e 2827 272c  ask_question('',
-0000f3a0: 2254 6865 2061 6765 6e74 2025 7320 646f  "The agent %s do
-0000f3b0: 6573 206e 6f74 2065 7869 7374 2e5c 6e44  es not exist.\nD
-0000f3c0: 6f20 796f 7520 7769 7368 2074 6f20 636f  o you wish to co
-0000f3d0: 6e74 696e 7565 2061 6e64 2061 7574 6f6d  ntinue and autom
-0000f3e0: 6174 6963 616c 6c79 2063 7265 6174 6520  atically create 
-0000f3f0: 6120 6e65 7720 6167 656e 743f 2225 7365  a new agent?"%se
-0000f400: 6c66 2e61 6765 6e74 3245 6469 742e 7465  lf.agent2Edit.te
-0000f410: 7874 2829 290d 0a20 2020 2020 2020 2020  xt())..         
-0000f420: 2020 2020 2020 2069 6620 6e6f 7420 7965         if not ye
-0000f430: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
-0000f440: 2020 2020 2020 2020 7265 7475 726e 0d0a          return..
-0000f450: 0d0a 2020 2020 2020 2020 7365 6c66 2e65  ..        self.e
-0000f460: 6e74 7279 5f64 6174 615b 7365 6c66 2e73  ntry_data[self.s
-0000f470: 656c 6563 7469 6f6e 5f69 6478 5d5b 2261  election_idx]["a
-0000f480: 6765 6e74 3122 5d20 203d 2063 616d 656c  gent1"]  = camel
-0000f490: 2873 656c 662e 6167 656e 7431 4564 6974  (self.agent1Edit
-0000f4a0: 2e74 6578 7428 2929 2023 2e63 6170 6974  .text()) #.capit
-0000f4b0: 616c 697a 6528 2920 2320 7570 7065 7220  alize() # upper 
-0000f4c0: 6265 6361 7573 6520 6167 656e 7473 2061  because agents a
-0000f4d0: 7265 2061 6c77 6179 7320 7570 7065 7263  re always upperc
-0000f4e0: 6173 650d 0a20 2020 2020 2020 2073 656c  ase..        sel
-0000f4f0: 662e 656e 7472 795f 6461 7461 5b73 656c  f.entry_data[sel
-0000f500: 662e 7365 6c65 6374 696f 6e5f 6964 785d  f.selection_idx]
-0000f510: 5b22 6167 656e 7432 225d 2020 3d20 6361  ["agent2"]  = ca
-0000f520: 6d65 6c28 7365 6c66 2e61 6765 6e74 3245  mel(self.agent2E
-0000f530: 6469 742e 7465 7874 2829 2920 232e 6361  dit.text()) #.ca
-0000f540: 7069 7461 6c69 7a65 2829 0d0a 0d0a 2020  pitalize()....  
-0000f550: 2020 2020 2020 7365 6c66 2e61 6765 6e74        self.agent
-0000f560: 3145 6469 742e 7365 7454 6578 7428 6361  1Edit.setText(ca
-0000f570: 6d65 6c28 7365 6c66 2e61 6765 6e74 3145  mel(self.agent1E
-0000f580: 6469 742e 7465 7874 2829 2929 2023 2e63  dit.text())) #.c
-0000f590: 6170 6974 616c 697a 6528 2929 0d0a 2020  apitalize())..  
-0000f5a0: 2020 2020 2020 7365 6c66 2e61 6765 6e74        self.agent
-0000f5b0: 3245 6469 742e 7365 7454 6578 7428 6361  2Edit.setText(ca
-0000f5c0: 6d65 6c28 7365 6c66 2e61 6765 6e74 3245  mel(self.agent2E
-0000f5d0: 6469 742e 7465 7874 2829 2929 2023 2e63  dit.text())) #.c
-0000f5e0: 6170 6974 616c 697a 6528 2929 0d0a 0d0a  apitalize())....
-0000f5f0: 2020 2020 2020 2020 7365 6c66 2e65 6e74          self.ent
-0000f600: 7279 5f64 6174 615b 7365 6c66 2e73 656c  ry_data[self.sel
-0000f610: 6563 7469 6f6e 5f69 6478 5d5b 2275 6e69  ection_idx]["uni
-0000f620: 2d64 6972 6563 7469 6f6e 616c 225d 203d  -directional"] =
-0000f630: 205c 0d0a 2020 2020 2020 2020 2020 2020   \..            
-0000f640: 7374 7228 7365 6c66 2e63 6f6d 626f 556e  str(self.comboUn
-0000f650: 6964 6972 2e63 7572 7265 6e74 5465 7874  idir.currentText
-0000f660: 2829 290d 0a0d 0a20 2020 2020 2020 2073  ())....        s
-0000f670: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
-0000f680: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
-0000f690: 785d 5b22 6c6f 6720 7472 616e 7361 6374  x]["log transact
-0000f6a0: 696f 6e22 5d20 3d5c 0d0a 2020 2020 2020  ion"] =\..      
-0000f6b0: 2020 2020 2020 7374 7228 7365 6c66 2e72        str(self.r
-0000f6c0: 6567 6973 7465 7246 6c6f 7742 6f78 2e63  egisterFlowBox.c
-0000f6d0: 7572 7265 6e74 5465 7874 2829 290d 0a0d  urrentText())...
-0000f6e0: 0a20 2020 2020 2020 2073 656c 662e 656e  .        self.en
-0000f6f0: 7472 795f 6461 7461 5b73 656c 662e 7365  try_data[self.se
-0000f700: 6c65 6374 696f 6e5f 6964 785d 5b22 6361  lection_idx]["ca
-0000f710: 7368 666c 6f77 3122 5d20 3d20 5c0d 0a20  shflow1"] = \.. 
-0000f720: 2020 2020 2020 2020 2020 2073 7472 2873             str(s
-0000f730: 656c 662e 636f 6d62 6f43 6173 684c 6566  elf.comboCashLef
-0000f740: 742e 6375 7272 656e 7454 6578 7428 2929  t.currentText())
-0000f750: 0d0a 2020 2020 2020 2020 7365 6c66 2e65  ..        self.e
-0000f760: 6e74 7279 5f64 6174 615b 7365 6c66 2e73  ntry_data[self.s
-0000f770: 656c 6563 7469 6f6e 5f69 6478 5d5b 2263  election_idx]["c
-0000f780: 6173 6866 6c6f 7732 225d 203d 205c 0d0a  ashflow2"] = \..
-0000f790: 2020 2020 2020 2020 2020 2020 7374 7228              str(
-0000f7a0: 7365 6c66 2e63 6f6d 626f 4361 7368 5269  self.comboCashRi
-0000f7b0: 6768 742e 6375 7272 656e 7454 6578 7428  ght.currentText(
-0000f7c0: 2929 0d0a 0d0a 2020 2020 2020 2020 7365  ))....        se
-0000f7d0: 6c66 2e65 6e74 7279 5f64 6174 615b 7365  lf.entry_data[se
-0000f7e0: 6c66 2e73 656c 6563 7469 6f6e 5f69 6478  lf.selection_idx
-0000f7f0: 5d5b 226b 696e 6422 5d20 3d20 5c0d 0a20  ]["kind"] = \.. 
-0000f800: 2020 2020 2020 2020 2020 2073 7472 2873             str(s
-0000f810: 656c 662e 6564 6974 5479 7065 2e63 7572  elf.editType.cur
-0000f820: 7265 6e74 5465 7874 2829 290d 0a0d 0a20  rentText()).... 
-0000f830: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
-0000f840: 795f 6461 7461 5b73 656c 662e 7365 6c65  y_data[self.sele
-0000f850: 6374 696f 6e5f 6964 785d 5b22 696e 636f  ction_idx]["inco
-0000f860: 6d65 3122 5d20 3d20 5c0d 0a20 2020 2020  me1"] = \..     
-0000f870: 2020 2020 2020 2073 7472 2873 656c 662e         str(self.
-0000f880: 636f 6d62 6f49 6e63 6f6d 654c 6566 742e  comboIncomeLeft.
-0000f890: 6375 7272 656e 7454 6578 7428 2929 0d0a  currentText())..
-0000f8a0: 2020 2020 2020 2020 7365 6c66 2e65 6e74          self.ent
-0000f8b0: 7279 5f64 6174 615b 7365 6c66 2e73 656c  ry_data[self.sel
-0000f8c0: 6563 7469 6f6e 5f69 6478 5d5b 2269 6e63  ection_idx]["inc
-0000f8d0: 6f6d 6532 225d 203d 205c 0d0a 2020 2020  ome2"] = \..    
-0000f8e0: 2020 2020 2020 2020 7374 7228 7365 6c66          str(self
-0000f8f0: 2e63 6f6d 626f 496e 636f 6d65 5269 6768  .comboIncomeRigh
-0000f900: 742e 6375 7272 656e 7454 6578 7428 2929  t.currentText())
-0000f910: 0d0a 0d0a 0d0a 2020 2020 2020 2020 6966  ......        if
-0000f920: 206f 6e6c 795f 7265 6e61 6d65 3a0d 0a0d   only_rename:...
-0000f930: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0000f940: 662e 6472 6177 6361 6e76 6173 2e72 656e  f.drawcanvas.ren
-0000f950: 616d 655f 636f 6e6e 6563 7469 6f6e 2873  ame_connection(s
-0000f960: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
-0000f970: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
-0000f980: 785d 5b22 7368 6f72 746e 616d 6522 5d20  x]["shortname"] 
-0000f990: 2c20 7374 7228 7365 6c66 2e65 6469 7453  , str(self.editS
-0000f9a0: 686f 7274 6e61 6d65 2e74 6578 7428 2929  hortname.text())
-0000f9b0: 290d 0a0d 0a20 2020 2020 2020 2065 6c73  )....        els
-0000f9c0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0000f9d0: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
-0000f9e0: 7265 6d6f 7665 5f63 6f6e 6e65 6374 696f  remove_connectio
-0000f9f0: 6e28 7365 6c66 2e65 6e74 7279 5f64 6174  n(self.entry_dat
-0000fa00: 615b 7365 6c66 2e73 656c 6563 7469 6f6e  a[self.selection
-0000fa10: 5f69 6478 5d5b 2273 686f 7274 6e61 6d65  _idx]["shortname
-0000fa20: 225d 2920 232c 2073 7472 2873 656c 662e  "]) #, str(self.
-0000fa30: 6564 6974 5375 626a 6563 742e 7465 7874  editSubject.text
-0000fa40: 2829 2929 0d0a 0d0a 2020 2020 2020 2020  ()))....        
-0000fa50: 2020 2020 626f 7831 203d 2073 656c 662e      box1 = self.
-0000fa60: 6472 6177 6361 6e76 6173 2e61 6464 5f61  drawcanvas.add_a
-0000fa70: 6765 6e74 2873 656c 662e 656e 7472 795f  gent(self.entry_
-0000fa80: 6461 7461 5b73 656c 662e 7365 6c65 6374  data[self.select
-0000fa90: 696f 6e5f 6964 785d 5b22 6167 656e 7431  ion_idx]["agent1
-0000faa0: 225d 290d 0a20 2020 2020 2020 2020 2020  "])..           
-0000fab0: 2062 6f78 3220 3d20 7365 6c66 2e64 7261   box2 = self.dra
-0000fac0: 7763 616e 7661 732e 6164 645f 6167 656e  wcanvas.add_agen
-0000fad0: 7428 7365 6c66 2e65 6e74 7279 5f64 6174  t(self.entry_dat
-0000fae0: 615b 7365 6c66 2e73 656c 6563 7469 6f6e  a[self.selection
-0000faf0: 5f69 6478 5d5b 2261 6765 6e74 3222 5d29  _idx]["agent2"])
-0000fb00: 0d0a 0d0a 0d0a 2020 2020 2020 2020 2020  ......          
-0000fb10: 2020 6d79 5f69 7465 6d73 203d 205b 5d0d    my_items = [].
-0000fb20: 0a20 2020 2020 2020 2020 2020 2064 6174  .            dat
-0000fb30: 6120 3d20 7365 6c66 2e65 6e74 7279 5f64  a = self.entry_d
-0000fb40: 6174 615b 7365 6c66 2e73 656c 6563 7469  ata[self.selecti
-0000fb50: 6f6e 5f69 6478 5d0d 0a0d 0a20 2020 2020  on_idx]....     
-0000fb60: 2020 2020 2020 2061 6c6c 656e 7472 6965         allentrie
-0000fb70: 7320 3d20 225c 6e22 2e6a 6f69 6e28 5b64  s = "\n".join([d
-0000fb80: 6174 615b 226c 3122 5d2c 2064 6174 615b  ata["l1"], data[
-0000fb90: 2261 3122 5d2c 2064 6174 615b 2265 3122  "a1"], data["e1"
-0000fba0: 5d2c 2064 6174 615b 226c 3222 5d2c 2064  ], data["l2"], d
-0000fbb0: 6174 615b 2261 3222 5d2c 2064 6174 615b  ata["a2"], data[
-0000fbc0: 2265 3222 5d5d 290d 0a20 2020 2020 2020  "e2"]])..       
-0000fbd0: 2020 2020 2066 6f72 2073 7562 5f69 7465       for sub_ite
-0000fbe0: 6d20 696e 2061 6c6c 656e 7472 6965 732e  m in allentries.
-0000fbf0: 7370 6c69 7428 225c 6e22 293a 0d0a 2020  split("\n"):..  
-0000fc00: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-0000fc10: 7220 7375 625f 656e 7472 7920 696e 2073  r sub_entry in s
-0000fc20: 7562 5f69 7465 6d2e 7370 6c69 7428 225c  ub_item.split("\
-0000fc30: 6e22 293a 0d0a 2020 2020 2020 2020 2020  n"):..          
-0000fc40: 2020 2020 2020 2020 2020 656e 7472 7920            entry 
-0000fc50: 3d20 7375 625f 656e 7472 792e 7265 706c  = sub_entry.repl
-0000fc60: 6163 6528 222d 222c 2222 292e 7265 706c  ace("-","").repl
-0000fc70: 6163 6528 222b 222c 2222 292e 7374 7269  ace("+","").stri
-0000fc80: 7028 290d 0a20 2020 2020 2020 2020 2020  p()..           
-0000fc90: 2020 2020 2020 2020 2069 6620 656e 7472           if entr
-0000fca0: 7920 213d 2020 2222 3a0d 0a20 2020 2020  y !=  "":..     
-0000fcb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fcc0: 2020 206d 795f 6974 656d 732e 6170 7065     my_items.appe
-0000fcd0: 6e64 2865 6e74 7279 290d 0a0d 0a0d 0a20  nd(entry)...... 
-0000fce0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000fcf0: 6472 6177 6361 6e76 6173 2e61 6464 5f63  drawcanvas.add_c
-0000fd00: 6f6e 6e65 6374 696f 6e28 626f 7831 2c62  onnection(box1,b
-0000fd10: 6f78 322c 2073 7472 2873 656c 662e 6564  ox2, str(self.ed
-0000fd20: 6974 5368 6f72 746e 616d 652e 7465 7874  itShortname.text
-0000fd30: 2829 292c 7375 626a 6563 743d 7365 6c66  ()),subject=self
-0000fd40: 2e65 6469 7453 7562 6a65 6374 2e74 6578  .editSubject.tex
-0000fd50: 7428 292c 6974 656d 733d 6d79 5f69 7465  t(),items=my_ite
-0000fd60: 6d73 290d 0a0d 0a0d 0a20 2020 2020 2020  ms)......       
-0000fd70: 2073 656c 662e 656e 7472 795f 6461 7461   self.entry_data
-0000fd80: 5b73 656c 662e 7365 6c65 6374 696f 6e5f  [self.selection_
-0000fd90: 6964 785d 5b22 7175 616e 7469 7479 225d  idx]["quantity"]
-0000fda0: 203d 205c 0d0a 2020 2020 2020 2020 2020   = \..          
-0000fdb0: 2020 7374 7228 7365 6c66 2e65 6469 7451    str(self.editQ
-0000fdc0: 7561 6e74 6974 792e 7465 7874 2829 290d  uantity.text()).
-0000fdd0: 0a0d 0a0d 0a20 2020 2020 2020 2073 656c  .....        sel
-0000fde0: 662e 656e 7472 795f 6461 7461 5b73 656c  f.entry_data[sel
-0000fdf0: 662e 7365 6c65 6374 696f 6e5f 6964 785d  f.selection_idx]
-0000fe00: 5b22 7375 626a 6563 7422 5d20 3d20 5c0d  ["subject"] = \.
-0000fe10: 0a20 2020 2020 2020 2020 2020 2073 7472  .            str
-0000fe20: 2873 656c 662e 6564 6974 5375 626a 6563  (self.editSubjec
-0000fe30: 742e 7465 7874 2829 290d 0a0d 0a20 2020  t.text())....   
-0000fe40: 2020 2020 2073 656c 662e 656e 7472 795f       self.entry_
-0000fe50: 6461 7461 5b73 656c 662e 7365 6c65 6374  data[self.select
-0000fe60: 696f 6e5f 6964 785d 5b22 7368 6f72 746e  ion_idx]["shortn
-0000fe70: 616d 6522 5d20 3d20 5c0d 0a20 2020 2020  ame"] = \..     
-0000fe80: 2020 2020 2020 2073 7472 2873 656c 662e         str(self.
-0000fe90: 6564 6974 5368 6f72 746e 616d 652e 7465  editShortname.te
-0000fea0: 7874 2829 290d 0a0d 0a20 2020 2020 2020  xt())....       
-0000feb0: 2073 656c 662e 656e 7472 795f 6461 7461   self.entry_data
-0000fec0: 5b73 656c 662e 7365 6c65 6374 696f 6e5f  [self.selection_
-0000fed0: 6964 785d 5b22 6465 7363 7269 7074 696f  idx]["descriptio
-0000fee0: 6e22 5d20 3d20 5c0d 0a20 2020 2020 2020  n"] = \..       
-0000fef0: 2020 2020 2073 7472 2873 656c 662e 6564       str(self.ed
-0000ff00: 6974 4465 7363 7269 7074 696f 6e2e 7465  itDescription.te
-0000ff10: 7874 2829 290d 0a0d 0a20 2020 2020 2020  xt())....       
-0000ff20: 2073 656c 662e 7570 6461 7465 5f74 6162   self.update_tab
-0000ff30: 6c65 2829 0d0a 0d0a 2020 2020 2020 2020  le()....        
-0000ff40: 7072 696e 7428 2264 6174 6120 6368 616e  print("data chan
-0000ff50: 6765 642e 2229 0d0a 0d0a 2020 2020 2020  ged.")....      
-0000ff60: 2020 7365 6c66 2e6d 6164 655f 6368 616e    self.made_chan
-0000ff70: 6765 7320 3d20 4661 6c73 650d 0a0d 0a20  ges = False.... 
-0000ff80: 2020 2020 2020 2073 656c 662e 726f 775f         self.row_
-0000ff90: 7365 6c65 6374 2873 656c 662e 7365 6c65  select(self.sele
-0000ffa0: 6374 696f 6e5f 6964 7829 0d0a 0d0a 2020  ction_idx)....  
-0000ffb0: 2020 2020 2020 2320 7365 6c66 2e75 6470        # self.udp
-0000ffc0: 6174 6542 7574 746f 6e2e 7365 7454 6578  ateButton.setTex
-0000ffd0: 7428 2255 7064 6174 6520 5661 6c75 6573  t("Update Values
-0000ffe0: 2229 0d0a 0d0a 2020 2020 6465 6620 7361  ")....    def sa
-0000fff0: 7665 2873 656c 6629 3a0d 0a0d 0a20 2020  ve(self):....   
-00010000: 2020 2020 2074 7279 3a0d 0a0d 0a0d 0a20       try:...... 
-00010010: 2020 2020 2020 2020 2020 2066 696c 656e             filen
-00010020: 616d 6520 3d20 7365 6c66 2e63 7572 7265  ame = self.curre
-00010030: 6e74 5f66 696c 6520 2320 7374 6174 7573  nt_file # status
-00010040: 4261 7228 292e 6375 7272 656e 744d 6573  Bar().currentMes
-00010050: 7361 6765 2829 0d0a 2020 2020 2020 2020  sage()..        
-00010060: 2020 2020 7365 6c66 2e6c 6162 656c 5f66      self.label_f
-00010070: 6e61 6d65 2e73 6574 5465 7874 2866 696c  name.setText(fil
-00010080: 656e 616d 6529 0d0a 0d0a 2020 2020 2020  ename)....      
-00010090: 2020 2020 2020 6966 2066 696c 656e 616d        if filenam
-000100a0: 6520 6973 206e 6f74 204e 6f6e 653a 0d0a  e is not None:..
-000100b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000100c0: 2020 7365 6c66 2e73 6176 6561 7328 6669    self.saveas(fi
-000100d0: 6c65 6e61 6d65 290d 0a0d 0a20 2020 2020  lename)....     
-000100e0: 2020 2020 2020 2020 2020 2023 2054 4f44             # TOD
-000100f0: 4f20 6d61 7962 6520 6261 636b 7570 283f  O maybe backup(?
-00010100: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00010110: 2020 2023 2073 656c 662e 6e6f 7469 6679     # self.notify
-00010120: 2822 4669 6c65 2073 6176 6564 2075 6e64  ("File saved und
-00010130: 6572 2025 7322 2025 2066 696c 656e 616d  er %s" % filenam
-00010140: 652c 7469 746c 653d 224f 6b22 290d 0a20  e,title="Ok").. 
-00010150: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00010160: 7269 6e74 2822 4649 4c45 2053 4156 4544  rint("FILE SAVED
-00010170: 2122 290d 0a20 2020 2020 2020 2020 2020  !")..           
-00010180: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-00010190: 2020 2020 2020 2020 7365 6c66 2e73 6176          self.sav
-000101a0: 655f 646c 6728 290d 0a0d 0a20 2020 2020  e_dlg()....     
-000101b0: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-000101c0: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
-000101d0: 2020 2020 2020 2069 6620 6669 6c65 6e61         if filena
-000101e0: 6d65 2021 3d20 2222 3a0d 0a20 2020 2020  me != "":..     
-000101f0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00010200: 6e6f 7469 6679 2873 7472 2865 292c 7469  notify(str(e),ti
-00010210: 746c 653d 2245 7272 6f72 2229 0d0a 0d0a  tle="Error")....
-00010220: 0d0a 0d0a 2020 2020 6465 6620 7361 7665  ....    def save
-00010230: 5f64 6c67 2873 656c 6629 3a0d 0a20 2020  _dlg(self):..   
-00010240: 2020 2020 2074 7279 3a0d 0a0d 0a20 2020       try:....   
-00010250: 2020 2020 2020 2020 2066 696c 656e 616d           filenam
-00010260: 6520 3d20 5146 696c 6544 6961 6c6f 672e  e = QFileDialog.
-00010270: 6765 7453 6176 6546 696c 654e 616d 6528  getSaveFileName(
-00010280: 7365 6c66 2c20 2753 6176 6520 6669 6c65  self, 'Save file
-00010290: 272c 0d0a 2020 2020 2020 2020 2020 2020  ',..            
-000102a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000102b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000102c0: 2020 206f 732e 6765 7463 7764 2829 2c20     os.getcwd(), 
-000102d0: 2261 7474 756e 6520 4669 6c65 7320 282a  "attune Files (*
-000102e0: 2e73 6663 746c 2922 295b 305d 0d0a 2020  .sfctl)")[0]..  
-000102f0: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
-00010300: 7461 7475 7342 6172 2829 2e73 686f 774d  tatusBar().showM
-00010310: 6573 7361 6765 2822 5361 7665 6420 6669  essage("Saved fi
-00010320: 6c65 2022 202b 2066 696c 656e 616d 6529  le " + filename)
-00010330: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00010340: 6375 7272 656e 745f 6669 6c65 5f62 6163  current_file_bac
-00010350: 6b75 7020 3d20 7365 6c66 2e63 7572 7265  kup = self.curre
-00010360: 6e74 5f66 696c 650d 0a0d 0a20 2020 2020  nt_file....     
-00010370: 2020 2020 2020 2069 6620 6669 6c65 6e61         if filena
-00010380: 6d65 2069 7320 6e6f 7420 4e6f 6e65 2061  me is not None a
-00010390: 6e64 2066 696c 656e 616d 6520 213d 2022  nd filename != "
-000103a0: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
-000103b0: 2020 2020 7365 6c66 2e6c 6162 656c 5f66      self.label_f
-000103c0: 6e61 6d65 2e73 6574 5465 7874 2866 696c  name.setText(fil
-000103d0: 656e 616d 6529 0d0a 0d0a 2020 2020 2020  ename)....      
-000103e0: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
-000103f0: 7572 7265 6e74 5f66 696c 6520 3d20 6669  urrent_file = fi
-00010400: 6c65 6e61 6d65 0d0a 2020 2020 2020 2020  lename..        
-00010410: 2020 2020 2020 2020 7365 6c66 2e73 6176          self.sav
-00010420: 6561 7328 6669 6c65 6e61 6d65 290d 0a0d  eas(filename)...
-00010430: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
-00010440: 4f44 4f20 6d61 7962 6520 6261 636b 7570  ODO maybe backup
-00010450: 283f 290d 0a0d 0a20 2020 2020 2020 2065  (?)....        e
-00010460: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
-00010470: 6173 2065 3a0d 0a20 2020 2020 2020 2020  as e:..         
-00010480: 2020 2073 656c 662e 6e6f 7469 6679 2822     self.notify("
-00010490: 436f 756c 6420 6e6f 7420 7361 7665 2070  Could not save p
-000104a0: 726f 6a65 6374 2e22 2c74 6974 6c65 3d22  roject.",title="
-000104b0: 4572 726f 7222 290d 0a20 2020 2020 2020  Error")..       
-000104c0: 2020 2020 2073 656c 662e 6375 7272 656e       self.curren
-000104d0: 745f 6669 6c65 203d 2063 7572 7265 6e74  t_file = current
-000104e0: 5f66 696c 655f 6261 636b 7570 0d0a 0d0a  _file_backup....
-000104f0: 0d0a 2020 2020 6465 6620 7361 7665 6173  ..    def saveas
-00010500: 2873 656c 662c 6669 6c65 6e61 6d65 293a  (self,filename):
-00010510: 0d0a 0d0a 2020 2020 2020 2020 6674 6865  ....        fthe
-00010520: 6d65 203d 204e 6f6e 650d 0a20 2020 2020  me = None..     
-00010530: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
-00010540: 2020 2020 2066 7468 656d 6520 3d20 6669       ftheme = fi
-00010550: 6c65 6e61 6d65 5b3a 2d35 5d2b 2273 6663  lename[:-5]+"sfc
-00010560: 7468 656d 6522 2023 2061 6273 6f6c 7574  theme" # absolut
-00010570: 6520 6669 6c65 2070 6174 680d 0a20 2020  e file path..   
-00010580: 2020 2020 2020 2020 2066 6f6c 6465 722c           folder,
-00010590: 6674 6865 6d65 203d 206f 732e 7061 7468  ftheme = os.path
-000105a0: 2e73 706c 6974 2866 7468 656d 6529 2023  .split(ftheme) #
-000105b0: 2063 6f6e 7665 7274 2074 6f20 7265 6c61   convert to rela
-000105c0: 7469 7665 2066 696c 6520 7061 7468 0d0a  tive file path..
-000105d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000105e0: 2e74 6865 6d65 5f6d 616e 6167 6572 2e73  .theme_manager.s
-000105f0: 6176 655f 636f 6c6f 7273 2866 7468 656d  ave_colors(fthem
-00010600: 6529 0d0a 2020 2020 2020 2020 6578 6365  e)..        exce
-00010610: 7074 3a0d 0a20 2020 2020 2020 2020 2020  pt:..           
-00010620: 2073 656c 662e 6e6f 7469 6679 2822 436f   self.notify("Co
-00010630: 756c 6420 6e6f 7420 7361 7665 2063 6f6c  uld not save col
-00010640: 6f72 2074 6865 6d65 2e20 7072 6f63 6565  or theme. procee
-00010650: 6469 6e67 2077 6974 686f 7574 222c 7469  ding without",ti
-00010660: 746c 653d 2245 7272 6f72 2229 0d0a 0d0a  tle="Error")....
-00010670: 0d0a 2020 2020 2020 2020 2320 6472 6177  ..        # draw
-00010680: 6361 6e76 6173 2063 6f64 655f 6461 7461  canvas code_data
-00010690: 0d0a 2020 2020 2020 2020 636f 6465 5f64  ..        code_d
-000106a0: 6174 6120 3d20 7b7d 0d0a 2020 2020 2020  ata = {}..      
-000106b0: 2020 666f 7220 6b2c 7620 696e 2073 656c    for k,v in sel
-000106c0: 662e 6472 6177 6361 6e76 6173 2e63 6f64  f.drawcanvas.cod
-000106d0: 655f 6461 7461 2e69 7465 6d73 2829 3a0d  e_data.items():.
-000106e0: 0a20 2020 2020 2020 2020 2020 2063 6f64  .            cod
-000106f0: 655f 6461 7461 5b6b 5d20 3d20 7374 7228  e_data[k] = str(
-00010700: 762e 656e 636f 6465 2822 7574 662d 3822  v.encode("utf-8"
-00010710: 292e 6465 636f 6465 2827 6370 3132 3532  ).decode('cp1252
-00010720: 2729 290d 0a20 2020 2020 2020 2020 2020  '))..           
-00010730: 2023 2066 6978 2073 6f6d 6520 706f 7465   # fix some pote
-00010740: 6e74 6961 6c20 656e 636f 6469 6e67 2065  ntial encoding e
-00010750: 7272 6f72 730d 0a0d 0a20 2020 2020 2020  rrors....       
-00010760: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
-00010770: 2020 2070 7269 6e74 2822 4649 4c45 4e41     print("FILENA
-00010780: 4d45 222c 2066 696c 656e 616d 6529 0d0a  ME", filename)..
-00010790: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-000107a0: 6c6f 6164 2065 6e74 7269 6573 2069 6e74  load entries int
-000107b0: 6f20 7468 6520 6c69 7374 0d0a 2020 2020  o the list..    
-000107c0: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
-000107d0: 6e28 6669 6c65 6e61 6d65 2c20 2777 2729  n(filename, 'w')
-000107e0: 2061 7320 7374 7265 616d 3a0d 0a0d 0a20   as stream:.... 
-000107f0: 2020 2020 2020 2020 2020 2020 2020 2064                 d
-00010800: 6174 6120 3d20 7b22 7472 616e 7361 6374  ata = {"transact
-00010810: 696f 6e73 223a 2073 656c 662e 656e 7472  ions": self.entr
-00010820: 795f 6461 7461 2c0d 0a20 2020 2020 2020  y_data,..       
-00010830: 2020 2020 2020 2020 2022 6167 656e 7473           "agents
-00010840: 223a 2063 6f64 655f 6461 7461 2c0d 0a20  ": code_data,.. 
-00010850: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00010860: 626f 785f 706f 7369 7469 6f6e 7322 3a20  box_positions": 
-00010870: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
-00010880: 626f 785f 706f 7369 7469 6f6e 7328 292c  box_positions(),
-00010890: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000108a0: 2020 2273 6574 7469 6e67 7322 3a20 7365    "settings": se
-000108b0: 6c66 2e73 6574 7469 6e67 735f 7374 722c  lf.settings_str,
-000108c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000108d0: 2020 226d 6169 6e6c 6f6f 7022 3a20 7365    "mainloop": se
-000108e0: 6c66 2e6d 6169 6e6c 6f6f 705f 7374 722c  lf.mainloop_str,
-000108f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00010900: 2020 2274 6865 6d65 223a 207b 2267 6c6f    "theme": {"glo
-00010910: 6261 6c74 6865 6d65 223a 2073 656c 662e  baltheme": self.
-00010920: 7468 656d 655f 6d61 6e61 6765 722e 7468  theme_manager.th
-00010930: 656d 652c 2022 636f 6c6f 7273 223a 6674  eme, "colors":ft
-00010940: 6865 6d65 7d2c 0d0a 2020 2020 2020 2020  heme},..        
-00010950: 2020 2020 2020 2020 226e 6f74 6573 223a          "notes":
-00010960: 2073 656c 662e 6e6f 7465 7345 6469 742e   self.notesEdit.
-00010970: 746f 506c 6169 6e54 6578 7428 292c 0d0a  toPlainText(),..
-00010980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010990: 7d0d 0a0d 0a20 2020 2020 2020 2020 2020  }....           
-000109a0: 2020 2020 2079 616d 6c2e 6475 6d70 2864       yaml.dump(d
-000109b0: 6174 612c 7374 7265 616d 290d 0a0d 0a20  ata,stream).... 
-000109c0: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
-000109d0: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
-000109e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000109f0: 6e6f 7469 6679 286d 6573 7361 6765 3d73  notify(message=s
-00010a00: 7472 2865 292c 2074 6974 6c65 3d22 4572  tr(e), title="Er
-00010a10: 726f 7222 290d 0a0d 0a0d 0a20 2020 2064  ror")......    d
-00010a20: 6566 2074 7279 5f67 656e 5f6d 6174 7269  ef try_gen_matri
-00010a30: 7828 7365 6c66 293a 0d0a 2020 2020 2020  x(self):..      
-00010a40: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
-00010a50: 2020 2020 7365 6c66 2e67 656e 5f6d 6174      self.gen_mat
-00010a60: 7269 7828 290d 0a20 2020 2020 2020 2065  rix()..        e
-00010a70: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
-00010a80: 6173 2065 3a0d 0a20 2020 2020 2020 2020  as e:..         
-00010a90: 2020 2073 656c 662e 6e6f 7469 6679 2822     self.notify("
-00010aa0: 4572 726f 7222 2c73 7472 2865 2929 0d0a  Error",str(e))..
-00010ab0: 0d0a 2020 2020 6465 6620 6765 6e5f 6d61  ..    def gen_ma
-00010ac0: 7472 6978 2873 656c 662c 6d6f 6465 3d22  trix(self,mode="
-00010ad0: 7374 616e 6461 7264 2229 3a0d 0a20 2020  standard"):..   
-00010ae0: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00010af0: 2020 6765 6e65 7261 7465 2066 6c6f 7720    generate flow 
-00010b00: 6d61 7472 6978 3a0d 0a0d 0a20 2020 2020  matrix:....     
-00010b10: 2020 203a 7061 7261 6d20 6d6f 6465 3a20     :param mode: 
-00010b20: 7374 616e 6461 7264 2c65 7863 656c 2c6c  standard,excel,l
-00010b30: 6174 6578 0d0a 0d0a 2020 2020 2020 2020  atex....        
-00010b40: 7374 616e 6461 7264 3a20 7368 6f77 7320  standard: shows 
-00010b50: 6d61 7472 6978 2067 7261 7068 6963 616c  matrix graphical
-00010b60: 6c79 0d0a 2020 2020 2020 2020 6578 6365  ly..        exce
-00010b70: 6c3a 2065 7870 6f72 7473 2061 6e20 6578  l: exports an ex
-00010b80: 6365 6c20 6669 6c65 0d0a 2020 2020 2020  cel file..      
-00010b90: 2020 6c61 7465 783a 206e 6f74 2079 6574    latex: not yet
-00010ba0: 2073 7570 706f 7274 6564 204e 4f54 2041   supported NOT A
-00010bb0: 5641 494c 4142 4c45 2046 4f52 204e 4f57  VAILABLE FOR NOW
-00010bc0: 0d0a 2020 2020 2020 2020 6874 6d6c 3a20  ..        html: 
-00010bd0: 4e4f 5420 4156 4149 4c41 424c 4520 464f  NOT AVAILABLE FO
-00010be0: 5220 4e4f 570d 0a20 2020 2020 2020 2022  R NOW..        "
-00010bf0: 2222 0d0a 0d0a 2020 2020 2020 2020 666c  ""....        fl
-00010c00: 6f77 5f64 6174 6120 3d20 7b7d 0d0a 0d0a  ow_data = {}....
-00010c10: 2020 2020 2020 2020 666c 6f77 5f64 6174          flow_dat
-00010c20: 615b 2243 4122 5d20 3d20 6465 6661 756c  a["CA"] = defaul
-00010c30: 7464 6963 7428 6c61 6d62 6461 3a20 6465  tdict(lambda: de
-00010c40: 6661 756c 7464 6963 7428 6c69 7374 2929  faultdict(list))
-00010c50: 2020 2320 6375 7272 656e 7420 6163 636f    # current acco
-00010c60: 756e 740d 0a20 2020 2020 2020 2066 6c6f  unt..        flo
-00010c70: 775f 6461 7461 5b22 4b41 225d 203d 2064  w_data["KA"] = d
-00010c80: 6566 6175 6c74 6469 6374 286c 616d 6264  efaultdict(lambd
-00010c90: 613a 2064 6566 6175 6c74 6469 6374 286c  a: defaultdict(l
-00010ca0: 6973 7429 2920 2023 2063 6170 6974 616c  ist))  # capital
-00010cb0: 2061 6363 6f75 6e74 0d0a 0d0a 2020 2020   account....    
-00010cc0: 2020 2020 2320 666c 6f77 5f64 6174 615b      # flow_data[
-00010cd0: 4b41 206f 7220 4341 5d5b 7375 626a 6563  KA or CA][subjec
-00010ce0: 745d 5b61 6765 6e74 5d0d 0a20 2020 2020  t][agent]..     
-00010cf0: 2020 2069 6620 6c65 6e28 7365 6c66 2e65     if len(self.e
-00010d00: 6e74 7279 5f64 6174 6129 203d 3d20 303a  ntry_data) == 0:
-00010d10: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00010d20: 6c66 2e6e 6f74 6966 7928 6d65 7373 6167  lf.notify(messag
-00010d30: 653d 2243 616e 6e6f 7420 6765 6e65 7261  e="Cannot genera
-00010d40: 7465 204d 6174 7269 782e 2048 6176 6520  te Matrix. Have 
-00010d50: 796f 7520 7365 7420 7570 2061 6e79 2074  you set up any t
-00010d60: 7261 6e73 6163 7469 6f6e 7320 7965 743f  ransactions yet?
-00010d70: 222c 7469 746c 653d 2245 7272 6f72 2229  ",title="Error")
-00010d80: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-00010d90: 7475 726e 0d0a 0d0a 2020 2020 2020 2020  turn....        
-00010da0: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
-00010db0: 2020 666f 7220 6669 6c65 6461 7461 2069    for filedata i
-00010dc0: 6e20 7365 6c66 2e65 6e74 7279 5f64 6174  n self.entry_dat
-00010dd0: 613a 0d0a 2020 2020 2020 2020 2020 2020  a:..            
-00010de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010df0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-00010e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010e10: 2020 2020 2020 2020 2065 7661 6c75 6174           evaluat
-00010e20: 6520 7472 616e 7361 6374 696f 6e20 656e  e transaction en
-00010e30: 7472 6965 7320 7769 7468 2074 6865 2066  tries with the f
-00010e40: 6c6f 7720 6c6f 6767 6572 0d0a 2020 2020  low logger..    
-00010e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010e60: 2020 2020 2020 2020 2020 2020 2222 220d              """.
-00010e70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010e90: 2073 7562 6a65 6374 203d 2066 696c 6564   subject = filed
-00010ea0: 6174 615b 2273 7562 6a65 6374 225d 2e72  ata["subject"].r
-00010eb0: 6570 6c61 6365 2822 5f22 2c20 2220 2229  eplace("_", " ")
-00010ec0: 2e74 6974 6c65 2829 0d0a 2020 2020 2020  .title()..      
-00010ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010ee0: 2020 2020 2020 2020 2020 6b69 6e64 203d            kind =
-00010ef0: 2066 696c 6564 6174 615b 226b 696e 6422   filedata["kind"
-00010f00: 5d0d 0a20 2020 2020 2020 2020 2020 2020  ]..             
-00010f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010f20: 2020 206c 6f67 5f66 6c6f 7720 3d20 5472     log_flow = Tr
-00010f30: 7565 0d0a 2020 2020 2020 2020 2020 2020  ue..            
-00010f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010f50: 2020 2020 6966 2066 696c 6564 6174 615b      if filedata[
-00010f60: 226c 6f67 2074 7261 6e73 6163 7469 6f6e  "log transaction
-00010f70: 225d 203d 3d20 2246 616c 7365 223a 0d0a  "] == "False":..
-00010f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010fa0: 2020 2020 6c6f 675f 666c 6f77 3d20 4661      log_flow= Fa
-00010fb0: 6c73 650d 0a20 2020 2020 2020 2020 2020  lse..           
-00010fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010fd0: 2020 2020 2023 2020 206c 6f67 5f66 6c6f       #   log_flo
-00010fe0: 7720 3d20 626f 6f6c 2866 696c 6564 6174  w = bool(filedat
-00010ff0: 615b 226c 6f67 2074 7261 6e73 6163 7469  a["log transacti
-00011000: 6f6e 225d 290d 0a20 2020 2020 2020 2020  on"])..         
-00011010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011020: 2020 2020 2020 2070 7269 6e74 2822 4c4f         print("LO
-00011030: 4720 464c 4f57 222c 6c6f 675f 666c 6f77  G FLOW",log_flow
-00011040: 2c22 7261 7722 2c66 696c 6564 6174 615b  ,"raw",filedata[
-00011050: 226c 6f67 2074 7261 6e73 6163 7469 6f6e  "log transaction
-00011060: 225d 290d 0a20 2020 2020 2020 2020 2020  "])..           
+0000db50: 2020 2020 6375 7272 656e 745f 656e 7472      current_entr
+0000db60: 7920 3d20 7365 6c66 2e65 6e74 7279 5f64  y = self.entry_d
+0000db70: 6174 615b 6375 7272 656e 7452 6f77 5d0d  ata[currentRow].
+0000db80: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0000db90: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
+0000dba0: 795f 6461 7461 5b63 7572 7265 6e74 526f  y_data[currentRo
+0000dbb0: 775d 203d 2073 7769 7463 685f 656e 7472  w] = switch_entr
+0000dbc0: 790d 0a20 2020 2020 2020 2020 2020 2020  y..             
+0000dbd0: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
+0000dbe0: 795f 6461 7461 5b63 7572 7265 6e74 526f  y_data[currentRo
+0000dbf0: 772d 315d 203d 2063 7572 7265 6e74 5f65  w-1] = current_e
+0000dc00: 6e74 7279 0d0a 0d0a 2020 2020 2020 2020  ntry....        
+0000dc10: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
+0000dc20: 6e73 6163 7469 6f6e 5669 6577 2e63 6c65  nsactionView.cle
+0000dc30: 6172 5365 6c65 6374 696f 6e28 290d 0a20  arSelection().. 
+0000dc40: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0000dc50: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
+0000dc60: 6965 772e 7365 7443 7572 7265 6e74 4365  iew.setCurrentCe
+0000dc70: 6c6c 2863 7572 7265 6e74 526f 772d 312c  ll(currentRow-1,
+0000dc80: 3029 0d0a 0d0a 2020 2020 2020 2020 6578  0)....        ex
+0000dc90: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
+0000dca0: 7320 653a 0d0a 2020 2020 2020 2020 2020  s e:..          
+0000dcb0: 2020 7365 6c66 2e6e 6f74 6966 7928 2265    self.notify("e
+0000dcc0: 7272 6f72 3a20 222b 7374 7228 6529 2c20  rror: "+str(e), 
+0000dcd0: 7469 746c 653d 2245 7272 6f72 2229 0d0a  title="Error")..
+0000dce0: 0d0a 2020 2020 6465 6620 6461 7461 5f73  ..    def data_s
+0000dcf0: 656c 6563 7428 7365 6c66 293a 0d0a 0d0a  elect(self):....
+0000dd00: 2020 2020 2020 2020 2373 656c 6563 7465          #selecte
+0000dd10: 645f 726f 7773 203d 2073 656c 662e 7472  d_rows = self.tr
+0000dd20: 616e 7361 6374 696f 6e56 6965 772e 7365  ansactionView.se
+0000dd30: 6c65 6374 696f 6e4d 6f64 656c 2829 2e73  lectionModel().s
+0000dd40: 656c 6563 7465 6452 6f77 7328 290d 0a20  electedRows().. 
+0000dd50: 2020 2020 2020 2073 656c 6563 7465 645f         selected_
+0000dd60: 726f 7773 203d 2073 6f72 7465 6428 7365  rows = sorted(se
+0000dd70: 7428 696e 6465 782e 726f 7728 2920 666f  t(index.row() fo
+0000dd80: 7220 696e 6465 7820 696e 0d0a 2020 2020  r index in..    
+0000dd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dda0: 2020 2020 2020 7365 6c66 2e74 7261 6e73        self.trans
+0000ddb0: 6163 7469 6f6e 5669 6577 2e73 656c 6563  actionView.selec
+0000ddc0: 7465 6449 6e64 6578 6573 2829 2929 0d0a  tedIndexes()))..
+0000ddd0: 0d0a 2020 2020 2020 2020 6966 206c 656e  ..        if len
+0000dde0: 2873 656c 6563 7465 645f 726f 7773 2920  (selected_rows) 
+0000ddf0: 3d3d 2030 3a0d 0a20 2020 2020 2020 2020  == 0:..         
+0000de00: 2020 2070 7269 6e74 2822 6e6f 2073 656c     print("no sel
+0000de10: 6563 7465 6420 726f 7773 2229 0d0a 2020  ected rows")..  
+0000de20: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0000de30: 0d0a 0d0a 2020 2020 2020 2020 7365 6c65  ....        sele
+0000de40: 6374 696f 6e20 3d20 7365 6c65 6374 6564  ction = selected
+0000de50: 5f72 6f77 735b 305d 0d0a 0d0a 2020 2020  _rows[0]....    
+0000de60: 2020 2020 7365 6c66 2e72 6f77 5f73 656c      self.row_sel
+0000de70: 6563 7428 7365 6c65 6374 696f 6e29 0d0a  ect(selection)..
+0000de80: 2020 2020 2020 2020 7365 6c66 2e6d 6164          self.mad
+0000de90: 655f 6368 616e 6765 7320 3d20 4661 6c73  e_changes = Fals
+0000dea0: 650d 0a0d 0a0d 0a20 2020 2064 6566 2064  e......    def d
+0000deb0: 6174 615f 7365 6c65 6374 5f77 6865 7265  ata_select_where
+0000dec0: 2873 656c 662c 6578 7072 293a 0d0a 2020  (self,expr):..  
+0000ded0: 2020 2020 2020 7072 696e 7428 2264 6174        print("dat
+0000dee0: 6120 7365 6c65 6374 2077 6865 7265 222c  a select where",
+0000def0: 6578 7072 290d 0a0d 0a20 2020 2020 2020  expr)....       
+0000df00: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+0000df10: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
+0000df20: 5669 6577 2e72 6f77 436f 756e 7428 2929  View.rowCount())
+0000df30: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000df40: 2020 206d 795f 656e 7472 7920 3d20 7365     my_entry = se
+0000df50: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
+0000df60: 6577 2e69 7465 6d28 692c 2033 292e 7465  ew.item(i, 3).te
+0000df70: 7874 2829 0d0a 0d0a 2020 2020 2020 2020  xt()....        
+0000df80: 2020 2020 2020 2020 7072 696e 7428 222e          print(".
+0000df90: 2e2e 222c 692c 6d79 5f65 6e74 7279 290d  ..",i,my_entry).
+0000dfa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000dfb0: 2069 6620 6d79 5f65 6e74 7279 203d 3d20   if my_entry == 
+0000dfc0: 6578 7072 206f 7220 6d79 5f65 6e74 7279  expr or my_entry
+0000dfd0: 2e6c 6f77 6572 2829 203d 3d20 6578 7072  .lower() == expr
+0000dfe0: 2e6c 6f77 6572 2829 3a0d 0a0d 0a20 2020  .lower():....   
+0000dff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e000: 2073 656c 662e 726f 775f 7365 6c65 6374   self.row_select
+0000e010: 2869 290d 0a20 2020 2020 2020 2020 2020  (i)..           
+0000e020: 2020 2020 2020 2020 2072 6574 7572 6e0d           return.
+0000e030: 0a0d 0a20 2020 2064 6566 2072 6f77 5f73  ...    def row_s
+0000e040: 656c 6563 7428 7365 6c66 2c73 656c 6563  elect(self,selec
+0000e050: 7469 6f6e 293a 0d0a 0d0a 2020 2020 2020  tion):....      
+0000e060: 2020 2320 636f 6c6f 7220 7468 6520 7365    # color the se
+0000e070: 6c65 6374 6564 2072 6f77 0d0a 2020 2020  lected row..    
+0000e080: 2020 2020 2320 6762 2832 3333 2c20 3233      # gb(233, 23
+0000e090: 342c 2032 3237 293b 0d0a 0d0a 2020 2020  4, 227);....    
+0000e0a0: 2020 2020 7365 6c66 2e73 656c 6563 7469      self.selecti
+0000e0b0: 6f6e 5f69 6478 203d 204e 6f6e 650d 0a0d  on_idx = None...
+0000e0c0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+0000e0d0: 2e6d 6164 655f 6368 616e 6765 733a 0d0a  .made_changes:..
+0000e0e0: 2020 2020 2020 2020 2020 2020 7965 7320              yes 
+0000e0f0: 3d20 7365 6c66 2e61 736b 5f71 7565 7374  = self.ask_quest
+0000e100: 696f 6e28 2257 6172 6e69 6e67 222c 2022  ion("Warning", "
+0000e110: 596f 7520 6172 6520 6162 6f75 7420 746f  You are about to
+0000e120: 2063 6861 6e67 6520 746f 2061 6e6f 7468   change to anoth
+0000e130: 6572 2074 7261 6e73 6163 7469 6f6e 2061  er transaction a
+0000e140: 6e64 2077 6974 6864 7261 7720 7468 6520  nd withdraw the 
+0000e150: 6368 616e 6765 7320 796f 7520 6d61 6465  changes you made
+0000e160: 2e20 436f 6e74 696e 7565 3f22 290d 0a20  . Continue?").. 
+0000e170: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+0000e180: 7420 7965 733a 0d0a 2020 2020 2020 2020  t yes:..        
+0000e190: 2020 2020 2020 2020 7265 7475 726e 0d0a          return..
+0000e1a0: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
+0000e1b0: 2020 2020 2020 2020 2020 2020 2222 220d              """.
+0000e1c0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000e1d0: 7365 6c66 2e73 656c 6563 7469 6f6e 5f69  self.selection_i
+0000e1e0: 6478 2069 7320 6e6f 7420 4e6f 6e65 3a0d  dx is not None:.
+0000e1f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000e200: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+0000e210: 7365 6c66 2e74 7261 6e73 6163 7469 6f6e  self.transaction
+0000e220: 5669 6577 2e63 6f6c 756d 6e43 6f75 6e74  View.columnCount
+0000e230: 2829 293a 0d0a 2020 2020 2020 2020 2020  ()):..          
+0000e240: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
+0000e250: 7261 6e73 6163 7469 6f6e 5669 6577 2e69  ransactionView.i
+0000e260: 7465 6d28 7365 6c66 2e73 656c 6563 7469  tem(self.selecti
+0000e270: 6f6e 5f69 6478 2c20 6929 2e73 6574 4261  on_idx, i).setBa
+0000e280: 636b 6772 6f75 6e64 2851 7447 7569 2e51  ckground(QtGui.Q
+0000e290: 436f 6c6f 7228 3233 332c 2032 3334 2c20  Color(233, 234, 
+0000e2a0: 3232 3729 290d 0a20 2020 2020 2020 2020  227))..         
+0000e2b0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000e2c0: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
+0000e2d0: 7363 726f 6c6c 546f 4974 656d 2873 656c  scrollToItem(sel
+0000e2e0: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
+0000e2f0: 772e 6974 656d 2873 656c 6563 7469 6f6e  w.item(selection
+0000e300: 2c20 6929 290d 0a20 2020 2020 2020 2020  , i))..         
+0000e310: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
+0000e320: 6528 7365 6c66 2e74 7261 6e73 6163 7469  e(self.transacti
+0000e330: 6f6e 5669 6577 2e63 6f6c 756d 6e43 6f75  onView.columnCou
+0000e340: 6e74 2829 293a 0d0a 2020 2020 2020 2020  nt()):..        
+0000e350: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
+0000e360: 6e73 6163 7469 6f6e 5669 6577 2e69 7465  nsactionView.ite
+0000e370: 6d28 7365 6c65 6374 696f 6e2c 2069 292e  m(selection, i).
+0000e380: 7365 7442 6163 6b67 726f 756e 6428 5174  setBackground(Qt
+0000e390: 4775 692e 5143 6f6c 6f72 2835 392c 2035  Gui.QColor(59, 5
+0000e3a0: 392c 2031 3539 2929 0d0a 2020 2020 2020  9, 159))..      
+0000e3b0: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
+0000e3c0: 7261 6e73 6163 7469 6f6e 5669 6577 2e73  ransactionView.s
+0000e3d0: 6372 6f6c 6c54 6f49 7465 6d28 7365 6c66  crollToItem(self
+0000e3e0: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
+0000e3f0: 2e69 7465 6d28 7365 6c65 6374 696f 6e2c  .item(selection,
+0000e400: 2069 2929 0d0a 2020 2020 2020 2020 2020   i))..          
+0000e410: 2020 2222 220d 0a20 2020 2020 2020 2020    """..         
+0000e420: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
+0000e430: 696f 6e56 6965 772e 636c 6561 7253 656c  ionView.clearSel
+0000e440: 6563 7469 6f6e 2829 0d0a 2020 2020 2020  ection()..      
+0000e450: 2020 2020 2020 7365 6c66 2e74 7261 6e73        self.trans
+0000e460: 6163 7469 6f6e 5669 6577 2e73 6574 4375  actionView.setCu
+0000e470: 7272 656e 7443 656c 6c28 7365 6c65 6374  rrentCell(select
+0000e480: 696f 6e2c 3329 0d0a 0d0a 0d0a 0d0a 2020  ion,3)........  
+0000e490: 2020 2020 2020 6578 6365 7074 3a0d 0a20        except:.. 
+0000e4a0: 2020 2020 2020 2020 2020 2070 6173 730d             pass.
+0000e4b0: 0a0d 0a20 2020 2020 2020 2074 7279 3a0d  ...        try:.
+0000e4c0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0000e4d0: 662e 7365 6c65 6374 696f 6e5f 6964 7820  f.selection_idx 
+0000e4e0: 3d20 7365 6c65 6374 696f 6e0d 0a20 2020  = selection..   
+0000e4f0: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
+0000e500: 7365 6c65 6374 696f 6e22 2c73 656c 6563  selection",selec
+0000e510: 7469 6f6e 290d 0a0d 0a20 2020 2020 2020  tion)....       
+0000e520: 2020 2020 2064 6174 6120 3d20 7365 6c66       data = self
+0000e530: 2e65 6e74 7279 5f64 6174 615b 7365 6c65  .entry_data[sele
+0000e540: 6374 696f 6e5d 0d0a 0d0a 2020 2020 2020  ction]....      
+0000e550: 2020 2020 2020 7072 696e 7428 2264 6174        print("dat
+0000e560: 6122 2c20 6461 7461 290d 0a0d 0a20 2020  a", data)....   
+0000e570: 2020 2020 2020 2020 2073 656c 662e 4173           self.As
+0000e580: 7365 744c 6973 744c 6566 742e 636c 6561  setListLeft.clea
+0000e590: 7228 290d 0a20 2020 2020 2020 2020 2020  r()..           
+0000e5a0: 2073 656c 662e 4c69 6162 696c 6974 794c   self.LiabilityL
+0000e5b0: 6973 744c 6566 742e 636c 6561 7228 290d  istLeft.clear().
+0000e5c0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0000e5d0: 662e 4c69 6162 696c 6974 794c 6973 7452  f.LiabilityListR
+0000e5e0: 6967 6874 2e63 6c65 6172 2829 0d0a 2020  ight.clear()..  
+0000e5f0: 2020 2020 2020 2020 2020 7365 6c66 2e41            self.A
+0000e600: 7373 6574 4c69 7374 5269 6768 742e 636c  ssetListRight.cl
+0000e610: 6561 7228 290d 0a20 2020 2020 2020 2020  ear()..         
+0000e620: 2020 2073 656c 662e 4571 7569 7479 4c69     self.EquityLi
+0000e630: 7374 4c65 6674 2e63 6c65 6172 2829 0d0a  stLeft.clear()..
+0000e640: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000e650: 2e45 7175 6974 794c 6973 7452 6967 6874  .EquityListRight
+0000e660: 2e63 6c65 6172 2829 0d0a 0d0a 2020 2020  .clear()....    
+0000e670: 2020 2020 2020 2020 7365 6c66 2e41 7373          self.Ass
+0000e680: 6574 4c69 7374 4c65 6674 2e73 6574 506c  etListLeft.setPl
+0000e690: 6169 6e54 6578 7428 6461 7461 5b22 6131  ainText(data["a1
+0000e6a0: 225d 290d 0a20 2020 2020 2020 2020 2020  "])..           
+0000e6b0: 2073 656c 662e 4173 7365 744c 6973 7452   self.AssetListR
+0000e6c0: 6967 6874 2e73 6574 506c 6169 6e54 6578  ight.setPlainTex
+0000e6d0: 7428 6461 7461 5b22 6132 225d 290d 0a20  t(data["a2"]).. 
+0000e6e0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000e6f0: 4c69 6162 696c 6974 794c 6973 744c 6566  LiabilityListLef
+0000e700: 742e 7365 7450 6c61 696e 5465 7874 2864  t.setPlainText(d
+0000e710: 6174 615b 226c 3122 5d29 2020 2320 2b64  ata["l1"])  # +d
+0000e720: 6174 615b 2265 3122 5d29 0d0a 2020 2020  ata["e1"])..    
+0000e730: 2020 2020 2020 2020 7365 6c66 2e4c 6961          self.Lia
+0000e740: 6269 6c69 7479 4c69 7374 5269 6768 742e  bilityListRight.
+0000e750: 7365 7450 6c61 696e 5465 7874 2864 6174  setPlainText(dat
+0000e760: 615b 226c 3222 5d29 2023 202b 6461 7461  a["l2"]) # +data
+0000e770: 5b22 6532 225d 290d 0a20 2020 2020 2020  ["e2"])..       
+0000e780: 2020 2020 2073 656c 662e 4571 7569 7479       self.Equity
+0000e790: 4c69 7374 4c65 6674 2e73 6574 506c 6169  ListLeft.setPlai
+0000e7a0: 6e54 6578 7428 6461 7461 5b22 6531 225d  nText(data["e1"]
+0000e7b0: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+0000e7c0: 656c 662e 4571 7569 7479 4c69 7374 5269  elf.EquityListRi
+0000e7d0: 6768 742e 7365 7450 6c61 696e 5465 7874  ght.setPlainText
+0000e7e0: 2864 6174 615b 2265 3222 5d29 0d0a 0d0a  (data["e2"])....
+0000e7f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000e800: 2e61 6765 6e74 3145 6469 742e 7365 7454  .agent1Edit.setT
+0000e810: 6578 7428 6361 6d65 6c28 6461 7461 5b22  ext(camel(data["
+0000e820: 6167 656e 7431 225d 2929 2023 2e63 6170  agent1"])) #.cap
+0000e830: 6974 616c 697a 6528 2929 0d0a 2020 2020  italize())..    
+0000e840: 2020 2020 2020 2020 7365 6c66 2e61 6765          self.age
+0000e850: 6e74 3245 6469 742e 7365 7454 6578 7428  nt2Edit.setText(
+0000e860: 6361 6d65 6c28 6461 7461 5b22 6167 656e  camel(data["agen
+0000e870: 7432 225d 2929 2023 202e 6361 7069 7461  t2"])) # .capita
+0000e880: 6c69 7a65 2829 290d 0a0d 0a20 2020 2020  lize())....     
+0000e890: 2020 2020 2020 2073 656c 662e 7265 6769         self.regi
+0000e8a0: 7374 6572 466c 6f77 426f 782e 7365 7443  sterFlowBox.setC
+0000e8b0: 7572 7265 6e74 496e 6465 7828 7365 6c66  urrentIndex(self
+0000e8c0: 2e72 6567 6973 7465 7246 6c6f 7742 6f78  .registerFlowBox
+0000e8d0: 2e66 696e 6454 6578 7428 7374 7228 6461  .findText(str(da
+0000e8e0: 7461 5b22 6c6f 6720 7472 616e 7361 6374  ta["log transact
+0000e8f0: 696f 6e22 5d29 2929 0d0a 0d0a 2020 2020  ion"])))....    
+0000e900: 2020 2020 2020 2020 6361 7368 666c 6f77          cashflow
+0000e910: 3120 3d20 6461 7461 5b22 6361 7368 666c  1 = data["cashfl
+0000e920: 6f77 3122 5d20 6f72 2022 4e6f 6e65 220d  ow1"] or "None".
+0000e930: 0a20 2020 2020 2020 2020 2020 2063 6173  .            cas
+0000e940: 6866 6c6f 7732 203d 2064 6174 615b 2263  hflow2 = data["c
+0000e950: 6173 6866 6c6f 7732 225d 206f 7220 224e  ashflow2"] or "N
+0000e960: 6f6e 6522 0d0a 2020 2020 2020 2020 2020  one"..          
+0000e970: 2020 7365 6c66 2e63 6f6d 626f 4361 7368    self.comboCash
+0000e980: 4c65 6674 2e73 6574 4375 7272 656e 7449  Left.setCurrentI
+0000e990: 6e64 6578 2873 656c 662e 636f 6d62 6f43  ndex(self.comboC
+0000e9a0: 6173 684c 6566 742e 6669 6e64 5465 7874  ashLeft.findText
+0000e9b0: 2873 7472 2863 6173 6866 6c6f 7731 2929  (str(cashflow1))
+0000e9c0: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
+0000e9d0: 656c 662e 636f 6d62 6f43 6173 6852 6967  elf.comboCashRig
+0000e9e0: 6874 2e73 6574 4375 7272 656e 7449 6e64  ht.setCurrentInd
+0000e9f0: 6578 2873 656c 662e 636f 6d62 6f43 6173  ex(self.comboCas
+0000ea00: 6852 6967 6874 2e66 696e 6454 6578 7428  hRight.findText(
+0000ea10: 7374 7228 6361 7368 666c 6f77 3229 2929  str(cashflow2)))
+0000ea20: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0000ea30: 7472 7479 7065 203d 2064 6174 615b 226b  trtype = data["k
+0000ea40: 696e 6422 5d20 6f72 2022 4b41 2d3e 4b41  ind"] or "KA->KA
+0000ea50: 220d 0a20 2020 2020 2020 2020 2020 2073  "..            s
+0000ea60: 656c 662e 6564 6974 5479 7065 2e73 6574  elf.editType.set
+0000ea70: 4375 7272 656e 7449 6e64 6578 2873 656c  CurrentIndex(sel
+0000ea80: 662e 6564 6974 5479 7065 2e66 696e 6454  f.editType.findT
+0000ea90: 6578 7428 7374 7228 7472 7479 7065 2929  ext(str(trtype))
+0000eaa0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0000eab0: 2069 6373 3120 3d20 6461 7461 5b22 696e   ics1 = data["in
+0000eac0: 636f 6d65 3122 5d20 6f72 2022 4e6f 6e65  come1"] or "None
+0000ead0: 220d 0a20 2020 2020 2020 2020 2020 2069  "..            i
+0000eae0: 6373 3220 3d20 6461 7461 5b22 696e 636f  cs2 = data["inco
+0000eaf0: 6d65 3222 5d20 6f72 2022 4e6f 6e65 220d  me2"] or "None".
+0000eb00: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0000eb10: 662e 636f 6d62 6f49 6e63 6f6d 654c 6566  f.comboIncomeLef
+0000eb20: 742e 7365 7443 7572 7265 6e74 496e 6465  t.setCurrentInde
+0000eb30: 7828 7365 6c66 2e63 6f6d 626f 496e 636f  x(self.comboInco
+0000eb40: 6d65 4c65 6674 2e66 696e 6454 6578 7428  meLeft.findText(
+0000eb50: 6963 7331 2929 0d0a 2020 2020 2020 2020  ics1))..        
+0000eb60: 2020 2020 7365 6c66 2e63 6f6d 626f 496e      self.comboIn
+0000eb70: 636f 6d65 5269 6768 742e 7365 7443 7572  comeRight.setCur
+0000eb80: 7265 6e74 496e 6465 7828 7365 6c66 2e63  rentIndex(self.c
+0000eb90: 6f6d 626f 496e 636f 6d65 5269 6768 742e  omboIncomeRight.
+0000eba0: 6669 6e64 5465 7874 2869 6373 3229 290d  findText(ics2)).
+0000ebb0: 0a0d 0a20 2020 2020 2020 2020 2020 2073  ...            s
+0000ebc0: 656c 662e 6564 6974 5175 616e 7469 7479  elf.editQuantity
+0000ebd0: 2e73 6574 5465 7874 2864 6174 615b 2271  .setText(data["q
+0000ebe0: 7561 6e74 6974 7922 5d29 0d0a 2020 2020  uantity"])..    
+0000ebf0: 2020 2020 2020 2020 7365 6c66 2e65 6469          self.edi
+0000ec00: 7453 7562 6a65 6374 2e73 6574 5465 7874  tSubject.setText
+0000ec10: 2864 6174 615b 2273 7562 6a65 6374 225d  (data["subject"]
+0000ec20: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0000ec30: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+0000ec40: 2e68 6967 686c 6967 6874 5f63 6f6e 6e65  .highlight_conne
+0000ec50: 6374 6f72 2864 6174 615b 2273 686f 7274  ctor(data["short
+0000ec60: 6e61 6d65 225d 290d 0a0d 0a20 2020 2020  name"])....     
+0000ec70: 2020 2020 2020 2069 6620 2264 6573 6372         if "descr
+0000ec80: 6970 7469 6f6e 2220 696e 2064 6174 613a  iption" in data:
+0000ec90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000eca0: 2020 7365 6c66 2e65 6469 7444 6573 6372    self.editDescr
+0000ecb0: 6970 7469 6f6e 2e73 6574 5465 7874 2864  iption.setText(d
+0000ecc0: 6174 615b 2264 6573 6372 6970 7469 6f6e  ata["description
+0000ecd0: 225d 290d 0a20 2020 2020 2020 2020 2020  "])..           
+0000ece0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+0000ecf0: 2020 2020 2020 2020 7365 6c66 2e65 6469          self.edi
+0000ed00: 7444 6573 6372 6970 7469 6f6e 2e73 6574  tDescription.set
+0000ed10: 5465 7874 2822 2229 0d0a 2020 2020 2020  Text("")..      
+0000ed20: 2020 2020 2020 7365 6c66 2e65 6469 7453        self.editS
+0000ed30: 686f 7274 6e61 6d65 2e73 6574 5465 7874  hortname.setText
+0000ed40: 2864 6174 615b 2273 686f 7274 6e61 6d65  (data["shortname
+0000ed50: 225d 290d 0a0d 0a20 2020 2020 2020 2020  "])....         
+0000ed60: 2020 2075 6e69 6469 7220 3d20 7374 7228     unidir = str(
+0000ed70: 6461 7461 5b22 756e 692d 6469 7265 6374  data["uni-direct
+0000ed80: 696f 6e61 6c22 5d29 206f 7220 224e 6f6e  ional"]) or "Non
+0000ed90: 6522 0d0a 2020 2020 2020 2020 2020 2020  e"..            
+0000eda0: 7365 6c66 2e63 6f6d 626f 556e 6964 6972  self.comboUnidir
+0000edb0: 2e73 6574 4375 7272 656e 7449 6e64 6578  .setCurrentIndex
+0000edc0: 2873 656c 662e 636f 6d62 6f55 6e69 6469  (self.comboUnidi
+0000edd0: 722e 6669 6e64 5465 7874 2875 6e69 6469  r.findText(unidi
+0000ede0: 7229 290d 0a0d 0a20 2020 2020 2020 2065  r))....        e
+0000edf0: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
+0000ee00: 6173 2065 3a0d 0a20 2020 2020 2020 2020  as e:..         
+0000ee10: 2020 2073 656c 662e 6e6f 7469 6679 2873     self.notify(s
+0000ee20: 7472 2865 292c 7469 746c 653d 2245 7272  tr(e),title="Err
+0000ee30: 6f72 2229 0d0a 0d0a 2020 2020 2020 2020  or")....        
+0000ee40: 7365 6c66 2e6d 6164 655f 6368 616e 6765  self.made_change
+0000ee50: 7320 3d20 4661 6c73 650d 0a0d 0a20 2020  s = False....   
+0000ee60: 2064 6566 2075 7064 6174 655f 6461 7461   def update_data
+0000ee70: 2873 656c 6629 3a0d 0a20 2020 2020 2020  (self):..       
+0000ee80: 2069 6620 7365 6c66 2e73 656c 6563 7469   if self.selecti
+0000ee90: 6f6e 5f69 6478 2069 7320 4e6f 6e65 3a0d  on_idx is None:.
+0000eea0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0000eeb0: 7572 6e0d 0a0d 0a20 2020 2020 2020 2073  urn....        s
+0000eec0: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
+0000eed0: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
+0000eee0: 785d 5b22 6131 225d 203d 2073 656c 662e  x]["a1"] = self.
+0000eef0: 4173 7365 744c 6973 744c 6566 742e 746f  AssetListLeft.to
+0000ef00: 506c 6169 6e54 6578 7428 290d 0a20 2020  PlainText()..   
+0000ef10: 2020 2020 2073 656c 662e 656e 7472 795f       self.entry_
+0000ef20: 6461 7461 5b73 656c 662e 7365 6c65 6374  data[self.select
+0000ef30: 696f 6e5f 6964 785d 5b22 6132 225d 203d  ion_idx]["a2"] =
+0000ef40: 2073 656c 662e 4173 7365 744c 6973 7452   self.AssetListR
+0000ef50: 6967 6874 2e74 6f50 6c61 696e 5465 7874  ight.toPlainText
+0000ef60: 2829 0d0a 2020 2020 2020 2020 7365 6c66  ()..        self
+0000ef70: 2e65 6e74 7279 5f64 6174 615b 7365 6c66  .entry_data[self
+0000ef80: 2e73 656c 6563 7469 6f6e 5f69 6478 5d5b  .selection_idx][
+0000ef90: 226c 3122 5d20 3d20 7365 6c66 2e4c 6961  "l1"] = self.Lia
+0000efa0: 6269 6c69 7479 4c69 7374 4c65 6674 2e74  bilityListLeft.t
+0000efb0: 6f50 6c61 696e 5465 7874 2829 0d0a 2020  oPlainText()..  
+0000efc0: 2020 2020 2020 7365 6c66 2e65 6e74 7279        self.entry
+0000efd0: 5f64 6174 615b 7365 6c66 2e73 656c 6563  _data[self.selec
+0000efe0: 7469 6f6e 5f69 6478 5d5b 226c 3222 5d20  tion_idx]["l2"] 
+0000eff0: 3d20 7365 6c66 2e4c 6961 6269 6c69 7479  = self.Liability
+0000f000: 4c69 7374 5269 6768 742e 746f 506c 6169  ListRight.toPlai
+0000f010: 6e54 6578 7428 290d 0a20 2020 2020 2020  nText()..       
+0000f020: 2073 656c 662e 656e 7472 795f 6461 7461   self.entry_data
+0000f030: 5b73 656c 662e 7365 6c65 6374 696f 6e5f  [self.selection_
+0000f040: 6964 785d 5b22 6531 225d 203d 2073 656c  idx]["e1"] = sel
+0000f050: 662e 4571 7569 7479 4c69 7374 4c65 6674  f.EquityListLeft
+0000f060: 2e74 6f50 6c61 696e 5465 7874 2829 0d0a  .toPlainText()..
+0000f070: 2020 2020 2020 2020 7365 6c66 2e65 6e74          self.ent
+0000f080: 7279 5f64 6174 615b 7365 6c66 2e73 656c  ry_data[self.sel
+0000f090: 6563 7469 6f6e 5f69 6478 5d5b 2265 3222  ection_idx]["e2"
+0000f0a0: 5d20 3d20 7365 6c66 2e45 7175 6974 794c  ] = self.EquityL
+0000f0b0: 6973 7452 6967 6874 2e74 6f50 6c61 696e  istRight.toPlain
+0000f0c0: 5465 7874 2829 0d0a 0d0a 2020 2020 2020  Text()....      
+0000f0d0: 2020 7365 6c66 2e65 6e74 7279 5f64 6174    self.entry_dat
+0000f0e0: 615b 7365 6c66 2e73 656c 6563 7469 6f6e  a[self.selection
+0000f0f0: 5f69 6478 5d5b 2261 3122 5d20 203d 2073  _idx]["a1"]  = s
+0000f100: 656c 662e 4173 7365 744c 6973 744c 6566  elf.AssetListLef
+0000f110: 742e 746f 506c 6169 6e54 6578 7428 290d  t.toPlainText().
+0000f120: 0a20 2020 2020 2020 2073 656c 662e 656e  .        self.en
+0000f130: 7472 795f 6461 7461 5b73 656c 662e 7365  try_data[self.se
+0000f140: 6c65 6374 696f 6e5f 6964 785d 5b22 6132  lection_idx]["a2
+0000f150: 225d 203d 2073 656c 662e 4173 7365 744c  "] = self.AssetL
+0000f160: 6973 7452 6967 6874 2e74 6f50 6c61 696e  istRight.toPlain
+0000f170: 5465 7874 2829 0d0a 2020 2020 2020 2020  Text()..        
+0000f180: 7365 6c66 2e65 6e74 7279 5f64 6174 615b  self.entry_data[
+0000f190: 7365 6c66 2e73 656c 6563 7469 6f6e 5f69  self.selection_i
+0000f1a0: 6478 5d5b 226c 3122 5d20 203d 2073 656c  dx]["l1"]  = sel
+0000f1b0: 662e 4c69 6162 696c 6974 794c 6973 744c  f.LiabilityListL
+0000f1c0: 6566 742e 746f 506c 6169 6e54 6578 7428  eft.toPlainText(
+0000f1d0: 290d 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+0000f1e0: 656e 7472 795f 6461 7461 5b73 656c 662e  entry_data[self.
+0000f1f0: 7365 6c65 6374 696f 6e5f 6964 785d 5b22  selection_idx]["
+0000f200: 6c32 225d 2020 3d20 7365 6c66 2e4c 6961  l2"]  = self.Lia
+0000f210: 6269 6c69 7479 4c69 7374 5269 6768 742e  bilityListRight.
+0000f220: 746f 506c 6169 6e54 6578 7428 290d 0a20  toPlainText().. 
+0000f230: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
+0000f240: 795f 6461 7461 5b73 656c 662e 7365 6c65  y_data[self.sele
+0000f250: 6374 696f 6e5f 6964 785d 5b22 6531 225d  ction_idx]["e1"]
+0000f260: 2020 3d20 7365 6c66 2e45 7175 6974 794c    = self.EquityL
+0000f270: 6973 744c 6566 742e 746f 506c 6169 6e54  istLeft.toPlainT
+0000f280: 6578 7428 290d 0a20 2020 2020 2020 2073  ext()..        s
+0000f290: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
+0000f2a0: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
+0000f2b0: 785d 5b22 6532 225d 2020 3d20 7365 6c66  x]["e2"]  = self
+0000f2c0: 2e45 7175 6974 794c 6973 7452 6967 6874  .EquityListRight
+0000f2d0: 2e74 6f50 6c61 696e 5465 7874 2829 0d0a  .toPlainText()..
+0000f2e0: 0d0a 2020 2020 2020 2020 6f6e 6c79 5f72  ..        only_r
+0000f2f0: 656e 616d 6520 3d20 5472 7565 0d0a 2020  ename = True..  
+0000f300: 2020 2020 2020 6966 2073 656c 662e 656e        if self.en
+0000f310: 7472 795f 6461 7461 5b73 656c 662e 7365  try_data[self.se
+0000f320: 6c65 6374 696f 6e5f 6964 785d 5b22 6167  lection_idx]["ag
+0000f330: 656e 7431 225d 2020 213d 2073 656c 662e  ent1"]  != self.
+0000f340: 6167 656e 7431 4564 6974 2e74 6578 7428  agent1Edit.text(
+0000f350: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0000f360: 6f6e 6c79 5f72 656e 616d 6520 3d20 4661  only_rename = Fa
+0000f370: 6c73 650d 0a20 2020 2020 2020 2069 6620  lse..        if 
+0000f380: 7365 6c66 2e65 6e74 7279 5f64 6174 615b  self.entry_data[
+0000f390: 7365 6c66 2e73 656c 6563 7469 6f6e 5f69  self.selection_i
+0000f3a0: 6478 5d5b 2261 6765 6e74 3222 5d20 2021  dx]["agent2"]  !
+0000f3b0: 3d73 656c 662e 6167 656e 7432 4564 6974  =self.agent2Edit
+0000f3c0: 2e74 6578 7428 293a 0d0a 2020 2020 2020  .text():..      
+0000f3d0: 2020 2020 2020 6f6e 6c79 5f72 656e 616d        only_renam
+0000f3e0: 6520 3d20 4661 6c73 650d 0a0d 0a0d 0a20  e = False...... 
+0000f3f0: 2020 2020 2020 2069 6620 6e6f 7420 7365         if not se
+0000f400: 6c66 2e64 7261 7763 616e 7661 732e 6368  lf.drawcanvas.ch
+0000f410: 6563 6b5f 6578 6973 7428 7365 6c66 2e61  eck_exist(self.a
+0000f420: 6765 6e74 3145 6469 742e 7465 7874 2829  gent1Edit.text()
+0000f430: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0000f440: 6966 2073 656c 662e 6167 656e 7431 4564  if self.agent1Ed
+0000f450: 6974 2e74 6578 7428 292e 7374 7269 7028  it.text().strip(
+0000f460: 2920 213d 2022 223a 0d0a 2020 2020 2020  ) != "":..      
+0000f470: 2020 2020 2020 2020 2020 7965 7320 3d20            yes = 
+0000f480: 7365 6c66 2e61 736b 5f71 7565 7374 696f  self.ask_questio
+0000f490: 6e28 2727 2c22 5468 6520 6167 656e 7420  n('',"The agent 
+0000f4a0: 2573 2064 6f65 7320 6e6f 7420 6578 6973  %s does not exis
+0000f4b0: 742e 5c6e 446f 2079 6f75 2077 6973 6820  t.\nDo you wish 
+0000f4c0: 746f 2063 6f6e 7469 6e75 6520 616e 6420  to continue and 
+0000f4d0: 6175 746f 6d61 7469 6361 6c6c 7920 6372  automatically cr
+0000f4e0: 6561 7465 2061 206e 6577 2061 6765 6e74  eate a new agent
+0000f4f0: 3f22 2573 656c 662e 6167 656e 7431 4564  ?"%self.agent1Ed
+0000f500: 6974 2e74 6578 7428 2929 0d0a 2020 2020  it.text())..    
+0000f510: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+0000f520: 6f74 2079 6573 3a0d 0a20 2020 2020 2020  ot yes:..       
+0000f530: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0000f540: 7572 6e0d 0a0d 0a20 2020 2020 2020 2069  urn....        i
+0000f550: 6620 6e6f 7420 7365 6c66 2e64 7261 7763  f not self.drawc
+0000f560: 616e 7661 732e 6368 6563 6b5f 6578 6973  anvas.check_exis
+0000f570: 7428 7365 6c66 2e61 6765 6e74 3245 6469  t(self.agent2Edi
+0000f580: 742e 7465 7874 2829 293a 0d0a 2020 2020  t.text()):..    
+0000f590: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+0000f5a0: 6167 656e 7432 4564 6974 2e74 6578 7428  agent2Edit.text(
+0000f5b0: 292e 7374 7269 7028 2920 213d 2022 223a  ).strip() != "":
+0000f5c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000f5d0: 2020 7965 7320 3d20 7365 6c66 2e61 736b    yes = self.ask
+0000f5e0: 5f71 7565 7374 696f 6e28 2727 2c22 5468  _question('',"Th
+0000f5f0: 6520 6167 656e 7420 2573 2064 6f65 7320  e agent %s does 
+0000f600: 6e6f 7420 6578 6973 742e 5c6e 446f 2079  not exist.\nDo y
+0000f610: 6f75 2077 6973 6820 746f 2063 6f6e 7469  ou wish to conti
+0000f620: 6e75 6520 616e 6420 6175 746f 6d61 7469  nue and automati
+0000f630: 6361 6c6c 7920 6372 6561 7465 2061 206e  cally create a n
+0000f640: 6577 2061 6765 6e74 3f22 2573 656c 662e  ew agent?"%self.
+0000f650: 6167 656e 7432 4564 6974 2e74 6578 7428  agent2Edit.text(
+0000f660: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
+0000f670: 2020 2020 6966 206e 6f74 2079 6573 3a0d      if not yes:.
+0000f680: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000f690: 2020 2020 2072 6574 7572 6e0d 0a0d 0a20       return.... 
+0000f6a0: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
+0000f6b0: 795f 6461 7461 5b73 656c 662e 7365 6c65  y_data[self.sele
+0000f6c0: 6374 696f 6e5f 6964 785d 5b22 6167 656e  ction_idx]["agen
+0000f6d0: 7431 225d 2020 3d20 6361 6d65 6c28 7365  t1"]  = camel(se
+0000f6e0: 6c66 2e61 6765 6e74 3145 6469 742e 7465  lf.agent1Edit.te
+0000f6f0: 7874 2829 2920 232e 6361 7069 7461 6c69  xt()) #.capitali
+0000f700: 7a65 2829 2023 2075 7070 6572 2062 6563  ze() # upper bec
+0000f710: 6175 7365 2061 6765 6e74 7320 6172 6520  ause agents are 
+0000f720: 616c 7761 7973 2075 7070 6572 6361 7365  always uppercase
+0000f730: 0d0a 2020 2020 2020 2020 7365 6c66 2e65  ..        self.e
+0000f740: 6e74 7279 5f64 6174 615b 7365 6c66 2e73  ntry_data[self.s
+0000f750: 656c 6563 7469 6f6e 5f69 6478 5d5b 2261  election_idx]["a
+0000f760: 6765 6e74 3222 5d20 203d 2063 616d 656c  gent2"]  = camel
+0000f770: 2873 656c 662e 6167 656e 7432 4564 6974  (self.agent2Edit
+0000f780: 2e74 6578 7428 2929 2023 2e63 6170 6974  .text()) #.capit
+0000f790: 616c 697a 6528 290d 0a0d 0a20 2020 2020  alize()....     
+0000f7a0: 2020 2073 656c 662e 6167 656e 7431 4564     self.agent1Ed
+0000f7b0: 6974 2e73 6574 5465 7874 2863 616d 656c  it.setText(camel
+0000f7c0: 2873 656c 662e 6167 656e 7431 4564 6974  (self.agent1Edit
+0000f7d0: 2e74 6578 7428 2929 2920 232e 6361 7069  .text())) #.capi
+0000f7e0: 7461 6c69 7a65 2829 290d 0a20 2020 2020  talize())..     
+0000f7f0: 2020 2073 656c 662e 6167 656e 7432 4564     self.agent2Ed
+0000f800: 6974 2e73 6574 5465 7874 2863 616d 656c  it.setText(camel
+0000f810: 2873 656c 662e 6167 656e 7432 4564 6974  (self.agent2Edit
+0000f820: 2e74 6578 7428 2929 2920 232e 6361 7069  .text())) #.capi
+0000f830: 7461 6c69 7a65 2829 290d 0a0d 0a20 2020  talize())....   
+0000f840: 2020 2020 2073 656c 662e 656e 7472 795f       self.entry_
+0000f850: 6461 7461 5b73 656c 662e 7365 6c65 6374  data[self.select
+0000f860: 696f 6e5f 6964 785d 5b22 756e 692d 6469  ion_idx]["uni-di
+0000f870: 7265 6374 696f 6e61 6c22 5d20 3d20 5c0d  rectional"] = \.
+0000f880: 0a20 2020 2020 2020 2020 2020 2073 7472  .            str
+0000f890: 2873 656c 662e 636f 6d62 6f55 6e69 6469  (self.comboUnidi
+0000f8a0: 722e 6375 7272 656e 7454 6578 7428 2929  r.currentText())
+0000f8b0: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
+0000f8c0: 2e65 6e74 7279 5f64 6174 615b 7365 6c66  .entry_data[self
+0000f8d0: 2e73 656c 6563 7469 6f6e 5f69 6478 5d5b  .selection_idx][
+0000f8e0: 226c 6f67 2074 7261 6e73 6163 7469 6f6e  "log transaction
+0000f8f0: 225d 203d 5c0d 0a20 2020 2020 2020 2020  "] =\..         
+0000f900: 2020 2073 7472 2873 656c 662e 7265 6769     str(self.regi
+0000f910: 7374 6572 466c 6f77 426f 782e 6375 7272  sterFlowBox.curr
+0000f920: 656e 7454 6578 7428 2929 0d0a 0d0a 2020  entText())....  
+0000f930: 2020 2020 2020 7365 6c66 2e65 6e74 7279        self.entry
+0000f940: 5f64 6174 615b 7365 6c66 2e73 656c 6563  _data[self.selec
+0000f950: 7469 6f6e 5f69 6478 5d5b 2263 6173 6866  tion_idx]["cashf
+0000f960: 6c6f 7731 225d 203d 205c 0d0a 2020 2020  low1"] = \..    
+0000f970: 2020 2020 2020 2020 7374 7228 7365 6c66          str(self
+0000f980: 2e63 6f6d 626f 4361 7368 4c65 6674 2e63  .comboCashLeft.c
+0000f990: 7572 7265 6e74 5465 7874 2829 290d 0a20  urrentText()).. 
+0000f9a0: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
+0000f9b0: 795f 6461 7461 5b73 656c 662e 7365 6c65  y_data[self.sele
+0000f9c0: 6374 696f 6e5f 6964 785d 5b22 6361 7368  ction_idx]["cash
+0000f9d0: 666c 6f77 3222 5d20 3d20 5c0d 0a20 2020  flow2"] = \..   
+0000f9e0: 2020 2020 2020 2020 2073 7472 2873 656c           str(sel
+0000f9f0: 662e 636f 6d62 6f43 6173 6852 6967 6874  f.comboCashRight
+0000fa00: 2e63 7572 7265 6e74 5465 7874 2829 290d  .currentText()).
+0000fa10: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
+0000fa20: 656e 7472 795f 6461 7461 5b73 656c 662e  entry_data[self.
+0000fa30: 7365 6c65 6374 696f 6e5f 6964 785d 5b22  selection_idx]["
+0000fa40: 6b69 6e64 225d 203d 205c 0d0a 2020 2020  kind"] = \..    
+0000fa50: 2020 2020 2020 2020 7374 7228 7365 6c66          str(self
+0000fa60: 2e65 6469 7454 7970 652e 6375 7272 656e  .editType.curren
+0000fa70: 7454 6578 7428 2929 0d0a 0d0a 2020 2020  tText())....    
+0000fa80: 2020 2020 7365 6c66 2e65 6e74 7279 5f64      self.entry_d
+0000fa90: 6174 615b 7365 6c66 2e73 656c 6563 7469  ata[self.selecti
+0000faa0: 6f6e 5f69 6478 5d5b 2269 6e63 6f6d 6531  on_idx]["income1
+0000fab0: 225d 203d 205c 0d0a 2020 2020 2020 2020  "] = \..        
+0000fac0: 2020 2020 7374 7228 7365 6c66 2e63 6f6d      str(self.com
+0000fad0: 626f 496e 636f 6d65 4c65 6674 2e63 7572  boIncomeLeft.cur
+0000fae0: 7265 6e74 5465 7874 2829 290d 0a20 2020  rentText())..   
+0000faf0: 2020 2020 2073 656c 662e 656e 7472 795f       self.entry_
+0000fb00: 6461 7461 5b73 656c 662e 7365 6c65 6374  data[self.select
+0000fb10: 696f 6e5f 6964 785d 5b22 696e 636f 6d65  ion_idx]["income
+0000fb20: 3222 5d20 3d20 5c0d 0a20 2020 2020 2020  2"] = \..       
+0000fb30: 2020 2020 2073 7472 2873 656c 662e 636f       str(self.co
+0000fb40: 6d62 6f49 6e63 6f6d 6552 6967 6874 2e63  mboIncomeRight.c
+0000fb50: 7572 7265 6e74 5465 7874 2829 290d 0a0d  urrentText())...
+0000fb60: 0a0d 0a20 2020 2020 2020 2069 6620 6f6e  ...        if on
+0000fb70: 6c79 5f72 656e 616d 653a 0d0a 0d0a 2020  ly_rename:....  
+0000fb80: 2020 2020 2020 2020 2020 7365 6c66 2e64            self.d
+0000fb90: 7261 7763 616e 7661 732e 7265 6e61 6d65  rawcanvas.rename
+0000fba0: 5f63 6f6e 6e65 6374 696f 6e28 7365 6c66  _connection(self
+0000fbb0: 2e65 6e74 7279 5f64 6174 615b 7365 6c66  .entry_data[self
+0000fbc0: 2e73 656c 6563 7469 6f6e 5f69 6478 5d5b  .selection_idx][
+0000fbd0: 2273 686f 7274 6e61 6d65 225d 202c 2073  "shortname"] , s
+0000fbe0: 7472 2873 656c 662e 6564 6974 5368 6f72  tr(self.editShor
+0000fbf0: 746e 616d 652e 7465 7874 2829 2929 0d0a  tname.text()))..
+0000fc00: 0d0a 2020 2020 2020 2020 656c 7365 3a0d  ..        else:.
+0000fc10: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0000fc20: 662e 6472 6177 6361 6e76 6173 2e72 656d  f.drawcanvas.rem
+0000fc30: 6f76 655f 636f 6e6e 6563 7469 6f6e 2873  ove_connection(s
+0000fc40: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
+0000fc50: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
+0000fc60: 785d 5b22 7368 6f72 746e 616d 6522 5d29  x]["shortname"])
+0000fc70: 2023 2c20 7374 7228 7365 6c66 2e65 6469   #, str(self.edi
+0000fc80: 7453 7562 6a65 6374 2e74 6578 7428 2929  tSubject.text())
+0000fc90: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0000fca0: 2062 6f78 3120 3d20 7365 6c66 2e64 7261   box1 = self.dra
+0000fcb0: 7763 616e 7661 732e 6164 645f 6167 656e  wcanvas.add_agen
+0000fcc0: 7428 7365 6c66 2e65 6e74 7279 5f64 6174  t(self.entry_dat
+0000fcd0: 615b 7365 6c66 2e73 656c 6563 7469 6f6e  a[self.selection
+0000fce0: 5f69 6478 5d5b 2261 6765 6e74 3122 5d29  _idx]["agent1"])
+0000fcf0: 0d0a 2020 2020 2020 2020 2020 2020 626f  ..            bo
+0000fd00: 7832 203d 2073 656c 662e 6472 6177 6361  x2 = self.drawca
+0000fd10: 6e76 6173 2e61 6464 5f61 6765 6e74 2873  nvas.add_agent(s
+0000fd20: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
+0000fd30: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
+0000fd40: 785d 5b22 6167 656e 7432 225d 290d 0a0d  x]["agent2"])...
+0000fd50: 0a0d 0a20 2020 2020 2020 2020 2020 206d  ...            m
+0000fd60: 795f 6974 656d 7320 3d20 5b5d 0d0a 2020  y_items = []..  
+0000fd70: 2020 2020 2020 2020 2020 6461 7461 203d            data =
+0000fd80: 2073 656c 662e 656e 7472 795f 6461 7461   self.entry_data
+0000fd90: 5b73 656c 662e 7365 6c65 6374 696f 6e5f  [self.selection_
+0000fda0: 6964 785d 0d0a 0d0a 2020 2020 2020 2020  idx]....        
+0000fdb0: 2020 2020 616c 6c65 6e74 7269 6573 203d      allentries =
+0000fdc0: 2022 5c6e 222e 6a6f 696e 285b 6461 7461   "\n".join([data
+0000fdd0: 5b22 6c31 225d 2c20 6461 7461 5b22 6131  ["l1"], data["a1
+0000fde0: 225d 2c20 6461 7461 5b22 6531 225d 2c20  "], data["e1"], 
+0000fdf0: 6461 7461 5b22 6c32 225d 2c20 6461 7461  data["l2"], data
+0000fe00: 5b22 6132 225d 2c20 6461 7461 5b22 6532  ["a2"], data["e2
+0000fe10: 225d 5d29 0d0a 2020 2020 2020 2020 2020  "]])..          
+0000fe20: 2020 666f 7220 7375 625f 6974 656d 2069    for sub_item i
+0000fe30: 6e20 616c 6c65 6e74 7269 6573 2e73 706c  n allentries.spl
+0000fe40: 6974 2822 5c6e 2229 3a0d 0a20 2020 2020  it("\n"):..     
+0000fe50: 2020 2020 2020 2020 2020 2066 6f72 2073             for s
+0000fe60: 7562 5f65 6e74 7279 2069 6e20 7375 625f  ub_entry in sub_
+0000fe70: 6974 656d 2e73 706c 6974 2822 5c6e 2229  item.split("\n")
+0000fe80: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0000fe90: 2020 2020 2020 2065 6e74 7279 203d 2073         entry = s
+0000fea0: 7562 5f65 6e74 7279 2e72 6570 6c61 6365  ub_entry.replace
+0000feb0: 2822 2d22 2c22 2229 2e72 6570 6c61 6365  ("-","").replace
+0000fec0: 2822 2b22 2c22 2229 2e73 7472 6970 2829  ("+","").strip()
+0000fed0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0000fee0: 2020 2020 2020 6966 2065 6e74 7279 2021        if entry !
+0000fef0: 3d20 2022 223a 0d0a 2020 2020 2020 2020  =  "":..        
+0000ff00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ff10: 6d79 5f69 7465 6d73 2e61 7070 656e 6428  my_items.append(
+0000ff20: 656e 7472 7929 0d0a 0d0a 0d0a 2020 2020  entry)......    
+0000ff30: 2020 2020 2020 2020 7365 6c66 2e64 7261          self.dra
+0000ff40: 7763 616e 7661 732e 6164 645f 636f 6e6e  wcanvas.add_conn
+0000ff50: 6563 7469 6f6e 2862 6f78 312c 626f 7832  ection(box1,box2
+0000ff60: 2c20 7374 7228 7365 6c66 2e65 6469 7453  , str(self.editS
+0000ff70: 686f 7274 6e61 6d65 2e74 6578 7428 2929  hortname.text())
+0000ff80: 2c73 7562 6a65 6374 3d73 656c 662e 6564  ,subject=self.ed
+0000ff90: 6974 5375 626a 6563 742e 7465 7874 2829  itSubject.text()
+0000ffa0: 2c69 7465 6d73 3d6d 795f 6974 656d 7329  ,items=my_items)
+0000ffb0: 0d0a 0d0a 0d0a 2020 2020 2020 2020 7365  ......        se
+0000ffc0: 6c66 2e65 6e74 7279 5f64 6174 615b 7365  lf.entry_data[se
+0000ffd0: 6c66 2e73 656c 6563 7469 6f6e 5f69 6478  lf.selection_idx
+0000ffe0: 5d5b 2271 7561 6e74 6974 7922 5d20 3d20  ]["quantity"] = 
+0000fff0: 5c0d 0a20 2020 2020 2020 2020 2020 2073  \..            s
+00010000: 7472 2873 656c 662e 6564 6974 5175 616e  tr(self.editQuan
+00010010: 7469 7479 2e74 6578 7428 2929 0d0a 0d0a  tity.text())....
+00010020: 0d0a 2020 2020 2020 2020 7365 6c66 2e65  ..        self.e
+00010030: 6e74 7279 5f64 6174 615b 7365 6c66 2e73  ntry_data[self.s
+00010040: 656c 6563 7469 6f6e 5f69 6478 5d5b 2273  election_idx]["s
+00010050: 7562 6a65 6374 225d 203d 205c 0d0a 2020  ubject"] = \..  
+00010060: 2020 2020 2020 2020 2020 7374 7228 7365            str(se
+00010070: 6c66 2e65 6469 7453 7562 6a65 6374 2e74  lf.editSubject.t
+00010080: 6578 7428 2929 0d0a 0d0a 2020 2020 2020  ext())....      
+00010090: 2020 7365 6c66 2e65 6e74 7279 5f64 6174    self.entry_dat
+000100a0: 615b 7365 6c66 2e73 656c 6563 7469 6f6e  a[self.selection
+000100b0: 5f69 6478 5d5b 2273 686f 7274 6e61 6d65  _idx]["shortname
+000100c0: 225d 203d 205c 0d0a 2020 2020 2020 2020  "] = \..        
+000100d0: 2020 2020 7374 7228 7365 6c66 2e65 6469      str(self.edi
+000100e0: 7453 686f 7274 6e61 6d65 2e74 6578 7428  tShortname.text(
+000100f0: 2929 0d0a 0d0a 2020 2020 2020 2020 7365  ))....        se
+00010100: 6c66 2e65 6e74 7279 5f64 6174 615b 7365  lf.entry_data[se
+00010110: 6c66 2e73 656c 6563 7469 6f6e 5f69 6478  lf.selection_idx
+00010120: 5d5b 2264 6573 6372 6970 7469 6f6e 225d  ]["description"]
+00010130: 203d 205c 0d0a 2020 2020 2020 2020 2020   = \..          
+00010140: 2020 7374 7228 7365 6c66 2e65 6469 7444    str(self.editD
+00010150: 6573 6372 6970 7469 6f6e 2e74 6578 7428  escription.text(
+00010160: 2929 0d0a 0d0a 2020 2020 2020 2020 7365  ))....        se
+00010170: 6c66 2e75 7064 6174 655f 7461 626c 6528  lf.update_table(
+00010180: 290d 0a0d 0a20 2020 2020 2020 2070 7269  )....        pri
+00010190: 6e74 2822 6461 7461 2063 6861 6e67 6564  nt("data changed
+000101a0: 2e22 290d 0a0d 0a20 2020 2020 2020 2073  .")....        s
+000101b0: 656c 662e 6d61 6465 5f63 6861 6e67 6573  elf.made_changes
+000101c0: 203d 2046 616c 7365 0d0a 0d0a 2020 2020   = False....    
+000101d0: 2020 2020 7365 6c66 2e72 6f77 5f73 656c      self.row_sel
+000101e0: 6563 7428 7365 6c66 2e73 656c 6563 7469  ect(self.selecti
+000101f0: 6f6e 5f69 6478 290d 0a0d 0a20 2020 2020  on_idx)....     
+00010200: 2020 2023 2073 656c 662e 7564 7061 7465     # self.udpate
+00010210: 4275 7474 6f6e 2e73 6574 5465 7874 2822  Button.setText("
+00010220: 5570 6461 7465 2056 616c 7565 7322 290d  Update Values").
+00010230: 0a0d 0a20 2020 2064 6566 2073 6176 6528  ...    def save(
+00010240: 7365 6c66 293a 0d0a 0d0a 2020 2020 2020  self):....      
+00010250: 2020 7472 793a 0d0a 0d0a 0d0a 2020 2020    try:......    
+00010260: 2020 2020 2020 2020 6669 6c65 6e61 6d65          filename
+00010270: 203d 2073 656c 662e 6375 7272 656e 745f   = self.current_
+00010280: 6669 6c65 2023 2073 7461 7475 7342 6172  file # statusBar
+00010290: 2829 2e63 7572 7265 6e74 4d65 7373 6167  ().currentMessag
+000102a0: 6528 290d 0a20 2020 2020 2020 2020 2020  e()..           
+000102b0: 2073 656c 662e 6c61 6265 6c5f 666e 616d   self.label_fnam
+000102c0: 652e 7365 7454 6578 7428 6669 6c65 6e61  e.setText(filena
+000102d0: 6d65 290d 0a0d 0a20 2020 2020 2020 2020  me)....         
+000102e0: 2020 2069 6620 6669 6c65 6e61 6d65 2069     if filename i
+000102f0: 7320 6e6f 7420 4e6f 6e65 3a0d 0a0d 0a20  s not None:.... 
+00010300: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00010310: 656c 662e 7361 7665 6173 2866 696c 656e  elf.saveas(filen
+00010320: 616d 6529 0d0a 0d0a 2020 2020 2020 2020  ame)....        
+00010330: 2020 2020 2020 2020 2320 544f 444f 206d          # TODO m
+00010340: 6179 6265 2062 6163 6b75 7028 3f29 0d0a  aybe backup(?)..
+00010350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010360: 2320 7365 6c66 2e6e 6f74 6966 7928 2246  # self.notify("F
+00010370: 696c 6520 7361 7665 6420 756e 6465 7220  ile saved under 
+00010380: 2573 2220 2520 6669 6c65 6e61 6d65 2c74  %s" % filename,t
+00010390: 6974 6c65 3d22 4f6b 2229 0d0a 2020 2020  itle="Ok")..    
+000103a0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+000103b0: 7428 2246 494c 4520 5341 5645 4421 2229  t("FILE SAVED!")
+000103c0: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+000103d0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+000103e0: 2020 2020 2073 656c 662e 7361 7665 5f64       self.save_d
+000103f0: 6c67 2829 0d0a 0d0a 2020 2020 2020 2020  lg()....        
+00010400: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
+00010410: 2061 7320 653a 0d0a 2020 2020 2020 2020   as e:..        
+00010420: 2020 2020 6966 2066 696c 656e 616d 6520      if filename 
+00010430: 213d 2022 223a 0d0a 2020 2020 2020 2020  != "":..        
+00010440: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
+00010450: 6966 7928 7374 7228 6529 2c74 6974 6c65  ify(str(e),title
+00010460: 3d22 4572 726f 7222 290d 0a0d 0a0d 0a0d  ="Error").......
+00010470: 0a20 2020 2064 6566 2073 6176 655f 646c  .    def save_dl
+00010480: 6728 7365 6c66 293a 0d0a 2020 2020 2020  g(self):..      
+00010490: 2020 7472 793a 0d0a 0d0a 2020 2020 2020    try:....      
+000104a0: 2020 2020 2020 6669 6c65 6e61 6d65 203d        filename =
+000104b0: 2051 4669 6c65 4469 616c 6f67 2e67 6574   QFileDialog.get
+000104c0: 5361 7665 4669 6c65 4e61 6d65 2873 656c  SaveFileName(sel
+000104d0: 662c 2027 5361 7665 2066 696c 6527 2c0d  f, 'Save file',.
+000104e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000104f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010510: 6f73 2e67 6574 6377 6428 292c 2022 6174  os.getcwd(), "at
+00010520: 7475 6e65 2046 696c 6573 2028 2a2e 7366  tune Files (*.sf
+00010530: 6374 6c29 2229 5b30 5d0d 0a20 2020 2020  ctl)")[0]..     
+00010540: 2020 2020 2020 2073 656c 662e 7374 6174         self.stat
+00010550: 7573 4261 7228 292e 7368 6f77 4d65 7373  usBar().showMess
+00010560: 6167 6528 2253 6176 6564 2066 696c 6520  age("Saved file 
+00010570: 2220 2b20 6669 6c65 6e61 6d65 290d 0a0d  " + filename)...
+00010580: 0a20 2020 2020 2020 2020 2020 2063 7572  .            cur
+00010590: 7265 6e74 5f66 696c 655f 6261 636b 7570  rent_file_backup
+000105a0: 203d 2073 656c 662e 6375 7272 656e 745f   = self.current_
+000105b0: 6669 6c65 0d0a 0d0a 2020 2020 2020 2020  file....        
+000105c0: 2020 2020 6966 2066 696c 656e 616d 6520      if filename 
+000105d0: 6973 206e 6f74 204e 6f6e 6520 616e 6420  is not None and 
+000105e0: 6669 6c65 6e61 6d65 2021 3d20 2222 3a0d  filename != "":.
+000105f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010600: 2073 656c 662e 6c61 6265 6c5f 666e 616d   self.label_fnam
+00010610: 652e 7365 7454 6578 7428 6669 6c65 6e61  e.setText(filena
+00010620: 6d65 290d 0a0d 0a20 2020 2020 2020 2020  me)....         
+00010630: 2020 2020 2020 2073 656c 662e 6375 7272         self.curr
+00010640: 656e 745f 6669 6c65 203d 2066 696c 656e  ent_file = filen
+00010650: 616d 650d 0a20 2020 2020 2020 2020 2020  ame..           
+00010660: 2020 2020 2073 656c 662e 7361 7665 6173       self.saveas
+00010670: 2866 696c 656e 616d 6529 0d0a 0d0a 2020  (filename)....  
+00010680: 2020 2020 2020 2020 2020 2320 544f 444f            # TODO
+00010690: 206d 6179 6265 2062 6163 6b75 7028 3f29   maybe backup(?)
+000106a0: 0d0a 0d0a 2020 2020 2020 2020 6578 6365  ....        exce
+000106b0: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
+000106c0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+000106d0: 7365 6c66 2e6e 6f74 6966 7928 2243 6f75  self.notify("Cou
+000106e0: 6c64 206e 6f74 2073 6176 6520 7072 6f6a  ld not save proj
+000106f0: 6563 742e 222c 7469 746c 653d 2245 7272  ect.",title="Err
+00010700: 6f72 2229 0d0a 2020 2020 2020 2020 2020  or")..          
+00010710: 2020 7365 6c66 2e63 7572 7265 6e74 5f66    self.current_f
+00010720: 696c 6520 3d20 6375 7272 656e 745f 6669  ile = current_fi
+00010730: 6c65 5f62 6163 6b75 700d 0a0d 0a0d 0a20  le_backup...... 
+00010740: 2020 2064 6566 2073 6176 6561 7328 7365     def saveas(se
+00010750: 6c66 2c66 696c 656e 616d 6529 3a0d 0a0d  lf,filename):...
+00010760: 0a20 2020 2020 2020 2066 7468 656d 6520  .        ftheme 
+00010770: 3d20 4e6f 6e65 0d0a 2020 2020 2020 2020  = None..        
+00010780: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+00010790: 2020 6674 6865 6d65 203d 2066 696c 656e    ftheme = filen
+000107a0: 616d 655b 3a2d 355d 2b22 7366 6374 6865  ame[:-5]+"sfcthe
+000107b0: 6d65 2220 2320 6162 736f 6c75 7465 2066  me" # absolute f
+000107c0: 696c 6520 7061 7468 0d0a 2020 2020 2020  ile path..      
+000107d0: 2020 2020 2020 666f 6c64 6572 2c66 7468        folder,fth
+000107e0: 656d 6520 3d20 6f73 2e70 6174 682e 7370  eme = os.path.sp
+000107f0: 6c69 7428 6674 6865 6d65 2920 2320 636f  lit(ftheme) # co
+00010800: 6e76 6572 7420 746f 2072 656c 6174 6976  nvert to relativ
+00010810: 6520 6669 6c65 2070 6174 680d 0a20 2020  e file path..   
+00010820: 2020 2020 2020 2020 2073 656c 662e 7468           self.th
+00010830: 656d 655f 6d61 6e61 6765 722e 7361 7665  eme_manager.save
+00010840: 5f63 6f6c 6f72 7328 6674 6865 6d65 290d  _colors(ftheme).
+00010850: 0a20 2020 2020 2020 2065 7863 6570 743a  .        except:
+00010860: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+00010870: 6c66 2e6e 6f74 6966 7928 2243 6f75 6c64  lf.notify("Could
+00010880: 206e 6f74 2073 6176 6520 636f 6c6f 7220   not save color 
+00010890: 7468 656d 652e 2070 726f 6365 6564 696e  theme. proceedin
+000108a0: 6720 7769 7468 6f75 7422 2c74 6974 6c65  g without",title
+000108b0: 3d22 4572 726f 7222 290d 0a0d 0a0d 0a20  ="Error")...... 
+000108c0: 2020 2020 2020 2023 2064 7261 7763 616e         # drawcan
+000108d0: 7661 7320 636f 6465 5f64 6174 610d 0a20  vas code_data.. 
+000108e0: 2020 2020 2020 2063 6f64 655f 6461 7461         code_data
+000108f0: 203d 207b 7d0d 0a20 2020 2020 2020 2066   = {}..        f
+00010900: 6f72 206b 2c76 2069 6e20 7365 6c66 2e64  or k,v in self.d
+00010910: 7261 7763 616e 7661 732e 636f 6465 5f64  rawcanvas.code_d
+00010920: 6174 612e 6974 656d 7328 293a 0d0a 2020  ata.items():..  
+00010930: 2020 2020 2020 2020 2020 636f 6465 5f64            code_d
+00010940: 6174 615b 6b5d 203d 2073 7472 2876 2e65  ata[k] = str(v.e
+00010950: 6e63 6f64 6528 2275 7466 2d38 2229 2e64  ncode("utf-8").d
+00010960: 6563 6f64 6528 2763 7031 3235 3227 2929  ecode('cp1252'))
+00010970: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00010980: 6669 7820 736f 6d65 2070 6f74 656e 7469  fix some potenti
+00010990: 616c 2065 6e63 6f64 696e 6720 6572 726f  al encoding erro
+000109a0: 7273 0d0a 0d0a 2020 2020 2020 2020 7472  rs....        tr
+000109b0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+000109c0: 7072 696e 7428 2246 494c 454e 414d 4522  print("FILENAME"
+000109d0: 2c20 6669 6c65 6e61 6d65 290d 0a0d 0a20  , filename).... 
+000109e0: 2020 2020 2020 2020 2020 2023 206c 6f61             # loa
+000109f0: 6420 656e 7472 6965 7320 696e 746f 2074  d entries into t
+00010a00: 6865 206c 6973 740d 0a20 2020 2020 2020  he list..       
+00010a10: 2020 2020 2077 6974 6820 6f70 656e 2866       with open(f
+00010a20: 696c 656e 616d 652c 2027 7727 2920 6173  ilename, 'w') as
+00010a30: 2073 7472 6561 6d3a 0d0a 0d0a 2020 2020   stream:....    
+00010a40: 2020 2020 2020 2020 2020 2020 6461 7461              data
+00010a50: 203d 207b 2274 7261 6e73 6163 7469 6f6e   = {"transaction
+00010a60: 7322 3a20 7365 6c66 2e65 6e74 7279 5f64  s": self.entry_d
+00010a70: 6174 612c 0d0a 2020 2020 2020 2020 2020  ata,..          
+00010a80: 2020 2020 2020 2261 6765 6e74 7322 3a20        "agents": 
+00010a90: 636f 6465 5f64 6174 612c 0d0a 2020 2020  code_data,..    
+00010aa0: 2020 2020 2020 2020 2020 2020 2262 6f78              "box
+00010ab0: 5f70 6f73 6974 696f 6e73 223a 2073 656c  _positions": sel
+00010ac0: 662e 6472 6177 6361 6e76 6173 2e62 6f78  f.drawcanvas.box
+00010ad0: 5f70 6f73 6974 696f 6e73 2829 2c0d 0a20  _positions(),.. 
+00010ae0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00010af0: 6c61 6265 6c5f 706f 7369 7469 6f6e 7322  label_positions"
+00010b00: 3a20 7365 6c66 2e64 7261 7763 616e 7661  : self.drawcanva
+00010b10: 732e 6c61 6265 6c5f 706f 7369 7469 6f6e  s.label_position
+00010b20: 7328 292c 0d0a 2020 2020 2020 2020 2020  s(),..          
+00010b30: 2020 2020 2020 2273 6574 7469 6e67 7322        "settings"
+00010b40: 3a20 7365 6c66 2e73 6574 7469 6e67 735f  : self.settings_
+00010b50: 7374 722c 0d0a 2020 2020 2020 2020 2020  str,..          
+00010b60: 2020 2020 2020 226d 6169 6e6c 6f6f 7022        "mainloop"
+00010b70: 3a20 7365 6c66 2e6d 6169 6e6c 6f6f 705f  : self.mainloop_
+00010b80: 7374 722c 0d0a 2020 2020 2020 2020 2020  str,..          
+00010b90: 2020 2020 2020 2274 6865 6d65 223a 207b        "theme": {
+00010ba0: 2267 6c6f 6261 6c74 6865 6d65 223a 2073  "globaltheme": s
+00010bb0: 656c 662e 7468 656d 655f 6d61 6e61 6765  elf.theme_manage
+00010bc0: 722e 7468 656d 652c 2022 636f 6c6f 7273  r.theme, "colors
+00010bd0: 223a 6674 6865 6d65 7d2c 0d0a 2020 2020  ":ftheme},..    
+00010be0: 2020 2020 2020 2020 2020 2020 226e 6f74              "not
+00010bf0: 6573 223a 2073 656c 662e 6e6f 7465 7345  es": self.notesE
+00010c00: 6469 742e 746f 506c 6169 6e54 6578 7428  dit.toPlainText(
+00010c10: 292c 0d0a 2020 2020 2020 2020 2020 2020  ),..            
+00010c20: 2020 2020 7d0d 0a0d 0a20 2020 2020 2020      }....       
+00010c30: 2020 2020 2020 2020 2079 616d 6c2e 6475           yaml.du
+00010c40: 6d70 2864 6174 612c 7374 7265 616d 290d  mp(data,stream).
+00010c50: 0a0d 0a20 2020 2020 2020 2065 7863 6570  ...        excep
+00010c60: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
+00010c70: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
+00010c80: 656c 662e 6e6f 7469 6679 286d 6573 7361  elf.notify(messa
+00010c90: 6765 3d73 7472 2865 292c 2074 6974 6c65  ge=str(e), title
+00010ca0: 3d22 4572 726f 7222 290d 0a0d 0a0d 0a20  ="Error")...... 
+00010cb0: 2020 2064 6566 2074 7279 5f67 656e 5f6d     def try_gen_m
+00010cc0: 6174 7269 7828 7365 6c66 293a 0d0a 2020  atrix(self):..  
+00010cd0: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
+00010ce0: 2020 2020 2020 2020 7365 6c66 2e67 656e          self.gen
+00010cf0: 5f6d 6174 7269 7828 290d 0a20 2020 2020  _matrix()..     
+00010d00: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
+00010d10: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
+00010d20: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
+00010d30: 6679 2822 4572 726f 7222 2c73 7472 2865  fy("Error",str(e
+00010d40: 2929 0d0a 0d0a 2020 2020 6465 6620 6765  ))....    def ge
+00010d50: 6e5f 6d61 7472 6978 2873 656c 662c 6d6f  n_matrix(self,mo
+00010d60: 6465 3d22 7374 616e 6461 7264 2229 3a0d  de="standard"):.
+00010d70: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00010d80: 2020 2020 2020 6765 6e65 7261 7465 2066        generate f
+00010d90: 6c6f 7720 6d61 7472 6978 3a0d 0a0d 0a20  low matrix:.... 
+00010da0: 2020 2020 2020 203a 7061 7261 6d20 6d6f         :param mo
+00010db0: 6465 3a20 7374 616e 6461 7264 2c65 7863  de: standard,exc
+00010dc0: 656c 2c6c 6174 6578 0d0a 0d0a 2020 2020  el,latex....    
+00010dd0: 2020 2020 7374 616e 6461 7264 3a20 7368      standard: sh
+00010de0: 6f77 7320 6d61 7472 6978 2067 7261 7068  ows matrix graph
+00010df0: 6963 616c 6c79 0d0a 2020 2020 2020 2020  ically..        
+00010e00: 6578 6365 6c3a 2065 7870 6f72 7473 2061  excel: exports a
+00010e10: 6e20 6578 6365 6c20 6669 6c65 0d0a 2020  n excel file..  
+00010e20: 2020 2020 2020 6c61 7465 783a 206e 6f74        latex: not
+00010e30: 2079 6574 2073 7570 706f 7274 6564 204e   yet supported N
+00010e40: 4f54 2041 5641 494c 4142 4c45 2046 4f52  OT AVAILABLE FOR
+00010e50: 204e 4f57 0d0a 2020 2020 2020 2020 6874   NOW..        ht
+00010e60: 6d6c 3a20 4e4f 5420 4156 4149 4c41 424c  ml: NOT AVAILABL
+00010e70: 4520 464f 5220 4e4f 570d 0a20 2020 2020  E FOR NOW..     
+00010e80: 2020 2022 2222 0d0a 0d0a 2020 2020 2020     """....      
+00010e90: 2020 666c 6f77 5f64 6174 6120 3d20 7b7d    flow_data = {}
+00010ea0: 0d0a 0d0a 2020 2020 2020 2020 666c 6f77  ....        flow
+00010eb0: 5f64 6174 615b 2243 4122 5d20 3d20 6465  _data["CA"] = de
+00010ec0: 6661 756c 7464 6963 7428 6c61 6d62 6461  faultdict(lambda
+00010ed0: 3a20 6465 6661 756c 7464 6963 7428 6c69  : defaultdict(li
+00010ee0: 7374 2929 2020 2320 6375 7272 656e 7420  st))  # current 
+00010ef0: 6163 636f 756e 740d 0a20 2020 2020 2020  account..       
+00010f00: 2066 6c6f 775f 6461 7461 5b22 4b41 225d   flow_data["KA"]
+00010f10: 203d 2064 6566 6175 6c74 6469 6374 286c   = defaultdict(l
+00010f20: 616d 6264 613a 2064 6566 6175 6c74 6469  ambda: defaultdi
+00010f30: 6374 286c 6973 7429 2920 2023 2063 6170  ct(list))  # cap
+00010f40: 6974 616c 2061 6363 6f75 6e74 0d0a 0d0a  ital account....
+00010f50: 2020 2020 2020 2020 2320 666c 6f77 5f64          # flow_d
+00010f60: 6174 615b 4b41 206f 7220 4341 5d5b 7375  ata[KA or CA][su
+00010f70: 626a 6563 745d 5b61 6765 6e74 5d0d 0a20  bject][agent].. 
+00010f80: 2020 2020 2020 2069 6620 6c65 6e28 7365         if len(se
+00010f90: 6c66 2e65 6e74 7279 5f64 6174 6129 203d  lf.entry_data) =
+00010fa0: 3d20 303a 0d0a 2020 2020 2020 2020 2020  = 0:..          
+00010fb0: 2020 7365 6c66 2e6e 6f74 6966 7928 6d65    self.notify(me
+00010fc0: 7373 6167 653d 2243 616e 6e6f 7420 6765  ssage="Cannot ge
+00010fd0: 6e65 7261 7465 204d 6174 7269 782e 2048  nerate Matrix. H
+00010fe0: 6176 6520 796f 7520 7365 7420 7570 2061  ave you set up a
+00010ff0: 6e79 2074 7261 6e73 6163 7469 6f6e 7320  ny transactions 
+00011000: 7965 743f 222c 7469 746c 653d 2245 7272  yet?",title="Err
+00011010: 6f72 2229 0d0a 2020 2020 2020 2020 2020  or")..          
+00011020: 2020 7265 7475 726e 0d0a 0d0a 2020 2020    return....    
+00011030: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
+00011040: 2020 2020 2020 666f 7220 6669 6c65 6461        for fileda
+00011050: 7461 2069 6e20 7365 6c66 2e65 6e74 7279  ta in self.entry
+00011060: 5f64 6174 613a 0d0a 2020 2020 2020 2020  _data:..        
 00011070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011080: 2020 2020 2071 7561 6e74 6974 7920 3d20       quantity = 
-00011090: 6669 6c65 6461 7461 5b22 7175 616e 7469  filedata["quanti
-000110a0: 7479 225d 0d0a 2020 2020 2020 2020 2020  ty"]..          
-000110b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000110c0: 2020 2020 2020 6167 656e 7431 203d 2066        agent1 = f
-000110d0: 696c 6564 6174 615b 2261 6765 6e74 3122  iledata["agent1"
-000110e0: 5d2e 7265 706c 6163 6528 225f 222c 2022  ].replace("_", "
-000110f0: 2022 292e 7469 746c 6528 290d 0a20 2020   ").title()..   
-00011100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011110: 2020 2020 2020 2020 2020 2020 2061 6765               age
-00011120: 6e74 3220 3d20 6669 6c65 6461 7461 5b22  nt2 = filedata["
-00011130: 6167 656e 7432 225d 2e72 6570 6c61 6365  agent2"].replace
-00011140: 2822 5f22 2c20 2220 2229 2e74 6974 6c65  ("_", " ").title
-00011150: 2829 0d0a 0d0a 2020 2020 2020 2020 2020  ()....          
+00011080: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+00011090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000110a0: 2020 2020 2020 2020 2020 2020 2065 7661               eva
+000110b0: 6c75 6174 6520 7472 616e 7361 6374 696f  luate transactio
+000110c0: 6e20 656e 7472 6965 7320 7769 7468 2074  n entries with t
+000110d0: 6865 2066 6c6f 7720 6c6f 6767 6572 0d0a  he flow logger..
+000110e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000110f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011100: 2222 220d 0a20 2020 2020 2020 2020 2020  """..           
+00011110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011120: 2020 2020 2073 7562 6a65 6374 203d 2066       subject = f
+00011130: 696c 6564 6174 615b 2273 7562 6a65 6374  iledata["subject
+00011140: 225d 2e72 6570 6c61 6365 2822 5f22 2c20  "].replace("_", 
+00011150: 2220 2229 2e74 6974 6c65 2829 0d0a 2020  " ").title()..  
 00011160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011170: 2020 2020 2020 2320 7570 7065 7220 7061        # upper pa
-00011180: 7274 206f 6620 6d61 7472 6978 0d0a 2020  rt of matrix..  
-00011190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000111a0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000111b0: 206c 6f67 5f66 6c6f 773a 0d0a 2020 2020   log_flow:..    
-000111c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011170: 2020 2020 2020 2020 2020 2020 2020 6b69                ki
+00011180: 6e64 203d 2066 696c 6564 6174 615b 226b  nd = filedata["k
+00011190: 696e 6422 5d0d 0a20 2020 2020 2020 2020  ind"]..         
+000111a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000111b0: 2020 2020 2020 206c 6f67 5f66 6c6f 7720         log_flow 
+000111c0: 3d20 5472 7565 0d0a 2020 2020 2020 2020  = True..        
 000111d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000111e0: 6163 636f 756e 745f 6672 6f6d 203d 206b  account_from = k
-000111f0: 696e 642e 7370 6c69 7428 222d 3e22 295b  ind.split("->")[
-00011200: 305d 0d0a 2020 2020 2020 2020 2020 2020  0]..            
-00011210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011220: 2020 2020 2020 2020 6163 636f 756e 745f          account_
-00011230: 746f 203d 206b 696e 642e 7370 6c69 7428  to = kind.split(
-00011240: 222d 3e22 295b 315d 0d0a 0d0a 2020 2020  "->")[1]....    
+000111e0: 2020 2020 2020 2020 6966 2066 696c 6564          if filed
+000111f0: 6174 615b 226c 6f67 2074 7261 6e73 6163  ata["log transac
+00011200: 7469 6f6e 225d 203d 3d20 2246 616c 7365  tion"] == "False
+00011210: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+00011220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011230: 2020 2020 2020 2020 6c6f 675f 666c 6f77          log_flow
+00011240: 3d20 4661 6c73 650d 0a20 2020 2020 2020  = False..       
 00011250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011270: 666c 6f77 5f64 6174 615b 6163 636f 756e  flow_data[accoun
-00011280: 745f 6672 6f6d 5d5b 7375 626a 6563 745d  t_from][subject]
-00011290: 5b61 6765 6e74 315d 2e61 7070 656e 6428  [agent1].append(
-000112a0: 222d 2220 2b20 7374 7228 7175 616e 7469  "-" + str(quanti
-000112b0: 7479 2929 0d0a 2020 2020 2020 2020 2020  ty))..          
-000112c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000112d0: 2020 2020 2020 2020 2020 666c 6f77 5f64            flow_d
-000112e0: 6174 615b 6163 636f 756e 745f 746f 5d5b  ata[account_to][
-000112f0: 7375 626a 6563 745d 5b61 6765 6e74 325d  subject][agent2]
-00011300: 2e61 7070 656e 6428 7374 7228 7175 616e  .append(str(quan
-00011310: 7469 7479 2929 0d0a 0d0a 2020 2020 2020  tity))....      
-00011320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011330: 2020 2020 2020 2020 2020 2320 6c6f 7765            # lowe
-00011340: 7220 7061 7274 206f 6620 6d61 7472 6978  r part of matrix
-00011350: 203d 2063 6861 6e67 6573 2069 6e20 6173   = changes in as
-00011360: 7365 7473 2061 6e73 206c 6961 6269 6c69  sets ans liabili
-00011370: 7469 6573 0d0a 0d0a 2020 2020 2020 2020  ties....        
-00011380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011390: 2020 2020 2020 2020 6131 203d 2066 696c          a1 = fil
-000113a0: 6564 6174 615b 2261 3122 5d20 2023 202b  edata["a1"]  # +
-000113b0: 2022 5c6e 220d 0a20 2020 2020 2020 2020   "\n"..         
-000113c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000113d0: 2020 2020 2020 2065 3120 3d20 6669 6c65         e1 = file
-000113e0: 6461 7461 5b22 6531 225d 2020 2320 2b20  data["e1"]  # + 
-000113f0: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
-00011400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011410: 2020 2020 2020 6c31 203d 2066 696c 6564        l1 = filed
-00011420: 6174 615b 226c 3122 5d20 2023 202b 2022  ata["l1"]  # + "
-00011430: 5c6e 220d 0a20 2020 2020 2020 2020 2020  \n"..           
-00011440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011450: 2020 2020 2061 3220 3d20 6669 6c65 6461       a2 = fileda
-00011460: 7461 5b22 6132 225d 2020 2320 2b20 225c  ta["a2"]  # + "\
-00011470: 6e22 0d0a 2020 2020 2020 2020 2020 2020  n"..            
-00011480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011490: 2020 2020 6532 203d 2066 696c 6564 6174      e2 = filedat
-000114a0: 615b 2265 3222 5d20 2023 202b 2022 5c6e  a["e2"]  # + "\n
-000114b0: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
-000114c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000114d0: 2020 206c 3220 3d20 6669 6c65 6461 7461     l2 = filedata
-000114e0: 5b22 6c32 225d 2020 2320 2b20 225c 6e22  ["l2"]  # + "\n"
-000114f0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00011500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011510: 2020 2020 2320 6173 7365 7473 0d0a 2020      # assets..  
-00011520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011530: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-00011540: 7220 6974 656d 5f6e 616d 6520 696e 2061  r item_name in a
-00011550: 312e 7370 6c69 7428 225c 6e22 293a 2020  1.split("\n"):  
-00011560: 2320 2b20 6531 2e73 706c 6974 2822 5c6e  # + e1.split("\n
-00011570: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
-00011580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011590: 2020 2020 2020 2020 2069 6620 6974 656d           if item
-000115a0: 5f6e 616d 6520 213d 2022 223a 0d0a 2020  _name != "":..  
+00011260: 2020 2020 2020 2020 2023 2020 206c 6f67           #   log
+00011270: 5f66 6c6f 7720 3d20 626f 6f6c 2866 696c  _flow = bool(fil
+00011280: 6564 6174 615b 226c 6f67 2074 7261 6e73  edata["log trans
+00011290: 6163 7469 6f6e 225d 290d 0a20 2020 2020  action"])..     
+000112a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000112b0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+000112c0: 2822 4c4f 4720 464c 4f57 222c 6c6f 675f  ("LOG FLOW",log_
+000112d0: 666c 6f77 2c22 7261 7722 2c66 696c 6564  flow,"raw",filed
+000112e0: 6174 615b 226c 6f67 2074 7261 6e73 6163  ata["log transac
+000112f0: 7469 6f6e 225d 290d 0a20 2020 2020 2020  tion"])..       
+00011300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011310: 2020 2020 2020 2020 2071 7561 6e74 6974           quantit
+00011320: 7920 3d20 6669 6c65 6461 7461 5b22 7175  y = filedata["qu
+00011330: 616e 7469 7479 225d 0d0a 2020 2020 2020  antity"]..      
+00011340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011350: 2020 2020 2020 2020 2020 6167 656e 7431            agent1
+00011360: 203d 2066 696c 6564 6174 615b 2261 6765   = filedata["age
+00011370: 6e74 3122 5d2e 7265 706c 6163 6528 225f  nt1"].replace("_
+00011380: 222c 2022 2022 292e 7469 746c 6528 290d  ", " ").title().
+00011390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000113a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000113b0: 2061 6765 6e74 3220 3d20 6669 6c65 6461   agent2 = fileda
+000113c0: 7461 5b22 6167 656e 7432 225d 2e72 6570  ta["agent2"].rep
+000113d0: 6c61 6365 2822 5f22 2c20 2220 2229 2e74  lace("_", " ").t
+000113e0: 6974 6c65 2829 0d0a 0d0a 2020 2020 2020  itle()....      
+000113f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011400: 2020 2020 2020 2020 2020 2320 7570 7065            # uppe
+00011410: 7220 7061 7274 206f 6620 6d61 7472 6978  r part of matrix
+00011420: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00011430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011440: 2020 6966 206c 6f67 5f66 6c6f 773a 0d0a    if log_flow:..
+00011450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011470: 2020 2020 6163 636f 756e 745f 6672 6f6d      account_from
+00011480: 203d 206b 696e 642e 7370 6c69 7428 222d   = kind.split("-
+00011490: 3e22 295b 305d 0d0a 2020 2020 2020 2020  >")[0]..        
+000114a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000114b0: 2020 2020 2020 2020 2020 2020 6163 636f              acco
+000114c0: 756e 745f 746f 203d 206b 696e 642e 7370  unt_to = kind.sp
+000114d0: 6c69 7428 222d 3e22 295b 315d 0d0a 0d0a  lit("->")[1]....
+000114e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000114f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011500: 2020 2020 666c 6f77 5f64 6174 615b 6163      flow_data[ac
+00011510: 636f 756e 745f 6672 6f6d 5d5b 7375 626a  count_from][subj
+00011520: 6563 745d 5b61 6765 6e74 315d 2e61 7070  ect][agent1].app
+00011530: 656e 6428 222d 2220 2b20 7374 7228 7175  end("-" + str(qu
+00011540: 616e 7469 7479 2929 0d0a 2020 2020 2020  antity))..      
+00011550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011560: 2020 2020 2020 2020 2020 2020 2020 666c                fl
+00011570: 6f77 5f64 6174 615b 6163 636f 756e 745f  ow_data[account_
+00011580: 746f 5d5b 7375 626a 6563 745d 5b61 6765  to][subject][age
+00011590: 6e74 325d 2e61 7070 656e 6428 7374 7228  nt2].append(str(
+000115a0: 7175 616e 7469 7479 2929 0d0a 0d0a 2020  quantity))....  
 000115b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000115c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000115d0: 2020 2020 2020 6e61 6d65 203d 2069 7465        name = ite
-000115e0: 6d5f 6e61 6d65 5b31 3a5d 2e73 7472 6970  m_name[1:].strip
-000115f0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-00011600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011610: 2020 2020 2020 2020 2020 2020 7369 676e              sign
-00011620: 203d 2069 7465 6d5f 6e61 6d65 5b30 5d0d   = item_name[0].
-00011630: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-00011640: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011650: 2020 2020 2020 2020 2020 2069 6620 7369             if si
-00011660: 676e 203d 3d20 222b 223a 0d0a 2020 2020  gn == "+":..    
-00011670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011690: 2020 2020 2020 2020 666c 6970 7065 645f          flipped_
-000116a0: 7369 676e 203d 2022 2d22 0d0a 2020 2020  sign = "-"..    
-000116b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000116c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000116d0: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-000116e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000116f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011700: 2020 2020 2020 2066 6c69 7070 6564 5f73         flipped_s
-00011710: 6967 6e20 3d20 222b 220d 0a0d 0a20 2020  ign = "+"....   
-00011720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011740: 2020 2020 2069 6620 6e6f 7420 2228 7329       if not "(s)
-00011750: 2220 696e 206e 616d 653a 0d0a 2020 2020  " in name:..    
-00011760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011780: 2020 2020 2020 2020 666c 6f77 5f64 6174          flow_dat
-00011790: 615b 224b 4122 5d5b 22ce 9420 2573 2220  a["KA"][".. %s" 
-000117a0: 2520 6e61 6d65 5d5b 6167 656e 7431 5d2e  % name][agent1].
-000117b0: 6170 7065 6e64 280d 0a20 2020 2020 2020  append(..       
+000115c0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+000115d0: 6c6f 7765 7220 7061 7274 206f 6620 6d61  lower part of ma
+000115e0: 7472 6978 203d 2063 6861 6e67 6573 2069  trix = changes i
+000115f0: 6e20 6173 7365 7473 2061 6e73 206c 6961  n assets ans lia
+00011600: 6269 6c69 7469 6573 0d0a 0d0a 2020 2020  bilities....    
+00011610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011620: 2020 2020 2020 2020 2020 2020 6131 203d              a1 =
+00011630: 2066 696c 6564 6174 615b 2261 3122 5d20   filedata["a1"] 
+00011640: 2023 202b 2022 5c6e 220d 0a20 2020 2020   # + "\n"..     
+00011650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011660: 2020 2020 2020 2020 2020 2065 3120 3d20             e1 = 
+00011670: 6669 6c65 6461 7461 5b22 6531 225d 2020  filedata["e1"]  
+00011680: 2320 2b20 225c 6e22 0d0a 2020 2020 2020  # + "\n"..      
+00011690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000116a0: 2020 2020 2020 2020 2020 6c31 203d 2066            l1 = f
+000116b0: 696c 6564 6174 615b 226c 3122 5d20 2023  iledata["l1"]  #
+000116c0: 202b 2022 5c6e 220d 0a20 2020 2020 2020   + "\n"..       
+000116d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000116e0: 2020 2020 2020 2020 2061 3220 3d20 6669           a2 = fi
+000116f0: 6c65 6461 7461 5b22 6132 225d 2020 2320  ledata["a2"]  # 
+00011700: 2b20 225c 6e22 0d0a 2020 2020 2020 2020  + "\n"..        
+00011710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011720: 2020 2020 2020 2020 6532 203d 2066 696c          e2 = fil
+00011730: 6564 6174 615b 2265 3222 5d20 2023 202b  edata["e2"]  # +
+00011740: 2022 5c6e 220d 0a20 2020 2020 2020 2020   "\n"..         
+00011750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011760: 2020 2020 2020 206c 3220 3d20 6669 6c65         l2 = file
+00011770: 6461 7461 5b22 6c32 225d 2020 2320 2b20  data["l2"]  # + 
+00011780: 225c 6e22 0d0a 0d0a 2020 2020 2020 2020  "\n"....        
+00011790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000117a0: 2020 2020 2020 2020 2320 6173 7365 7473          # assets
+000117b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
 000117c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000117d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000117e0: 2020 2020 2020 2020 2022 2822 202b 2066           "(" + f
-000117f0: 6c69 7070 6564 5f73 6967 6e20 2b20 7175  lipped_sign + qu
-00011800: 616e 7469 7479 202b 2022 2922 290d 0a0d  antity + ")")...
-00011810: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011830: 2066 6f72 2069 7465 6d5f 6e61 6d65 2069   for item_name i
-00011840: 6e20 6132 2e73 706c 6974 2822 5c6e 2229  n a2.split("\n")
-00011850: 3a20 2023 202b 2065 322e 7370 6c69 7428  :  # + e2.split(
-00011860: 225c 6e22 293a 0d0a 2020 2020 2020 2020  "\n"):..        
-00011870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011880: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00011890: 7465 6d5f 6e61 6d65 2021 3d20 2222 3a0d  tem_name != "":.
-000118a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000118b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000118c0: 2020 2020 2020 2020 206e 616d 6520 3d20           name = 
-000118d0: 6974 656d 5f6e 616d 655b 313a 5d2e 7374  item_name[1:].st
-000118e0: 7269 7028 290d 0a20 2020 2020 2020 2020  rip()..         
-000118f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011900: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00011910: 6967 6e20 3d20 6974 656d 5f6e 616d 655b  ign = item_name[
-00011920: 305d 0d0a 0d0a 2020 2020 2020 2020 2020  0]....          
-00011930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011940: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00011950: 2073 6967 6e20 3d3d 2022 2b22 3a0d 0a20   sign == "+":.. 
-00011960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000117d0: 2020 666f 7220 6974 656d 5f6e 616d 6520    for item_name 
+000117e0: 696e 2061 312e 7370 6c69 7428 225c 6e22  in a1.split("\n"
+000117f0: 293a 2020 2320 2b20 6531 2e73 706c 6974  ):  # + e1.split
+00011800: 2822 5c6e 2229 3a0d 0a20 2020 2020 2020  ("\n"):..       
+00011810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011820: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00011830: 6974 656d 5f6e 616d 6520 213d 2022 223a  item_name != "":
+00011840: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00011850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011860: 2020 2020 2020 2020 2020 6e61 6d65 203d            name =
+00011870: 2069 7465 6d5f 6e61 6d65 5b31 3a5d 2e73   item_name[1:].s
+00011880: 7472 6970 2829 0d0a 2020 2020 2020 2020  trip()..        
+00011890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000118a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000118b0: 7369 676e 203d 2069 7465 6d5f 6e61 6d65  sign = item_name
+000118c0: 5b30 5d0d 0a0d 0a20 2020 2020 2020 2020  [0]....         
+000118d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000118e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000118f0: 6620 7369 676e 203d 3d20 222b 223a 0d0a  f sign == "+":..
+00011900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011920: 2020 2020 2020 2020 2020 2020 666c 6970              flip
+00011930: 7065 645f 7369 676e 203d 2022 2d22 0d0a  ped_sign = "-"..
+00011940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011960: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
 00011970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011980: 2020 2020 2020 2020 2020 2066 6c69 7070             flipp
-00011990: 6564 5f73 6967 6e20 3d20 222d 220d 0a20  ed_sign = "-".. 
-000119a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000119b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000119c0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-000119d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000119e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000119f0: 2020 2020 2020 2020 2020 666c 6970 7065            flippe
-00011a00: 645f 7369 676e 203d 2022 2b22 0d0a 0d0a  d_sign = "+"....
-00011a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a30: 2020 2020 2020 2020 6966 206e 6f74 2022          if not "
-00011a40: 2873 2922 2069 6e20 6e61 6d65 3a0d 0a20  (s)" in name:.. 
+00011980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011990: 2020 2020 2020 2020 2020 2066 6c69 7070             flipp
+000119a0: 6564 5f73 6967 6e20 3d20 222b 220d 0a0d  ed_sign = "+"...
+000119b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000119c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000119d0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+000119e0: 2228 7329 2220 696e 206e 616d 653a 0d0a  "(s)" in name:..
+000119f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011a10: 2020 2020 2020 2020 2020 2020 666c 6f77              flow
+00011a20: 5f64 6174 615b 224b 4122 5d5b 22ce 9420  _data["KA"][".. 
+00011a30: 2573 2220 2520 6e61 6d65 5d5b 6167 656e  %s" % name][agen
+00011a40: 7431 5d2e 6170 7065 6e64 280d 0a20 2020  t1].append(..   
 00011a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00011a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a70: 2020 2020 2020 2020 2020 2066 6c6f 775f             flow_
-00011a80: 6461 7461 5b22 4b41 225d 5b22 ce94 2025  data["KA"][".. %
-00011a90: 7322 2025 206e 616d 655d 5b61 6765 6e74  s" % name][agent
-00011aa0: 325d 2e61 7070 656e 6428 0d0a 2020 2020  2].append(..    
+00011a70: 2020 2020 2020 2020 2020 2020 2022 2822               "("
+00011a80: 202b 2066 6c69 7070 6564 5f73 6967 6e20   + flipped_sign 
+00011a90: 2b20 7175 616e 7469 7479 202b 2022 2922  + quantity + ")"
+00011aa0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
 00011ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ad0: 2020 2020 2020 2020 2020 2020 2228 2220              "(" 
-00011ae0: 2b20 666c 6970 7065 645f 7369 676e 202b  + flipped_sign +
-00011af0: 2071 7561 6e74 6974 7920 2b20 2229 2229   quantity + ")")
-00011b00: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00011ac0: 2020 2020 2066 6f72 2069 7465 6d5f 6e61       for item_na
+00011ad0: 6d65 2069 6e20 6132 2e73 706c 6974 2822  me in a2.split("
+00011ae0: 5c6e 2229 3a20 2023 202b 2065 322e 7370  \n"):  # + e2.sp
+00011af0: 6c69 7428 225c 6e22 293a 0d0a 2020 2020  lit("\n"):..    
+00011b00: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00011b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b20: 2020 2020 2320 6c69 6162 696c 6974 6965      # liabilitie
-00011b30: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
+00011b20: 6966 2069 7465 6d5f 6e61 6d65 2021 3d20  if item_name != 
+00011b30: 2222 3a0d 0a20 2020 2020 2020 2020 2020  "":..           
 00011b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b50: 2020 2066 6f72 2069 7465 6d5f 6e61 6d65     for item_name
-00011b60: 2069 6e20 6c31 2e73 706c 6974 2822 5c6e   in l1.split("\n
-00011b70: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
+00011b50: 2020 2020 2020 2020 2020 2020 206e 616d               nam
+00011b60: 6520 3d20 6974 656d 5f6e 616d 655b 313a  e = item_name[1:
+00011b70: 5d2e 7374 7269 7028 290d 0a20 2020 2020  ].strip()..     
 00011b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011b90: 2020 2020 2020 2020 2069 6620 6974 656d           if item
-00011ba0: 5f6e 616d 6520 213d 2022 223a 0d0a 2020  _name != "":..  
-00011bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011ba0: 2020 2073 6967 6e20 3d20 6974 656d 5f6e     sign = item_n
+00011bb0: 616d 655b 305d 0d0a 0d0a 2020 2020 2020  ame[0]....      
 00011bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011bd0: 2020 2020 2020 6e61 6d65 203d 2069 7465        name = ite
-00011be0: 6d5f 6e61 6d65 5b31 3a5d 2e73 7472 6970  m_name[1:].strip
-00011bf0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+00011bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011be0: 2020 6966 2073 6967 6e20 3d3d 2022 2b22    if sign == "+"
+00011bf0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
 00011c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011c10: 2020 2020 2020 2020 2020 2020 7369 676e              sign
-00011c20: 203d 2069 7465 6d5f 6e61 6d65 5b30 5d0d   = item_name[0].
-00011c30: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00011c10: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00011c20: 6c69 7070 6564 5f73 6967 6e20 3d20 222d  lipped_sign = "-
+00011c30: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
 00011c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011c50: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-00011c60: 7420 2228 7329 2220 696e 206e 616d 653a  t "(s)" in name:
-00011c70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00011c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011c90: 2020 2020 2020 2020 2020 2020 2020 666c                fl
-00011ca0: 6f77 5f64 6174 615b 224b 4122 5d5b 22ce  ow_data["KA"][".
-00011cb0: 9420 2573 2220 2520 6e61 6d65 5d5b 6167  . %s" % name][ag
-00011cc0: 656e 7431 5d2e 6170 7065 6e64 280d 0a20  ent1].append(.. 
-00011cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011cf0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00011d00: 2822 202b 2073 6967 6e20 2b20 7175 616e  (" + sign + quan
-00011d10: 7469 7479 202b 2022 2922 290d 0a0d 0a20  tity + ")").... 
-00011d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011d30: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00011d40: 6f72 2069 7465 6d5f 6e61 6d65 2069 6e20  or item_name in 
-00011d50: 6c32 2e73 706c 6974 2822 5c6e 2229 3a0d  l2.split("\n"):.
-00011d60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011d80: 2020 2020 2069 6620 6974 656d 5f6e 616d       if item_nam
-00011d90: 6520 213d 2022 223a 0d0a 2020 2020 2020  e != "":..      
+00011c50: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00011c60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00011c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011c80: 2020 2020 2020 2020 2020 2020 2020 666c                fl
+00011c90: 6970 7065 645f 7369 676e 203d 2022 2b22  ipped_sign = "+"
+00011ca0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00011cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011cc0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+00011cd0: 6f74 2022 2873 2922 2069 6e20 6e61 6d65  ot "(s)" in name
+00011ce0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00011cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011d00: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00011d10: 6c6f 775f 6461 7461 5b22 4b41 225d 5b22  low_data["KA"]["
+00011d20: ce94 2025 7322 2025 206e 616d 655d 5b61  .. %s" % name][a
+00011d30: 6765 6e74 325d 2e61 7070 656e 6428 0d0a  gent2].append(..
+00011d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011d70: 2228 2220 2b20 666c 6970 7065 645f 7369  "(" + flipped_si
+00011d80: 676e 202b 2071 7561 6e74 6974 7920 2b20  gn + quantity + 
+00011d90: 2229 2229 0d0a 0d0a 2020 2020 2020 2020  ")")....        
 00011da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011dc0: 2020 6e61 6d65 203d 2069 7465 6d5f 6e61    name = item_na
-00011dd0: 6d65 5b31 3a5d 2e73 7472 6970 2829 0d0a  me[1:].strip()..
-00011de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e00: 2020 2020 2020 2020 7369 676e 203d 2069          sign = i
-00011e10: 7465 6d5f 6e61 6d65 5b30 5d0d 0a0d 0a20  tem_name[0].... 
-00011e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e40: 2020 2020 2020 2069 6620 6e6f 7420 2228         if not "(
-00011e50: 7329 2220 696e 206e 616d 653a 0d0a 2020  s)" in name:..  
-00011e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011e80: 2020 2020 2020 2020 2020 666c 6f77 5f64            flow_d
-00011e90: 6174 615b 224b 4122 5d5b 22ce 9420 2573  ata["KA"][".. %s
-00011ea0: 2220 2520 6e61 6d65 5d5b 6167 656e 7432  " % name][agent2
-00011eb0: 5d2e 6170 7065 6e64 280d 0a20 2020 2020  ].append(..     
-00011ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011db0: 2020 2020 2020 2020 2320 6c69 6162 696c          # liabil
+00011dc0: 6974 6965 730d 0a20 2020 2020 2020 2020  ities..         
+00011dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011de0: 2020 2020 2020 2066 6f72 2069 7465 6d5f         for item_
+00011df0: 6e61 6d65 2069 6e20 6c31 2e73 706c 6974  name in l1.split
+00011e00: 2822 5c6e 2229 3a0d 0a20 2020 2020 2020  ("\n"):..       
+00011e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011e20: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00011e30: 6974 656d 5f6e 616d 6520 213d 2022 223a  item_name != "":
+00011e40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00011e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011e60: 2020 2020 2020 2020 2020 6e61 6d65 203d            name =
+00011e70: 2069 7465 6d5f 6e61 6d65 5b31 3a5d 2e73   item_name[1:].s
+00011e80: 7472 6970 2829 0d0a 2020 2020 2020 2020  trip()..        
+00011e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011eb0: 7369 676e 203d 2069 7465 6d5f 6e61 6d65  sign = item_name
+00011ec0: 5b30 5d0d 0a0d 0a20 2020 2020 2020 2020  [0]....         
 00011ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ee0: 2020 2020 2020 2020 2020 2022 2822 202b             "(" +
-00011ef0: 2073 6967 6e20 2b20 7175 616e 7469 7479   sign + quantity
-00011f00: 202b 2022 2922 290d 0a0d 0a20 2020 2020   + ")")....     
-00011f10: 2020 2020 2020 2023 2070 7269 6e74 2866         # print(f
-00011f20: 6c6f 775f 6461 7461 290d 0a20 2020 2020  low_data)..     
-00011f30: 2020 2020 2020 2064 665f 6372 6564 6974         df_credit
-00011f40: 203d 2070 642e 4461 7461 4672 616d 6528   = pd.DataFrame(
-00011f50: 666c 6f77 5f64 6174 615b 2243 4122 5d29  flow_data["CA"])
-00011f60: 2e54 0d0a 2020 2020 2020 2020 2020 2020  .T..            
-00011f70: 6466 5f63 6170 6974 616c 203d 2070 642e  df_capital = pd.
-00011f80: 4461 7461 4672 616d 6528 666c 6f77 5f64  DataFrame(flow_d
-00011f90: 6174 615b 224b 4122 5d29 2e54 0d0a 0d0a  ata["KA"]).T....
-00011fa0: 2020 2020 2020 2020 2020 2020 6466 5f6d              df_m
-00011fb0: 6572 6765 203d 2070 642e 636f 6e63 6174  erge = pd.concat
-00011fc0: 285b 6466 5f63 7265 6469 742c 2064 665f  ([df_credit, df_
-00011fd0: 6361 7069 7461 6c5d 2c20 6178 6973 3d31  capital], axis=1
-00011fe0: 2c20 6b65 7973 3d5b 2743 4127 2c20 274b  , keys=['CA', 'K
-00011ff0: 4127 5d29 2e73 7761 706c 6576 656c 2830  A']).swaplevel(0
-00012000: 2c20 312c 6178 6973 3d31 292e 736f 7274  , 1,axis=1).sort
-00012010: 5f69 6e64 6578 2861 7869 733d 3129 0d0a  _index(axis=1)..
-00012020: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00012030: 2320 6170 7065 6e64 206e 6577 2063 6f6c  # append new col
-00012040: 756d 6e73 0d0a 2020 2020 2020 2020 2020  umns..          
-00012050: 2020 636f 6c5f 6469 6374 5f63 6120 3d20    col_dict_ca = 
-00012060: 7b7d 0d0a 2020 2020 2020 2020 2020 2020  {}..            
-00012070: 666f 7220 636f 6c20 696e 2064 665f 6372  for col in df_cr
-00012080: 6564 6974 2e63 6f6c 756d 6e73 3a0d 0a20  edit.columns:.. 
-00012090: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-000120a0: 6f6c 5f64 6963 745f 6361 5b63 6f6c 5d20  ol_dict_ca[col] 
-000120b0: 3d20 636f 6c20 2b20 2220 2843 4129 220d  = col + " (CA)".
-000120c0: 0a0d 0a20 2020 2020 2020 2020 2020 2063  ...            c
-000120d0: 6f6c 5f64 6963 745f 6b61 203d 207b 7d0d  ol_dict_ka = {}.
-000120e0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-000120f0: 2063 6f6c 2069 6e20 6466 5f63 6170 6974   col in df_capit
-00012100: 616c 2e63 6f6c 756d 6e73 3a0d 0a20 2020  al.columns:..   
-00012110: 2020 2020 2020 2020 2020 2020 2063 6f6c               col
-00012120: 5f64 6963 745f 6b61 5b63 6f6c 5d20 3d20  _dict_ka[col] = 
-00012130: 636f 6c20 2b20 2220 284b 4129 220d 0a0d  col + " (KA)"...
-00012140: 0a20 2020 2020 2020 2020 2020 2064 665f  .            df_
-00012150: 6372 6564 6974 203d 2064 665f 6372 6564  credit = df_cred
-00012160: 6974 2e72 656e 616d 6528 636f 6c75 6d6e  it.rename(column
-00012170: 7320 3d20 636f 6c5f 6469 6374 5f63 6129  s = col_dict_ca)
-00012180: 0d0a 2020 2020 2020 2020 2020 2020 6466  ..            df
-00012190: 5f63 6170 6974 616c 203d 2064 665f 6361  _capital = df_ca
-000121a0: 7069 7461 6c2e 7265 6e61 6d65 2863 6f6c  pital.rename(col
-000121b0: 756d 6e73 3d63 6f6c 5f64 6963 745f 6b61  umns=col_dict_ka
-000121c0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-000121d0: 2064 665f 6d65 7267 6532 203d 2070 642e   df_merge2 = pd.
-000121e0: 636f 6e63 6174 285b 6466 5f63 7265 6469  concat([df_credi
-000121f0: 742c 2064 665f 6361 7069 7461 6c5d 2c20  t, df_capital], 
-00012200: 6178 6973 3d31 290d 0a0d 0a20 2020 2020  axis=1)....     
-00012210: 2020 2020 2020 2064 665f 6d65 7267 6532         df_merge2
-00012220: 203d 2064 665f 6d65 7267 6532 2e72 6569   = df_merge2.rei
-00012230: 6e64 6578 2873 6f72 7465 6428 6466 5f6d  ndex(sorted(df_m
-00012240: 6572 6765 322e 636f 6c75 6d6e 7329 2c20  erge2.columns), 
-00012250: 6178 6973 3d31 290d 0a20 2020 2020 2020  axis=1)..       
-00012260: 2020 2020 2064 665f 6d65 7267 6532 203d       df_merge2 =
-00012270: 2064 665f 6d65 7267 6532 2e72 6569 6e64   df_merge2.reind
-00012280: 6578 2873 6f72 7465 6428 6466 5f6d 6572  ex(sorted(df_mer
-00012290: 6765 322e 696e 6465 7829 2c20 6178 6973  ge2.index), axis
-000122a0: 3d30 290d 0a0d 0a20 2020 2020 2020 2020  =0)....         
-000122b0: 2020 2064 6620 3d20 6466 5f6d 6572 6765     df = df_merge
-000122c0: 2e66 696c 6c6e 6128 302e 3029 2e73 6f72  .fillna(0.0).sor
-000122d0: 745f 696e 6465 7828 290d 0a0d 0a0d 0a20  t_index()...... 
-000122e0: 2020 2020 2020 2020 2020 2064 6566 206a             def j
-000122f0: 6f69 6e5f 656c 656d 656e 7473 286d 795f  oin_elements(my_
-00012300: 6974 656d 293a 0d0a 2020 2020 2020 2020  item):..        
-00012310: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00012320: 7461 6e63 6528 6d79 5f69 7465 6d2c 206c  tance(my_item, l
-00012330: 6973 7429 3a0d 0a20 2020 2020 2020 2020  ist):..         
-00012340: 2020 2020 2020 2020 2020 206d 795f 6c69             my_li
-00012350: 7374 203d 205b 5d0d 0a20 2020 2020 2020  st = []..       
-00012360: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-00012370: 2073 7562 6974 656d 2069 6e20 6d79 5f69   subitem in my_i
-00012380: 7465 6d3a 0d0a 2020 2020 2020 2020 2020  tem:..          
-00012390: 2020 2020 2020 2020 2020 2020 2020 6966                if
-000123a0: 2073 7562 6974 656d 2021 3d20 2230 223a   subitem != "0":
-000123b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000123c0: 2020 2020 2020 2020 2020 2020 2020 6d79                my
-000123d0: 5f6c 6973 742e 6170 7065 6e64 2873 7562  _list.append(sub
-000123e0: 6974 656d 290d 0a0d 0a20 2020 2020 2020  item)....       
-000123f0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00012400: 7572 6e20 222b 222e 6a6f 696e 286d 795f  urn "+".join(my_
-00012410: 6c69 7374 290d 0a0d 0a20 2020 2020 2020  list)....       
-00012420: 2020 2020 2020 2020 2065 6c69 6620 6d79           elif my
-00012430: 5f69 7465 6d20 3d3d 2030 2e30 3a0d 0a20  _item == 0.0:.. 
-00012440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012450: 2020 2072 6574 7572 6e20 2230 220d 0a20     return "0".. 
-00012460: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-00012470: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-00012480: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00012490: 206d 795f 6974 656d 0d0a 0d0a 2020 2020   my_item....    
-000124a0: 2020 2020 2020 2020 6466 203d 2064 662e          df = df.
-000124b0: 6170 706c 796d 6170 286a 6f69 6e5f 656c  applymap(join_el
-000124c0: 656d 656e 7473 290d 0a0d 0a0d 0a0d 0a20  ements)........ 
-000124d0: 2020 2020 2020 2020 2020 2023 2073 756d             # sum
-000124e0: 206f 7665 7220 7468 6520 636f 6c75 6d6e   over the column
-000124f0: 730d 0a0d 0a20 2020 2020 2020 2020 2020  s....           
-00012500: 2064 6566 2065 7661 6c5f 7375 6d28 636f   def eval_sum(co
-00012510: 6c75 6d6e 293a 0d0a 2020 2020 2020 2020  lumn):..        
-00012520: 2020 2020 2020 2020 636f 6c75 6d6e 203d          column =
-00012530: 205b 7374 7228 6329 2e72 6570 6c61 6365   [str(c).replace
-00012540: 2822 5e22 2c20 222a 2a22 2920 666f 7220  ("^", "**") for 
-00012550: 6320 696e 2063 6f6c 756d 6e5d 0d0a 2020  c in column]..  
-00012560: 2020 2020 2020 2020 2020 2020 2020 6d79                my
-00012570: 5f65 7870 7220 3d20 222b 222e 6a6f 696e  _expr = "+".join
-00012580: 2863 6f6c 756d 6e29 0d0a 2020 2020 2020  (column)..      
-00012590: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
-000125a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000125b0: 2020 2020 7265 7475 726e 2070 6172 7365      return parse
-000125c0: 5f65 7870 7228 6d79 5f65 7870 7229 0d0a  _expr(my_expr)..
-000125d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000125e0: 6578 6365 7074 3a0d 0a20 2020 2020 2020  except:..       
-000125f0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-00012600: 7572 6e20 6d79 5f65 7870 720d 0a0d 0a0d  urn my_expr.....
-00012610: 0a0d 0a20 2020 2020 2020 2020 2020 2064  ...            d
-00012620: 665b 2254 6f74 616c 225d 203d 2064 662e  f["Total"] = df.
-00012630: 542e 6167 6728 6576 616c 5f73 756d 2920  T.agg(eval_sum) 
-00012640: 2023 2064 662e 542e 7375 6d28 290d 0a20   # df.T.sum().. 
-00012650: 2020 2020 2020 2020 2020 2064 662e 6c6f             df.lo
-00012660: 635b 2254 6f74 616c 225d 203d 2064 662e  c["Total"] = df.
-00012670: 6167 6728 6576 616c 5f73 756d 290d 0a20  agg(eval_sum).. 
-00012680: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00012690: 2822 544f 5441 4c22 2c64 662e 6c6f 635b  ("TOTAL",df.loc[
-000126a0: 2254 6f74 616c 225d 290d 0a20 2020 2020  "Total"])..     
-000126b0: 2020 2020 2020 2064 665f 6d65 7267 6532         df_merge2
-000126c0: 5b22 546f 7461 6c22 5d20 3d20 6466 5b22  ["Total"] = df["
-000126d0: 546f 7461 6c22 5d0d 0a0d 0a20 2020 2020  Total"]....     
-000126e0: 2020 2020 2020 2023 2067 6574 2074 6865         # get the
-000126f0: 206e 6577 2063 6f6c 756d 6e73 0d0a 0d0a   new columns....
-00012700: 2020 2020 2020 2020 2020 2020 2320 6974              # it
-00012710: 6572 6174 6520 7468 726f 7567 6820 7468  erate through th
-00012720: 6520 636f 6c75 6d6e 730d 0a20 2020 2020  e columns..     
-00012730: 2020 2020 2020 2070 7269 6e74 2864 662e         print(df.
-00012740: 636f 6c75 6d6e 7329 0d0a 0d0a 0d0a 2020  columns)......  
-00012750: 2020 2020 2020 2020 2020 666f 7220 636f            for co
-00012760: 6c75 6d6e 2069 6e20 6466 2e63 6f6c 756d  lumn in df.colum
-00012770: 6e73 3a0d 0a20 2020 2020 2020 2020 2020  ns:..           
-00012780: 2020 2020 2069 6620 636f 6c75 6d6e 5b30       if column[0
-00012790: 5d20 213d 2022 546f 7461 6c22 3a0d 0a20  ] != "Total":.. 
-000127a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000127b0: 2020 2070 7269 6e74 2863 6f6c 756d 6e5b     print(column[
-000127c0: 305d 202b 2022 2022 2020 2b20 2228 2573  0] + " "  + "(%s
-000127d0: 2922 2025 2063 6f6c 756d 6e5b 315d 2c64  )" % column[1],d
-000127e0: 662e 6c6f 635b 2254 6f74 616c 225d 5b63  f.loc["Total"][c
-000127f0: 6f6c 756d 6e5d 290d 0a20 2020 2020 2020  olumn])..       
-00012800: 2020 2020 2020 2020 2020 2020 2064 665f               df_
-00012810: 6d65 7267 6532 2e6c 6f63 5b22 546f 7461  merge2.loc["Tota
-00012820: 6c22 2c63 6f6c 756d 6e5b 305d 202b 2022  l",column[0] + "
-00012830: 2022 2020 2b20 2228 2573 2922 2025 2063   "  + "(%s)" % c
-00012840: 6f6c 756d 6e5b 315d 5d20 3d20 6466 2e6c  olumn[1]] = df.l
-00012850: 6f63 5b22 546f 7461 6c22 5d5b 636f 6c75  oc["Total"][colu
-00012860: 6d6e 5d0d 0a0d 0a0d 0a0d 0a20 2020 2020  mn]........     
-00012870: 2020 2020 2020 2064 6566 2073 696d 706c         def simpl
-00012880: 6966 795f 6578 7072 286d 795f 6974 656d  ify_expr(my_item
-00012890: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-000128a0: 2020 2020 7265 7475 726e 2073 696d 706c      return simpl
-000128b0: 6966 7928 6d79 5f69 7465 6d29 0d0a 0d0a  ify(my_item)....
-000128c0: 2020 2020 2020 2020 2020 2020 6466 203d              df =
-000128d0: 2064 662e 6170 706c 796d 6170 2873 696d   df.applymap(sim
-000128e0: 706c 6966 795f 6578 7072 290d 0a0d 0a20  plify_expr).... 
-000128f0: 2020 2020 2020 2020 2020 2064 665f 666f             df_fo
-00012900: 725f 6578 6365 6c20 3d20 6466 2e63 6f70  r_excel = df.cop
-00012910: 7928 290d 0a0d 0a0d 0a0d 0a20 2020 2020  y()........     
-00012920: 2020 2020 2020 2064 6566 2061 6262 7265         def abbre
-00012930: 7669 6174 655f 7a65 726f 735f 6c61 7465  viate_zeros_late
-00012940: 7828 6d79 5f69 7465 6d29 3a0d 0a20 2020  x(my_item):..   
-00012950: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00012960: 6d79 5f69 7465 6d20 3d3d 2022 3022 206f  my_item == "0" o
-00012970: 7220 6d79 5f69 7465 6d20 3d3d 2030 3a0d  r my_item == 0:.
-00012980: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00012990: 2020 2020 2072 6574 7572 6e20 2220 2e2d       return " .-
-000129a0: 2022 2020 2320 2e2d 2022 0d0a 2020 2020   "  # .- "..    
-000129b0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-000129c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-000129d0: 2020 2020 2020 2073 203d 2070 7269 6e74         s = print
-000129e0: 696e 672e 6c61 7465 7828 6d79 5f69 7465  ing.latex(my_ite
-000129f0: 6d20 2c6d 6f64 653d 2269 6e6c 696e 6522  m ,mode="inline"
-00012a00: 2920 2320 206d 6f64 653d 2269 6e6c 696e  ) #  mode="inlin
-00012a10: 6522 290d 0a20 2020 2020 2020 2020 2020  e")..           
-00012a20: 2020 2020 2020 2020 2070 7269 6e74 2873           print(s
-00012a30: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00012a40: 2020 2020 2020 2072 6574 7572 6e20 730d         return s.
-00012a50: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-00012a60: 6466 5f62 6163 6b75 7020 3d20 6466 2e63  df_backup = df.c
-00012a70: 6f70 7928 290d 0a20 2020 2020 2020 2020  opy()..         
-00012a80: 2020 2064 6620 3d20 6466 2e61 7070 6c79     df = df.apply
-00012a90: 6d61 7028 6162 6272 6576 6961 7465 5f7a  map(abbreviate_z
-00012aa0: 6572 6f73 5f6c 6174 6578 290d 0a0d 0a0d  eros_latex).....
-00012ab0: 0a0d 0a20 2020 2020 2020 2020 2020 2064  ...            d
-00012ac0: 665f 6d65 7267 6532 203d 2064 665f 6d65  f_merge2 = df_me
-00012ad0: 7267 6532 2e72 6570 6c61 6365 286e 702e  rge2.replace(np.
-00012ae0: 6e61 6e2c 2027 272c 2072 6567 6578 3d54  nan, '', regex=T
-00012af0: 7275 6529 0d0a 2020 2020 2020 2020 2020  rue)..          
-00012b00: 2020 6466 5f6d 6572 6765 3220 3d20 6466    df_merge2 = df
-00012b10: 5f6d 6572 6765 322e 7265 706c 6163 6528  _merge2.replace(
-00012b20: 2230 222c 2027 272c 2072 6567 6578 3d54  "0", '', regex=T
-00012b30: 7275 6529 0d0a 2020 2020 2020 2020 2020  rue)..          
-00012b40: 2020 6466 5f6d 6572 6765 3220 3d20 6466    df_merge2 = df
-00012b50: 5f6d 6572 6765 322e 7265 706c 6163 6528  _merge2.replace(
-00012b60: 302c 2027 272c 2072 6567 6578 3d54 7275  0, '', regex=Tru
-00012b70: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
-00012b80: 6466 5f6d 6572 6765 3220 3d20 6466 5f6d  df_merge2 = df_m
-00012b90: 6572 6765 322e 7265 706c 6163 6528 302e  erge2.replace(0.
-00012ba0: 302c 2027 272c 2072 6567 6578 3d54 7275  0, '', regex=Tru
-00012bb0: 6529 0d0a 0d0a 2020 2020 2020 2020 2020  e)....          
-00012bc0: 2020 2320 7072 696e 7428 6466 2e74 6f5f    # print(df.to_
-00012bd0: 7374 7269 6e67 2829 290d 0a20 2020 2020  string())..     
-00012be0: 2020 2020 2020 2023 2064 662e 696c 6f63         # df.iloc
-00012bf0: 5b30 2c30 5d20 3d20 2224 5c5c 616c 7068  [0,0] = "$\\alph
-00012c00: 6124 220d 0a0d 0a20 2020 2020 2020 2020  a$"....         
-00012c10: 2020 2070 642e 6f70 7469 6f6e 732e 6469     pd.options.di
-00012c20: 7370 6c61 792e 6d61 785f 636f 6c77 6964  splay.max_colwid
-00012c30: 7468 203d 204e 6f6e 650d 0a0d 0a20 2020  th = None....   
-00012c40: 2020 2020 2020 2020 2069 6620 6d6f 6465           if mode
-00012c50: 203d 3d20 2268 746d 6c22 3a20 2320 3c20   == "html": # < 
-00012c60: 4e4f 5420 5945 5420 5355 5050 4f52 5445  NOT YET SUPPORTE
-00012c70: 440d 0a0d 0a20 2020 2020 2020 2020 2020  D....           
-00012c80: 2020 2020 2064 665f 6874 6d6c 203d 2022       df_html = "
-00012c90: 2222 0d0a 2020 2020 2020 2020 3c68 746d  ""..        <htm
-00012ca0: 6c3e 0d0a 2020 2020 2020 2020 3c68 6561  l>..        <hea
-00012cb0: 643e 0d0a 2020 2020 2020 2020 3c74 6974  d>..        <tit
-00012cc0: 6c65 3e4d 6174 6865 6465 6d6f 3c2f 7469  le>Mathedemo</ti
-00012cd0: 746c 653e 0d0a 2020 2020 2020 2020 3c73  tle>..        <s
-00012ce0: 6372 6970 7420 7479 7065 3d22 7465 7874  cript type="text
-00012cf0: 2f78 2d6d 6174 686a 6178 2d63 6f6e 6669  /x-mathjax-confi
-00012d00: 6722 3e0d 0a20 2020 2020 2020 2020 204d  g">..          M
-00012d10: 6174 684a 6178 2e48 7562 2e43 6f6e 6669  athJax.Hub.Confi
-00012d20: 6728 7b74 6578 326a 6178 3a20 7b69 6e6c  g({tex2jax: {inl
-00012d30: 696e 654d 6174 683a 205b 5b27 2427 2c27  ineMath: [['$','
-00012d40: 2427 5d2c 205b 275c 5c28 272c 275c 5c29  $'], ['\\(','\\)
-00012d50: 275d 5d7d 7d29 3b0d 0a20 2020 2020 2020  ']]}});..       
-00012d60: 203c 2f73 6372 6970 743e 0d0a 2020 2020   </script>..    
-00012d70: 2020 2020 3c73 6372 6970 7420 7479 7065      <script type
-00012d80: 3d22 7465 7874 2f6a 6176 6173 6372 6970  ="text/javascrip
-00012d90: 7422 0d0a 2020 2020 2020 2020 2020 7372  t"..          sr
-00012da0: 633d 2268 7474 703a 2f2f 6364 6e6a 732e  c="http://cdnjs.
-00012db0: 636c 6f75 6466 6c61 7265 2e63 6f6d 2f61  cloudflare.com/a
-00012dc0: 6a61 782f 6c69 6273 2f6d 6174 686a 6178  jax/libs/mathjax
-00012dd0: 2f32 2e37 2e31 2f4d 6174 684a 6178 2e6a  /2.7.1/MathJax.j
-00012de0: 733f 636f 6e66 6967 3d54 6558 2d41 4d53  s?config=TeX-AMS
-00012df0: 2d4d 4d4c 5f48 544d 4c6f 724d 4d4c 223e  -MML_HTMLorMML">
-00012e00: 0d0a 2020 2020 2020 2020 3c2f 7363 7269  ..        </scri
-00012e10: 7074 3e0d 0a20 2020 2020 2020 203c 6c69  pt>..        <li
-00012e20: 6e6b 2072 656c 3d22 7374 796c 6573 6865  nk rel="styleshe
-00012e30: 6574 2220 6872 6566 3d22 6d79 7374 796c  et" href="mystyl
-00012e40: 652e 6373 7322 3e0d 0a20 2020 2020 2020  e.css">..       
-00012e50: 203c 2f68 6561 643e 0d0a 0d0a 2020 2020   </head>....    
-00012e60: 2020 2020 3c62 6f64 793e 0d0a 2020 2020      <body>..    
-00012e70: 2020 2020 2573 0d0a 2020 2020 2020 2020      %s..        
-00012e80: 3c2f 626f 6479 3e0d 0a20 2020 2020 2020  </body>..       
-00012e90: 203c 2f68 746d 6c3e 0d0a 2020 2020 2020   </html>..      
-00012ea0: 2020 2222 2225 2020 6466 2e74 6f5f 6874    """%  df.to_ht
-00012eb0: 6d6c 2829 0d0a 0d0a 2020 2020 2020 2020  ml()....        
-00012ec0: 2020 2020 2020 2020 7061 6765 536f 7572          pageSour
-00012ed0: 6365 203d 2022 2222 0d0a 2020 2020 2020  ce = """..      
-00012ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012ef0: 2020 2020 2020 203c 6874 6d6c 3e3c 6865         <html><he
-00012f00: 6164 3e0d 0a20 2020 2020 2020 2020 2020  ad>..           
-00012f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012f20: 2020 3c2f 6865 6164 3e0d 0a20 2020 2020    </head>..     
-00012f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012f40: 2020 2020 2020 2020 3c62 6f64 793e 0d0a          <body>..
-00012f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012f60: 2020 2020 2020 2020 2020 2020 203c 703e               <p>
-00012f70: 6173 6466 3c2f 703e 0d0a 2020 2020 2020  asdf</p>..      
-00012f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012f90: 2020 2020 2020 203c 2f62 6f64 793e 3c2f         </body></
-00012fa0: 6874 6d6c 3e0d 0a20 2020 2020 2020 2020  html>..         
-00012fb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00012fc0: 2020 2020 2222 220d 0a0d 0a20 2020 2020      """....     
-00012fd0: 2020 2020 2020 2020 2020 2023 2042 4c41             # BLA
-00012fe0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00012ff0: 2020 2020 2320 7772 6974 6520 7061 6765      # write page
-00013000: 2073 6f75 7263 6520 746f 2068 746d 6c0d   source to html.
-00013010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013020: 2069 6620 4661 6c73 653a 0d0a 2020 2020   if False:..    
-00013030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013040: 2320 4445 5052 4543 4941 5445 440d 0a20  # DEPRECIATED.. 
-00013050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013060: 2020 2070 6174 6820 3d20 6f73 2e70 6174     path = os.pat
-00013070: 682e 6469 726e 616d 6528 6f73 2e70 6174  h.dirname(os.pat
-00013080: 682e 6162 7370 6174 6828 5f5f 6669 6c65  h.abspath(__file
-00013090: 5f5f 2929 0d0a 2020 2020 2020 2020 2020  __))..          
-000130a0: 2020 2020 2020 2020 2020 6669 6c65 203d            file =
-000130b0: 206f 7065 6e28 6f73 2e70 6174 682e 6a6f   open(os.path.jo
-000130c0: 696e 2870 6174 682c 2266 696c 6573 2f6d  in(path,"files/m
-000130d0: 796d 6174 7269 782e 6874 6d6c 2229 2c22  ymatrix.html"),"
-000130e0: 7722 2c65 6e63 6f64 696e 673d 2775 7466  w",encoding='utf
-000130f0: 2d38 2729 0d0a 2020 2020 2020 2020 2020  -8')..          
-00013100: 2020 2020 2020 2020 2020 6669 6c65 2e77            file.w
-00013110: 7269 7465 2864 665f 6874 6d6c 290d 0a20  rite(df_html).. 
-00013120: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013130: 2020 2066 696c 652e 636c 6f73 6528 290d     file.close().
-00013140: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
-00013150: 2051 4465 736b 746f 7053 6572 7669 6365   QDesktopService
-00013160: 732e 6f70 656e 5572 6c28 5155 726c 2822  s.openUrl(QUrl("
-00013170: 2e2f 6669 6c65 732f 6d61 7472 6978 2e68  ./files/matrix.h
-00013180: 746d 6c22 2929 0d0a 0d0a 2020 2020 2020  tml"))....      
-00013190: 2020 2020 2020 6966 206d 6f64 6520 3d3d        if mode ==
-000131a0: 2022 7374 616e 6461 7264 223a 0d0a 2020   "standard":..  
-000131b0: 2020 2020 2020 2020 2020 2020 2020 6d6f                mo
-000131c0: 6465 6c20 3d20 5061 6e64 6173 4d6f 6465  del = PandasMode
-000131d0: 6c28 6466 5f6d 6572 6765 3229 0d0a 2020  l(df_merge2)..  
-000131e0: 2020 2020 2020 2020 2020 2020 2020 6d76                mv
-000131f0: 6965 7720 3d20 4d61 7472 6978 5669 6577  iew = MatrixView
-00013200: 6572 286d 6f64 656c 2c70 6172 656e 743d  er(model,parent=
-00013210: 7365 6c66 290d 0a0d 0a20 2020 2020 2020  self)....       
-00013220: 2020 2020 2020 2020 2023 206d 7669 6577           # mview
-00013230: 2e77 6562 5669 6577 2e73 6574 4874 6d6c  .webView.setHtml
-00013240: 2864 665f 6874 6d6c 290d 0a20 2020 2020  (df_html)..     
-00013250: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-00013260: 7420 7365 6c66 2e74 6573 745f 6d6f 6465  t self.test_mode
-00013270: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00013280: 2020 2020 2020 206d 7669 6577 2e73 686f         mview.sho
-00013290: 7728 290d 0a0d 0a0d 0a20 2020 2020 2020  w()......       
-000132a0: 2020 2020 2069 6620 6d6f 6465 203d 3d20       if mode == 
-000132b0: 226c 6174 6578 223a 2023 203c 204e 4f54  "latex": # < NOT
-000132c0: 2059 4554 2053 5550 504f 5254 4544 0d0a   YET SUPPORTED..
-000132d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000132e0: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
-000132f0: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
-00013300: 6f6e 7665 7274 5f64 665f 746f 5f74 6578  onvert_df_to_tex
-00013310: 2864 6629 0d0a 2020 2020 2020 2020 2020  (df)..          
-00013320: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
-00013330: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
-00013340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013350: 2020 7365 6c66 2e6e 6f74 6966 7928 7374    self.notify(st
-00013360: 7228 6529 2c74 6974 6c65 3d22 4572 726f  r(e),title="Erro
-00013370: 7220 6475 7269 6e67 2054 6578 2043 6f6e  r during Tex Con
-00013380: 7665 7273 696f 6e22 290d 0a0d 0a20 2020  version")....   
-00013390: 2020 2020 2020 2020 2020 2020 2023 2070               # p
-000133a0: 7269 6e74 2822 5649 4557 2229 0d0a 2020  rint("VIEW")..  
-000133b0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-000133c0: 7072 696e 7428 6466 5f68 746d 6c29 0d0a  print(df_html)..
-000133d0: 0d0a 2020 2020 2020 2020 2020 2020 6465  ..            de
-000133e0: 6620 636f 6e76 6572 745f 6578 6365 6c28  f convert_excel(
-000133f0: 6d79 5f69 7465 6d29 3a0d 0a20 2020 2020  my_item):..     
-00013400: 2020 2020 2020 2020 2020 2069 6620 6d79             if my
-00013410: 5f69 7465 6d20 3d3d 2022 3022 206f 7220  _item == "0" or 
-00013420: 6d79 5f69 7465 6d20 3d3d 2030 3a0d 0a20  my_item == 0:.. 
-00013430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013440: 2020 2072 6574 7572 6e20 2220 2e2d 2022     return " .- "
-00013450: 2020 2320 2e2d 2022 0d0a 2020 2020 2020    # .- "..      
-00013460: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-00013470: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013480: 2020 2020 2073 203d 2070 7265 7474 7928       s = pretty(
-00013490: 6d79 5f69 7465 6d29 2023 2070 7269 6e74  my_item) # print
-000134a0: 696e 672e 6c61 7465 7828 6d79 5f69 7465  ing.latex(my_ite
-000134b0: 6d29 2023 202c 6d6f 6465 3d22 696e 6c69  m) # ,mode="inli
-000134c0: 6e65 2229 2023 2020 6d6f 6465 3d22 696e  ne") #  mode="in
-000134d0: 6c69 6e65 2229 0d0a 2020 2020 2020 2020  line")..        
-000134e0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-000134f0: 7428 7329 0d0a 2020 2020 2020 2020 2020  t(s)..          
-00013500: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00013510: 2073 0d0a 0d0a 2020 2020 2020 2020 2020   s....          
-00013520: 2020 6966 206d 6f64 6520 3d3d 2022 6578    if mode == "ex
-00013530: 6365 6c22 3a0d 0a20 2020 2020 2020 2020  cel":..         
-00013540: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
-00013550: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013560: 2065 6669 6c65 6e61 6d65 203d 2051 4669   efilename = QFi
-00013570: 6c65 4469 616c 6f67 2e67 6574 5361 7665  leDialog.getSave
-00013580: 4669 6c65 4e61 6d65 2873 656c 662c 2027  FileName(self, '
-00013590: 5361 7665 2066 696c 6527 2c20 6f73 2e67  Save file', os.g
-000135a0: 6574 6377 6428 292c 2022 4578 6365 6c20  etcwd(), "Excel 
-000135b0: 4669 6c65 7320 282a 2e78 6c73 7829 2229  Files (*.xlsx)")
-000135c0: 5b30 5d0d 0a0d 0a20 2020 2020 2020 2020  [0]....         
-000135d0: 2020 2020 2020 2020 2020 2069 6620 6566             if ef
-000135e0: 696c 656e 616d 6520 6973 206e 6f74 204e  ilename is not N
-000135f0: 6f6e 6520 616e 6420 6566 696c 656e 616d  one and efilenam
-00013600: 6520 213d 2022 223a 0d0a 2020 2020 2020  e != "":..      
-00013610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013620: 2020 6466 5f66 6f72 5f65 7863 656c 203d    df_for_excel =
-00013630: 2064 665f 666f 725f 6578 6365 6c2e 6170   df_for_excel.ap
-00013640: 706c 796d 6170 2863 6f6e 7665 7274 5f65  plymap(convert_e
-00013650: 7863 656c 290d 0a20 2020 2020 2020 2020  xcel)..         
-00013660: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00013670: 2070 6174 6820 3d20 6f73 2e70 6174 682e   path = os.path.
-00013680: 6469 726e 616d 6528 6f73 2e70 6174 682e  dirname(os.path.
-00013690: 6162 7370 6174 6828 5f5f 6669 6c65 5f5f  abspath(__file__
-000136a0: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-000136b0: 2020 2020 2020 2020 2020 2020 6466 5f66              df_f
-000136c0: 6f72 5f65 7863 656c 2e74 6f5f 6578 6365  or_excel.to_exce
-000136d0: 6c28 6566 696c 656e 616d 6529 2023 2022  l(efilename) # "
-000136e0: 6669 6c65 732f 466c 6f77 4d61 7472 6978  files/FlowMatrix
-000136f0: 5f66 6f72 6d61 7474 6564 2e78 6c73 7822  _formatted.xlsx"
-00013700: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-00013710: 2020 2020 2020 2020 2020 2020 2320 6466              # df
-00013720: 5f6d 6572 6765 322e 746f 5f65 7863 656c  _merge2.to_excel
-00013730: 286f 732e 7061 7468 2e6a 6f69 6e28 7061  (os.path.join(pa
-00013740: 7468 2c65 6669 6c65 6e61 6d65 2929 2020  th,efilename))  
-00013750: 2020 2320 2266 696c 6573 2f46 6c6f 774d    # "files/FlowM
-00013760: 6174 7269 782e 786c 7378 2229 290d 0a0d  atrix.xlsx"))...
-00013770: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013780: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
-00013790: 6e20 6173 2065 3a0d 0a20 2020 2020 2020  n as e:..       
-000137a0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-000137b0: 662e 6e6f 7469 6679 2873 7472 2865 292c  f.notify(str(e),
-000137c0: 2074 6974 6c65 3d22 4572 726f 7220 6475   title="Error du
-000137d0: 7269 6e67 2045 7863 656c 2063 6f6e 7665  ring Excel conve
-000137e0: 7273 696f 6e22 290d 0a0d 0a20 2020 2020  rsion")....     
-000137f0: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-00013800: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
-00013810: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
-00013820: 6679 2873 7472 2865 292c 2074 6974 6c65  fy(str(e), title
-00013830: 3d22 4572 726f 7220 6475 7269 6e67 206d  ="Error during m
-00013840: 6174 7269 7820 6765 6e65 7261 7469 6f6e  atrix generation
-00013850: 2229 0d0a 0d0a 2020 2020 6465 6620 7265  ")....    def re
-00013860: 6d6f 7665 5f69 7465 6d28 7365 6c66 293a  move_item(self):
-00013870: 0d0a 0d0a 2020 2020 2020 2020 7472 793a  ....        try:
-00013880: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-00013890: 6c65 6374 6564 5f72 6f77 7320 3d20 736f  lected_rows = so
-000138a0: 7274 6564 2873 6574 2869 6e64 6578 2e72  rted(set(index.r
-000138b0: 6f77 2829 2066 6f72 2069 6e64 6578 2069  ow() for index i
-000138c0: 6e0d 0a20 2020 2020 2020 2020 2020 2020  n..             
-000138d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000138e0: 2020 2020 2020 2020 2020 7365 6c66 2e74            self.t
-000138f0: 7261 6e73 6163 7469 6f6e 5669 6577 2e73  ransactionView.s
-00013900: 656c 6563 7465 6449 6e64 6578 6573 2829  electedIndexes()
-00013910: 2929 0d0a 0d0a 2020 2020 2020 2020 2020  ))....          
-00013920: 2020 6966 206c 656e 2873 656c 6563 7465    if len(selecte
-00013930: 645f 726f 7773 2920 3d3d 2030 3a0d 0a20  d_rows) == 0:.. 
-00013940: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00013950: 656c 662e 6e6f 7469 6679 2822 6e6f 2073  elf.notify("no s
-00013960: 656c 6563 7465 6420 726f 7773 222c 7469  elected rows",ti
-00013970: 746c 653d 2245 7272 6f72 2229 0d0a 2020  tle="Error")..  
-00013980: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00013990: 7475 726e 0d0a 0d0a 2020 2020 2020 2020  turn....        
-000139a0: 2020 2020 7365 6c65 6374 696f 6e20 3d20      selection = 
-000139b0: 7365 6c65 6374 6564 5f72 6f77 735b 305d  selected_rows[0]
-000139c0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-000139d0: 7965 7320 3d20 2073 656c 662e 6173 6b5f  yes =  self.ask_
-000139e0: 7175 6573 7469 6f6e 2827 272c 2241 7265  question('',"Are
-000139f0: 2079 6f75 2073 7572 6520 796f 7520 7761   you sure you wa
-00013a00: 6e74 2074 6f20 7265 6d6f 7665 2074 6865  nt to remove the
-00013a10: 2065 6e74 7279 2027 2573 273f 2225 7365   entry '%s'?"%se
-00013a20: 6c66 2e65 6e74 7279 5f64 6174 615b 7365  lf.entry_data[se
-00013a30: 6c65 6374 696f 6e5d 5b22 7375 626a 6563  lection]["subjec
-00013a40: 7422 5d29 0d0a 2020 2020 2020 2020 2020  t"])..          
-00013a50: 2020 6966 2079 6573 3a0d 0a0d 0a20 2020    if yes:....   
-00013a60: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00013a70: 662e 6472 6177 6361 6e76 6173 2e72 656d  f.drawcanvas.rem
-00013a80: 6f76 655f 636f 6e6e 6563 7469 6f6e 2873  ove_connection(s
-00013a90: 656c 662e 656e 7472 795f 6461 7461 5b73  elf.entry_data[s
-00013aa0: 656c 6563 7469 6f6e 5d5b 2273 686f 7274  election]["short
-00013ab0: 6e61 6d65 225d 290d 0a0d 0a20 2020 2020  name"])....     
-00013ac0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00013ad0: 7472 616e 7361 6374 696f 6e56 6965 772e  transactionView.
-00013ae0: 7265 6d6f 7665 526f 7728 7365 6c65 6374  removeRow(select
-00013af0: 696f 6e29 0d0a 2020 2020 2020 2020 2020  ion)..          
-00013b00: 2020 2020 2020 6465 6c20 7365 6c66 2e65        del self.e
-00013b10: 6e74 7279 5f64 6174 615b 7365 6c65 6374  ntry_data[select
-00013b20: 696f 6e5d 0d0a 0d0a 2020 2020 2020 2020  ion]....        
-00013b30: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
-00013b40: 2061 7320 653a 0d0a 2020 2020 2020 2020   as e:..        
-00013b50: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
-00013b60: 7374 7228 6529 2c20 7469 746c 653d 2245  str(e), title="E
-00013b70: 7272 6f72 2229 0d0a 0d0a 2020 2020 2020  rror")....      
-00013b80: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
-00013b90: 2020 2020 7365 6c66 2e75 7064 6174 655f      self.update_
-00013ba0: 7461 626c 6528 290d 0a0d 0a20 2020 2020  table()....     
-00013bb0: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-00013bc0: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
-00013bd0: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
-00013be0: 6679 2873 7472 2865 292c 2074 6974 6c65  fy(str(e), title
-00013bf0: 3d22 4572 726f 7222 290d 0a0d 0a0d 0a20  ="Error")...... 
-00013c00: 2020 2064 6566 2063 6f6e 7665 7274 5f64     def convert_d
-00013c10: 665f 746f 5f74 6578 2873 656c 662c 6466  f_to_tex(self,df
-00013c20: 293a 0d0a 0d0a 2020 2020 2020 2020 6465  ):....        de
-00013c30: 6620 7772 6170 7374 7269 6e67 2873 293a  f wrapstring(s):
-00013c40: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
-00013c50: 7772 6170 7320 7374 7269 6e67 0d0a 2020  wraps string..  
-00013c60: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00013c70: 2074 6578 7477 7261 702e 7772 6170 2873   textwrap.wrap(s
-00013c80: 2c20 7769 6474 683d 3130 290d 0a0d 0a20  , width=10).... 
-00013c90: 2020 2020 2020 2064 6566 2061 6262 7265         def abbre
-00013ca0: 7669 6174 655f 7a65 726f 7328 6d79 5f69  viate_zeros(my_i
-00013cb0: 7465 6d29 3a0d 0a20 2020 2020 2020 2020  tem):..         
-00013cc0: 2020 2069 6620 6d79 5f69 7465 6d20 3d3d     if my_item ==
-00013cd0: 2022 3022 206f 7220 6d79 5f69 7465 6d20   "0" or my_item 
-00013ce0: 3d3d 2030 3a0d 0a20 2020 2020 2020 2020  == 0:..         
-00013cf0: 2020 2020 2020 2072 6574 7572 6e20 2220         return " 
-00013d00: 2e2d 2022 2020 2320 2e2d 2022 0d0a 2020  .- "  # .- "..  
-00013d10: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-00013d20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013d30: 206d 795f 6974 656d 203d 2073 7472 286d   my_item = str(m
-00013d40: 795f 6974 656d 290d 0a20 2020 2020 2020  y_item)..       
-00013d50: 2020 2020 2020 2020 206d 6178 5f6c 656e           max_len
-00013d60: 203d 2031 300d 0a20 2020 2020 2020 2020   = 10..         
-00013d70: 2020 2020 2020 2069 6620 6c65 6e28 6d79         if len(my
-00013d80: 5f69 7465 6d29 203e 206d 6178 5f6c 656e  _item) > max_len
-00013d90: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00013da0: 2020 2020 2020 2072 6574 7572 6e20 6d79         return my
-00013db0: 5f69 7465 6d5b 3a6d 6178 5f6c 656e 5d20  _item[:max_len] 
-00013dc0: 2b20 222e 2e2e 220d 0a20 2020 2020 2020  + "..."..       
-00013dd0: 2020 2020 2020 2020 2065 6c73 653a 0d0a           else:..
-00013de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013df0: 2020 2020 7265 7475 726e 206d 795f 6974      return my_it
-00013e00: 656d 0d0a 0d0a 2020 2020 2020 2020 6466  em....        df
-00013e10: 5f62 6163 6b75 7020 3d20 6466 2e63 6f70  _backup = df.cop
-00013e20: 7928 290d 0a0d 0a20 2020 2020 2020 2064  y()....        d
-00013e30: 665f 6c61 7465 7820 3d20 6466 2e74 6f5f  f_latex = df.to_
-00013e40: 6c61 7465 7828 6c6f 6e67 7461 626c 653d  latex(longtable=
-00013e50: 4661 6c73 652c 2065 7363 6170 653d 4661  False, escape=Fa
-00013e60: 6c73 6529 2e72 6570 6c61 6365 2822 ce94  lse).replace("..
-00013e70: 222c 2022 245c 4465 6c74 6124 2229 0d0a  ", "$\Delta$")..
-00013e80: 0d0a 2020 2020 2020 2020 6466 5f6c 6174  ..        df_lat
-00013e90: 6578 203d 2064 665f 6c61 7465 782e 7265  ex = df_latex.re
-00013ea0: 706c 6163 6528 225c 5c62 6567 696e 7b74  place("\\begin{t
-00013eb0: 6162 756c 6172 7d22 2c20 225c 5c62 6567  abular}", "\\beg
-00013ec0: 696e 7b74 6162 756c 6172 787d 7b5c 5c74  in{tabularx}{\\t
-00013ed0: 6578 7477 6964 7468 7d22 290d 0a20 2020  extwidth}")..   
-00013ee0: 2020 2020 2064 665f 6c61 7465 7820 3d20       df_latex = 
-00013ef0: 6466 5f6c 6174 6578 2e72 6570 6c61 6365  df_latex.replace
-00013f00: 2822 5c5c 656e 647b 7461 6275 6c61 727d  ("\\end{tabular}
-00013f10: 222c 2022 5c5c 656e 647b 7461 6275 6c61  ", "\\end{tabula
-00013f20: 7278 7d22 290d 0a20 2020 2020 2020 2064  rx}")..        d
-00013f30: 665f 6c61 7465 7820 3d20 225c 5c62 6567  f_latex = "\\beg
-00013f40: 696e 7b73 6d61 6c6c 7d5c 6e22 202b 2064  in{small}\n" + d
-00013f50: 665f 6c61 7465 7820 2b20 225c 6e5c 656e  f_latex + "\n\en
-00013f60: 647b 736d 616c 6c7d 220d 0a0d 0a20 2020  d{small}"....   
-00013f70: 2020 2020 2064 665f 6c61 7465 7820 3d20       df_latex = 
-00013f80: 6466 5f6c 6174 6578 2e72 6570 6c61 6365  df_latex.replace
-00013f90: 2822 5c5c 6c65 6674 2822 2c20 2228 2229  ("\\left(", "(")
-00013fa0: 0d0a 2020 2020 2020 2020 6466 5f6c 6174  ..        df_lat
-00013fb0: 6578 203d 2064 665f 6c61 7465 782e 7265  ex = df_latex.re
-00013fc0: 706c 6163 6528 225c 5c72 6967 6874 2922  place("\\right)"
-00013fd0: 2c20 2229 2229 0d0a 0d0a 2020 2020 2020  , ")")....      
-00013fe0: 2020 6466 5f6c 6174 6578 203d 2064 665f    df_latex = df_
-00013ff0: 6c61 7465 782e 7265 706c 6163 6528 227b  latex.replace("{
-00014000: 6c22 2c20 227b 4c7b 3363 6d7d 2229 0d0a  l", "{L{3cm}")..
-00014010: 0d0a 2020 2020 2020 2020 6466 5f6c 6174  ..        df_lat
-00014020: 6578 203d 2022 2222 0d0a 5c5c 646f 6375  ex = """..\\docu
-00014030: 6d65 6e74 636c 6173 735b 6133 7061 7065  mentclass[a3pape
-00014040: 722c 6c61 6e64 7363 6170 655d 7b61 7274  r,landscape]{art
-00014050: 6963 6c65 7d0d 0a5c 5c75 7365 7061 636b  icle}..\\usepack
-00014060: 6167 657b 626f 6f6b 7461 6273 7d0d 0a5c  age{booktabs}..\
-00014070: 5c75 7365 7061 636b 6167 657b 6164 6a75  \usepackage{adju
-00014080: 7374 626f 787d 0d0a 5c5c 7573 6570 6163  stbox}..\\usepac
-00014090: 6b61 6765 5b74 6162 6c65 5d7b 7863 6f6c  kage[table]{xcol
-000140a0: 6f72 7d0d 0a5c 5c75 7365 7061 636b 6167  or}..\\usepackag
-000140b0: 657b 6c6f 6e67 7461 626c 657d 0d0a 5c5c  e{longtable}..\\
-000140c0: 7573 6570 6163 6b61 6765 7b74 6162 756c  usepackage{tabul
-000140d0: 6172 782c 7261 6767 6564 3265 7d0d 0a5c  arx,ragged2e}..\
-000140e0: 5c64 6566 696e 6563 6f6c 6f72 7b47 7261  \definecolor{Gra
-000140f0: 797d 7b67 7261 797d 7b30 2e39 307d 0d0a  y}{gray}{0.90}..
-00014100: 5c5c 6465 6669 6e65 636f 6c6f 727b 4c69  \\definecolor{Li
-00014110: 6768 7447 7261 797d 7b67 7261 797d 7b30  ghtGray}{gray}{0
-00014120: 2e39 357d 0d0a 5c5c 6465 6669 6e65 636f  .95}..\\defineco
-00014130: 6c6f 727b 5768 6974 657d 7b72 6762 7d7b  lor{White}{rgb}{
-00014140: 312c 312c 317d 0d0a 0d0a 5c5c 6e65 7763  1,1,1}....\\newc
-00014150: 6f6c 756d 6e74 7970 657b 677d 7b3e 7b5c  olumntype{g}{>{\
-00014160: 5c63 6f6c 756d 6e63 6f6c 6f72 7b57 6869  \columncolor{Whi
-00014170: 7465 7d5c 5c61 7272 6179 6261 636b 736c  te}\\arraybacksl
-00014180: 6173 687d 4c7d 2025 0d0a 5c5c 6e65 7763  ash}L} %..\\newc
-00014190: 6f6c 756d 6e74 7970 657b 6c7d 7b3e 7b5c  olumntype{l}{>{\
-000141a0: 5c63 6f6c 756d 6e63 6f6c 6f72 7b57 6869  \columncolor{Whi
-000141b0: 7465 7d5c 5c61 7272 6179 6261 636b 736c  te}\\arraybacksl
-000141c0: 6173 687d 707b 3363 6d7d 7d20 2563 656e  ash}p{3cm}} %cen
-000141d0: 7465 7265 6420 2258 2220 636f 6c75 6d6e  tered "X" column
-000141e0: 0d0a 5c5c 6e65 7763 6f6c 756d 6e74 7970  ..\\newcolumntyp
-000141f0: 657b 4c7d 5b31 5d7b 3e7b 5c5c 7261 6767  e{L}[1]{>{\\ragg
-00014200: 6564 7269 6768 745c 5c61 7272 6179 6261  edright\\arrayba
-00014210: 636b 736c 6173 687d 707b 5c5c 6469 6d65  ckslash}p{\\dime
-00014220: 7870 7223 312d 325c 5c74 6162 636f 6c73  xpr#1-2\\tabcols
-00014230: 6570 2d32 5c5c 6172 7261 7972 756c 6577  ep-2\\arrayrulew
-00014240: 6964 7468 2b2e 3231 7074 7d7d 0d0a 0d0a  idth+.21pt}}....
-00014250: 5c5c 7573 6570 6163 6b61 6765 5b6c 6566  \\usepackage[lef
-00014260: 743d 3163 6d2c 7269 6768 743d 312e 3563  t=1cm,right=1.5c
-00014270: 6d5d 7b67 656f 6d65 7472 797d 0d0a 0d0a  m]{geometry}....
-00014280: 5c5c 6265 6769 6e7b 646f 6375 6d65 6e74  \\begin{document
-00014290: 7d5c 6e22 2222 202b 2064 665f 6c61 7465  }\n""" + df_late
-000142a0: 7820 2020 2b20 225c 6e5c 5c65 6e64 7b64  x   + "\n\\end{d
-000142b0: 6f63 756d 656e 747d 220d 0a0d 0a20 2020  ocument}"....   
-000142c0: 2020 2020 2070 7970 6572 636c 6970 2e63       pyperclip.c
-000142d0: 6f70 7928 6466 5f6c 6174 6578 290d 0a20  opy(df_latex).. 
-000142e0: 2020 2020 2020 2023 7365 6c66 2e6e 6f74         #self.not
-000142f0: 6966 7928 6d65 7373 6167 653d 224c 6154  ify(message="LaT
-00014300: 6558 2063 6f64 6520 636f 7069 6564 2074  eX code copied t
-00014310: 6f20 636c 6970 626f 6172 642e 2048 6176  o clipboard. Hav
-00014320: 6520 6675 6e21 222c 2074 6974 6c65 3d22  e fun!", title="
-00014330: 4861 7665 2066 756e 2229 0d0a 2020 2020  Have fun")..    
-00014340: 2020 2020 7365 6c66 2e73 7461 7475 7342      self.statusB
-00014350: 6172 2829 2e73 686f 774d 6573 7361 6765  ar().showMessage
-00014360: 2822 4c61 5465 5820 636f 6465 2063 6f70  ("LaTeX code cop
-00014370: 6965 6420 746f 2063 6c69 7062 6f61 7264  ied to clipboard
-00014380: 2e20 4861 7665 2066 756e 2122 290d 0a0d  . Have fun!")...
-00014390: 0a0d 0a20 2020 2020 2020 2023 202d 2d2d  ...        # ---
-000143a0: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2020 2020  ----------..    
-000143b0: 2020 2020 6966 2046 616c 7365 3a20 2320      if False: # 
-000143c0: 4445 5052 4943 4154 4544 0d0a 2020 2020  DEPRICATED..    
-000143d0: 2020 2020 2020 2020 7472 793a 0d0a 0d0a          try:....
-000143e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000143f0: 6672 6f6d 2070 6466 6c61 7465 7820 696d  from pdflatex im
-00014400: 706f 7274 2050 4446 4c61 5465 580d 0a20  port PDFLaTeX.. 
-00014410: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00014420: 6174 6820 3d20 6f73 2e70 6174 682e 6469  ath = os.path.di
-00014430: 726e 616d 6528 6f73 2e70 6174 682e 6162  rname(os.path.ab
-00014440: 7370 6174 6828 5f5f 6669 6c65 5f5f 2929  spath(__file__))
-00014450: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00014460: 2020 6d79 5f66 696c 6520 3d20 6f73 2e70    my_file = os.p
-00014470: 6174 682e 6a6f 696e 2870 6174 682c 226d  ath.join(path,"m
-00014480: 796d 6174 7269 7822 290d 0a0d 0a20 2020  ymatrix")....   
-00014490: 2020 2020 2020 2020 2020 2020 2066 696c               fil
-000144a0: 6520 3d20 6f70 656e 286d 795f 6669 6c65  e = open(my_file
-000144b0: 2c20 2277 2229 0d0a 2020 2020 2020 2020  , "w")..        
-000144c0: 2020 2020 2020 2020 6669 6c65 2e77 7269          file.wri
-000144d0: 7465 2822 2222 0d0a 2020 2020 2020 2020  te("""..        
-000144e0: 5c5c 646f 6375 6d65 6e74 636c 6173 735b  \\documentclass[
-000144f0: 6133 7061 7065 722c 6c61 6e64 7363 6170  a3paper,landscap
-00014500: 655d 7b61 7274 6963 6c65 7d0d 0a20 2020  e]{article}..   
-00014510: 2020 2020 205c 5c75 7365 7061 636b 6167       \\usepackag
-00014520: 657b 626f 6f6b 7461 6273 7d0d 0a20 2020  e{booktabs}..   
-00014530: 2020 2020 205c 5c75 7365 7061 636b 6167       \\usepackag
-00014540: 657b 6164 6a75 7374 626f 787d 0d0a 2020  e{adjustbox}..  
-00014550: 2020 2020 2020 5c5c 7573 6570 6163 6b61        \\usepacka
-00014560: 6765 5b74 6162 6c65 5d7b 7863 6f6c 6f72  ge[table]{xcolor
-00014570: 7d0d 0a20 2020 2020 2020 205c 5c75 7365  }..        \\use
-00014580: 7061 636b 6167 657b 6c6f 6e67 7461 626c  package{longtabl
-00014590: 657d 0d0a 2020 2020 2020 2020 5c5c 7573  e}..        \\us
-000145a0: 6570 6163 6b61 6765 7b74 6162 756c 6172  epackage{tabular
-000145b0: 782c 7261 6767 6564 3265 7d0d 0a20 2020  x,ragged2e}..   
-000145c0: 2020 2020 205c 5c64 6566 696e 6563 6f6c       \\definecol
-000145d0: 6f72 7b47 7261 797d 7b67 7261 797d 7b30  or{Gray}{gray}{0
-000145e0: 2e39 307d 0d0a 2020 2020 2020 2020 5c5c  .90}..        \\
-000145f0: 6465 6669 6e65 636f 6c6f 727b 4c69 6768  definecolor{Ligh
-00014600: 7447 7261 797d 7b67 7261 797d 7b30 2e39  tGray}{gray}{0.9
-00014610: 357d 0d0a 2020 2020 2020 2020 5c5c 6465  5}..        \\de
-00014620: 6669 6e65 636f 6c6f 727b 5768 6974 657d  finecolor{White}
-00014630: 7b72 6762 7d7b 312c 312c 317d 0d0a 0d0a  {rgb}{1,1,1}....
-00014640: 2020 2020 2020 2020 5c5c 6e65 7763 6f6c          \\newcol
-00014650: 756d 6e74 7970 657b 677d 7b3e 7b5c 5c63  umntype{g}{>{\\c
-00014660: 6f6c 756d 6e63 6f6c 6f72 7b57 6869 7465  olumncolor{White
-00014670: 7d5c 5c61 7272 6179 6261 636b 736c 6173  }\\arraybackslas
-00014680: 687d 4c7d 2025 0d0a 2020 2020 2020 2020  h}L} %..        
-00014690: 5c5c 6e65 7763 6f6c 756d 6e74 7970 657b  \\newcolumntype{
-000146a0: 6c7d 7b3e 7b5c 5c63 6f6c 756d 6e63 6f6c  l}{>{\\columncol
-000146b0: 6f72 7b57 6869 7465 7d5c 5c61 7272 6179  or{White}\\array
-000146c0: 6261 636b 736c 6173 687d 707b 3363 6d7d  backslash}p{3cm}
-000146d0: 7d20 2563 656e 7465 7265 6420 2258 2220  } %centered "X" 
-000146e0: 636f 6c75 6d6e 0d0a 2020 2020 2020 2020  column..        
-000146f0: 5c5c 6e65 7763 6f6c 756d 6e74 7970 657b  \\newcolumntype{
-00014700: 4c7d 5b31 5d7b 3e7b 5c5c 7261 6767 6564  L}[1]{>{\\ragged
-00014710: 7269 6768 745c 5c61 7272 6179 6261 636b  right\\arrayback
-00014720: 736c 6173 687d 707b 5c5c 6469 6d65 7870  slash}p{\\dimexp
-00014730: 7223 312d 325c 5c74 6162 636f 6c73 6570  r#1-2\\tabcolsep
-00014740: 2d32 5c5c 6172 7261 7972 756c 6577 6964  -2\\arrayrulewid
-00014750: 7468 2b2e 3231 7074 7d7d 0d0a 0d0a 2020  th+.21pt}}....  
-00014760: 2020 2020 2020 5c5c 7573 6570 6163 6b61        \\usepacka
-00014770: 6765 5b6c 6566 743d 3163 6d2c 7269 6768  ge[left=1cm,righ
-00014780: 743d 312e 3563 6d5d 7b67 656f 6d65 7472  t=1.5cm]{geometr
-00014790: 797d 0d0a 0d0a 2020 2020 2020 2020 5c5c  y}....        \\
-000147a0: 6265 6769 6e7b 646f 6375 6d65 6e74 7d22  begin{document}"
-000147b0: 2222 290d 0a20 2020 2020 2020 2020 2020  "")..           
-000147c0: 2020 2020 2066 696c 652e 7772 6974 6528       file.write(
-000147d0: 6466 5f6c 6174 6578 290d 0a20 2020 2020  df_latex)..     
-000147e0: 2020 2020 2020 2020 2020 2066 696c 652e             file.
-000147f0: 7772 6974 6528 2222 220d 0a20 2020 2020  write("""..     
-00014800: 2020 205c 5c65 6e64 7b64 6f63 756d 656e     \\end{documen
-00014810: 747d 2222 2229 0d0a 2020 2020 2020 2020  t}""")..        
-00014820: 2020 2020 2020 2020 6669 6c65 2e63 6c6f          file.clo
-00014830: 7365 2829 0d0a 2020 2020 2020 2020 2020  se()..          
-00014840: 2020 2020 2020 2320 7064 666c 203d 2050        # pdfl = P
-00014850: 4446 4c61 5465 582e 6672 6f6d 5f74 6578  DFLaTeX.from_tex
-00014860: 6669 6c65 2827 6d79 5f74 6578 6669 6c65  file('my_texfile
-00014870: 2e74 6578 2729 0d0a 2020 2020 2020 2020  .tex')..        
-00014880: 2020 2020 2020 2020 2320 7064 662c 206c          # pdf, l
-00014890: 6f67 2c20 636f 6d70 6c65 7465 645f 7072  og, completed_pr
-000148a0: 6f63 6573 7320 3d20 7064 666c 2e63 7265  ocess = pdfl.cre
-000148b0: 6174 655f 7064 6628 6b65 6570 5f70 6466  ate_pdf(keep_pdf
-000148c0: 5f66 696c 653d 5472 7565 2c20 6b65 6570  _file=True, keep
-000148d0: 5f6c 6f67 5f66 696c 653d 5472 7565 290d  _log_file=True).
-000148e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000148f0: 2023 206f 732e 706f 7065 6e28 2270 6466   # os.popen("pdf
-00014900: 6c61 7465 7820 2573 2220 2520 286f 732e  latex %s" % (os.
-00014910: 6765 7463 7764 2829 2b22 2f6d 795f 7465  getcwd()+"/my_te
-00014920: 7866 696c 652e 7465 7822 2929 0d0a 2020  xfile.tex"))..  
-00014930: 2020 2020 2020 2020 2020 2020 2020 696d                im
-00014940: 706f 7274 2073 7562 7072 6f63 6573 730d  port subprocess.
-00014950: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014960: 2070 6174 6820 3d20 6f73 2e70 6174 682e   path = os.path.
-00014970: 6469 726e 616d 6528 6f73 2e70 6174 682e  dirname(os.path.
-00014980: 6162 7370 6174 6828 5f5f 6669 6c65 5f5f  abspath(__file__
-00014990: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-000149a0: 2020 2020 7375 6270 726f 6365 7373 2e72      subprocess.r
-000149b0: 756e 2822 7064 666c 6174 6578 2025 7322  un("pdflatex %s"
-000149c0: 2025 2028 6f73 2e70 6174 682e 6a6f 696e   % (os.path.join
-000149d0: 2870 6174 682c 226d 796d 6174 7269 782e  (path,"mymatrix.
-000149e0: 7465 7822 2929 292e 6368 6563 6b5f 7265  tex"))).check_re
-000149f0: 7475 726e 636f 6465 2829 0d0a 0d0a 2020  turncode()....  
-00014a00: 2020 2020 2020 2020 2020 2020 2020 236f                #o
-00014a10: 732e 7374 6172 7466 696c 6528 6f73 2e67  s.startfile(os.g
-00014a20: 6574 6377 6428 2920 2b20 225c 5c6d 796d  etcwd() + "\\mym
-00014a30: 6174 7269 782e 7064 6622 290d 0a20 2020  atrix.pdf")..   
-00014a40: 2020 2020 2020 2020 2020 2020 2074 7279               try
-00014a50: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00014a60: 2020 2020 2020 2023 2073 6875 7469 6c2e         # shutil.
-00014a70: 726d 7472 6565 286f 732e 6765 7463 7764  rmtree(os.getcwd
-00014a80: 2829 2b22 5c5c 6669 6c65 7322 290d 0a20  ()+"\\files").. 
-00014a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014aa0: 2020 2023 206f 732e 6d6b 6469 7228 6f73     # os.mkdir(os
-00014ab0: 2e67 6574 6377 6428 292b 225c 5c66 696c  .getcwd()+"\\fil
-00014ac0: 6573 2229 0d0a 0d0a 2020 2020 2020 2020  es")....        
-00014ad0: 2020 2020 2020 2020 2020 2020 7061 7468              path
-00014ae0: 203d 206f 732e 7061 7468 2e64 6972 6e61   = os.path.dirna
-00014af0: 6d65 286f 732e 7061 7468 2e61 6273 7061  me(os.path.abspa
-00014b00: 7468 285f 5f66 696c 655f 5f29 290d 0a20  th(__file__)).. 
-00014b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014b20: 2020 2073 6875 7469 6c2e 6d6f 7665 2870     shutil.move(p
-00014b30: 6174 682b 225c 5c6d 796d 6174 7269 782e  ath+"\\mymatrix.
-00014b40: 7465 7822 202c 2070 6174 682b 2022 5c5c  tex" , path+ "\\
-00014b50: 6669 6c65 735c 5c6d 796d 6174 7269 782e  files\\mymatrix.
-00014b60: 7465 7822 290d 0a20 2020 2020 2020 2020  tex")..         
-00014b70: 2020 2020 2020 2020 2020 2073 6875 7469             shuti
-00014b80: 6c2e 6d6f 7665 2870 6174 6820 2b20 225c  l.move(path + "\
-00014b90: 5c6d 796d 6174 7269 782e 6c6f 6722 2c20  \mymatrix.log", 
-00014ba0: 7061 7468 202b 2022 5c5c 6669 6c65 735c  path + "\\files\
-00014bb0: 5c6d 796d 6174 7269 782e 6c6f 6722 290d  \mymatrix.log").
-00014bc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014bd0: 2020 2020 2073 6875 7469 6c2e 6d6f 7665       shutil.move
-00014be0: 2870 6174 6820 2b20 225c 5c6d 796d 6174  (path + "\\mymat
-00014bf0: 7269 782e 6175 7822 2c20 7061 7468 202b  rix.aux", path +
-00014c00: 2022 5c5c 6669 6c65 735c 5c5c 6d79 6d61   "\\files\\\myma
-00014c10: 7472 6978 2e61 7578 2229 0d0a 2020 2020  trix.aux")..    
-00014c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014c30: 7368 7574 696c 2e6d 6f76 6528 7061 7468  shutil.move(path
-00014c40: 202b 2022 5c5c 6d79 6d61 7472 6978 2e70   + "\\mymatrix.p
-00014c50: 6466 222c 2070 6174 6820 2b20 225c 5c66  df", path + "\\f
-00014c60: 696c 6573 5c5c 6d79 6d61 7472 6978 2e70  iles\\mymatrix.p
-00014c70: 6466 2229 0d0a 2020 2020 2020 2020 2020  df")..          
-00014c80: 2020 2020 2020 2020 2020 2373 6875 7469            #shuti
-00014c90: 6c2e 636f 7079 286f 732e 6765 7463 7764  l.copy(os.getcwd
-00014ca0: 2829 202b 2022 5c5c 6669 6c65 735c 5c6d  () + "\\files\\m
-00014cb0: 796d 6174 7269 782e 6874 6d6c 222c 6f73  ymatrix.html",os
-00014cc0: 2e67 6574 6377 6428 2920 2b20 225c 5c66  .getcwd() + "\\f
-00014cd0: 696c 6573 5c5c 6d79 6d61 7472 6978 2e68  iles\\mymatrix.h
-00014ce0: 746d 6c22 290d 0a20 2020 2020 2020 2020  tml")..         
-00014cf0: 2020 2020 2020 2020 2020 2023 7368 7574             #shut
-00014d00: 696c 2e63 6f70 7928 6f73 2e67 6574 6377  il.copy(os.getcw
-00014d10: 6428 2920 2b20 225c 5c66 696c 6573 5c5c  d() + "\\files\\
-00014d20: 6d79 7374 796c 652e 6373 7322 2c20 6f73  mystyle.css", os
-00014d30: 2e67 6574 6377 6428 2920 2b20 225c 5c66  .getcwd() + "\\f
-00014d40: 696c 6573 5c5c 6d79 7374 796c 652e 6373  iles\\mystyle.cs
-00014d50: 7322 290d 0a20 2020 2020 2020 2020 2020  s")..           
-00014d60: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
-00014d70: 7074 696f 6e20 6173 2065 3a0d 0a20 2020  ption as e:..   
-00014d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014d90: 2073 656c 662e 6e6f 7469 6679 286d 6573   self.notify(mes
-00014da0: 7361 6765 3d73 7472 2865 292c 7469 746c  sage=str(e),titl
-00014db0: 653d 2241 6e20 4572 726f 7220 6f63 6375  e="An Error occu
-00014dc0: 7272 6564 2e2e 2e28 4944 2031 3330 3829  rred...(ID 1308)
-00014dd0: 2229 0d0a 0d0a 2020 2020 2020 2020 2020  ")....          
-00014de0: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
-00014df0: 6f6e 2061 7320 653a 0d0a 2020 2020 2020  on as e:..      
-00014e00: 2020 2020 2020 2020 2020 7365 6c66 2e6e            self.n
-00014e10: 6f74 6966 7928 6d65 7373 6167 653d 7374  otify(message=st
-00014e20: 7228 6529 2c74 6974 6c65 3d22 416e 2045  r(e),title="An E
-00014e30: 7272 6f72 206f 6363 7572 7265 642e 2e2e  rror occurred...
-00014e40: 2849 4420 3133 3131 2922 290d 0a20 2020  (ID 1311)")..   
-00014e50: 2020 2020 2020 2020 2023 202d 2d2d 2d2d           # -----
-00014e60: 2d2d 2d2d 2d2d 2d2d 0d0a 0d0a 2020 2020  --------....    
-00014e70: 2020 2020 2020 2020 7064 2e6f 7074 696f          pd.optio
-00014e80: 6e73 2e64 6973 706c 6179 2e6d 6178 5f63  ns.display.max_c
-00014e90: 6f6c 7769 6474 6820 3d20 320d 0a0d 0a20  olwidth = 2.... 
-00014ea0: 2020 2020 2020 2020 2020 2064 665f 6469             df_di
-00014eb0: 7370 6c61 7920 3d20 6466 5f62 6163 6b75  splay = df_backu
-00014ec0: 702e 6170 706c 796d 6170 2861 6262 7265  p.applymap(abbre
-00014ed0: 7669 6174 655f 7a65 726f 7329 2e74 6f5f  viate_zeros).to_
-00014ee0: 7374 7269 6e67 286c 696e 655f 7769 6474  string(line_widt
-00014ef0: 683d 4e6f 6e65 292e 7265 706c 6163 6528  h=None).replace(
-00014f00: 225c 5f22 2c20 225f 2229 0d0a 0d0a 2020  "\_", "_")....  
-00014f10: 2020 2020 2020 2020 2020 2320 7365 6c66            # self
-00014f20: 2e70 6172 656e 742e 7061 7265 6e74 4170  .parent.parentAp
-00014f30: 702e 6765 7446 6f72 6d28 2241 4747 525f  p.getForm("AGGR_
-00014f40: 464c 4f57 2229 2e64 6174 615f 626f 782e  FLOW").data_box.
-00014f50: 7661 6c75 6573 203d 2064 665f 6469 7370  values = df_disp
-00014f60: 6c61 792e 7370 6c69 7428 225c 6e22 290d  lay.split("\n").
-00014f70: 0a20 2020 2020 2020 2020 2020 2023 2073  .            # s
-00014f80: 656c 662e 7061 7265 6e74 2e70 6172 656e  elf.parent.paren
-00014f90: 7441 7070 2e73 7769 7463 6846 6f72 6d28  tApp.switchForm(
-00014fa0: 2241 4747 525f 464c 4f57 2229 0d0a 0d0a  "AGGR_FLOW")....
-00014fb0: 0d0a 2020 2020 6465 6620 6765 6e5f 636f  ..    def gen_co
-00014fc0: 6465 2873 656c 662c 7368 6f77 5f6e 6f74  de(self,show_not
-00014fd0: 6966 6963 6174 696f 6e3d 4661 6c73 6529  ification=False)
-00014fe0: 3a0d 0a0d 0a20 2020 2020 2020 2063 6f64  :....        cod
-00014ff0: 6520 3d20 2222 0d0a 2020 2020 2020 2020  e = ""..        
-00015000: 636f 6465 202b 3d20 2266 726f 6d20 7366  code += "from sf
-00015010: 6374 6f6f 6c73 2069 6d70 6f72 7420 466c  ctools import Fl
-00015020: 6f77 4d61 7472 6978 205c 6e69 6d70 6f72  owMatrix \nimpor
-00015030: 7420 6e75 6d70 7920 6173 206e 705c 6e22  t numpy as np\n"
-00015040: 0d0a 2020 2020 2020 2020 636f 6465 202b  ..        code +
-00015050: 3d20 2266 726f 6d20 7366 6374 6f6f 6c73  = "from sfctools
-00015060: 2069 6d70 6f72 7420 4261 6c61 6e63 6545   import BalanceE
-00015070: 6e74 7279 2c41 6363 6f75 6e74 735c 6e22  ntry,Accounts\n"
-00015080: 0d0a 2020 2020 2020 2020 636f 6465 202b  ..        code +
-00015090: 3d20 2266 726f 6d20 7366 6374 6f6f 6c73  = "from sfctools
-000150a0: 2069 6d70 6f72 7420 4361 7368 466c 6f77   import CashFlow
-000150b0: 456e 7472 795c 6e22 0d0a 2020 2020 2020  Entry\n"..      
-000150c0: 2020 636f 6465 202b 3d20 2266 726f 6d20    code += "from 
-000150d0: 7366 6374 6f6f 6c73 2069 6d70 6f72 7420  sfctools import 
-000150e0: 4943 5345 6e74 7279 5c6e 220d 0a20 2020  ICSEntry\n"..   
-000150f0: 2020 2020 2063 6f64 6520 2b3d 2022 4341       code += "CA
-00015100: 203d 2041 6363 6f75 6e74 732e 4341 5c6e   = Accounts.CA\n
-00015110: 4b41 203d 2041 6363 6f75 6e74 732e 4b41  KA = Accounts.KA
-00015120: 5c6e 5c6e 220d 0a0d 0a20 2020 2020 2020  \n\n"....       
-00015130: 2073 7562 6a65 6374 735f 636f 756e 7420   subjects_count 
-00015140: 3d20 6465 6661 756c 7464 6963 7428 6c61  = defaultdict(la
-00015150: 6d62 6461 3a20 302e 3029 0d0a 0d0a 2020  mbda: 0.0)....  
-00015160: 2020 2020 2020 666f 7220 6669 6c65 6461        for fileda
-00015170: 7461 2069 6e20 7365 6c66 2e65 6e74 7279  ta in self.entry
-00015180: 5f64 6174 613a 0d0a 2020 2020 2020 2020  _data:..        
-00015190: 2020 2020 6167 656e 7431 203d 2066 696c      agent1 = fil
-000151a0: 6564 6174 615b 2261 6765 6e74 3122 5d0d  edata["agent1"].
-000151b0: 0a20 2020 2020 2020 2020 2020 2061 6765  .            age
-000151c0: 6e74 3220 3d20 6669 6c65 6461 7461 5b22  nt2 = filedata["
-000151d0: 6167 656e 7432 225d 0d0a 0d0a 2020 2020  agent2"]....    
-000151e0: 2020 2020 2020 2020 6966 2061 6765 6e74          if agent
-000151f0: 3120 3d3d 2061 6765 6e74 323a 0d0a 2020  1 == agent2:..  
-00015200: 2020 2020 2020 2020 2020 2020 2020 6167                ag
-00015210: 656e 7432 203d 2022 6f74 6865 725f 2220  ent2 = "other_" 
-00015220: 2b20 6167 656e 7432 0d0a 0d0a 2020 2020  + agent2....    
-00015230: 2020 2020 2020 2020 6131 203d 2066 696c          a1 = fil
-00015240: 6564 6174 615b 2261 3122 5d20 2023 202b  edata["a1"]  # +
-00015250: 2022 5c6e 220d 0a20 2020 2020 2020 2020   "\n"..         
-00015260: 2020 2065 3120 3d20 6669 6c65 6461 7461     e1 = filedata
-00015270: 5b22 6531 225d 2020 2320 2b20 225c 6e22  ["e1"]  # + "\n"
-00015280: 0d0a 2020 2020 2020 2020 2020 2020 6c31  ..            l1
-00015290: 203d 2066 696c 6564 6174 615b 226c 3122   = filedata["l1"
-000152a0: 5d20 2023 202b 2022 5c6e 220d 0a20 2020  ]  # + "\n"..   
-000152b0: 2020 2020 2020 2020 2061 3220 3d20 6669           a2 = fi
-000152c0: 6c65 6461 7461 5b22 6132 225d 2020 2320  ledata["a2"]  # 
-000152d0: 2b20 225c 6e22 0d0a 2020 2020 2020 2020  + "\n"..        
-000152e0: 2020 2020 6532 203d 2066 696c 6564 6174      e2 = filedat
-000152f0: 615b 2265 3222 5d20 2023 202b 2022 5c6e  a["e2"]  # + "\n
-00015300: 220d 0a20 2020 2020 2020 2020 2020 206c  "..            l
-00015310: 3220 3d20 6669 6c65 6461 7461 5b22 6c32  2 = filedata["l2
-00015320: 225d 2020 2320 2b20 225c 6e22 0d0a 0d0a  "]  # + "\n"....
-00015330: 2020 2020 2020 2020 2020 2020 666c 6f77              flow
-00015340: 5f63 6865 636b 203d 2054 7275 650d 0a20  _check = True.. 
-00015350: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00015360: 2822 464c 4f57 2043 4845 434b 222c 2066  ("FLOW CHECK", f
-00015370: 696c 6564 6174 615b 2273 686f 7274 6e61  iledata["shortna
-00015380: 6d65 225d 2c66 696c 6564 6174 615b 226c  me"],filedata["l
-00015390: 6f67 2074 7261 6e73 6163 7469 6f6e 225d  og transaction"]
-000153a0: 290d 0a20 2020 2020 2020 2020 2020 2069  )..            i
-000153b0: 6620 6973 696e 7374 616e 6365 2866 696c  f isinstance(fil
-000153c0: 6564 6174 615b 226c 6f67 2074 7261 6e73  edata["log trans
-000153d0: 6163 7469 6f6e 225d 2c73 7472 2920 616e  action"],str) an
-000153e0: 6420 6669 6c65 6461 7461 5b22 6c6f 6720  d filedata["log 
-000153f0: 7472 616e 7361 6374 696f 6e22 5d2e 7374  transaction"].st
-00015400: 7269 7028 2920 3d3d 2022 5472 7565 223a  rip() == "True":
-00015410: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00015420: 2020 2320 626f 6f6c 2866 696c 6564 6174    # bool(filedat
-00015430: 615b 226c 6f67 2074 7261 6e73 6163 7469  a["log transacti
-00015440: 6f6e 225d 290d 0a20 2020 2020 2020 2020  on"])..         
-00015450: 2020 2020 2020 2066 6c6f 775f 6368 6563         flow_chec
-00015460: 6b20 3d20 5472 7565 0d0a 2020 2020 2020  k = True..      
-00015470: 2020 2020 2020 2020 2020 7072 696e 7428            print(
-00015480: 666c 6f77 5f63 6865 636b 290d 0a20 2020  flow_check)..   
-00015490: 2020 2020 2020 2020 2065 6c69 6620 6973           elif is
-000154a0: 696e 7374 616e 6365 2866 696c 6564 6174  instance(filedat
-000154b0: 615b 226c 6f67 2074 7261 6e73 6163 7469  a["log transacti
-000154c0: 6f6e 225d 2c73 7472 2920 616e 6420 6669  on"],str) and fi
-000154d0: 6c65 6461 7461 5b22 6c6f 6720 7472 616e  ledata["log tran
-000154e0: 7361 6374 696f 6e22 5d2e 7374 7269 7028  saction"].strip(
-000154f0: 2920 3d3d 2022 4661 6c73 6522 3a0d 0a20  ) == "False":.. 
-00015500: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00015510: 2062 6f6f 6c28 6669 6c65 6461 7461 5b22   bool(filedata["
-00015520: 6c6f 6720 7472 616e 7361 6374 696f 6e22  log transaction"
-00015530: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
-00015540: 2020 2020 666c 6f77 5f63 6865 636b 203d      flow_check =
-00015550: 2046 616c 7365 0d0a 2020 2020 2020 2020   False..        
-00015560: 2020 2020 2020 2020 7072 696e 7428 666c          print(fl
-00015570: 6f77 5f63 6865 636b 290d 0a20 2020 2020  ow_check)..     
-00015580: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-00015590: 2020 2020 2020 2020 2020 2020 2020 666c                fl
-000155a0: 6f77 5f63 6865 636b 203d 2066 696c 6564  ow_check = filed
-000155b0: 6174 615b 226c 6f67 2074 7261 6e73 6163  ata["log transac
-000155c0: 7469 6f6e 225d 0d0a 2020 2020 2020 2020  tion"]..        
-000155d0: 2020 2020 2020 2020 7072 696e 7428 666c          print(fl
-000155e0: 6f77 5f63 6865 636b 290d 0a20 2020 2020  ow_check)..     
-000155f0: 2020 2020 2020 2023 7072 696e 7428 2246         #print("F
-00015600: 4c4f 5720 4348 4543 4b22 2c20 6669 6c65  LOW CHECK", file
-00015610: 6e61 6d65 2c20 666c 6f77 5f63 6865 636b  name, flow_check
-00015620: 290d 0a20 2020 2020 2020 2020 2020 2070  )..            p
-00015630: 7269 6e74 2822 7479 7065 222c 2074 7970  rint("type", typ
-00015640: 6528 666c 6f77 5f63 6865 636b 2929 0d0a  e(flow_check))..
-00015650: 0d0a 2020 2020 2020 2020 2020 2020 6b69  ..            ki
-00015660: 6e64 203d 2066 696c 6564 6174 615b 226b  nd = filedata["k
-00015670: 696e 6422 5d0d 0a0d 0a20 2020 2020 2020  ind"]....       
-00015680: 2020 2020 2023 7375 626a 6563 7420 3d20       #subject = 
-00015690: 2066 696c 6564 6174 615b 2273 7562 6a65   filedata["subje
-000156a0: 6374 225d 2e72 6570 6c61 6365 2822 2022  ct"].replace(" "
-000156b0: 2c22 5f22 2920 2b20 225f 2220 2b20 6669  ,"_") + "_" + fi
-000156c0: 6c65 6461 7461 5b22 7368 6f72 746e 616d  ledata["shortnam
-000156d0: 6522 2e72 6570 6c61 6365 2822 2022 2c22  e".replace(" ","
-000156e0: 5f22 295d 2e6c 6f77 6572 2829 0d0a 2020  _")].lower()..  
-000156f0: 2020 2020 2020 2020 2020 7375 626a 6563            subjec
-00015700: 7420 3d20 2066 696c 6564 6174 615b 2273  t =  filedata["s
-00015710: 686f 7274 6e61 6d65 222e 7265 706c 6163  hortname".replac
-00015720: 6528 2220 222c 225f 2229 5d2e 7265 706c  e(" ","_")].repl
-00015730: 6163 6528 2228 222c 225f 2229 2e72 6570  ace("(","_").rep
-00015740: 6c61 6365 2822 2922 2c22 2229 2e6c 6f77  lace(")","").low
-00015750: 6572 2829 0d0a 2020 2020 2020 2020 2020  er()..          
-00015760: 2020 7375 626a 6563 745f 7374 7220 3d20    subject_str = 
-00015770: 2066 696c 6564 6174 615b 2273 7562 6a65   filedata["subje
-00015780: 6374 222e 7265 706c 6163 6528 2220 222c  ct".replace(" ",
-00015790: 225f 2229 5d2e 6c6f 7765 7228 292e 6361  "_")].lower().ca
-000157a0: 7069 7461 6c69 7a65 2829 2e72 6570 6c61  pitalize().repla
-000157b0: 6365 2822 5f22 2c20 2220 2229 0d0a 0d0a  ce("_", " ")....
-000157c0: 2020 2020 2020 2020 2020 2020 7375 626a              subj
-000157d0: 6563 7473 5f63 6f75 6e74 5b73 7562 6a65  ects_count[subje
-000157e0: 6374 5d20 2b3d 2031 0d0a 2020 2020 2020  ct] += 1..      
-000157f0: 2020 2020 2020 6966 2073 7562 6a65 6374        if subject
-00015800: 735f 636f 756e 745b 7375 626a 6563 745d  s_count[subject]
-00015810: 203e 2031 3a20 2320 7375 6666 6978 2066   > 1: # suffix f
-00015820: 6f72 2073 616d 6520 6e61 6d65 730d 0a20  or same names.. 
-00015830: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00015840: 7562 6a65 6374 202b 3d20 225f 2569 2220  ubject += "_%i" 
-00015850: 2520 696e 7428 7375 626a 6563 7473 5f63  % int(subjects_c
-00015860: 6f75 6e74 5b73 7562 6a65 6374 5d29 0d0a  ount[subject])..
-00015870: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00015880: 7175 616e 7469 7479 203d 2022 7122 2023  quantity = "q" #
-00015890: 2066 696c 6564 6174 615b 2271 7561 6e74   filedata["quant
-000158a0: 6974 7922 5d0d 0a0d 0a20 2020 2020 2020  ity"]....       
-000158b0: 2020 2020 2063 6f6d 6d61 6e64 7320 3d20       commands = 
-000158c0: 5b5d 0d0a 0d0a 2020 2020 2020 2020 2020  []....          
-000158d0: 2020 6966 2022 756e 692d 6469 7265 6374    if "uni-direct
-000158e0: 696f 6e61 6c22 2069 6e20 6669 6c65 6461  ional" in fileda
-000158f0: 7461 3a0d 0a20 2020 2020 2020 2020 2020  ta:..           
-00015900: 2020 2020 2075 6e69 6469 7220 3d20 6669       unidir = fi
-00015910: 6c65 6461 7461 5b22 756e 692d 6469 7265  ledata["uni-dire
-00015920: 6374 696f 6e61 6c22 5d0d 0a0d 0a20 2020  ctional"]....   
-00015930: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
-00015940: 6d61 6e64 732e 6170 7065 6e64 2822 636f  mands.append("co
-00015950: 6e64 203d 2028 6973 696e 7374 616e 6365  nd = (isinstance
-00015960: 2871 2c66 6c6f 6174 2920 6f72 2069 7369  (q,float) or isi
-00015970: 6e73 7461 6e63 6528 712c 696e 7429 2922  nstance(q,int))"
-00015980: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00015990: 2020 2063 6f6d 6d61 6e64 732e 6170 7065     commands.appe
-000159a0: 6e64 2822 6966 2063 6f6e 643a 2061 7373  nd("if cond: ass
-000159b0: 6572 7420 6e6f 7420 6e70 2e69 736e 616e  ert not np.isnan
-000159c0: 2871 2922 290d 0a20 2020 2020 2020 2020  (q)")..         
-000159d0: 2020 2020 2020 2023 205e 2077 696c 6c20         # ^ will 
-000159e0: 616c 736f 2070 6173 7320 666f 7220 6e70  also pass for np
-000159f0: 2e66 6c6f 6174 3634 0d0a 2020 2020 2020  .float64..      
-00015a00: 2020 2020 2020 2020 2020 636f 6d6d 616e            comman
-00015a10: 6473 2e61 7070 656e 6428 2269 6620 636f  ds.append("if co
-00015a20: 6e64 3a20 6173 7365 7274 2071 203c 202b  nd: assert q < +
-00015a30: 6e70 2e69 6e66 2229 0d0a 2020 2020 2020  np.inf")..      
-00015a40: 2020 2020 2020 2020 2020 636f 6d6d 616e            comman
-00015a50: 6473 2e61 7070 656e 6428 2269 6620 636f  ds.append("if co
-00015a60: 6e64 3a20 6173 7365 7274 2071 203e 202d  nd: assert q > -
-00015a70: 6e70 2e69 6e66 2229 0d0a 0d0a 2020 2020  np.inf")....    
-00015a80: 2020 2020 2020 2020 2020 2020 2370 7269              #pri
-00015a90: 6e74 2822 756e 692d 6469 7265 6374 696f  nt("uni-directio
-00015aa0: 6e61 6c22 2c75 6e69 6469 7229 0d0a 2020  nal",unidir)..  
-00015ab0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00015ac0: 2073 7472 2875 6e69 6469 7229 203d 3d20   str(unidir) == 
-00015ad0: 2254 7275 6522 3a20 2320 646f 206e 6f74  "True": # do not
-00015ae0: 2064 6f20 626f 6f6c 2875 6e69 6469 7229   do bool(unidir)
-00015af0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00015b00: 2020 2020 2020 236e 616d 6161 6120 3d20        #namaaa = 
-00015b10: 6669 6c65 6461 7461 5b22 7368 6f72 746e  filedata["shortn
-00015b20: 616d 6522 5d0d 0a20 2020 2020 2020 2020  ame"]..         
-00015b30: 2020 2020 2020 2020 2020 2023 7365 6c66             #self
-00015b40: 2e6e 6f74 6966 7928 2028 6e61 6d61 6161  .notify( (namaaa
-00015b50: 2b20 7374 7228 756e 6964 6972 292b 2022  + str(unidir)+ "
-00015b60: 3d22 2b28 7374 7228 626f 6f6c 2875 6e69  ="+(str(bool(uni
-00015b70: 6469 7229 2929 292c 7469 746c 653d 2263  dir)))),title="c
-00015b80: 6865 636b 2229 0d0a 2020 2020 2020 2020  heck")..        
-00015b90: 2020 2020 2020 2020 2020 2020 636f 6d6d              comm
-00015ba0: 616e 6473 2e61 7070 656e 6428 2269 6620  ands.append("if 
-00015bb0: 636f 6e64 3a20 6173 7365 7274 2071 203e  cond: assert q >
-00015bc0: 3d20 302c 2027 6861 7665 2074 6f20 7061  = 0, 'have to pa
-00015bd0: 7373 2070 6f73 6974 6976 6520 7175 616e  ss positive quan
-00015be0: 7469 7479 3a20 756e 6964 6972 6563 7469  tity: unidirecti
-00015bf0: 6f6e 616c 2074 7261 6e73 6163 7469 6f6e  onal transaction
-00015c00: 2722 290d 0a0d 0a20 2020 2020 2020 2020  '")....         
-00015c10: 2020 2063 6f6d 6d61 6e64 7320 3d20 636f     commands = co
-00015c20: 6d6d 616e 6473 202b 205b 2225 732e 6261  mmands + ["%s.ba
-00015c30: 6c61 6e63 655f 7368 6565 742e 6469 7365  lance_sheet.dise
-00015c40: 6e67 6167 6528 2922 2025 2061 6765 6e74  ngage()" % agent
-00015c50: 315d 0d0a 2020 2020 2020 2020 2020 2020  1]..            
-00015c60: 6966 2054 7275 653a 2023 2061 6765 6e74  if True: # agent
-00015c70: 3120 213d 2061 6765 6e74 323a 0d0a 2020  1 != agent2:..  
-00015c80: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00015c90: 6d6d 616e 6473 2b3d 205b 2225 732e 6261  mmands+= ["%s.ba
-00015ca0: 6c61 6e63 655f 7368 6565 742e 6469 7365  lance_sheet.dise
-00015cb0: 6e67 6167 6528 2922 2025 2061 6765 6e74  ngage()" % agent
-00015cc0: 325d 0d0a 0d0a 2020 2020 2020 2020 2020  2]....          
-00015cd0: 2020 666f 7220 656e 7472 7920 696e 2065    for entry in e
-00015ce0: 312e 7370 6c69 7428 225c 6e22 293a 0d0a  1.split("\n"):..
-00015cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015d00: 6966 2065 6e74 7279 2021 3d20 2222 2061  if entry != "" a
-00015d10: 6e64 2065 6e74 7279 2021 3d20 225c 6e22  nd entry != "\n"
-00015d20: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00015d30: 2020 2020 2020 2073 6967 6e2c 2069 7465         sign, ite
-00015d40: 6d2c 2073 696c 656e 7420 3d20 7365 6c66  m, silent = self
-00015d50: 2e65 6e74 7279 5f74 6f5f 7661 6c73 2865  .entry_to_vals(e
-00015d60: 6e74 7279 2c20 6167 656e 7431 2c20 2245  ntry, agent1, "E
-00015d70: 7175 6974 7922 290d 0a20 2020 2020 2020  quity")..       
-00015d80: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00015d90: 7369 676e 2069 7320 6e6f 7420 4e6f 6e65  sign is not None
-00015da0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00015db0: 2020 2020 2020 2020 2020 2063 6f6d 6d61             comma
-00015dc0: 6e64 732e 6170 7065 6e64 2822 2573 2e62  nds.append("%s.b
-00015dd0: 616c 616e 6365 5f73 6865 6574 2e63 6861  alance_sheet.cha
-00015de0: 6e67 655f 6974 656d 2827 2573 272c 2025  nge_item('%s', %
-00015df0: 732c 2025 732c 2073 7570 7072 6573 735f  s, %s, suppress_
-00015e00: 7374 6f63 6b3d 2573 2922 2025 2028 0d0a  stock=%s)" % (..
-00015e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015e20: 2020 2020 2020 2020 6167 656e 7431 2c20          agent1, 
-00015e30: 6974 656d 2c20 2242 616c 616e 6365 456e  item, "BalanceEn
-00015e40: 7472 792e 4551 5549 5459 222c 2073 6967  try.EQUITY", sig
-00015e50: 6e20 2b20 7175 616e 7469 7479 2c20 7369  n + quantity, si
-00015e60: 6c65 6e74 2929 0d0a 2020 2020 2020 2020  lent))..        
-00015e70: 2020 2020 666f 7220 656e 7472 7920 696e      for entry in
-00015e80: 2061 312e 7370 6c69 7428 225c 6e22 293a   a1.split("\n"):
-00015e90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00015ea0: 2020 6966 2065 6e74 7279 2021 3d20 2222    if entry != ""
-00015eb0: 2061 6e64 2065 6e74 7279 2021 3d20 225c   and entry != "\
-00015ec0: 6e22 3a0d 0a20 2020 2020 2020 2020 2020  n":..           
-00015ed0: 2020 2020 2020 2020 2073 6967 6e2c 2069           sign, i
-00015ee0: 7465 6d2c 2073 696c 656e 7420 3d20 7365  tem, silent = se
-00015ef0: 6c66 2e65 6e74 7279 5f74 6f5f 7661 6c73  lf.entry_to_vals
-00015f00: 2865 6e74 7279 2c20 6167 656e 7431 2c20  (entry, agent1, 
-00015f10: 2241 7373 6574 7322 290d 0a20 2020 2020  "Assets")..     
-00015f20: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00015f30: 6620 7369 676e 2069 7320 6e6f 7420 4e6f  f sign is not No
-00015f40: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-00015f50: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
-00015f60: 6d61 6e64 732e 6170 7065 6e64 2822 2573  mands.append("%s
-00015f70: 2e62 616c 616e 6365 5f73 6865 6574 2e63  .balance_sheet.c
-00015f80: 6861 6e67 655f 6974 656d 2827 2573 272c  hange_item('%s',
-00015f90: 2025 732c 2025 732c 2073 7570 7072 6573   %s, %s, suppres
-00015fa0: 735f 7374 6f63 6b3d 2573 2922 2025 2028  s_stock=%s)" % (
-00015fb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00015fc0: 2020 2020 2020 2020 2020 6167 656e 7431            agent1
-00015fd0: 2c20 6974 656d 2c20 2242 616c 616e 6365  , item, "Balance
-00015fe0: 456e 7472 792e 4153 5345 5453 222c 2073  Entry.ASSETS", s
-00015ff0: 6967 6e20 2b20 7175 616e 7469 7479 2c20  ign + quantity, 
-00016000: 7369 6c65 6e74 2929 0d0a 2020 2020 2020  silent))..      
-00016010: 2020 2020 2020 666f 7220 656e 7472 7920        for entry 
-00016020: 696e 206c 312e 7370 6c69 7428 225c 6e22  in l1.split("\n"
-00016030: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00016040: 2020 2020 6966 2065 6e74 7279 2021 3d20      if entry != 
-00016050: 2222 2061 6e64 2065 6e74 7279 2021 3d20  "" and entry != 
-00016060: 225c 6e22 3a0d 0a20 2020 2020 2020 2020  "\n":..         
-00016070: 2020 2020 2020 2020 2020 2073 6967 6e2c             sign,
-00016080: 2069 7465 6d2c 2073 696c 656e 7420 3d20   item, silent = 
-00016090: 7365 6c66 2e65 6e74 7279 5f74 6f5f 7661  self.entry_to_va
-000160a0: 6c73 2865 6e74 7279 2c20 6167 656e 7431  ls(entry, agent1
-000160b0: 2c20 224c 6961 6269 6c69 7469 6573 2229  , "Liabilities")
-000160c0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000160d0: 2020 2020 2020 6966 2073 6967 6e20 6973        if sign is
-000160e0: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
-000160f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016100: 2020 2020 636f 6d6d 616e 6473 2e61 7070      commands.app
-00016110: 656e 6428 2225 732e 6261 6c61 6e63 655f  end("%s.balance_
-00016120: 7368 6565 742e 6368 616e 6765 5f69 7465  sheet.change_ite
-00016130: 6d28 2725 7327 2c20 2573 2c20 2573 2c20  m('%s', %s, %s, 
-00016140: 7375 7070 7265 7373 5f73 746f 636b 3d25  suppress_stock=%
-00016150: 7329 2220 2520 280d 0a20 2020 2020 2020  s)" % (..       
-00016160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016170: 2061 6765 6e74 312c 2069 7465 6d2c 2022   agent1, item, "
-00016180: 4261 6c61 6e63 6545 6e74 7279 2e4c 4941  BalanceEntry.LIA
-00016190: 4249 4c49 5449 4553 222c 2073 6967 6e20  BILITIES", sign 
-000161a0: 2b20 7175 616e 7469 7479 2c20 7369 6c65  + quantity, sile
-000161b0: 6e74 2929 0d0a 2020 2020 2020 2020 2020  nt))..          
-000161c0: 2020 666f 7220 656e 7472 7920 696e 2065    for entry in e
-000161d0: 322e 7370 6c69 7428 225c 6e22 293a 0d0a  2.split("\n"):..
+00011ee0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00011ef0: 6620 6e6f 7420 2228 7329 2220 696e 206e  f not "(s)" in n
+00011f00: 616d 653a 0d0a 2020 2020 2020 2020 2020  ame:..          
+00011f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011f30: 2020 666c 6f77 5f64 6174 615b 224b 4122    flow_data["KA"
+00011f40: 5d5b 22ce 9420 2573 2220 2520 6e61 6d65  ][".. %s" % name
+00011f50: 5d5b 6167 656e 7431 5d2e 6170 7065 6e64  ][agent1].append
+00011f60: 280d 0a20 2020 2020 2020 2020 2020 2020  (..             
+00011f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011f80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011f90: 2020 2022 2822 202b 2073 6967 6e20 2b20     "(" + sign + 
+00011fa0: 7175 616e 7469 7479 202b 2022 2922 290d  quantity + ")").
+00011fb0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00011fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011fd0: 2020 2066 6f72 2069 7465 6d5f 6e61 6d65     for item_name
+00011fe0: 2069 6e20 6c32 2e73 706c 6974 2822 5c6e   in l2.split("\n
+00011ff0: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
+00012000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012010: 2020 2020 2020 2020 2069 6620 6974 656d           if item
+00012020: 5f6e 616d 6520 213d 2022 223a 0d0a 2020  _name != "":..  
+00012030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012050: 2020 2020 2020 6e61 6d65 203d 2069 7465        name = ite
+00012060: 6d5f 6e61 6d65 5b31 3a5d 2e73 7472 6970  m_name[1:].strip
+00012070: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
+00012080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012090: 2020 2020 2020 2020 2020 2020 7369 676e              sign
+000120a0: 203d 2069 7465 6d5f 6e61 6d65 5b30 5d0d   = item_name[0].
+000120b0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+000120c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000120d0: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+000120e0: 7420 2228 7329 2220 696e 206e 616d 653a  t "(s)" in name:
+000120f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00012100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012110: 2020 2020 2020 2020 2020 2020 2020 666c                fl
+00012120: 6f77 5f64 6174 615b 224b 4122 5d5b 22ce  ow_data["KA"][".
+00012130: 9420 2573 2220 2520 6e61 6d65 5d5b 6167  . %s" % name][ag
+00012140: 656e 7432 5d2e 6170 7065 6e64 280d 0a20  ent2].append(.. 
+00012150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012170: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00012180: 2822 202b 2073 6967 6e20 2b20 7175 616e  (" + sign + quan
+00012190: 7469 7479 202b 2022 2922 290d 0a0d 0a20  tity + ")").... 
+000121a0: 2020 2020 2020 2020 2020 2023 2070 7269             # pri
+000121b0: 6e74 2866 6c6f 775f 6461 7461 290d 0a20  nt(flow_data).. 
+000121c0: 2020 2020 2020 2020 2020 2064 665f 6372             df_cr
+000121d0: 6564 6974 203d 2070 642e 4461 7461 4672  edit = pd.DataFr
+000121e0: 616d 6528 666c 6f77 5f64 6174 615b 2243  ame(flow_data["C
+000121f0: 4122 5d29 2e54 0d0a 2020 2020 2020 2020  A"]).T..        
+00012200: 2020 2020 6466 5f63 6170 6974 616c 203d      df_capital =
+00012210: 2070 642e 4461 7461 4672 616d 6528 666c   pd.DataFrame(fl
+00012220: 6f77 5f64 6174 615b 224b 4122 5d29 2e54  ow_data["KA"]).T
+00012230: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00012240: 6466 5f6d 6572 6765 203d 2070 642e 636f  df_merge = pd.co
+00012250: 6e63 6174 285b 6466 5f63 7265 6469 742c  ncat([df_credit,
+00012260: 2064 665f 6361 7069 7461 6c5d 2c20 6178   df_capital], ax
+00012270: 6973 3d31 2c20 6b65 7973 3d5b 2743 4127  is=1, keys=['CA'
+00012280: 2c20 274b 4127 5d29 2e73 7761 706c 6576  , 'KA']).swaplev
+00012290: 656c 2830 2c20 312c 6178 6973 3d31 292e  el(0, 1,axis=1).
+000122a0: 736f 7274 5f69 6e64 6578 2861 7869 733d  sort_index(axis=
+000122b0: 3129 0d0a 0d0a 0d0a 2020 2020 2020 2020  1)......        
+000122c0: 2020 2020 2320 6170 7065 6e64 206e 6577      # append new
+000122d0: 2063 6f6c 756d 6e73 0d0a 2020 2020 2020   columns..      
+000122e0: 2020 2020 2020 636f 6c5f 6469 6374 5f63        col_dict_c
+000122f0: 6120 3d20 7b7d 0d0a 2020 2020 2020 2020  a = {}..        
+00012300: 2020 2020 666f 7220 636f 6c20 696e 2064      for col in d
+00012310: 665f 6372 6564 6974 2e63 6f6c 756d 6e73  f_credit.columns
+00012320: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00012330: 2020 2063 6f6c 5f64 6963 745f 6361 5b63     col_dict_ca[c
+00012340: 6f6c 5d20 3d20 636f 6c20 2b20 2220 2843  ol] = col + " (C
+00012350: 4129 220d 0a0d 0a20 2020 2020 2020 2020  A)"....         
+00012360: 2020 2063 6f6c 5f64 6963 745f 6b61 203d     col_dict_ka =
+00012370: 207b 7d0d 0a20 2020 2020 2020 2020 2020   {}..           
+00012380: 2066 6f72 2063 6f6c 2069 6e20 6466 5f63   for col in df_c
+00012390: 6170 6974 616c 2e63 6f6c 756d 6e73 3a0d  apital.columns:.
+000123a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000123b0: 2063 6f6c 5f64 6963 745f 6b61 5b63 6f6c   col_dict_ka[col
+000123c0: 5d20 3d20 636f 6c20 2b20 2220 284b 4129  ] = col + " (KA)
+000123d0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
+000123e0: 2064 665f 6372 6564 6974 203d 2064 665f   df_credit = df_
+000123f0: 6372 6564 6974 2e72 656e 616d 6528 636f  credit.rename(co
+00012400: 6c75 6d6e 7320 3d20 636f 6c5f 6469 6374  lumns = col_dict
+00012410: 5f63 6129 0d0a 2020 2020 2020 2020 2020  _ca)..          
+00012420: 2020 6466 5f63 6170 6974 616c 203d 2064    df_capital = d
+00012430: 665f 6361 7069 7461 6c2e 7265 6e61 6d65  f_capital.rename
+00012440: 2863 6f6c 756d 6e73 3d63 6f6c 5f64 6963  (columns=col_dic
+00012450: 745f 6b61 290d 0a0d 0a20 2020 2020 2020  t_ka)....       
+00012460: 2020 2020 2064 665f 6d65 7267 6532 203d       df_merge2 =
+00012470: 2070 642e 636f 6e63 6174 285b 6466 5f63   pd.concat([df_c
+00012480: 7265 6469 742c 2064 665f 6361 7069 7461  redit, df_capita
+00012490: 6c5d 2c20 6178 6973 3d31 290d 0a0d 0a20  l], axis=1).... 
+000124a0: 2020 2020 2020 2020 2020 2064 665f 6d65             df_me
+000124b0: 7267 6532 203d 2064 665f 6d65 7267 6532  rge2 = df_merge2
+000124c0: 2e72 6569 6e64 6578 2873 6f72 7465 6428  .reindex(sorted(
+000124d0: 6466 5f6d 6572 6765 322e 636f 6c75 6d6e  df_merge2.column
+000124e0: 7329 2c20 6178 6973 3d31 290d 0a20 2020  s), axis=1)..   
+000124f0: 2020 2020 2020 2020 2064 665f 6d65 7267           df_merg
+00012500: 6532 203d 2064 665f 6d65 7267 6532 2e72  e2 = df_merge2.r
+00012510: 6569 6e64 6578 2873 6f72 7465 6428 6466  eindex(sorted(df
+00012520: 5f6d 6572 6765 322e 696e 6465 7829 2c20  _merge2.index), 
+00012530: 6178 6973 3d30 290d 0a0d 0a20 2020 2020  axis=0)....     
+00012540: 2020 2020 2020 2064 6620 3d20 6466 5f6d         df = df_m
+00012550: 6572 6765 2e66 696c 6c6e 6128 302e 3029  erge.fillna(0.0)
+00012560: 2e73 6f72 745f 696e 6465 7828 290d 0a0d  .sort_index()...
+00012570: 0a0d 0a20 2020 2020 2020 2020 2020 2064  ...            d
+00012580: 6566 206a 6f69 6e5f 656c 656d 656e 7473  ef join_elements
+00012590: 286d 795f 6974 656d 293a 0d0a 2020 2020  (my_item):..    
+000125a0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+000125b0: 7369 6e73 7461 6e63 6528 6d79 5f69 7465  sinstance(my_ite
+000125c0: 6d2c 206c 6973 7429 3a0d 0a20 2020 2020  m, list):..     
+000125d0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+000125e0: 795f 6c69 7374 203d 205b 5d0d 0a20 2020  y_list = []..   
+000125f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012600: 2066 6f72 2073 7562 6974 656d 2069 6e20   for subitem in 
+00012610: 6d79 5f69 7465 6d3a 0d0a 2020 2020 2020  my_item:..      
+00012620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012630: 2020 6966 2073 7562 6974 656d 2021 3d20    if subitem != 
+00012640: 2230 223a 0d0a 2020 2020 2020 2020 2020  "0":..          
+00012650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012660: 2020 6d79 5f6c 6973 742e 6170 7065 6e64    my_list.append
+00012670: 2873 7562 6974 656d 290d 0a0d 0a20 2020  (subitem)....   
+00012680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012690: 2072 6574 7572 6e20 222b 222e 6a6f 696e   return "+".join
+000126a0: 286d 795f 6c69 7374 290d 0a0d 0a20 2020  (my_list)....   
+000126b0: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+000126c0: 6620 6d79 5f69 7465 6d20 3d3d 2030 2e30  f my_item == 0.0
+000126d0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000126e0: 2020 2020 2020 2072 6574 7572 6e20 2230         return "0
+000126f0: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
+00012700: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+00012710: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00012720: 7475 726e 206d 795f 6974 656d 0d0a 0d0a  turn my_item....
+00012730: 2020 2020 2020 2020 2020 2020 6466 203d              df =
+00012740: 2064 662e 6170 706c 796d 6170 286a 6f69   df.applymap(joi
+00012750: 6e5f 656c 656d 656e 7473 290d 0a0d 0a0d  n_elements).....
+00012760: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+00012770: 2073 756d 206f 7665 7220 7468 6520 636f   sum over the co
+00012780: 6c75 6d6e 730d 0a0d 0a20 2020 2020 2020  lumns....       
+00012790: 2020 2020 2064 6566 2065 7661 6c5f 7375       def eval_su
+000127a0: 6d28 636f 6c75 6d6e 293a 0d0a 2020 2020  m(column):..    
+000127b0: 2020 2020 2020 2020 2020 2020 636f 6c75              colu
+000127c0: 6d6e 203d 205b 7374 7228 6329 2e72 6570  mn = [str(c).rep
+000127d0: 6c61 6365 2822 5e22 2c20 222a 2a22 2920  lace("^", "**") 
+000127e0: 666f 7220 6320 696e 2063 6f6c 756d 6e5d  for c in column]
+000127f0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00012800: 2020 6d79 5f65 7870 7220 3d20 222b 222e    my_expr = "+".
+00012810: 6a6f 696e 2863 6f6c 756d 6e29 0d0a 2020  join(column)..  
+00012820: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+00012830: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+00012840: 2020 2020 2020 2020 7265 7475 726e 2070          return p
+00012850: 6172 7365 5f65 7870 7228 6d79 5f65 7870  arse_expr(my_exp
+00012860: 7229 0d0a 2020 2020 2020 2020 2020 2020  r)..            
+00012870: 2020 2020 6578 6365 7074 3a0d 0a20 2020      except:..   
+00012880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012890: 2072 6574 7572 6e20 6d79 5f65 7870 720d   return my_expr.
+000128a0: 0a0d 0a0d 0a0d 0a20 2020 2020 2020 2020  .......         
+000128b0: 2020 2064 665b 2254 6f74 616c 225d 203d     df["Total"] =
+000128c0: 2064 662e 542e 6167 6728 6576 616c 5f73   df.T.agg(eval_s
+000128d0: 756d 2920 2023 2064 662e 542e 7375 6d28  um)  # df.T.sum(
+000128e0: 290d 0a20 2020 2020 2020 2020 2020 2064  )..            d
+000128f0: 662e 6c6f 635b 2254 6f74 616c 225d 203d  f.loc["Total"] =
+00012900: 2064 662e 6167 6728 6576 616c 5f73 756d   df.agg(eval_sum
+00012910: 290d 0a20 2020 2020 2020 2020 2020 2070  )..            p
+00012920: 7269 6e74 2822 544f 5441 4c22 2c64 662e  rint("TOTAL",df.
+00012930: 6c6f 635b 2254 6f74 616c 225d 290d 0a20  loc["Total"]).. 
+00012940: 2020 2020 2020 2020 2020 2064 665f 6d65             df_me
+00012950: 7267 6532 5b22 546f 7461 6c22 5d20 3d20  rge2["Total"] = 
+00012960: 6466 5b22 546f 7461 6c22 5d0d 0a0d 0a20  df["Total"].... 
+00012970: 2020 2020 2020 2020 2020 2023 2067 6574             # get
+00012980: 2074 6865 206e 6577 2063 6f6c 756d 6e73   the new columns
+00012990: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+000129a0: 2320 6974 6572 6174 6520 7468 726f 7567  # iterate throug
+000129b0: 6820 7468 6520 636f 6c75 6d6e 730d 0a20  h the columns.. 
+000129c0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+000129d0: 2864 662e 636f 6c75 6d6e 7329 0d0a 0d0a  (df.columns)....
+000129e0: 0d0a 2020 2020 2020 2020 2020 2020 666f  ..            fo
+000129f0: 7220 636f 6c75 6d6e 2069 6e20 6466 2e63  r column in df.c
+00012a00: 6f6c 756d 6e73 3a0d 0a20 2020 2020 2020  olumns:..       
+00012a10: 2020 2020 2020 2020 2069 6620 636f 6c75           if colu
+00012a20: 6d6e 5b30 5d20 213d 2022 546f 7461 6c22  mn[0] != "Total"
+00012a30: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00012a40: 2020 2020 2020 2070 7269 6e74 2863 6f6c         print(col
+00012a50: 756d 6e5b 305d 202b 2022 2022 2020 2b20  umn[0] + " "  + 
+00012a60: 2228 2573 2922 2025 2063 6f6c 756d 6e5b  "(%s)" % column[
+00012a70: 315d 2c64 662e 6c6f 635b 2254 6f74 616c  1],df.loc["Total
+00012a80: 225d 5b63 6f6c 756d 6e5d 290d 0a20 2020  "][column])..   
+00012a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012aa0: 2064 665f 6d65 7267 6532 2e6c 6f63 5b22   df_merge2.loc["
+00012ab0: 546f 7461 6c22 2c63 6f6c 756d 6e5b 305d  Total",column[0]
+00012ac0: 202b 2022 2022 2020 2b20 2228 2573 2922   + " "  + "(%s)"
+00012ad0: 2025 2063 6f6c 756d 6e5b 315d 5d20 3d20   % column[1]] = 
+00012ae0: 6466 2e6c 6f63 5b22 546f 7461 6c22 5d5b  df.loc["Total"][
+00012af0: 636f 6c75 6d6e 5d0d 0a0d 0a0d 0a0d 0a20  column]........ 
+00012b00: 2020 2020 2020 2020 2020 2064 6566 2073             def s
+00012b10: 696d 706c 6966 795f 6578 7072 286d 795f  implify_expr(my_
+00012b20: 6974 656d 293a 0d0a 2020 2020 2020 2020  item):..        
+00012b30: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00012b40: 696d 706c 6966 7928 6d79 5f69 7465 6d29  implify(my_item)
+00012b50: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00012b60: 6466 203d 2064 662e 6170 706c 796d 6170  df = df.applymap
+00012b70: 2873 696d 706c 6966 795f 6578 7072 290d  (simplify_expr).
+00012b80: 0a0d 0a20 2020 2020 2020 2020 2020 2064  ...            d
+00012b90: 665f 666f 725f 6578 6365 6c20 3d20 6466  f_for_excel = df
+00012ba0: 2e63 6f70 7928 290d 0a0d 0a0d 0a0d 0a20  .copy()........ 
+00012bb0: 2020 2020 2020 2020 2020 2064 6566 2061             def a
+00012bc0: 6262 7265 7669 6174 655f 7a65 726f 735f  bbreviate_zeros_
+00012bd0: 6c61 7465 7828 6d79 5f69 7465 6d29 3a0d  latex(my_item):.
+00012be0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00012bf0: 2069 6620 6d79 5f69 7465 6d20 3d3d 2022   if my_item == "
+00012c00: 3022 206f 7220 6d79 5f69 7465 6d20 3d3d  0" or my_item ==
+00012c10: 2030 3a0d 0a20 2020 2020 2020 2020 2020   0:..           
+00012c20: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+00012c30: 2220 2e2d 2022 2020 2320 2e2d 2022 0d0a  " .- "  # .- "..
+00012c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012c50: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00012c60: 2020 2020 2020 2020 2020 2073 203d 2070             s = p
+00012c70: 7269 6e74 696e 672e 6c61 7465 7828 6d79  rinting.latex(my
+00012c80: 5f69 7465 6d20 2c6d 6f64 653d 2269 6e6c  _item ,mode="inl
+00012c90: 696e 6522 2920 2320 206d 6f64 653d 2269  ine") #  mode="i
+00012ca0: 6e6c 696e 6522 290d 0a20 2020 2020 2020  nline")..       
+00012cb0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+00012cc0: 6e74 2873 290d 0a20 2020 2020 2020 2020  nt(s)..         
+00012cd0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00012ce0: 6e20 730d 0a0d 0a20 2020 2020 2020 2020  n s....         
+00012cf0: 2020 2023 6466 5f62 6163 6b75 7020 3d20     #df_backup = 
+00012d00: 6466 2e63 6f70 7928 290d 0a20 2020 2020  df.copy()..     
+00012d10: 2020 2020 2020 2064 6620 3d20 6466 2e61         df = df.a
+00012d20: 7070 6c79 6d61 7028 6162 6272 6576 6961  pplymap(abbrevia
+00012d30: 7465 5f7a 6572 6f73 5f6c 6174 6578 290d  te_zeros_latex).
+00012d40: 0a0d 0a0d 0a0d 0a20 2020 2020 2020 2020  .......         
+00012d50: 2020 2064 665f 6d65 7267 6532 203d 2064     df_merge2 = d
+00012d60: 665f 6d65 7267 6532 2e72 6570 6c61 6365  f_merge2.replace
+00012d70: 286e 702e 6e61 6e2c 2027 272c 2072 6567  (np.nan, '', reg
+00012d80: 6578 3d54 7275 6529 0d0a 2020 2020 2020  ex=True)..      
+00012d90: 2020 2020 2020 6466 5f6d 6572 6765 3220        df_merge2 
+00012da0: 3d20 6466 5f6d 6572 6765 322e 7265 706c  = df_merge2.repl
+00012db0: 6163 6528 2230 222c 2027 272c 2072 6567  ace("0", '', reg
+00012dc0: 6578 3d54 7275 6529 0d0a 2020 2020 2020  ex=True)..      
+00012dd0: 2020 2020 2020 6466 5f6d 6572 6765 3220        df_merge2 
+00012de0: 3d20 6466 5f6d 6572 6765 322e 7265 706c  = df_merge2.repl
+00012df0: 6163 6528 302c 2027 272c 2072 6567 6578  ace(0, '', regex
+00012e00: 3d54 7275 6529 0d0a 2020 2020 2020 2020  =True)..        
+00012e10: 2020 2020 6466 5f6d 6572 6765 3220 3d20      df_merge2 = 
+00012e20: 6466 5f6d 6572 6765 322e 7265 706c 6163  df_merge2.replac
+00012e30: 6528 302e 302c 2027 272c 2072 6567 6578  e(0.0, '', regex
+00012e40: 3d54 7275 6529 0d0a 0d0a 2020 2020 2020  =True)....      
+00012e50: 2020 2020 2020 2320 7072 696e 7428 6466        # print(df
+00012e60: 2e74 6f5f 7374 7269 6e67 2829 290d 0a20  .to_string()).. 
+00012e70: 2020 2020 2020 2020 2020 2023 2064 662e             # df.
+00012e80: 696c 6f63 5b30 2c30 5d20 3d20 2224 5c5c  iloc[0,0] = "$\\
+00012e90: 616c 7068 6124 220d 0a0d 0a20 2020 2020  alpha$"....     
+00012ea0: 2020 2020 2020 2070 642e 6f70 7469 6f6e         pd.option
+00012eb0: 732e 6469 7370 6c61 792e 6d61 785f 636f  s.display.max_co
+00012ec0: 6c77 6964 7468 203d 204e 6f6e 650d 0a0d  lwidth = None...
+00012ed0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00012ee0: 6d6f 6465 203d 3d20 2268 746d 6c22 3a20  mode == "html": 
+00012ef0: 2320 3c20 4e4f 5420 5945 5420 5355 5050  # < NOT YET SUPP
+00012f00: 4f52 5445 440d 0a0d 0a20 2020 2020 2020  ORTED....       
+00012f10: 2020 2020 2020 2020 2064 665f 6874 6d6c           df_html
+00012f20: 203d 2022 2222 0d0a 2020 2020 2020 2020   = """..        
+00012f30: 3c68 746d 6c3e 0d0a 2020 2020 2020 2020  <html>..        
+00012f40: 3c68 6561 643e 0d0a 2020 2020 2020 2020  <head>..        
+00012f50: 3c74 6974 6c65 3e4d 6174 6865 6465 6d6f  <title>Mathedemo
+00012f60: 3c2f 7469 746c 653e 0d0a 2020 2020 2020  </title>..      
+00012f70: 2020 3c73 6372 6970 7420 7479 7065 3d22    <script type="
+00012f80: 7465 7874 2f78 2d6d 6174 686a 6178 2d63  text/x-mathjax-c
+00012f90: 6f6e 6669 6722 3e0d 0a20 2020 2020 2020  onfig">..       
+00012fa0: 2020 204d 6174 684a 6178 2e48 7562 2e43     MathJax.Hub.C
+00012fb0: 6f6e 6669 6728 7b74 6578 326a 6178 3a20  onfig({tex2jax: 
+00012fc0: 7b69 6e6c 696e 654d 6174 683a 205b 5b27  {inlineMath: [['
+00012fd0: 2427 2c27 2427 5d2c 205b 275c 5c28 272c  $','$'], ['\\(',
+00012fe0: 275c 5c29 275d 5d7d 7d29 3b0d 0a20 2020  '\\)']]}});..   
+00012ff0: 2020 2020 203c 2f73 6372 6970 743e 0d0a       </script>..
+00013000: 2020 2020 2020 2020 3c73 6372 6970 7420          <script 
+00013010: 7479 7065 3d22 7465 7874 2f6a 6176 6173  type="text/javas
+00013020: 6372 6970 7422 0d0a 2020 2020 2020 2020  cript"..        
+00013030: 2020 7372 633d 2268 7474 703a 2f2f 6364    src="http://cd
+00013040: 6e6a 732e 636c 6f75 6466 6c61 7265 2e63  njs.cloudflare.c
+00013050: 6f6d 2f61 6a61 782f 6c69 6273 2f6d 6174  om/ajax/libs/mat
+00013060: 686a 6178 2f32 2e37 2e31 2f4d 6174 684a  hjax/2.7.1/MathJ
+00013070: 6178 2e6a 733f 636f 6e66 6967 3d54 6558  ax.js?config=TeX
+00013080: 2d41 4d53 2d4d 4d4c 5f48 544d 4c6f 724d  -AMS-MML_HTMLorM
+00013090: 4d4c 223e 0d0a 2020 2020 2020 2020 3c2f  ML">..        </
+000130a0: 7363 7269 7074 3e0d 0a20 2020 2020 2020  script>..       
+000130b0: 203c 6c69 6e6b 2072 656c 3d22 7374 796c   <link rel="styl
+000130c0: 6573 6865 6574 2220 6872 6566 3d22 6d79  esheet" href="my
+000130d0: 7374 796c 652e 6373 7322 3e0d 0a20 2020  style.css">..   
+000130e0: 2020 2020 203c 2f68 6561 643e 0d0a 0d0a       </head>....
+000130f0: 2020 2020 2020 2020 3c62 6f64 793e 0d0a          <body>..
+00013100: 2020 2020 2020 2020 2573 0d0a 2020 2020          %s..    
+00013110: 2020 2020 3c2f 626f 6479 3e0d 0a20 2020      </body>..   
+00013120: 2020 2020 203c 2f68 746d 6c3e 0d0a 2020       </html>..  
+00013130: 2020 2020 2020 2222 2225 2020 6466 2e74        """%  df.t
+00013140: 6f5f 6874 6d6c 2829 0d0a 0d0a 2020 2020  o_html()....    
+00013150: 2020 2020 2020 2020 2020 2020 7061 6765              page
+00013160: 536f 7572 6365 203d 2022 2222 0d0a 2020  Source = """..  
+00013170: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013180: 2020 2020 2020 2020 2020 203c 6874 6d6c             <html
+00013190: 3e3c 6865 6164 3e0d 0a20 2020 2020 2020  ><head>..       
+000131a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000131b0: 2020 2020 2020 3c2f 6865 6164 3e0d 0a20        </head>.. 
+000131c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000131d0: 2020 2020 2020 2020 2020 2020 3c62 6f64              <bod
+000131e0: 793e 0d0a 2020 2020 2020 2020 2020 2020  y>..            
+000131f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013200: 203c 703e 6173 6466 3c2f 703e 0d0a 2020   <p>asdf</p>..  
+00013210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013220: 2020 2020 2020 2020 2020 203c 2f62 6f64             </bod
+00013230: 793e 3c2f 6874 6d6c 3e0d 0a20 2020 2020  y></html>..     
+00013240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013250: 2020 2020 2020 2020 2222 220d 0a0d 0a20          """.... 
+00013260: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00013270: 2042 4c41 0d0a 0d0a 2020 2020 2020 2020   BLA....        
+00013280: 2020 2020 2020 2020 2320 7772 6974 6520          # write 
+00013290: 7061 6765 2073 6f75 7263 6520 746f 2068  page source to h
+000132a0: 746d 6c0d 0a20 2020 2020 2020 2020 2020  tml..           
+000132b0: 2020 2020 2069 6620 4661 6c73 653a 0d0a       if False:..
+000132c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000132d0: 2020 2020 2320 4445 5052 4543 4941 5445      # DEPRECIATE
+000132e0: 440d 0a20 2020 2020 2020 2020 2020 2020  D..             
+000132f0: 2020 2020 2020 2070 6174 6820 3d20 6f73         path = os
+00013300: 2e70 6174 682e 6469 726e 616d 6528 6f73  .path.dirname(os
+00013310: 2e70 6174 682e 6162 7370 6174 6828 5f5f  .path.abspath(__
+00013320: 6669 6c65 5f5f 2929 0d0a 2020 2020 2020  file__))..      
+00013330: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+00013340: 6c65 203d 206f 7065 6e28 6f73 2e70 6174  le = open(os.pat
+00013350: 682e 6a6f 696e 2870 6174 682c 2266 696c  h.join(path,"fil
+00013360: 6573 2f6d 796d 6174 7269 782e 6874 6d6c  es/mymatrix.html
+00013370: 2229 2c22 7722 2c65 6e63 6f64 696e 673d  "),"w",encoding=
+00013380: 2775 7466 2d38 2729 0d0a 2020 2020 2020  'utf-8')..      
+00013390: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+000133a0: 6c65 2e77 7269 7465 2864 665f 6874 6d6c  le.write(df_html
+000133b0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+000133c0: 2020 2020 2020 2066 696c 652e 636c 6f73         file.clos
+000133d0: 6528 290d 0a0d 0a20 2020 2020 2020 2020  e()....         
+000133e0: 2020 2023 2051 4465 736b 746f 7053 6572     # QDesktopSer
+000133f0: 7669 6365 732e 6f70 656e 5572 6c28 5155  vices.openUrl(QU
+00013400: 726c 2822 2e2f 6669 6c65 732f 6d61 7472  rl("./files/matr
+00013410: 6978 2e68 746d 6c22 2929 0d0a 0d0a 2020  ix.html"))....  
+00013420: 2020 2020 2020 2020 2020 6966 206d 6f64            if mod
+00013430: 6520 3d3d 2022 7374 616e 6461 7264 223a  e == "standard":
+00013440: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00013450: 2020 6d6f 6465 6c20 3d20 5061 6e64 6173    model = Pandas
+00013460: 4d6f 6465 6c28 6466 5f6d 6572 6765 3229  Model(df_merge2)
+00013470: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00013480: 2020 6d76 6965 7720 3d20 4d61 7472 6978    mview = Matrix
+00013490: 5669 6577 6572 286d 6f64 656c 2c70 6172  Viewer(model,par
+000134a0: 656e 743d 7365 6c66 290d 0a0d 0a20 2020  ent=self)....   
+000134b0: 2020 2020 2020 2020 2020 2020 2023 206d               # m
+000134c0: 7669 6577 2e77 6562 5669 6577 2e73 6574  view.webView.set
+000134d0: 4874 6d6c 2864 665f 6874 6d6c 290d 0a20  Html(df_html).. 
+000134e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000134f0: 6620 6e6f 7420 7365 6c66 2e74 6573 745f  f not self.test_
+00013500: 6d6f 6465 3a0d 0a20 2020 2020 2020 2020  mode:..         
+00013510: 2020 2020 2020 2020 2020 206d 7669 6577             mview
+00013520: 2e73 686f 7728 290d 0a0d 0a0d 0a20 2020  .show()......   
+00013530: 2020 2020 2020 2020 2069 6620 6d6f 6465           if mode
+00013540: 203d 3d20 226c 6174 6578 223a 2023 203c   == "latex": # <
+00013550: 204e 4f54 2059 4554 2053 5550 504f 5254   NOT YET SUPPORT
+00013560: 4544 0d0a 2020 2020 2020 2020 2020 2020  ED..            
+00013570: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
+00013580: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00013590: 6c66 2e63 6f6e 7665 7274 5f64 665f 746f  lf.convert_df_to
+000135a0: 5f74 6578 2864 6629 0d0a 2020 2020 2020  _tex(df)..      
+000135b0: 2020 2020 2020 2020 2020 6578 6365 7074            except
+000135c0: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
+000135d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000135e0: 2020 2020 2020 7365 6c66 2e6e 6f74 6966        self.notif
+000135f0: 7928 7374 7228 6529 2c74 6974 6c65 3d22  y(str(e),title="
+00013600: 4572 726f 7220 6475 7269 6e67 2054 6578  Error during Tex
+00013610: 2043 6f6e 7665 7273 696f 6e22 290d 0a0d   Conversion")...
+00013620: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013630: 2023 2070 7269 6e74 2822 5649 4557 2229   # print("VIEW")
+00013640: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00013650: 2020 2320 7072 696e 7428 6466 5f68 746d    # print(df_htm
+00013660: 6c29 0d0a 0d0a 2020 2020 2020 2020 2020  l)....          
+00013670: 2020 6465 6620 636f 6e76 6572 745f 6578    def convert_ex
+00013680: 6365 6c28 6d79 5f69 7465 6d29 3a0d 0a20  cel(my_item):.. 
+00013690: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+000136a0: 6620 6d79 5f69 7465 6d20 3d3d 2022 3022  f my_item == "0"
+000136b0: 206f 7220 6d79 5f69 7465 6d20 3d3d 2030   or my_item == 0
+000136c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000136d0: 2020 2020 2020 2072 6574 7572 6e20 2220         return " 
+000136e0: 2e2d 2022 2020 2320 2e2d 2022 0d0a 2020  .- "  # .- "..  
+000136f0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00013700: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00013710: 2020 2020 2020 2020 2073 203d 2070 7265           s = pre
+00013720: 7474 7928 6d79 5f69 7465 6d29 2023 2070  tty(my_item) # p
+00013730: 7269 6e74 696e 672e 6c61 7465 7828 6d79  rinting.latex(my
+00013740: 5f69 7465 6d29 2023 202c 6d6f 6465 3d22  _item) # ,mode="
+00013750: 696e 6c69 6e65 2229 2023 2020 6d6f 6465  inline") #  mode
+00013760: 3d22 696e 6c69 6e65 2229 0d0a 2020 2020  ="inline")..    
+00013770: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013780: 7072 696e 7428 7329 0d0a 2020 2020 2020  print(s)..      
+00013790: 2020 2020 2020 2020 2020 2020 2020 7265                re
+000137a0: 7475 726e 2073 0d0a 0d0a 2020 2020 2020  turn s....      
+000137b0: 2020 2020 2020 6966 206d 6f64 6520 3d3d        if mode ==
+000137c0: 2022 6578 6365 6c22 3a0d 0a20 2020 2020   "excel":..     
+000137d0: 2020 2020 2020 2020 2020 2074 7279 3a0d             try:.
+000137e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000137f0: 2020 2020 2065 6669 6c65 6e61 6d65 203d       efilename =
+00013800: 2051 4669 6c65 4469 616c 6f67 2e67 6574   QFileDialog.get
+00013810: 5361 7665 4669 6c65 4e61 6d65 2873 656c  SaveFileName(sel
+00013820: 662c 2027 5361 7665 2066 696c 6527 2c20  f, 'Save file', 
+00013830: 6f73 2e67 6574 6377 6428 292c 2022 4578  os.getcwd(), "Ex
+00013840: 6365 6c20 4669 6c65 7320 282a 2e78 6c73  cel Files (*.xls
+00013850: 7829 2229 5b30 5d0d 0a0d 0a20 2020 2020  x)")[0]....     
+00013860: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00013870: 6620 6566 696c 656e 616d 6520 6973 206e  f efilename is n
+00013880: 6f74 204e 6f6e 6520 616e 6420 6566 696c  ot None and efil
+00013890: 656e 616d 6520 213d 2022 223a 0d0a 2020  ename != "":..  
+000138a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000138b0: 2020 2020 2020 6466 5f66 6f72 5f65 7863        df_for_exc
+000138c0: 656c 203d 2064 665f 666f 725f 6578 6365  el = df_for_exce
+000138d0: 6c2e 6170 706c 796d 6170 2863 6f6e 7665  l.applymap(conve
+000138e0: 7274 5f65 7863 656c 290d 0a20 2020 2020  rt_excel)..     
+000138f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013900: 2020 2023 2070 6174 6820 3d20 6f73 2e70     # path = os.p
+00013910: 6174 682e 6469 726e 616d 6528 6f73 2e70  ath.dirname(os.p
+00013920: 6174 682e 6162 7370 6174 6828 5f5f 6669  ath.abspath(__fi
+00013930: 6c65 5f5f 2929 0d0a 2020 2020 2020 2020  le__))..        
+00013940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013950: 6466 5f66 6f72 5f65 7863 656c 2e74 6f5f  df_for_excel.to_
+00013960: 6578 6365 6c28 6566 696c 656e 616d 6529  excel(efilename)
+00013970: 2023 2022 6669 6c65 732f 466c 6f77 4d61   # "files/FlowMa
+00013980: 7472 6978 5f66 6f72 6d61 7474 6564 2e78  trix_formatted.x
+00013990: 6c73 7822 2929 0d0a 2020 2020 2020 2020  lsx"))..        
+000139a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000139b0: 2320 6466 5f6d 6572 6765 322e 746f 5f65  # df_merge2.to_e
+000139c0: 7863 656c 286f 732e 7061 7468 2e6a 6f69  xcel(os.path.joi
+000139d0: 6e28 7061 7468 2c65 6669 6c65 6e61 6d65  n(path,efilename
+000139e0: 2929 2020 2020 2320 2266 696c 6573 2f46  ))    # "files/F
+000139f0: 6c6f 774d 6174 7269 782e 786c 7378 2229  lowMatrix.xlsx")
+00013a00: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00013a10: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
+00013a20: 7074 696f 6e20 6173 2065 3a0d 0a20 2020  ption as e:..   
+00013a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013a40: 2073 656c 662e 6e6f 7469 6679 2873 7472   self.notify(str
+00013a50: 2865 292c 2074 6974 6c65 3d22 4572 726f  (e), title="Erro
+00013a60: 7220 6475 7269 6e67 2045 7863 656c 2063  r during Excel c
+00013a70: 6f6e 7665 7273 696f 6e22 290d 0a0d 0a20  onversion").... 
+00013a80: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+00013a90: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
+00013aa0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00013ab0: 6e6f 7469 6679 2873 7472 2865 292c 2074  notify(str(e), t
+00013ac0: 6974 6c65 3d22 4572 726f 7220 6475 7269  itle="Error duri
+00013ad0: 6e67 206d 6174 7269 7820 6765 6e65 7261  ng matrix genera
+00013ae0: 7469 6f6e 2229 0d0a 0d0a 2020 2020 6465  tion")....    de
+00013af0: 6620 7265 6d6f 7665 5f69 7465 6d28 7365  f remove_item(se
+00013b00: 6c66 293a 0d0a 0d0a 2020 2020 2020 2020  lf):....        
+00013b10: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+00013b20: 2020 7365 6c65 6374 6564 5f72 6f77 7320    selected_rows 
+00013b30: 3d20 736f 7274 6564 2873 6574 2869 6e64  = sorted(set(ind
+00013b40: 6578 2e72 6f77 2829 2066 6f72 2069 6e64  ex.row() for ind
+00013b50: 6578 2069 6e0d 0a20 2020 2020 2020 2020  ex in..         
+00013b60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013b70: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00013b80: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
+00013b90: 6577 2e73 656c 6563 7465 6449 6e64 6578  ew.selectedIndex
+00013ba0: 6573 2829 2929 0d0a 0d0a 2020 2020 2020  es()))....      
+00013bb0: 2020 2020 2020 6966 206c 656e 2873 656c        if len(sel
+00013bc0: 6563 7465 645f 726f 7773 2920 3d3d 2030  ected_rows) == 0
+00013bd0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00013be0: 2020 2073 656c 662e 6e6f 7469 6679 2822     self.notify("
+00013bf0: 6e6f 2073 656c 6563 7465 6420 726f 7773  no selected rows
+00013c00: 222c 7469 746c 653d 2245 7272 6f72 2229  ",title="Error")
+00013c10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00013c20: 2020 7265 7475 726e 0d0a 0d0a 2020 2020    return....    
+00013c30: 2020 2020 2020 2020 7365 6c65 6374 696f          selectio
+00013c40: 6e20 3d20 7365 6c65 6374 6564 5f72 6f77  n = selected_row
+00013c50: 735b 305d 0d0a 0d0a 2020 2020 2020 2020  s[0]....        
+00013c60: 2020 2020 7965 7320 3d20 2073 656c 662e      yes =  self.
+00013c70: 6173 6b5f 7175 6573 7469 6f6e 2827 272c  ask_question('',
+00013c80: 2241 7265 2079 6f75 2073 7572 6520 796f  "Are you sure yo
+00013c90: 7520 7761 6e74 2074 6f20 7265 6d6f 7665  u want to remove
+00013ca0: 2074 6865 2065 6e74 7279 2027 2573 273f   the entry '%s'?
+00013cb0: 2225 7365 6c66 2e65 6e74 7279 5f64 6174  "%self.entry_dat
+00013cc0: 615b 7365 6c65 6374 696f 6e5d 5b22 7375  a[selection]["su
+00013cd0: 626a 6563 7422 5d29 0d0a 2020 2020 2020  bject"])..      
+00013ce0: 2020 2020 2020 6966 2079 6573 3a0d 0a0d        if yes:...
+00013cf0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013d00: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+00013d10: 2e72 656d 6f76 655f 636f 6e6e 6563 7469  .remove_connecti
+00013d20: 6f6e 2873 656c 662e 656e 7472 795f 6461  on(self.entry_da
+00013d30: 7461 5b73 656c 6563 7469 6f6e 5d5b 2273  ta[selection]["s
+00013d40: 686f 7274 6e61 6d65 225d 290d 0a0d 0a20  hortname"]).... 
+00013d50: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00013d60: 656c 662e 7472 616e 7361 6374 696f 6e56  elf.transactionV
+00013d70: 6965 772e 7265 6d6f 7665 526f 7728 7365  iew.removeRow(se
+00013d80: 6c65 6374 696f 6e29 0d0a 2020 2020 2020  lection)..      
+00013d90: 2020 2020 2020 2020 2020 6465 6c20 7365            del se
+00013da0: 6c66 2e65 6e74 7279 5f64 6174 615b 7365  lf.entry_data[se
+00013db0: 6c65 6374 696f 6e5d 0d0a 0d0a 2020 2020  lection]....    
+00013dc0: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+00013dd0: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
+00013de0: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
+00013df0: 6966 7928 7374 7228 6529 2c20 7469 746c  ify(str(e), titl
+00013e00: 653d 2245 7272 6f72 2229 0d0a 0d0a 2020  e="Error")....  
+00013e10: 2020 2020 2020 7472 793a 0d0a 2020 2020        try:..    
+00013e20: 2020 2020 2020 2020 7365 6c66 2e75 7064          self.upd
+00013e30: 6174 655f 7461 626c 6528 290d 0a0d 0a20  ate_table().... 
+00013e40: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+00013e50: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
+00013e60: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00013e70: 6e6f 7469 6679 2873 7472 2865 292c 2074  notify(str(e), t
+00013e80: 6974 6c65 3d22 4572 726f 7222 290d 0a0d  itle="Error")...
+00013e90: 0a0d 0a20 2020 2064 6566 2063 6f6e 7665  ...    def conve
+00013ea0: 7274 5f64 665f 746f 5f74 6578 2873 656c  rt_df_to_tex(sel
+00013eb0: 662c 6466 293a 0d0a 0d0a 2020 2020 2020  f,df):....      
+00013ec0: 2020 6465 6620 7772 6170 7374 7269 6e67    def wrapstring
+00013ed0: 2873 293a 0d0a 2020 2020 2020 2020 2020  (s):..          
+00013ee0: 2020 2320 7772 6170 7320 7374 7269 6e67    # wraps string
+00013ef0: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+00013f00: 7475 726e 2074 6578 7477 7261 702e 7772  turn textwrap.wr
+00013f10: 6170 2873 2c20 7769 6474 683d 3130 290d  ap(s, width=10).
+00013f20: 0a0d 0a20 2020 2020 2020 2064 6566 2061  ...        def a
+00013f30: 6262 7265 7669 6174 655f 7a65 726f 7328  bbreviate_zeros(
+00013f40: 6d79 5f69 7465 6d29 3a0d 0a20 2020 2020  my_item):..     
+00013f50: 2020 2020 2020 2069 6620 6d79 5f69 7465         if my_ite
+00013f60: 6d20 3d3d 2022 3022 206f 7220 6d79 5f69  m == "0" or my_i
+00013f70: 7465 6d20 3d3d 2030 3a0d 0a20 2020 2020  tem == 0:..     
+00013f80: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00013f90: 6e20 2220 2e2d 2022 2020 2320 2e2d 2022  n " .- "  # .- "
+00013fa0: 0d0a 2020 2020 2020 2020 2020 2020 656c  ..            el
+00013fb0: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
+00013fc0: 2020 2020 206d 795f 6974 656d 203d 2073       my_item = s
+00013fd0: 7472 286d 795f 6974 656d 290d 0a20 2020  tr(my_item)..   
+00013fe0: 2020 2020 2020 2020 2020 2020 206d 6178               max
+00013ff0: 5f6c 656e 203d 2031 300d 0a20 2020 2020  _len = 10..     
+00014000: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
+00014010: 6e28 6d79 5f69 7465 6d29 203e 206d 6178  n(my_item) > max
+00014020: 5f6c 656e 3a0d 0a20 2020 2020 2020 2020  _len:..         
+00014030: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+00014040: 6e20 6d79 5f69 7465 6d5b 3a6d 6178 5f6c  n my_item[:max_l
+00014050: 656e 5d20 2b20 222e 2e2e 220d 0a20 2020  en] + "..."..   
+00014060: 2020 2020 2020 2020 2020 2020 2065 6c73               els
+00014070: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00014080: 2020 2020 2020 2020 7265 7475 726e 206d          return m
+00014090: 795f 6974 656d 0d0a 0d0a 2020 2020 2020  y_item....      
+000140a0: 2020 6466 5f62 6163 6b75 7020 3d20 6466    df_backup = df
+000140b0: 2e63 6f70 7928 290d 0a0d 0a20 2020 2020  .copy()....     
+000140c0: 2020 2064 665f 6c61 7465 7820 3d20 6466     df_latex = df
+000140d0: 2e74 6f5f 6c61 7465 7828 6c6f 6e67 7461  .to_latex(longta
+000140e0: 626c 653d 4661 6c73 652c 2065 7363 6170  ble=False, escap
+000140f0: 653d 4661 6c73 6529 2e72 6570 6c61 6365  e=False).replace
+00014100: 2822 ce94 222c 2022 245c 4465 6c74 6124  ("..", "$\Delta$
+00014110: 2229 0d0a 0d0a 2020 2020 2020 2020 6466  ")....        df
+00014120: 5f6c 6174 6578 203d 2064 665f 6c61 7465  _latex = df_late
+00014130: 782e 7265 706c 6163 6528 225c 5c62 6567  x.replace("\\beg
+00014140: 696e 7b74 6162 756c 6172 7d22 2c20 225c  in{tabular}", "\
+00014150: 5c62 6567 696e 7b74 6162 756c 6172 787d  \begin{tabularx}
+00014160: 7b5c 5c74 6578 7477 6964 7468 7d22 290d  {\\textwidth}").
+00014170: 0a20 2020 2020 2020 2064 665f 6c61 7465  .        df_late
+00014180: 7820 3d20 6466 5f6c 6174 6578 2e72 6570  x = df_latex.rep
+00014190: 6c61 6365 2822 5c5c 656e 647b 7461 6275  lace("\\end{tabu
+000141a0: 6c61 727d 222c 2022 5c5c 656e 647b 7461  lar}", "\\end{ta
+000141b0: 6275 6c61 7278 7d22 290d 0a20 2020 2020  bularx}")..     
+000141c0: 2020 2064 665f 6c61 7465 7820 3d20 225c     df_latex = "\
+000141d0: 5c62 6567 696e 7b73 6d61 6c6c 7d5c 6e22  \begin{small}\n"
+000141e0: 202b 2064 665f 6c61 7465 7820 2b20 225c   + df_latex + "\
+000141f0: 6e5c 656e 647b 736d 616c 6c7d 220d 0a0d  n\end{small}"...
+00014200: 0a20 2020 2020 2020 2064 665f 6c61 7465  .        df_late
+00014210: 7820 3d20 6466 5f6c 6174 6578 2e72 6570  x = df_latex.rep
+00014220: 6c61 6365 2822 5c5c 6c65 6674 2822 2c20  lace("\\left(", 
+00014230: 2228 2229 0d0a 2020 2020 2020 2020 6466  "(")..        df
+00014240: 5f6c 6174 6578 203d 2064 665f 6c61 7465  _latex = df_late
+00014250: 782e 7265 706c 6163 6528 225c 5c72 6967  x.replace("\\rig
+00014260: 6874 2922 2c20 2229 2229 0d0a 0d0a 2020  ht)", ")")....  
+00014270: 2020 2020 2020 6466 5f6c 6174 6578 203d        df_latex =
+00014280: 2064 665f 6c61 7465 782e 7265 706c 6163   df_latex.replac
+00014290: 6528 227b 6c22 2c20 227b 4c7b 3363 6d7d  e("{l", "{L{3cm}
+000142a0: 2229 0d0a 0d0a 2020 2020 2020 2020 6466  ")....        df
+000142b0: 5f6c 6174 6578 203d 2022 2222 0d0a 5c5c  _latex = """..\\
+000142c0: 646f 6375 6d65 6e74 636c 6173 735b 6133  documentclass[a3
+000142d0: 7061 7065 722c 6c61 6e64 7363 6170 655d  paper,landscape]
+000142e0: 7b61 7274 6963 6c65 7d0d 0a5c 5c75 7365  {article}..\\use
+000142f0: 7061 636b 6167 657b 626f 6f6b 7461 6273  package{booktabs
+00014300: 7d0d 0a5c 5c75 7365 7061 636b 6167 657b  }..\\usepackage{
+00014310: 6164 6a75 7374 626f 787d 0d0a 5c5c 7573  adjustbox}..\\us
+00014320: 6570 6163 6b61 6765 5b74 6162 6c65 5d7b  epackage[table]{
+00014330: 7863 6f6c 6f72 7d0d 0a5c 5c75 7365 7061  xcolor}..\\usepa
+00014340: 636b 6167 657b 6c6f 6e67 7461 626c 657d  ckage{longtable}
+00014350: 0d0a 5c5c 7573 6570 6163 6b61 6765 7b74  ..\\usepackage{t
+00014360: 6162 756c 6172 782c 7261 6767 6564 3265  abularx,ragged2e
+00014370: 7d0d 0a5c 5c64 6566 696e 6563 6f6c 6f72  }..\\definecolor
+00014380: 7b47 7261 797d 7b67 7261 797d 7b30 2e39  {Gray}{gray}{0.9
+00014390: 307d 0d0a 5c5c 6465 6669 6e65 636f 6c6f  0}..\\definecolo
+000143a0: 727b 4c69 6768 7447 7261 797d 7b67 7261  r{LightGray}{gra
+000143b0: 797d 7b30 2e39 357d 0d0a 5c5c 6465 6669  y}{0.95}..\\defi
+000143c0: 6e65 636f 6c6f 727b 5768 6974 657d 7b72  necolor{White}{r
+000143d0: 6762 7d7b 312c 312c 317d 0d0a 0d0a 5c5c  gb}{1,1,1}....\\
+000143e0: 6e65 7763 6f6c 756d 6e74 7970 657b 677d  newcolumntype{g}
+000143f0: 7b3e 7b5c 5c63 6f6c 756d 6e63 6f6c 6f72  {>{\\columncolor
+00014400: 7b57 6869 7465 7d5c 5c61 7272 6179 6261  {White}\\arrayba
+00014410: 636b 736c 6173 687d 4c7d 2025 0d0a 5c5c  ckslash}L} %..\\
+00014420: 6e65 7763 6f6c 756d 6e74 7970 657b 6c7d  newcolumntype{l}
+00014430: 7b3e 7b5c 5c63 6f6c 756d 6e63 6f6c 6f72  {>{\\columncolor
+00014440: 7b57 6869 7465 7d5c 5c61 7272 6179 6261  {White}\\arrayba
+00014450: 636b 736c 6173 687d 707b 3363 6d7d 7d20  ckslash}p{3cm}} 
+00014460: 2563 656e 7465 7265 6420 2258 2220 636f  %centered "X" co
+00014470: 6c75 6d6e 0d0a 5c5c 6e65 7763 6f6c 756d  lumn..\\newcolum
+00014480: 6e74 7970 657b 4c7d 5b31 5d7b 3e7b 5c5c  ntype{L}[1]{>{\\
+00014490: 7261 6767 6564 7269 6768 745c 5c61 7272  raggedright\\arr
+000144a0: 6179 6261 636b 736c 6173 687d 707b 5c5c  aybackslash}p{\\
+000144b0: 6469 6d65 7870 7223 312d 325c 5c74 6162  dimexpr#1-2\\tab
+000144c0: 636f 6c73 6570 2d32 5c5c 6172 7261 7972  colsep-2\\arrayr
+000144d0: 756c 6577 6964 7468 2b2e 3231 7074 7d7d  ulewidth+.21pt}}
+000144e0: 0d0a 0d0a 5c5c 7573 6570 6163 6b61 6765  ....\\usepackage
+000144f0: 5b6c 6566 743d 3163 6d2c 7269 6768 743d  [left=1cm,right=
+00014500: 312e 3563 6d5d 7b67 656f 6d65 7472 797d  1.5cm]{geometry}
+00014510: 0d0a 0d0a 5c5c 6265 6769 6e7b 646f 6375  ....\\begin{docu
+00014520: 6d65 6e74 7d5c 6e22 2222 202b 2064 665f  ment}\n""" + df_
+00014530: 6c61 7465 7820 2020 2b20 225c 6e5c 5c65  latex   + "\n\\e
+00014540: 6e64 7b64 6f63 756d 656e 747d 220d 0a0d  nd{document}"...
+00014550: 0a20 2020 2020 2020 2070 7970 6572 636c  .        pypercl
+00014560: 6970 2e63 6f70 7928 6466 5f6c 6174 6578  ip.copy(df_latex
+00014570: 290d 0a20 2020 2020 2020 2023 7365 6c66  )..        #self
+00014580: 2e6e 6f74 6966 7928 6d65 7373 6167 653d  .notify(message=
+00014590: 224c 6154 6558 2063 6f64 6520 636f 7069  "LaTeX code copi
+000145a0: 6564 2074 6f20 636c 6970 626f 6172 642e  ed to clipboard.
+000145b0: 2048 6176 6520 6675 6e21 222c 2074 6974   Have fun!", tit
+000145c0: 6c65 3d22 4861 7665 2066 756e 2229 0d0a  le="Have fun")..
+000145d0: 2020 2020 2020 2020 7365 6c66 2e73 7461          self.sta
+000145e0: 7475 7342 6172 2829 2e73 686f 774d 6573  tusBar().showMes
+000145f0: 7361 6765 2822 4c61 5465 5820 636f 6465  sage("LaTeX code
+00014600: 2063 6f70 6965 6420 746f 2063 6c69 7062   copied to clipb
+00014610: 6f61 7264 2e20 4861 7665 2066 756e 2122  oard. Have fun!"
+00014620: 290d 0a0d 0a0d 0a20 2020 2020 2020 2023  )......        #
+00014630: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a   -------------..
+00014640: 2020 2020 2020 2020 6966 2046 616c 7365          if False
+00014650: 3a20 2320 4445 5052 4943 4154 4544 0d0a  : # DEPRICATED..
+00014660: 2020 2020 2020 2020 2020 2020 7472 793a              try:
+00014670: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00014680: 2020 2020 6672 6f6d 2070 6466 6c61 7465      from pdflate
+00014690: 7820 696d 706f 7274 2050 4446 4c61 5465  x import PDFLaTe
+000146a0: 580d 0a20 2020 2020 2020 2020 2020 2020  X..             
+000146b0: 2020 2070 6174 6820 3d20 6f73 2e70 6174     path = os.pat
+000146c0: 682e 6469 726e 616d 6528 6f73 2e70 6174  h.dirname(os.pat
+000146d0: 682e 6162 7370 6174 6828 5f5f 6669 6c65  h.abspath(__file
+000146e0: 5f5f 2929 0d0a 2020 2020 2020 2020 2020  __))..          
+000146f0: 2020 2020 2020 6d79 5f66 696c 6520 3d20        my_file = 
+00014700: 6f73 2e70 6174 682e 6a6f 696e 2870 6174  os.path.join(pat
+00014710: 682c 226d 796d 6174 7269 7822 290d 0a0d  h,"mymatrix")...
+00014720: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014730: 2066 696c 6520 3d20 6f70 656e 286d 795f   file = open(my_
+00014740: 6669 6c65 2c20 2277 2229 0d0a 2020 2020  file, "w")..    
+00014750: 2020 2020 2020 2020 2020 2020 6669 6c65              file
+00014760: 2e77 7269 7465 2822 2222 0d0a 2020 2020  .write("""..    
+00014770: 2020 2020 5c5c 646f 6375 6d65 6e74 636c      \\documentcl
+00014780: 6173 735b 6133 7061 7065 722c 6c61 6e64  ass[a3paper,land
+00014790: 7363 6170 655d 7b61 7274 6963 6c65 7d0d  scape]{article}.
+000147a0: 0a20 2020 2020 2020 205c 5c75 7365 7061  .        \\usepa
+000147b0: 636b 6167 657b 626f 6f6b 7461 6273 7d0d  ckage{booktabs}.
+000147c0: 0a20 2020 2020 2020 205c 5c75 7365 7061  .        \\usepa
+000147d0: 636b 6167 657b 6164 6a75 7374 626f 787d  ckage{adjustbox}
+000147e0: 0d0a 2020 2020 2020 2020 5c5c 7573 6570  ..        \\usep
+000147f0: 6163 6b61 6765 5b74 6162 6c65 5d7b 7863  ackage[table]{xc
+00014800: 6f6c 6f72 7d0d 0a20 2020 2020 2020 205c  olor}..        \
+00014810: 5c75 7365 7061 636b 6167 657b 6c6f 6e67  \usepackage{long
+00014820: 7461 626c 657d 0d0a 2020 2020 2020 2020  table}..        
+00014830: 5c5c 7573 6570 6163 6b61 6765 7b74 6162  \\usepackage{tab
+00014840: 756c 6172 782c 7261 6767 6564 3265 7d0d  ularx,ragged2e}.
+00014850: 0a20 2020 2020 2020 205c 5c64 6566 696e  .        \\defin
+00014860: 6563 6f6c 6f72 7b47 7261 797d 7b67 7261  ecolor{Gray}{gra
+00014870: 797d 7b30 2e39 307d 0d0a 2020 2020 2020  y}{0.90}..      
+00014880: 2020 5c5c 6465 6669 6e65 636f 6c6f 727b    \\definecolor{
+00014890: 4c69 6768 7447 7261 797d 7b67 7261 797d  LightGray}{gray}
+000148a0: 7b30 2e39 357d 0d0a 2020 2020 2020 2020  {0.95}..        
+000148b0: 5c5c 6465 6669 6e65 636f 6c6f 727b 5768  \\definecolor{Wh
+000148c0: 6974 657d 7b72 6762 7d7b 312c 312c 317d  ite}{rgb}{1,1,1}
+000148d0: 0d0a 0d0a 2020 2020 2020 2020 5c5c 6e65  ....        \\ne
+000148e0: 7763 6f6c 756d 6e74 7970 657b 677d 7b3e  wcolumntype{g}{>
+000148f0: 7b5c 5c63 6f6c 756d 6e63 6f6c 6f72 7b57  {\\columncolor{W
+00014900: 6869 7465 7d5c 5c61 7272 6179 6261 636b  hite}\\arrayback
+00014910: 736c 6173 687d 4c7d 2025 0d0a 2020 2020  slash}L} %..    
+00014920: 2020 2020 5c5c 6e65 7763 6f6c 756d 6e74      \\newcolumnt
+00014930: 7970 657b 6c7d 7b3e 7b5c 5c63 6f6c 756d  ype{l}{>{\\colum
+00014940: 6e63 6f6c 6f72 7b57 6869 7465 7d5c 5c61  ncolor{White}\\a
+00014950: 7272 6179 6261 636b 736c 6173 687d 707b  rraybackslash}p{
+00014960: 3363 6d7d 7d20 2563 656e 7465 7265 6420  3cm}} %centered 
+00014970: 2258 2220 636f 6c75 6d6e 0d0a 2020 2020  "X" column..    
+00014980: 2020 2020 5c5c 6e65 7763 6f6c 756d 6e74      \\newcolumnt
+00014990: 7970 657b 4c7d 5b31 5d7b 3e7b 5c5c 7261  ype{L}[1]{>{\\ra
+000149a0: 6767 6564 7269 6768 745c 5c61 7272 6179  ggedright\\array
+000149b0: 6261 636b 736c 6173 687d 707b 5c5c 6469  backslash}p{\\di
+000149c0: 6d65 7870 7223 312d 325c 5c74 6162 636f  mexpr#1-2\\tabco
+000149d0: 6c73 6570 2d32 5c5c 6172 7261 7972 756c  lsep-2\\arrayrul
+000149e0: 6577 6964 7468 2b2e 3231 7074 7d7d 0d0a  ewidth+.21pt}}..
+000149f0: 0d0a 2020 2020 2020 2020 5c5c 7573 6570  ..        \\usep
+00014a00: 6163 6b61 6765 5b6c 6566 743d 3163 6d2c  ackage[left=1cm,
+00014a10: 7269 6768 743d 312e 3563 6d5d 7b67 656f  right=1.5cm]{geo
+00014a20: 6d65 7472 797d 0d0a 0d0a 2020 2020 2020  metry}....      
+00014a30: 2020 5c5c 6265 6769 6e7b 646f 6375 6d65    \\begin{docume
+00014a40: 6e74 7d22 2222 290d 0a20 2020 2020 2020  nt}""")..       
+00014a50: 2020 2020 2020 2020 2066 696c 652e 7772           file.wr
+00014a60: 6974 6528 6466 5f6c 6174 6578 290d 0a20  ite(df_latex).. 
+00014a70: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00014a80: 696c 652e 7772 6974 6528 2222 220d 0a20  ile.write(""".. 
+00014a90: 2020 2020 2020 205c 5c65 6e64 7b64 6f63         \\end{doc
+00014aa0: 756d 656e 747d 2222 2229 0d0a 2020 2020  ument}""")..    
+00014ab0: 2020 2020 2020 2020 2020 2020 6669 6c65              file
+00014ac0: 2e63 6c6f 7365 2829 0d0a 2020 2020 2020  .close()..      
+00014ad0: 2020 2020 2020 2020 2020 2320 7064 666c            # pdfl
+00014ae0: 203d 2050 4446 4c61 5465 582e 6672 6f6d   = PDFLaTeX.from
+00014af0: 5f74 6578 6669 6c65 2827 6d79 5f74 6578  _texfile('my_tex
+00014b00: 6669 6c65 2e74 6578 2729 0d0a 2020 2020  file.tex')..    
+00014b10: 2020 2020 2020 2020 2020 2020 2320 7064              # pd
+00014b20: 662c 206c 6f67 2c20 636f 6d70 6c65 7465  f, log, complete
+00014b30: 645f 7072 6f63 6573 7320 3d20 7064 666c  d_process = pdfl
+00014b40: 2e63 7265 6174 655f 7064 6628 6b65 6570  .create_pdf(keep
+00014b50: 5f70 6466 5f66 696c 653d 5472 7565 2c20  _pdf_file=True, 
+00014b60: 6b65 6570 5f6c 6f67 5f66 696c 653d 5472  keep_log_file=Tr
+00014b70: 7565 290d 0a20 2020 2020 2020 2020 2020  ue)..           
+00014b80: 2020 2020 2023 206f 732e 706f 7065 6e28       # os.popen(
+00014b90: 2270 6466 6c61 7465 7820 2573 2220 2520  "pdflatex %s" % 
+00014ba0: 286f 732e 6765 7463 7764 2829 2b22 2f6d  (os.getcwd()+"/m
+00014bb0: 795f 7465 7866 696c 652e 7465 7822 2929  y_texfile.tex"))
+00014bc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00014bd0: 2020 696d 706f 7274 2073 7562 7072 6f63    import subproc
+00014be0: 6573 730d 0a20 2020 2020 2020 2020 2020  ess..           
+00014bf0: 2020 2020 2070 6174 6820 3d20 6f73 2e70       path = os.p
+00014c00: 6174 682e 6469 726e 616d 6528 6f73 2e70  ath.dirname(os.p
+00014c10: 6174 682e 6162 7370 6174 6828 5f5f 6669  ath.abspath(__fi
+00014c20: 6c65 5f5f 2929 0d0a 2020 2020 2020 2020  le__))..        
+00014c30: 2020 2020 2020 2020 7375 6270 726f 6365          subproce
+00014c40: 7373 2e72 756e 2822 7064 666c 6174 6578  ss.run("pdflatex
+00014c50: 2025 7322 2025 2028 6f73 2e70 6174 682e   %s" % (os.path.
+00014c60: 6a6f 696e 2870 6174 682c 226d 796d 6174  join(path,"mymat
+00014c70: 7269 782e 7465 7822 2929 292e 6368 6563  rix.tex"))).chec
+00014c80: 6b5f 7265 7475 726e 636f 6465 2829 0d0a  k_returncode()..
+00014c90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00014ca0: 2020 236f 732e 7374 6172 7466 696c 6528    #os.startfile(
+00014cb0: 6f73 2e67 6574 6377 6428 2920 2b20 225c  os.getcwd() + "\
+00014cc0: 5c6d 796d 6174 7269 782e 7064 6622 290d  \mymatrix.pdf").
+00014cd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00014ce0: 2074 7279 3a0d 0a20 2020 2020 2020 2020   try:..         
+00014cf0: 2020 2020 2020 2020 2020 2023 2073 6875             # shu
+00014d00: 7469 6c2e 726d 7472 6565 286f 732e 6765  til.rmtree(os.ge
+00014d10: 7463 7764 2829 2b22 5c5c 6669 6c65 7322  tcwd()+"\\files"
+00014d20: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00014d30: 2020 2020 2020 2023 206f 732e 6d6b 6469         # os.mkdi
+00014d40: 7228 6f73 2e67 6574 6377 6428 292b 225c  r(os.getcwd()+"\
+00014d50: 5c66 696c 6573 2229 0d0a 0d0a 2020 2020  \files")....    
+00014d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014d70: 7061 7468 203d 206f 732e 7061 7468 2e64  path = os.path.d
+00014d80: 6972 6e61 6d65 286f 732e 7061 7468 2e61  irname(os.path.a
+00014d90: 6273 7061 7468 285f 5f66 696c 655f 5f29  bspath(__file__)
+00014da0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+00014db0: 2020 2020 2020 2073 6875 7469 6c2e 6d6f         shutil.mo
+00014dc0: 7665 2870 6174 682b 225c 5c6d 796d 6174  ve(path+"\\mymat
+00014dd0: 7269 782e 7465 7822 202c 2070 6174 682b  rix.tex" , path+
+00014de0: 2022 5c5c 6669 6c65 735c 5c6d 796d 6174   "\\files\\mymat
+00014df0: 7269 782e 7465 7822 290d 0a20 2020 2020  rix.tex")..     
+00014e00: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00014e10: 6875 7469 6c2e 6d6f 7665 2870 6174 6820  hutil.move(path 
+00014e20: 2b20 225c 5c6d 796d 6174 7269 782e 6c6f  + "\\mymatrix.lo
+00014e30: 6722 2c20 7061 7468 202b 2022 5c5c 6669  g", path + "\\fi
+00014e40: 6c65 735c 5c6d 796d 6174 7269 782e 6c6f  les\\mymatrix.lo
+00014e50: 6722 290d 0a20 2020 2020 2020 2020 2020  g")..           
+00014e60: 2020 2020 2020 2020 2073 6875 7469 6c2e           shutil.
+00014e70: 6d6f 7665 2870 6174 6820 2b20 225c 5c6d  move(path + "\\m
+00014e80: 796d 6174 7269 782e 6175 7822 2c20 7061  ymatrix.aux", pa
+00014e90: 7468 202b 2022 5c5c 6669 6c65 735c 5c5c  th + "\\files\\\
+00014ea0: 6d79 6d61 7472 6978 2e61 7578 2229 0d0a  mymatrix.aux")..
+00014eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014ec0: 2020 2020 7368 7574 696c 2e6d 6f76 6528      shutil.move(
+00014ed0: 7061 7468 202b 2022 5c5c 6d79 6d61 7472  path + "\\mymatr
+00014ee0: 6978 2e70 6466 222c 2070 6174 6820 2b20  ix.pdf", path + 
+00014ef0: 225c 5c66 696c 6573 5c5c 6d79 6d61 7472  "\\files\\mymatr
+00014f00: 6978 2e70 6466 2229 0d0a 2020 2020 2020  ix.pdf")..      
+00014f10: 2020 2020 2020 2020 2020 2020 2020 2373                #s
+00014f20: 6875 7469 6c2e 636f 7079 286f 732e 6765  hutil.copy(os.ge
+00014f30: 7463 7764 2829 202b 2022 5c5c 6669 6c65  tcwd() + "\\file
+00014f40: 735c 5c6d 796d 6174 7269 782e 6874 6d6c  s\\mymatrix.html
+00014f50: 222c 6f73 2e67 6574 6377 6428 2920 2b20  ",os.getcwd() + 
+00014f60: 225c 5c66 696c 6573 5c5c 6d79 6d61 7472  "\\files\\mymatr
+00014f70: 6978 2e68 746d 6c22 290d 0a20 2020 2020  ix.html")..     
+00014f80: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00014f90: 7368 7574 696c 2e63 6f70 7928 6f73 2e67  shutil.copy(os.g
+00014fa0: 6574 6377 6428 2920 2b20 225c 5c66 696c  etcwd() + "\\fil
+00014fb0: 6573 5c5c 6d79 7374 796c 652e 6373 7322  es\\mystyle.css"
+00014fc0: 2c20 6f73 2e67 6574 6377 6428 2920 2b20  , os.getcwd() + 
+00014fd0: 225c 5c66 696c 6573 5c5c 6d79 7374 796c  "\\files\\mystyl
+00014fe0: 652e 6373 7322 290d 0a20 2020 2020 2020  e.css")..       
+00014ff0: 2020 2020 2020 2020 2065 7863 6570 7420           except 
+00015000: 4578 6365 7074 696f 6e20 6173 2065 3a0d  Exception as e:.
+00015010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015020: 2020 2020 2073 656c 662e 6e6f 7469 6679       self.notify
+00015030: 286d 6573 7361 6765 3d73 7472 2865 292c  (message=str(e),
+00015040: 7469 746c 653d 2241 6e20 4572 726f 7220  title="An Error 
+00015050: 6f63 6375 7272 6564 2e2e 2e28 4944 2031  occurred...(ID 1
+00015060: 3330 3829 2229 0d0a 0d0a 2020 2020 2020  308)")....      
+00015070: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
+00015080: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
+00015090: 2020 2020 2020 2020 2020 2020 2020 7365                se
+000150a0: 6c66 2e6e 6f74 6966 7928 6d65 7373 6167  lf.notify(messag
+000150b0: 653d 7374 7228 6529 2c74 6974 6c65 3d22  e=str(e),title="
+000150c0: 416e 2045 7272 6f72 206f 6363 7572 7265  An Error occurre
+000150d0: 642e 2e2e 2849 4420 3133 3131 2922 290d  d...(ID 1311)").
+000150e0: 0a20 2020 2020 2020 2020 2020 2023 202d  .            # -
+000150f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 0d0a  ------------....
+00015100: 2020 2020 2020 2020 2020 2020 7064 2e6f              pd.o
+00015110: 7074 696f 6e73 2e64 6973 706c 6179 2e6d  ptions.display.m
+00015120: 6178 5f63 6f6c 7769 6474 6820 3d20 320d  ax_colwidth = 2.
+00015130: 0a0d 0a20 2020 2020 2020 2020 2020 2064  ...            d
+00015140: 665f 6469 7370 6c61 7920 3d20 6466 5f62  f_display = df_b
+00015150: 6163 6b75 702e 6170 706c 796d 6170 2861  ackup.applymap(a
+00015160: 6262 7265 7669 6174 655f 7a65 726f 7329  bbreviate_zeros)
+00015170: 2e74 6f5f 7374 7269 6e67 286c 696e 655f  .to_string(line_
+00015180: 7769 6474 683d 4e6f 6e65 292e 7265 706c  width=None).repl
+00015190: 6163 6528 225c 5f22 2c20 225f 2229 0d0a  ace("\_", "_")..
+000151a0: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+000151b0: 7365 6c66 2e70 6172 656e 742e 7061 7265  self.parent.pare
+000151c0: 6e74 4170 702e 6765 7446 6f72 6d28 2241  ntApp.getForm("A
+000151d0: 4747 525f 464c 4f57 2229 2e64 6174 615f  GGR_FLOW").data_
+000151e0: 626f 782e 7661 6c75 6573 203d 2064 665f  box.values = df_
+000151f0: 6469 7370 6c61 792e 7370 6c69 7428 225c  display.split("\
+00015200: 6e22 290d 0a20 2020 2020 2020 2020 2020  n")..           
+00015210: 2023 2073 656c 662e 7061 7265 6e74 2e70   # self.parent.p
+00015220: 6172 656e 7441 7070 2e73 7769 7463 6846  arentApp.switchF
+00015230: 6f72 6d28 2241 4747 525f 464c 4f57 2229  orm("AGGR_FLOW")
+00015240: 0d0a 0d0a 0d0a 2020 2020 6465 6620 6765  ......    def ge
+00015250: 6e5f 636f 6465 2873 656c 662c 7368 6f77  n_code(self,show
+00015260: 5f6e 6f74 6966 6963 6174 696f 6e3d 4661  _notification=Fa
+00015270: 6c73 6529 3a0d 0a0d 0a20 2020 2020 2020  lse):....       
+00015280: 2063 6f64 6520 3d20 2222 0d0a 2020 2020   code = ""..    
+00015290: 2020 2020 636f 6465 202b 3d20 2266 726f      code += "fro
+000152a0: 6d20 7366 6374 6f6f 6c73 2069 6d70 6f72  m sfctools impor
+000152b0: 7420 466c 6f77 4d61 7472 6978 205c 6e69  t FlowMatrix \ni
+000152c0: 6d70 6f72 7420 6e75 6d70 7920 6173 206e  mport numpy as n
+000152d0: 705c 6e22 0d0a 2020 2020 2020 2020 636f  p\n"..        co
+000152e0: 6465 202b 3d20 2266 726f 6d20 7366 6374  de += "from sfct
+000152f0: 6f6f 6c73 2069 6d70 6f72 7420 4261 6c61  ools import Bala
+00015300: 6e63 6545 6e74 7279 2c41 6363 6f75 6e74  nceEntry,Account
+00015310: 735c 6e22 0d0a 2020 2020 2020 2020 636f  s\n"..        co
+00015320: 6465 202b 3d20 2266 726f 6d20 7366 6374  de += "from sfct
+00015330: 6f6f 6c73 2069 6d70 6f72 7420 4361 7368  ools import Cash
+00015340: 466c 6f77 456e 7472 795c 6e22 0d0a 2020  FlowEntry\n"..  
+00015350: 2020 2020 2020 636f 6465 202b 3d20 2266        code += "f
+00015360: 726f 6d20 7366 6374 6f6f 6c73 2069 6d70  rom sfctools imp
+00015370: 6f72 7420 4943 5345 6e74 7279 5c6e 220d  ort ICSEntry\n".
+00015380: 0a20 2020 2020 2020 2063 6f64 6520 2b3d  .        code +=
+00015390: 2022 4341 203d 2041 6363 6f75 6e74 732e   "CA = Accounts.
+000153a0: 4341 5c6e 4b41 203d 2041 6363 6f75 6e74  CA\nKA = Account
+000153b0: 732e 4b41 5c6e 5c6e 220d 0a0d 0a20 2020  s.KA\n\n"....   
+000153c0: 2020 2020 2073 7562 6a65 6374 735f 636f       subjects_co
+000153d0: 756e 7420 3d20 6465 6661 756c 7464 6963  unt = defaultdic
+000153e0: 7428 6c61 6d62 6461 3a20 302e 3029 0d0a  t(lambda: 0.0)..
+000153f0: 0d0a 2020 2020 2020 2020 666f 7220 6669  ..        for fi
+00015400: 6c65 6461 7461 2069 6e20 7365 6c66 2e65  ledata in self.e
+00015410: 6e74 7279 5f64 6174 613a 0d0a 2020 2020  ntry_data:..    
+00015420: 2020 2020 2020 2020 6167 656e 7431 203d          agent1 =
+00015430: 2066 696c 6564 6174 615b 2261 6765 6e74   filedata["agent
+00015440: 3122 5d0d 0a20 2020 2020 2020 2020 2020  1"]..           
+00015450: 2061 6765 6e74 3220 3d20 6669 6c65 6461   agent2 = fileda
+00015460: 7461 5b22 6167 656e 7432 225d 0d0a 0d0a  ta["agent2"]....
+00015470: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+00015480: 6765 6e74 3120 3d3d 2061 6765 6e74 323a  gent1 == agent2:
+00015490: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000154a0: 2020 6167 656e 7432 203d 2022 6f74 6865    agent2 = "othe
+000154b0: 725f 2220 2b20 6167 656e 7432 0d0a 0d0a  r_" + agent2....
+000154c0: 2020 2020 2020 2020 2020 2020 6131 203d              a1 =
+000154d0: 2066 696c 6564 6174 615b 2261 3122 5d20   filedata["a1"] 
+000154e0: 2023 202b 2022 5c6e 220d 0a20 2020 2020   # + "\n"..     
+000154f0: 2020 2020 2020 2065 3120 3d20 6669 6c65         e1 = file
+00015500: 6461 7461 5b22 6531 225d 2020 2320 2b20  data["e1"]  # + 
+00015510: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
+00015520: 2020 6c31 203d 2066 696c 6564 6174 615b    l1 = filedata[
+00015530: 226c 3122 5d20 2023 202b 2022 5c6e 220d  "l1"]  # + "\n".
+00015540: 0a20 2020 2020 2020 2020 2020 2061 3220  .            a2 
+00015550: 3d20 6669 6c65 6461 7461 5b22 6132 225d  = filedata["a2"]
+00015560: 2020 2320 2b20 225c 6e22 0d0a 2020 2020    # + "\n"..    
+00015570: 2020 2020 2020 2020 6532 203d 2066 696c          e2 = fil
+00015580: 6564 6174 615b 2265 3222 5d20 2023 202b  edata["e2"]  # +
+00015590: 2022 5c6e 220d 0a20 2020 2020 2020 2020   "\n"..         
+000155a0: 2020 206c 3220 3d20 6669 6c65 6461 7461     l2 = filedata
+000155b0: 5b22 6c32 225d 2020 2320 2b20 225c 6e22  ["l2"]  # + "\n"
+000155c0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+000155d0: 666c 6f77 5f63 6865 636b 203d 2054 7275  flow_check = Tru
+000155e0: 650d 0a20 2020 2020 2020 2020 2020 2070  e..            p
+000155f0: 7269 6e74 2822 464c 4f57 2043 4845 434b  rint("FLOW CHECK
+00015600: 222c 2066 696c 6564 6174 615b 2273 686f  ", filedata["sho
+00015610: 7274 6e61 6d65 225d 2c66 696c 6564 6174  rtname"],filedat
+00015620: 615b 226c 6f67 2074 7261 6e73 6163 7469  a["log transacti
+00015630: 6f6e 225d 290d 0a20 2020 2020 2020 2020  on"])..         
+00015640: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00015650: 2866 696c 6564 6174 615b 226c 6f67 2074  (filedata["log t
+00015660: 7261 6e73 6163 7469 6f6e 225d 2c73 7472  ransaction"],str
+00015670: 2920 616e 6420 6669 6c65 6461 7461 5b22  ) and filedata["
+00015680: 6c6f 6720 7472 616e 7361 6374 696f 6e22  log transaction"
+00015690: 5d2e 7374 7269 7028 2920 3d3d 2022 5472  ].strip() == "Tr
+000156a0: 7565 223a 0d0a 2020 2020 2020 2020 2020  ue":..          
+000156b0: 2020 2020 2020 2320 626f 6f6c 2866 696c        # bool(fil
+000156c0: 6564 6174 615b 226c 6f67 2074 7261 6e73  edata["log trans
+000156d0: 6163 7469 6f6e 225d 290d 0a20 2020 2020  action"])..     
+000156e0: 2020 2020 2020 2020 2020 2066 6c6f 775f             flow_
+000156f0: 6368 6563 6b20 3d20 5472 7565 0d0a 2020  check = True..  
+00015700: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+00015710: 696e 7428 666c 6f77 5f63 6865 636b 290d  int(flow_check).
+00015720: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+00015730: 6620 6973 696e 7374 616e 6365 2866 696c  f isinstance(fil
+00015740: 6564 6174 615b 226c 6f67 2074 7261 6e73  edata["log trans
+00015750: 6163 7469 6f6e 225d 2c73 7472 2920 616e  action"],str) an
+00015760: 6420 6669 6c65 6461 7461 5b22 6c6f 6720  d filedata["log 
+00015770: 7472 616e 7361 6374 696f 6e22 5d2e 7374  transaction"].st
+00015780: 7269 7028 2920 3d3d 2022 4661 6c73 6522  rip() == "False"
+00015790: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000157a0: 2020 2023 2062 6f6f 6c28 6669 6c65 6461     # bool(fileda
+000157b0: 7461 5b22 6c6f 6720 7472 616e 7361 6374  ta["log transact
+000157c0: 696f 6e22 5d29 0d0a 2020 2020 2020 2020  ion"])..        
+000157d0: 2020 2020 2020 2020 666c 6f77 5f63 6865          flow_che
+000157e0: 636b 203d 2046 616c 7365 0d0a 2020 2020  ck = False..    
+000157f0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00015800: 7428 666c 6f77 5f63 6865 636b 290d 0a20  t(flow_check).. 
+00015810: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00015820: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00015830: 2020 666c 6f77 5f63 6865 636b 203d 2066    flow_check = f
+00015840: 696c 6564 6174 615b 226c 6f67 2074 7261  iledata["log tra
+00015850: 6e73 6163 7469 6f6e 225d 0d0a 2020 2020  nsaction"]..    
+00015860: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00015870: 7428 666c 6f77 5f63 6865 636b 290d 0a20  t(flow_check).. 
+00015880: 2020 2020 2020 2020 2020 2023 7072 696e             #prin
+00015890: 7428 2246 4c4f 5720 4348 4543 4b22 2c20  t("FLOW CHECK", 
+000158a0: 6669 6c65 6e61 6d65 2c20 666c 6f77 5f63  filename, flow_c
+000158b0: 6865 636b 290d 0a20 2020 2020 2020 2020  heck)..         
+000158c0: 2020 2070 7269 6e74 2822 7479 7065 222c     print("type",
+000158d0: 2074 7970 6528 666c 6f77 5f63 6865 636b   type(flow_check
+000158e0: 2929 0d0a 0d0a 2020 2020 2020 2020 2020  ))....          
+000158f0: 2020 6b69 6e64 203d 2066 696c 6564 6174    kind = filedat
+00015900: 615b 226b 696e 6422 5d0d 0a0d 0a20 2020  a["kind"]....   
+00015910: 2020 2020 2020 2020 2023 7375 626a 6563           #subjec
+00015920: 7420 3d20 2066 696c 6564 6174 615b 2273  t =  filedata["s
+00015930: 7562 6a65 6374 225d 2e72 6570 6c61 6365  ubject"].replace
+00015940: 2822 2022 2c22 5f22 2920 2b20 225f 2220  (" ","_") + "_" 
+00015950: 2b20 6669 6c65 6461 7461 5b22 7368 6f72  + filedata["shor
+00015960: 746e 616d 6522 2e72 6570 6c61 6365 2822  tname".replace("
+00015970: 2022 2c22 5f22 295d 2e6c 6f77 6572 2829   ","_")].lower()
+00015980: 0d0a 2020 2020 2020 2020 2020 2020 7375  ..            su
+00015990: 626a 6563 7420 3d20 2066 696c 6564 6174  bject =  filedat
+000159a0: 615b 2273 686f 7274 6e61 6d65 222e 7265  a["shortname".re
+000159b0: 706c 6163 6528 2220 222c 225f 2229 5d2e  place(" ","_")].
+000159c0: 7265 706c 6163 6528 2228 222c 225f 2229  replace("(","_")
+000159d0: 2e72 6570 6c61 6365 2822 2922 2c22 2229  .replace(")","")
+000159e0: 2e6c 6f77 6572 2829 0d0a 2020 2020 2020  .lower()..      
+000159f0: 2020 2020 2020 7375 626a 6563 745f 7374        subject_st
+00015a00: 7220 3d20 2066 696c 6564 6174 615b 2273  r =  filedata["s
+00015a10: 7562 6a65 6374 222e 7265 706c 6163 6528  ubject".replace(
+00015a20: 2220 222c 225f 2229 5d2e 6c6f 7765 7228  " ","_")].lower(
+00015a30: 292e 6361 7069 7461 6c69 7a65 2829 2e72  ).capitalize().r
+00015a40: 6570 6c61 6365 2822 5f22 2c20 2220 2229  eplace("_", " ")
+00015a50: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00015a60: 7375 626a 6563 7473 5f63 6f75 6e74 5b73  subjects_count[s
+00015a70: 7562 6a65 6374 5d20 2b3d 2031 0d0a 2020  ubject] += 1..  
+00015a80: 2020 2020 2020 2020 2020 6966 2073 7562            if sub
+00015a90: 6a65 6374 735f 636f 756e 745b 7375 626a  jects_count[subj
+00015aa0: 6563 745d 203e 2031 3a20 2320 7375 6666  ect] > 1: # suff
+00015ab0: 6978 2066 6f72 2073 616d 6520 6e61 6d65  ix for same name
+00015ac0: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
+00015ad0: 2020 2073 7562 6a65 6374 202b 3d20 225f     subject += "_
+00015ae0: 2569 2220 2520 696e 7428 7375 626a 6563  %i" % int(subjec
+00015af0: 7473 5f63 6f75 6e74 5b73 7562 6a65 6374  ts_count[subject
+00015b00: 5d29 0d0a 0d0a 0d0a 2020 2020 2020 2020  ])......        
+00015b10: 2020 2020 7175 616e 7469 7479 203d 2022      quantity = "
+00015b20: 7122 2023 2066 696c 6564 6174 615b 2271  q" # filedata["q
+00015b30: 7561 6e74 6974 7922 5d0d 0a0d 0a20 2020  uantity"]....   
+00015b40: 2020 2020 2020 2020 2063 6f6d 6d61 6e64           command
+00015b50: 7320 3d20 5b5d 0d0a 0d0a 2020 2020 2020  s = []....      
+00015b60: 2020 2020 2020 6966 2022 756e 692d 6469        if "uni-di
+00015b70: 7265 6374 696f 6e61 6c22 2069 6e20 6669  rectional" in fi
+00015b80: 6c65 6461 7461 3a0d 0a20 2020 2020 2020  ledata:..       
+00015b90: 2020 2020 2020 2020 2075 6e69 6469 7220           unidir 
+00015ba0: 3d20 6669 6c65 6461 7461 5b22 756e 692d  = filedata["uni-
+00015bb0: 6469 7265 6374 696f 6e61 6c22 5d0d 0a0d  directional"]...
+00015bc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015bd0: 2063 6f6d 6d61 6e64 732e 6170 7065 6e64   commands.append
+00015be0: 2822 636f 6e64 203d 2028 6973 696e 7374  ("cond = (isinst
+00015bf0: 616e 6365 2871 2c66 6c6f 6174 2920 6f72  ance(q,float) or
+00015c00: 2069 7369 6e73 7461 6e63 6528 712c 696e   isinstance(q,in
+00015c10: 7429 2922 290d 0a20 2020 2020 2020 2020  t))")..         
+00015c20: 2020 2020 2020 2063 6f6d 6d61 6e64 732e         commands.
+00015c30: 6170 7065 6e64 2822 6966 2063 6f6e 643a  append("if cond:
+00015c40: 2061 7373 6572 7420 6e6f 7420 6e70 2e69   assert not np.i
+00015c50: 736e 616e 2871 2922 290d 0a20 2020 2020  snan(q)")..     
+00015c60: 2020 2020 2020 2020 2020 2023 205e 2077             # ^ w
+00015c70: 696c 6c20 616c 736f 2070 6173 7320 666f  ill also pass fo
+00015c80: 7220 6e70 2e66 6c6f 6174 3634 0d0a 2020  r np.float64..  
+00015c90: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00015ca0: 6d6d 616e 6473 2e61 7070 656e 6428 2269  mmands.append("i
+00015cb0: 6620 636f 6e64 3a20 6173 7365 7274 2071  f cond: assert q
+00015cc0: 203c 202b 6e70 2e69 6e66 2229 0d0a 2020   < +np.inf")..  
+00015cd0: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00015ce0: 6d6d 616e 6473 2e61 7070 656e 6428 2269  mmands.append("i
+00015cf0: 6620 636f 6e64 3a20 6173 7365 7274 2071  f cond: assert q
+00015d00: 203e 202d 6e70 2e69 6e66 2229 0d0a 0d0a   > -np.inf")....
+00015d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015d20: 2370 7269 6e74 2822 756e 692d 6469 7265  #print("uni-dire
+00015d30: 6374 696f 6e61 6c22 2c75 6e69 6469 7229  ctional",unidir)
+00015d40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00015d50: 2020 6966 2073 7472 2875 6e69 6469 7229    if str(unidir)
+00015d60: 203d 3d20 2254 7275 6522 3a20 2320 646f   == "True": # do
+00015d70: 206e 6f74 2064 6f20 626f 6f6c 2875 6e69   not do bool(uni
+00015d80: 6469 7229 0d0a 2020 2020 2020 2020 2020  dir)..          
+00015d90: 2020 2020 2020 2020 2020 236e 616d 6161            #namaa
+00015da0: 6120 3d20 6669 6c65 6461 7461 5b22 7368  a = filedata["sh
+00015db0: 6f72 746e 616d 6522 5d0d 0a20 2020 2020  ortname"]..     
+00015dc0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00015dd0: 7365 6c66 2e6e 6f74 6966 7928 2028 6e61  self.notify( (na
+00015de0: 6d61 6161 2b20 7374 7228 756e 6964 6972  maaa+ str(unidir
+00015df0: 292b 2022 3d22 2b28 7374 7228 626f 6f6c  )+ "="+(str(bool
+00015e00: 2875 6e69 6469 7229 2929 292c 7469 746c  (unidir)))),titl
+00015e10: 653d 2263 6865 636b 2229 0d0a 2020 2020  e="check")..    
+00015e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015e30: 636f 6d6d 616e 6473 2e61 7070 656e 6428  commands.append(
+00015e40: 2269 6620 636f 6e64 3a20 6173 7365 7274  "if cond: assert
+00015e50: 2071 203e 3d20 302c 2027 6861 7665 2074   q >= 0, 'have t
+00015e60: 6f20 7061 7373 2070 6f73 6974 6976 6520  o pass positive 
+00015e70: 7175 616e 7469 7479 3a20 756e 6964 6972  quantity: unidir
+00015e80: 6563 7469 6f6e 616c 2074 7261 6e73 6163  ectional transac
+00015e90: 7469 6f6e 2722 290d 0a0d 0a20 2020 2020  tion'")....     
+00015ea0: 2020 2020 2020 2063 6f6d 6d61 6e64 7320         commands 
+00015eb0: 3d20 636f 6d6d 616e 6473 202b 205b 2225  = commands + ["%
+00015ec0: 732e 6261 6c61 6e63 655f 7368 6565 742e  s.balance_sheet.
+00015ed0: 6469 7365 6e67 6167 6528 2922 2025 2061  disengage()" % a
+00015ee0: 6765 6e74 315d 0d0a 2020 2020 2020 2020  gent1]..        
+00015ef0: 2020 2020 6966 2054 7275 653a 2023 2061      if True: # a
+00015f00: 6765 6e74 3120 213d 2061 6765 6e74 323a  gent1 != agent2:
+00015f10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00015f20: 2020 636f 6d6d 616e 6473 2b3d 205b 2225    commands+= ["%
+00015f30: 732e 6261 6c61 6e63 655f 7368 6565 742e  s.balance_sheet.
+00015f40: 6469 7365 6e67 6167 6528 2922 2025 2061  disengage()" % a
+00015f50: 6765 6e74 325d 0d0a 0d0a 2020 2020 2020  gent2]....      
+00015f60: 2020 2020 2020 666f 7220 656e 7472 7920        for entry 
+00015f70: 696e 2065 312e 7370 6c69 7428 225c 6e22  in e1.split("\n"
+00015f80: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00015f90: 2020 2020 6966 2065 6e74 7279 2021 3d20      if entry != 
+00015fa0: 2222 2061 6e64 2065 6e74 7279 2021 3d20  "" and entry != 
+00015fb0: 225c 6e22 3a0d 0a20 2020 2020 2020 2020  "\n":..         
+00015fc0: 2020 2020 2020 2020 2020 2073 6967 6e2c             sign,
+00015fd0: 2069 7465 6d2c 2073 696c 656e 7420 3d20   item, silent = 
+00015fe0: 7365 6c66 2e65 6e74 7279 5f74 6f5f 7661  self.entry_to_va
+00015ff0: 6c73 2865 6e74 7279 2c20 6167 656e 7431  ls(entry, agent1
+00016000: 2c20 2245 7175 6974 7922 290d 0a20 2020  , "Equity")..   
+00016010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016020: 2069 6620 7369 676e 2069 7320 6e6f 7420   if sign is not 
+00016030: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+00016040: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00016050: 6f6d 6d61 6e64 732e 6170 7065 6e64 2822  ommands.append("
+00016060: 2573 2e62 616c 616e 6365 5f73 6865 6574  %s.balance_sheet
+00016070: 2e63 6861 6e67 655f 6974 656d 2827 2573  .change_item('%s
+00016080: 272c 2025 732c 2025 732c 2073 7570 7072  ', %s, %s, suppr
+00016090: 6573 735f 7374 6f63 6b3d 2573 2922 2025  ess_stock=%s)" %
+000160a0: 2028 0d0a 2020 2020 2020 2020 2020 2020   (..            
+000160b0: 2020 2020 2020 2020 2020 2020 6167 656e              agen
+000160c0: 7431 2c20 6974 656d 2c20 2242 616c 616e  t1, item, "Balan
+000160d0: 6365 456e 7472 792e 4551 5549 5459 222c  ceEntry.EQUITY",
+000160e0: 2073 6967 6e20 2b20 7175 616e 7469 7479   sign + quantity
+000160f0: 2c20 7369 6c65 6e74 2929 0d0a 2020 2020  , silent))..    
+00016100: 2020 2020 2020 2020 666f 7220 656e 7472          for entr
+00016110: 7920 696e 2061 312e 7370 6c69 7428 225c  y in a1.split("\
+00016120: 6e22 293a 0d0a 2020 2020 2020 2020 2020  n"):..          
+00016130: 2020 2020 2020 6966 2065 6e74 7279 2021        if entry !
+00016140: 3d20 2222 2061 6e64 2065 6e74 7279 2021  = "" and entry !
+00016150: 3d20 225c 6e22 3a0d 0a20 2020 2020 2020  = "\n":..       
+00016160: 2020 2020 2020 2020 2020 2020 2073 6967               sig
+00016170: 6e2c 2069 7465 6d2c 2073 696c 656e 7420  n, item, silent 
+00016180: 3d20 7365 6c66 2e65 6e74 7279 5f74 6f5f  = self.entry_to_
+00016190: 7661 6c73 2865 6e74 7279 2c20 6167 656e  vals(entry, agen
+000161a0: 7431 2c20 2241 7373 6574 7322 290d 0a20  t1, "Assets").. 
+000161b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000161c0: 2020 2069 6620 7369 676e 2069 7320 6e6f     if sign is no
+000161d0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
 000161e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000161f0: 6966 2065 6e74 7279 2021 3d20 2222 2061  if entry != "" a
-00016200: 6e64 2065 6e74 7279 2021 3d20 225c 6e22  nd entry != "\n"
-00016210: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00016220: 2020 2020 2020 2073 6967 6e2c 2069 7465         sign, ite
-00016230: 6d2c 2073 696c 656e 7420 3d20 7365 6c66  m, silent = self
-00016240: 2e65 6e74 7279 5f74 6f5f 7661 6c73 2865  .entry_to_vals(e
-00016250: 6e74 7279 2c20 6167 656e 7432 2c20 2245  ntry, agent2, "E
-00016260: 7175 6974 7922 290d 0a20 2020 2020 2020  quity")..       
-00016270: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00016280: 7369 676e 2069 7320 6e6f 7420 4e6f 6e65  sign is not None
-00016290: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-000162a0: 2020 2020 2020 2020 2020 2063 6f6d 6d61             comma
-000162b0: 6e64 732e 6170 7065 6e64 2822 2573 2e62  nds.append("%s.b
-000162c0: 616c 616e 6365 5f73 6865 6574 2e63 6861  alance_sheet.cha
-000162d0: 6e67 655f 6974 656d 2827 2573 272c 2025  nge_item('%s', %
-000162e0: 732c 2025 732c 2073 7570 7072 6573 735f  s, %s, suppress_
-000162f0: 7374 6f63 6b3d 2573 2922 2025 2028 0d0a  stock=%s)" % (..
-00016300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016310: 2020 2020 2020 2020 6167 656e 7432 2c20          agent2, 
-00016320: 6974 656d 2c20 2242 616c 616e 6365 456e  item, "BalanceEn
-00016330: 7472 792e 4551 5549 5459 222c 2073 6967  try.EQUITY", sig
-00016340: 6e20 2b20 7175 616e 7469 7479 2c20 7369  n + quantity, si
-00016350: 6c65 6e74 2929 0d0a 2020 2020 2020 2020  lent))..        
-00016360: 2020 2020 666f 7220 656e 7472 7920 696e      for entry in
-00016370: 2061 322e 7370 6c69 7428 225c 6e22 293a   a2.split("\n"):
-00016380: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00016390: 2020 6966 2065 6e74 7279 2021 3d20 2222    if entry != ""
-000163a0: 2061 6e64 2065 6e74 7279 2021 3d20 225c   and entry != "\
-000163b0: 6e22 3a0d 0a20 2020 2020 2020 2020 2020  n":..           
-000163c0: 2020 2020 2020 2020 2073 6967 6e2c 2069           sign, i
-000163d0: 7465 6d2c 2073 696c 656e 7420 3d20 7365  tem, silent = se
-000163e0: 6c66 2e65 6e74 7279 5f74 6f5f 7661 6c73  lf.entry_to_vals
-000163f0: 2865 6e74 7279 2c20 6167 656e 7432 2c20  (entry, agent2, 
-00016400: 2241 7373 6574 7322 290d 0a20 2020 2020  "Assets")..     
-00016410: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00016420: 6620 7369 676e 2069 7320 6e6f 7420 4e6f  f sign is not No
-00016430: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-00016440: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
-00016450: 6d61 6e64 732e 6170 7065 6e64 2822 2573  mands.append("%s
-00016460: 2e62 616c 616e 6365 5f73 6865 6574 2e63  .balance_sheet.c
-00016470: 6861 6e67 655f 6974 656d 2827 2573 272c  hange_item('%s',
-00016480: 2025 732c 2025 732c 2073 7570 7072 6573   %s, %s, suppres
-00016490: 735f 7374 6f63 6b3d 2573 2922 2025 2028  s_stock=%s)" % (
-000164a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000164b0: 2020 2020 2020 2020 2020 6167 656e 7432            agent2
-000164c0: 2c20 6974 656d 2c20 2242 616c 616e 6365  , item, "Balance
-000164d0: 456e 7472 792e 4153 5345 5453 222c 2073  Entry.ASSETS", s
-000164e0: 6967 6e20 2b20 7175 616e 7469 7479 2c20  ign + quantity, 
-000164f0: 7369 6c65 6e74 2929 0d0a 2020 2020 2020  silent))..      
-00016500: 2020 2020 2020 666f 7220 656e 7472 7920        for entry 
-00016510: 696e 206c 322e 7370 6c69 7428 225c 6e22  in l2.split("\n"
-00016520: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-00016530: 2020 2020 6966 2065 6e74 7279 2021 3d20      if entry != 
-00016540: 2222 2061 6e64 2065 6e74 7279 2021 3d20  "" and entry != 
-00016550: 225c 6e22 3a0d 0a20 2020 2020 2020 2020  "\n":..         
-00016560: 2020 2020 2020 2020 2020 2073 6967 6e2c             sign,
-00016570: 2069 7465 6d2c 2073 696c 656e 7420 3d20   item, silent = 
-00016580: 7365 6c66 2e65 6e74 7279 5f74 6f5f 7661  self.entry_to_va
-00016590: 6c73 2865 6e74 7279 2c20 6167 656e 7432  ls(entry, agent2
-000165a0: 2c20 224c 6961 6269 6c69 7469 6573 2229  , "Liabilities")
-000165b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000165c0: 2020 2020 2020 6966 2073 6967 6e20 6973        if sign is
-000165d0: 206e 6f74 204e 6f6e 653a 0d0a 2020 2020   not None:..    
-000165e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000165f0: 2020 2020 636f 6d6d 616e 6473 2e61 7070      commands.app
-00016600: 656e 6428 2225 732e 6261 6c61 6e63 655f  end("%s.balance_
-00016610: 7368 6565 742e 6368 616e 6765 5f69 7465  sheet.change_ite
-00016620: 6d28 2725 7327 2c20 2573 2c20 2573 2c20  m('%s', %s, %s, 
-00016630: 7375 7070 7265 7373 5f73 746f 636b 3d25  suppress_stock=%
-00016640: 7329 2220 2520 280d 0a20 2020 2020 2020  s)" % (..       
-00016650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016660: 2061 6765 6e74 322c 2069 7465 6d2c 2022   agent2, item, "
-00016670: 4261 6c61 6e63 6545 6e74 7279 2e4c 4941  BalanceEntry.LIA
-00016680: 4249 4c49 5449 4553 222c 2073 6967 6e20  BILITIES", sign 
-00016690: 2b20 7175 616e 7469 7479 2c20 7369 6c65  + quantity, sile
-000166a0: 6e74 2929 0d0a 0d0a 2020 2020 2020 2020  nt))....        
-000166b0: 2020 2020 636f 6d6d 616e 6473 2e61 7070      commands.app
-000166c0: 656e 6428 2225 732e 6261 6c61 6e63 655f  end("%s.balance_
-000166d0: 7368 6565 742e 656e 6761 6765 2829 2220  sheet.engage()" 
-000166e0: 2520 6167 656e 7431 290d 0a20 2020 2020  % agent1)..     
-000166f0: 2020 2020 2020 2069 6620 5472 7565 3a20         if True: 
-00016700: 2320 6167 656e 7431 213d 6167 656e 7432  # agent1!=agent2
-00016710: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00016720: 2020 2063 6f6d 6d61 6e64 732e 6170 7065     commands.appe
-00016730: 6e64 2822 2573 2e62 616c 616e 6365 5f73  nd("%s.balance_s
-00016740: 6865 6574 2e65 6e67 6167 6528 2922 2025  heet.engage()" %
-00016750: 2061 6765 6e74 3229 0d0a 0d0a 2020 2020   agent2)....    
-00016760: 2020 2020 2020 2020 6164 645f 666c 6f77          add_flow
-00016770: 203d 2066 6c6f 775f 6368 6563 6b0d 0a20   = flow_check.. 
-00016780: 2020 2020 2020 2020 2020 2069 6620 6164             if ad
-00016790: 645f 666c 6f77 3a0d 0a20 2020 2020 2020  d_flow:..       
-000167a0: 2020 2020 2020 2020 2070 7269 6e74 2873           print(s
-000167b0: 7562 6a65 6374 5f73 7472 2c22 666c 6f77  ubject_str,"flow
-000167c0: 2063 6865 636b 222c 666c 6f77 5f63 6865   check",flow_che
-000167d0: 636b 290d 0a0d 0a20 2020 2020 2020 2020  ck)....         
-000167e0: 2020 2020 2020 206b 696e 645f 656e 756d         kind_enum
-000167f0: 203d 2022 2825 732c 2573 2922 2025 2028   = "(%s,%s)" % (
-00016800: 6b69 6e64 2e73 706c 6974 2822 2d3e 2229  kind.split("->")
-00016810: 5b30 5d2e 7374 7269 7028 292c 6b69 6e64  [0].strip(),kind
-00016820: 2e73 706c 6974 2822 2d3e 2229 5b31 5d2e  .split("->")[1].
-00016830: 7374 7269 7028 2929 0d0a 0d0a 2020 2020  strip())....    
-00016840: 2020 2020 2020 2020 2020 2020 636f 6d6d              comm
-00016850: 616e 6473 2e61 7070 656e 6428 2246 6c6f  ands.append("Flo
-00016860: 774d 6174 7269 7828 292e 6c6f 675f 666c  wMatrix().log_fl
-00016870: 6f77 2825 732c 2025 732c 2025 732c 2025  ow(%s, %s, %s, %
-00016880: 732c 2073 7562 6a65 6374 3d27 2573 2729  s, subject='%s')
-00016890: 2220 2520 286b 696e 645f 656e 756d 2c20  " % (kind_enum, 
-000168a0: 7175 616e 7469 7479 2c20 6167 656e 7431  quantity, agent1
-000168b0: 2c20 6167 656e 7432 2c20 7375 626a 6563  , agent2, subjec
-000168c0: 745f 7374 7229 290d 0a0d 0a20 2020 2020  t_str))....     
-000168d0: 2020 2020 2020 2023 2061 7070 656e 6420         # append 
-000168e0: 696e 7365 7274 5f6c 696e 6b20 636f 6d6d  insert_link comm
-000168f0: 616e 6420 746f 2063 6f64 650d 0a0d 0a0d  and to code.....
-00016900: 0a20 2020 2020 2020 2020 2020 206d 795f  .            my_
-00016910: 696e 636f 6d65 5f64 6963 7420 3d20 7b20  income_dict = { 
-00016920: 2320 2374 7261 6e73 6c61 7465 7320 7374  # #translates st
-00016930: 7269 6e67 2069 6e74 6f20 4943 5345 6e74  ring into ICSEnt
-00016940: 7279 2028 666f 7220 6265 7474 6572 2065  ry (for better e
-00016950: 6666 6963 6965 6e63 7929 0d0a 2020 2020  fficiency)..    
-00016960: 2020 2020 2020 2020 2020 2020 2252 6576              "Rev
-00016970: 656e 7565 223a 2022 4943 5345 6e74 7279  enue": "ICSEntry
-00016980: 2e52 4556 454e 5545 5322 2c0d 0a20 2020  .REVENUES",..   
-00016990: 2020 2020 2020 2020 2020 2020 2022 4e6f               "No
-000169a0: 6e2d 4f70 2e20 496e 636f 6d65 223a 2022  n-Op. Income": "
-000169b0: 4943 5345 6e74 7279 2e4e 4f49 222c 0d0a  ICSEntry.NOI",..
-000169c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000169d0: 2245 7870 656e 7365 223a 2022 4943 5345  "Expense": "ICSE
-000169e0: 6e74 7279 2e45 5850 454e 5345 5322 2c0d  ntry.EXPENSES",.
-000169f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016a00: 2022 5461 7822 3a20 2249 4353 456e 7472   "Tax": "ICSEntr
-00016a10: 792e 5441 5845 5322 2c0d 0a20 2020 2020  y.TAXES",..     
-00016a20: 2020 2020 2020 2020 2020 2022 496e 7465             "Inte
-00016a30: 7265 7374 223a 2022 4943 5345 6e74 7279  rest": "ICSEntry
-00016a40: 2e49 4e54 4552 4553 5422 2c0d 0a20 2020  .INTEREST",..   
-00016a50: 2020 2020 2020 2020 2020 2020 2022 4761               "Ga
-00016a60: 696e 223a 2022 4943 5345 6e74 7279 2e47  in": "ICSEntry.G
-00016a70: 4149 4e53 222c 0d0a 2020 2020 2020 2020  AINS",..        
-00016a80: 2020 2020 2020 2020 224e 6f6e 7461 782e          "Nontax.
-00016a90: 5072 6f66 6974 223a 2022 4943 5345 6e74  Profit": "ICSEnt
-00016aa0: 7279 2e4e 4f4e 5441 585f 5052 4f46 4954  ry.NONTAX_PROFIT
-00016ab0: 5322 2c0d 0a20 2020 2020 2020 2020 2020  S",..           
-00016ac0: 2020 2020 2022 4e6f 6e74 6178 2e20 5072       "Nontax. Pr
-00016ad0: 6f66 6974 223a 2022 4943 5345 6e74 7279  ofit": "ICSEntry
-00016ae0: 2e4e 4f4e 5441 585f 5052 4f46 4954 5322  .NONTAX_PROFITS"
-00016af0: 2c20 2320 7175 6963 6b20 616e 6420 6469  , # quick and di
-00016b00: 7274 7920 6275 6766 6978 0d0a 2020 2020  rty bugfix..    
-00016b10: 2020 2020 2020 2020 2020 2020 224e 6f6e              "Non
-00016b20: 7461 782e 204c 6f73 7322 3a20 2022 4943  tax. Loss":  "IC
-00016b30: 5345 6e74 7279 2e4e 4f4e 5441 585f 4c4f  SEntry.NONTAX_LO
-00016b40: 5353 4553 222c 0d0a 2020 2020 2020 2020  SSES",..        
-00016b50: 2020 2020 2020 2020 224c 6f73 7322 3a20          "Loss": 
-00016b60: 2022 4943 5345 6e74 7279 2e4c 4f53 5345   "ICSEntry.LOSSE
-00016b70: 5322 0d0a 2020 2020 2020 2020 2020 2020  S"..            
-00016b80: 7d0d 0a0d 0a20 2020 2020 2020 2020 2020  }....           
-00016b90: 2023 2069 6e63 6f6d 6520 7374 6174 656d   # income statem
-00016ba0: 656e 743f 0d0a 2020 2020 2020 2020 2020  ent?..          
-00016bb0: 2020 6966 2022 696e 636f 6d65 3122 2069    if "income1" i
-00016bc0: 6e20 6669 6c65 6461 7461 3a0d 0a20 2020  n filedata:..   
-00016bd0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00016be0: 7374 7228 6669 6c65 6461 7461 5b22 696e  str(filedata["in
-00016bf0: 636f 6d65 3122 5d29 2021 3d20 274e 6f6e  come1"]) != 'Non
-00016c00: 6527 3a0d 0a20 2020 2020 2020 2020 2020  e':..           
-00016c10: 2020 2020 2020 2020 2063 6f6d 6d61 6e64           command
-00016c20: 732e 6170 7065 6e64 2822 2573 2e69 6e63  s.append("%s.inc
-00016c30: 6f6d 655f 7374 6174 656d 656e 742e 6e65  ome_statement.ne
-00016c40: 775f 656e 7472 7928 2573 2c27 2573 272c  w_entry(%s,'%s',
-00016c50: 2573 2922 2025 2028 6167 656e 7431 2c6d  %s)" % (agent1,m
-00016c60: 795f 696e 636f 6d65 5f64 6963 745b 6669  y_income_dict[fi
-00016c70: 6c65 6461 7461 5b22 696e 636f 6d65 3122  ledata["income1"
-00016c80: 5d5d 2c73 7562 6a65 6374 2c71 7561 6e74  ]],subject,quant
-00016c90: 6974 7929 290d 0a0d 0a20 2020 2020 2020  ity))....       
-00016ca0: 2020 2020 2069 6620 2269 6e63 6f6d 6532       if "income2
-00016cb0: 2220 696e 2066 696c 6564 6174 613a 0d0a  " in filedata:..
-00016cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016cd0: 6966 2073 7472 2866 696c 6564 6174 615b  if str(filedata[
-00016ce0: 2269 6e63 6f6d 6532 225d 2920 213d 2027  "income2"]) != '
-00016cf0: 4e6f 6e65 273a 0d0a 2020 2020 2020 2020  None':..        
-00016d00: 2020 2020 2020 2020 2020 2020 636f 6d6d              comm
-00016d10: 616e 6473 2e61 7070 656e 6428 2225 732e  ands.append("%s.
-00016d20: 696e 636f 6d65 5f73 7461 7465 6d65 6e74  income_statement
-00016d30: 2e6e 6577 5f65 6e74 7279 2825 732c 2725  .new_entry(%s,'%
-00016d40: 7327 2c25 7329 2220 2520 2861 6765 6e74  s',%s)" % (agent
-00016d50: 322c 206d 795f 696e 636f 6d65 5f64 6963  2, my_income_dic
-00016d60: 745b 6669 6c65 6461 7461 5b22 696e 636f  t[filedata["inco
-00016d70: 6d65 3222 5d5d 2c20 7375 626a 6563 742c  me2"]], subject,
-00016d80: 2071 7561 6e74 6974 7929 290d 0a0d 0a20   quantity)).... 
-00016d90: 2020 2020 2020 2020 2020 2023 2063 6173             # cas
-00016da0: 6820 666c 6f77 2073 7461 7465 6d65 6e74  h flow statement
-00016db0: 0d0a 2020 2020 2020 2020 2020 2020 6966  ..            if
-00016dc0: 2022 6361 7368 666c 6f77 3122 2069 6e20   "cashflow1" in 
-00016dd0: 6669 6c65 6461 7461 3a0d 0a20 2020 2020  filedata:..     
-00016de0: 2020 2020 2020 2020 2020 2069 6620 7374             if st
-00016df0: 7228 6669 6c65 6461 7461 5b22 6361 7368  r(filedata["cash
-00016e00: 666c 6f77 3122 5d29 2021 3d20 274e 6f6e  flow1"]) != 'Non
-00016e10: 6527 3a0d 0a20 2020 2020 2020 2020 2020  e':..           
-00016e20: 2020 2020 2020 2020 2063 6f6d 6d61 6e64           command
-00016e30: 732e 6170 7065 6e64 2822 2573 2e63 6173  s.append("%s.cas
-00016e40: 685f 666c 6f77 5f73 7461 7465 6d65 6e74  h_flow_statement
-00016e50: 2e6e 6577 5f65 6e74 7279 2825 732c 2725  .new_entry(%s,'%
-00016e60: 7327 2c2d 2573 2922 2025 2028 6167 656e  s',-%s)" % (agen
-00016e70: 7431 2c22 4361 7368 466c 6f77 456e 7472  t1,"CashFlowEntr
-00016e80: 792e 2220 2b20 6669 6c65 6461 7461 5b22  y." + filedata["
-00016e90: 6361 7368 666c 6f77 3122 5d2e 7570 7065  cashflow1"].uppe
-00016ea0: 7228 292c 7375 626a 6563 742c 7175 616e  r(),subject,quan
-00016eb0: 7469 7479 2929 0d0a 0d0a 2020 2020 2020  tity))....      
-00016ec0: 2020 2020 2020 6966 2022 6361 7368 666c        if "cashfl
-00016ed0: 6f77 3222 2069 6e20 6669 6c65 6461 7461  ow2" in filedata
-00016ee0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00016ef0: 2020 2069 6620 7374 7228 6669 6c65 6461     if str(fileda
-00016f00: 7461 5b22 6361 7368 666c 6f77 3222 5d29  ta["cashflow2"])
-00016f10: 2021 3d20 274e 6f6e 6527 3a0d 0a20 2020   != 'None':..   
-00016f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016f30: 2063 6f6d 6d61 6e64 732e 6170 7065 6e64   commands.append
-00016f40: 2822 2573 2e63 6173 685f 666c 6f77 5f73  ("%s.cash_flow_s
-00016f50: 7461 7465 6d65 6e74 2e6e 6577 5f65 6e74  tatement.new_ent
-00016f60: 7279 2825 732c 2725 7327 2c25 7329 2220  ry(%s,'%s',%s)" 
-00016f70: 2520 2861 6765 6e74 322c 2243 6173 6846  % (agent2,"CashF
-00016f80: 6c6f 7745 6e74 7279 2e22 202b 2066 696c  lowEntry." + fil
-00016f90: 6564 6174 615b 2263 6173 6866 6c6f 7732  edata["cashflow2
-00016fa0: 225d 2e75 7070 6572 2829 2c73 7562 6a65  "].upper(),subje
-00016fb0: 6374 2c71 7561 6e74 6974 7929 290d 0a0d  ct,quantity))...
-00016fc0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00016fd0: 5472 7565 3a20 2320 6167 656e 7431 2021  True: # agent1 !
-00016fe0: 3d20 6167 656e 7432 3a0d 0a20 2020 2020  = agent2:..     
-00016ff0: 2020 2020 2020 2020 2020 206d 6574 686f             metho
-00017000: 6420 3d20 2264 6566 2025 7328 2573 2c20  d = "def %s(%s, 
-00017010: 2573 2c20 2573 293a 5c6e 2220 2520 2873  %s, %s):\n" % (s
-00017020: 7562 6a65 6374 2c61 6765 6e74 312c 6167  ubject,agent1,ag
-00017030: 656e 7432 2c71 7561 6e74 6974 7929 0d0a  ent2,quantity)..
-00017040: 2020 2020 2020 2020 2020 2020 2365 6c73              #els
-00017050: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-00017060: 2320 2020 206d 6574 686f 6420 3d20 2264  #    method = "d
-00017070: 6566 2025 7328 2573 2c20 2573 293a 5c6e  ef %s(%s, %s):\n
-00017080: 2220 2520 2873 7562 6a65 6374 2c20 6167  " % (subject, ag
-00017090: 656e 7431 2c20 7175 616e 7469 7479 290d  ent1, quantity).
-000170a0: 0a0d 0a20 2020 2020 2020 2020 2020 2069  ...            i
-000170b0: 6620 2264 6573 6372 6970 7469 6f6e 2220  f "description" 
-000170c0: 696e 2066 696c 6564 6174 613a 2023 2061  in filedata: # a
-000170d0: 6464 2074 6865 2064 6573 6372 6970 7469  dd the descripti
-000170e0: 6f6e 2069 6e20 7468 6520 646f 6373 7472  on in the docstr
-000170f0: 696e 6720 6f66 2074 6865 2066 756e 6374  ing of the funct
-00017100: 696f 6e20 6465 6669 6e69 7469 6f6e 0d0a  ion definition..
-00017110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017120: 6d65 7468 6f64 202b 3d20 2220 2020 2023  method += "    #
-00017130: 2220 2b20 6669 6c65 6461 7461 5b22 6465  " + filedata["de
-00017140: 7363 7269 7074 696f 6e22 5d20 2b20 225c  scription"] + "\
-00017150: 6e22 0d0a 0d0a 2020 2020 2020 2020 2020  n"....          
-00017160: 2020 666f 7220 636f 6d6d 616e 6420 696e    for command in
-00017170: 2063 6f6d 6d61 6e64 733a 0d0a 2020 2020   commands:..    
-00017180: 2020 2020 2020 2020 2020 2020 6d65 7468              meth
-00017190: 6f64 202b 3d20 2220 2020 2022 202b 2063  od += "    " + c
-000171a0: 6f6d 6d61 6e64 202b 2022 5c6e 220d 0a0d  ommand + "\n"...
-000171b0: 0a20 2020 2020 2020 2020 2020 206d 6574  .            met
-000171c0: 686f 6420 2b3d 2022 5c6e 5c6e 220d 0a20  hod += "\n\n".. 
-000171d0: 2020 2020 2020 2020 2020 2063 6f64 6520             code 
-000171e0: 2b3d 206d 6574 686f 640d 0a0d 0a20 2020  += method....   
-000171f0: 2020 2020 2066 6f6c 6465 7220 3d20 6f73       folder = os
-00017200: 2e70 6174 682e 6469 726e 616d 6528 7365  .path.dirname(se
-00017210: 6c66 2e63 7572 7265 6e74 5f66 696c 6529  lf.current_file)
-00017220: 2023 2073 7461 7475 7342 6172 2829 2e63   # statusBar().c
-00017230: 7572 7265 6e74 4d65 7373 6167 6528 2929  urrentMessage())
-00017240: 0d0a 2020 2020 2020 2020 666e 616d 6520  ..        fname 
-00017250: 3d20 2066 6f6c 6465 7220 2b20 222f 7079  =  folder + "/py
-00017260: 7468 6f6e 5f63 6f64 652f 7472 616e 7361  thon_code/transa
-00017270: 6374 696f 6e73 2e70 7922 0d0a 0d0a 2020  ctions.py"....  
-00017280: 2020 2020 2020 7769 7468 206f 7065 6e28        with open(
-00017290: 666e 616d 652c 2277 222c 656e 636f 6469  fname,"w",encodi
-000172a0: 6e67 3d22 7574 662d 3822 2920 6173 2066  ng="utf-8") as f
-000172b0: 696c 653a 0d0a 2020 2020 2020 2020 2020  ile:..          
-000172c0: 2020 6669 6c65 2e77 7269 7465 2863 6f64    file.write(cod
-000172d0: 6529 0d0a 0d0a 2020 2020 2020 2020 6966  e)....        if
-000172e0: 2073 686f 775f 6e6f 7469 6669 6361 7469   show_notificati
-000172f0: 6f6e 3a0d 0a20 2020 2020 2020 2020 2020  on:..           
-00017300: 2073 656c 662e 6e6f 7469 6679 286d 6573   self.notify(mes
-00017310: 7361 6765 3d22 436f 6465 2065 7870 6f72  sage="Code expor
-00017320: 7465 6420 746f 2025 7322 2025 2028 666e  ted to %s" % (fn
-00017330: 616d 6529 2c74 6974 6c65 3d22 5375 6363  ame),title="Succ
-00017340: 6573 7322 290d 0a0d 0a0d 0a20 2020 2064  ess")......    d
-00017350: 6566 2067 656e 5f69 6373 5f73 696e 676c  ef gen_ics_singl
-00017360: 6528 7365 6c66 293a 0d0a 2020 2020 2020  e(self):..      
-00017370: 2020 6966 2073 656c 662e 6472 6177 6361    if self.drawca
-00017380: 6e76 6173 2e68 6967 686c 6967 6874 6564  nvas.highlighted
-00017390: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
-000173a0: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
-000173b0: 6679 2874 6974 6c65 3d22 4e6f 2061 6765  fy(title="No age
-000173c0: 6e74 2073 656c 6563 7465 6422 2c20 6d65  nt selected", me
-000173d0: 7373 6167 653d 224e 6f20 6167 656e 7420  ssage="No agent 
-000173e0: 7365 6c65 6374 6564 2e20 506c 6561 7365  selected. Please
-000173f0: 2073 656c 6563 7420 6f6e 6520 6669 7273   select one firs
-00017400: 742e 2229 0d0a 2020 2020 2020 2020 2020  t.")..          
-00017410: 2020 7265 7475 726e 0d0a 2020 2020 2020    return..      
-00017420: 2020 6966 2073 656c 662e 6472 6177 6361    if self.drawca
-00017430: 6e76 6173 2e68 6967 686c 6967 6874 6564  nvas.highlighted
-00017440: 2e69 7368 656c 7065 723a 0d0a 2020 2020  .ishelper:..    
-00017450: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
-00017460: 6966 7928 7469 746c 653d 224e 6f20 6167  ify(title="No ag
-00017470: 656e 7420 7365 6c65 6374 6564 222c 206d  ent selected", m
-00017480: 6573 7361 6765 3d22 4e6f 2076 616c 6964  essage="No valid
-00017490: 2062 6f78 2073 656c 6563 7465 642e 2050   box selected. P
-000174a0: 6c65 6173 6520 7365 6c65 6374 2061 6e20  lease select an 
-000174b0: 6167 656e 742e 2229 0d0a 2020 2020 2020  agent.")..      
-000174c0: 2020 2020 2020 7265 7475 726e 0d0a 2020        return..  
-000174d0: 2020 2020 2020 6d79 5f61 6765 6e74 203d        my_agent =
-000174e0: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
-000174f0: 2e68 6967 686c 6967 6874 6564 2e6e 616d  .highlighted.nam
-00017500: 650d 0a0d 0a20 2020 2020 2020 2063 6f6d  e....        com
-00017510: 6269 6e65 645f 696e 636f 6d65 203d 2020  bined_income =  
-00017520: 7b22 5375 626a 6563 7422 3a5b 5d2c 2253  {"Subject":[],"S
-00017530: 686f 7274 204e 616d 6522 3a20 5b5d 2c22  hort Name": [],"
-00017540: 5175 616e 7469 7479 223a 5b5d 2c20 2254  Quantity":[], "T
-00017550: 7970 6522 3a5b 5d2c 2022 5261 6e6b 696e  ype":[], "Rankin
-00017560: 6722 3a5b 5d7d 2023 2072 616e 6b69 6e67  g":[]} # ranking
-00017570: 2077 696c 6c20 6265 2072 656d 6f76 6564   will be removed
-00017580: 206c 6174 6572 0d0a 2020 2020 2020 2020   later..        
-00017590: 2222 220d 0a20 2020 2020 2020 2022 4761  """..        "Ga
-000175a0: 696e 7322 3a20 5b5d 2c20 224c 6f73 7365  ins": [], "Losse
-000175b0: 7322 3a20 5b5d 2c20 2252 6576 656e 7565  s": [], "Revenue
-000175c0: 7322 3a20 5b5d 2c20 2254 6178 6573 223a  s": [], "Taxes":
-000175d0: 205b 5d2c 2022 4578 7065 6e73 6573 223a   [], "Expenses":
-000175e0: 205b 5d2c 0d0a 2020 2020 2020 2020 2022   [],..         "
-000175f0: 4e6f 6e74 6178 6162 6c65 204c 6f73 7365  Nontaxable Losse
-00017600: 7322 3a20 5b5d 2c20 224e 6f6e 7461 7861  s": [], "Nontaxa
-00017610: 626c 6520 5072 6f66 6974 7322 3a20 5b5d  ble Profits": []
-00017620: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00017630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017640: 2020 224e 6f6e 2d4f 7065 7261 7469 6f6e    "Non-Operation
-00017650: 616c 2049 6e63 6f6d 6522 3a20 5b5d 2c0d  al Income": [],.
-00017660: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00017670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017680: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017690: 2249 6e74 6572 6573 7420 5061 796d 656e  "Interest Paymen
-000176a0: 7473 223a 205b 5d0d 0a20 2020 2020 2020  ts": []..       
-000176b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000176c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000176d0: 2020 2020 2020 2020 7d0d 0a20 2020 2020          }..     
-000176e0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
-000176f0: 6b20 3d20 300d 0a20 2020 2020 2020 2074  k = 0..        t
-00017700: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
-00017710: 2066 6f72 2066 696c 6564 6174 6120 696e   for filedata in
-00017720: 2073 656c 662e 656e 7472 795f 6461 7461   self.entry_data
-00017730: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00017740: 2020 2061 6765 6e74 3120 3d20 6669 6c65     agent1 = file
-00017750: 6461 7461 5b22 6167 656e 7431 225d 2e73  data["agent1"].s
-00017760: 7472 6970 2829 0d0a 2020 2020 2020 2020  trip()..        
-00017770: 2020 2020 2020 2020 6167 656e 7432 203d          agent2 =
-00017780: 2066 696c 6564 6174 615b 2261 6765 6e74   filedata["agent
-00017790: 3222 5d2e 7374 7269 7028 290d 0a0d 0a20  2"].strip().... 
-000177a0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-000177b0: 7269 6e74 2822 6167 656e 7431 222c 6167  rint("agent1",ag
-000177c0: 656e 7431 2c22 6167 656e 7432 222c 6167  ent1,"agent2",ag
-000177d0: 656e 7432 290d 0a20 2020 2020 2020 2020  ent2)..         
-000177e0: 2020 2020 2020 2069 6620 6167 656e 7431         if agent1
-000177f0: 203d 3d20 6d79 5f61 6765 6e74 3a0d 0a20   == my_agent:.. 
-00017800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017810: 2020 2072 6566 5f61 6765 6e74 203d 2022     ref_agent = "
-00017820: 6167 656e 7431 220d 0a20 2020 2020 2020  agent1"..       
-00017830: 2020 2020 2020 2020 2020 2020 2072 6566               ref
-00017840: 5f69 6e63 6f6d 6520 3d20 2269 6e63 6f6d  _income = "incom
-00017850: 6531 220d 0a0d 0a20 2020 2020 2020 2020  e1"....         
-00017860: 2020 2020 2020 2065 6c69 6620 6167 656e         elif agen
-00017870: 7432 203d 3d20 6d79 5f61 6765 6e74 3a0d  t2 == my_agent:.
-00017880: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00017890: 2020 2020 2072 6566 5f61 6765 6e74 203d       ref_agent =
-000178a0: 2022 6167 656e 7432 220d 0a20 2020 2020   "agent2"..     
-000178b0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000178c0: 6566 5f69 6e63 6f6d 6520 3d20 2269 6e63  ef_income = "inc
-000178d0: 6f6d 6532 220d 0a20 2020 2020 2020 2020  ome2"..         
-000178e0: 2020 2020 2020 2065 6c73 653a 0d0a 2020         else:..  
-000178f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017900: 2020 7061 7373 0d0a 0d0a 2020 2020 2020    pass....      
-00017910: 2020 2020 2020 2020 2020 2361 7373 6574            #asset
-00017920: 7331 203d 2066 696c 6564 6174 615b 2261  s1 = filedata["a
-00017930: 3122 5d20 2b20 225c 6e22 0d0a 2020 2020  1"] + "\n"..    
-00017940: 2020 2020 2020 2020 2020 2020 236c 6961              #lia
-00017950: 6273 3120 3d20 6669 6c65 6461 7461 5b22  bs1 = filedata["
-00017960: 6c31 225d 202b 2022 5c6e 2220 2b20 6669  l1"] + "\n" + fi
-00017970: 6c65 6461 7461 5b22 6531 225d 202b 2022  ledata["e1"] + "
-00017980: 5c6e 220d 0a0d 0a20 2020 2020 2020 2020  \n"....         
-00017990: 2020 2020 2020 2023 6173 7365 7473 3220         #assets2 
-000179a0: 3d20 6669 6c65 6461 7461 5b22 6132 225d  = filedata["a2"]
-000179b0: 202b 2022 5c6e 220d 0a20 2020 2020 2020   + "\n"..       
-000179c0: 2020 2020 2020 2020 2023 6c69 6162 7332           #liabs2
-000179d0: 203d 2066 696c 6564 6174 615b 226c 3222   = filedata["l2"
-000179e0: 5d20 2b20 225c 6e22 202b 2066 696c 6564  ] + "\n" + filed
-000179f0: 6174 615b 2265 3222 5d20 2b20 225c 6e22  ata["e2"] + "\n"
-00017a00: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00017a10: 2020 2020 6966 2028 6167 656e 7431 203d      if (agent1 =
-00017a20: 3d20 6d79 5f61 6765 6e74 206f 7220 6167  = my_agent or ag
-00017a30: 656e 7432 203d 3d20 6d79 5f61 6765 6e74  ent2 == my_agent
-00017a40: 2920 616e 6420 7374 7228 6669 6c65 6461  ) and str(fileda
-00017a50: 7461 5b72 6566 5f69 6e63 6f6d 655d 2920  ta[ref_income]) 
-00017a60: 213d 2027 4e6f 6e65 273a 0d0a 2020 2020  != 'None':..    
-00017a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017a80: 6d79 6469 6374 203d 207b 2247 6169 6e22  mydict = {"Gain"
-00017a90: 3a20 2247 6169 6e73 222c 0d0a 2020 2020  : "Gains",..    
-00017aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017ab0: 2020 2020 2020 2020 2020 224c 6f73 7322            "Loss"
-00017ac0: 3a20 224c 6f73 7365 7322 2c0d 0a20 2020  : "Losses",..   
-00017ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017ae0: 2020 2020 2020 2020 2020 2022 4578 7065             "Expe
-00017af0: 6e73 6522 3a20 2245 7870 656e 7365 7322  nse": "Expenses"
-00017b00: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00017b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017b20: 2022 5265 7665 6e75 6522 3a20 2252 6576   "Revenue": "Rev
-00017b30: 656e 7565 7322 2c0d 0a20 2020 2020 2020  enues",..       
+000161f0: 2063 6f6d 6d61 6e64 732e 6170 7065 6e64   commands.append
+00016200: 2822 2573 2e62 616c 616e 6365 5f73 6865  ("%s.balance_she
+00016210: 6574 2e63 6861 6e67 655f 6974 656d 2827  et.change_item('
+00016220: 2573 272c 2025 732c 2025 732c 2073 7570  %s', %s, %s, sup
+00016230: 7072 6573 735f 7374 6f63 6b3d 2573 2922  press_stock=%s)"
+00016240: 2025 2028 0d0a 2020 2020 2020 2020 2020   % (..          
+00016250: 2020 2020 2020 2020 2020 2020 2020 6167                ag
+00016260: 656e 7431 2c20 6974 656d 2c20 2242 616c  ent1, item, "Bal
+00016270: 616e 6365 456e 7472 792e 4153 5345 5453  anceEntry.ASSETS
+00016280: 222c 2073 6967 6e20 2b20 7175 616e 7469  ", sign + quanti
+00016290: 7479 2c20 7369 6c65 6e74 2929 0d0a 2020  ty, silent))..  
+000162a0: 2020 2020 2020 2020 2020 666f 7220 656e            for en
+000162b0: 7472 7920 696e 206c 312e 7370 6c69 7428  try in l1.split(
+000162c0: 225c 6e22 293a 0d0a 2020 2020 2020 2020  "\n"):..        
+000162d0: 2020 2020 2020 2020 6966 2065 6e74 7279          if entry
+000162e0: 2021 3d20 2222 2061 6e64 2065 6e74 7279   != "" and entry
+000162f0: 2021 3d20 225c 6e22 3a0d 0a20 2020 2020   != "\n":..     
+00016300: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00016310: 6967 6e2c 2069 7465 6d2c 2073 696c 656e  ign, item, silen
+00016320: 7420 3d20 7365 6c66 2e65 6e74 7279 5f74  t = self.entry_t
+00016330: 6f5f 7661 6c73 2865 6e74 7279 2c20 6167  o_vals(entry, ag
+00016340: 656e 7431 2c20 224c 6961 6269 6c69 7469  ent1, "Liabiliti
+00016350: 6573 2229 0d0a 2020 2020 2020 2020 2020  es")..          
+00016360: 2020 2020 2020 2020 2020 6966 2073 6967            if sig
+00016370: 6e20 6973 206e 6f74 204e 6f6e 653a 0d0a  n is not None:..
+00016380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016390: 2020 2020 2020 2020 636f 6d6d 616e 6473          commands
+000163a0: 2e61 7070 656e 6428 2225 732e 6261 6c61  .append("%s.bala
+000163b0: 6e63 655f 7368 6565 742e 6368 616e 6765  nce_sheet.change
+000163c0: 5f69 7465 6d28 2725 7327 2c20 2573 2c20  _item('%s', %s, 
+000163d0: 2573 2c20 7375 7070 7265 7373 5f73 746f  %s, suppress_sto
+000163e0: 636b 3d25 7329 2220 2520 280d 0a20 2020  ck=%s)" % (..   
+000163f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016400: 2020 2020 2061 6765 6e74 312c 2069 7465       agent1, ite
+00016410: 6d2c 2022 4261 6c61 6e63 6545 6e74 7279  m, "BalanceEntry
+00016420: 2e4c 4941 4249 4c49 5449 4553 222c 2073  .LIABILITIES", s
+00016430: 6967 6e20 2b20 7175 616e 7469 7479 2c20  ign + quantity, 
+00016440: 7369 6c65 6e74 2929 0d0a 2020 2020 2020  silent))..      
+00016450: 2020 2020 2020 666f 7220 656e 7472 7920        for entry 
+00016460: 696e 2065 322e 7370 6c69 7428 225c 6e22  in e2.split("\n"
+00016470: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+00016480: 2020 2020 6966 2065 6e74 7279 2021 3d20      if entry != 
+00016490: 2222 2061 6e64 2065 6e74 7279 2021 3d20  "" and entry != 
+000164a0: 225c 6e22 3a0d 0a20 2020 2020 2020 2020  "\n":..         
+000164b0: 2020 2020 2020 2020 2020 2073 6967 6e2c             sign,
+000164c0: 2069 7465 6d2c 2073 696c 656e 7420 3d20   item, silent = 
+000164d0: 7365 6c66 2e65 6e74 7279 5f74 6f5f 7661  self.entry_to_va
+000164e0: 6c73 2865 6e74 7279 2c20 6167 656e 7432  ls(entry, agent2
+000164f0: 2c20 2245 7175 6974 7922 290d 0a20 2020  , "Equity")..   
+00016500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016510: 2069 6620 7369 676e 2069 7320 6e6f 7420   if sign is not 
+00016520: 4e6f 6e65 3a0d 0a20 2020 2020 2020 2020  None:..         
+00016530: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+00016540: 6f6d 6d61 6e64 732e 6170 7065 6e64 2822  ommands.append("
+00016550: 2573 2e62 616c 616e 6365 5f73 6865 6574  %s.balance_sheet
+00016560: 2e63 6861 6e67 655f 6974 656d 2827 2573  .change_item('%s
+00016570: 272c 2025 732c 2025 732c 2073 7570 7072  ', %s, %s, suppr
+00016580: 6573 735f 7374 6f63 6b3d 2573 2922 2025  ess_stock=%s)" %
+00016590: 2028 0d0a 2020 2020 2020 2020 2020 2020   (..            
+000165a0: 2020 2020 2020 2020 2020 2020 6167 656e              agen
+000165b0: 7432 2c20 6974 656d 2c20 2242 616c 616e  t2, item, "Balan
+000165c0: 6365 456e 7472 792e 4551 5549 5459 222c  ceEntry.EQUITY",
+000165d0: 2073 6967 6e20 2b20 7175 616e 7469 7479   sign + quantity
+000165e0: 2c20 7369 6c65 6e74 2929 0d0a 2020 2020  , silent))..    
+000165f0: 2020 2020 2020 2020 666f 7220 656e 7472          for entr
+00016600: 7920 696e 2061 322e 7370 6c69 7428 225c  y in a2.split("\
+00016610: 6e22 293a 0d0a 2020 2020 2020 2020 2020  n"):..          
+00016620: 2020 2020 2020 6966 2065 6e74 7279 2021        if entry !
+00016630: 3d20 2222 2061 6e64 2065 6e74 7279 2021  = "" and entry !
+00016640: 3d20 225c 6e22 3a0d 0a20 2020 2020 2020  = "\n":..       
+00016650: 2020 2020 2020 2020 2020 2020 2073 6967               sig
+00016660: 6e2c 2069 7465 6d2c 2073 696c 656e 7420  n, item, silent 
+00016670: 3d20 7365 6c66 2e65 6e74 7279 5f74 6f5f  = self.entry_to_
+00016680: 7661 6c73 2865 6e74 7279 2c20 6167 656e  vals(entry, agen
+00016690: 7432 2c20 2241 7373 6574 7322 290d 0a20  t2, "Assets").. 
+000166a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000166b0: 2020 2069 6620 7369 676e 2069 7320 6e6f     if sign is no
+000166c0: 7420 4e6f 6e65 3a0d 0a20 2020 2020 2020  t None:..       
+000166d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000166e0: 2063 6f6d 6d61 6e64 732e 6170 7065 6e64   commands.append
+000166f0: 2822 2573 2e62 616c 616e 6365 5f73 6865  ("%s.balance_she
+00016700: 6574 2e63 6861 6e67 655f 6974 656d 2827  et.change_item('
+00016710: 2573 272c 2025 732c 2025 732c 2073 7570  %s', %s, %s, sup
+00016720: 7072 6573 735f 7374 6f63 6b3d 2573 2922  press_stock=%s)"
+00016730: 2025 2028 0d0a 2020 2020 2020 2020 2020   % (..          
+00016740: 2020 2020 2020 2020 2020 2020 2020 6167                ag
+00016750: 656e 7432 2c20 6974 656d 2c20 2242 616c  ent2, item, "Bal
+00016760: 616e 6365 456e 7472 792e 4153 5345 5453  anceEntry.ASSETS
+00016770: 222c 2073 6967 6e20 2b20 7175 616e 7469  ", sign + quanti
+00016780: 7479 2c20 7369 6c65 6e74 2929 0d0a 2020  ty, silent))..  
+00016790: 2020 2020 2020 2020 2020 666f 7220 656e            for en
+000167a0: 7472 7920 696e 206c 322e 7370 6c69 7428  try in l2.split(
+000167b0: 225c 6e22 293a 0d0a 2020 2020 2020 2020  "\n"):..        
+000167c0: 2020 2020 2020 2020 6966 2065 6e74 7279          if entry
+000167d0: 2021 3d20 2222 2061 6e64 2065 6e74 7279   != "" and entry
+000167e0: 2021 3d20 225c 6e22 3a0d 0a20 2020 2020   != "\n":..     
+000167f0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00016800: 6967 6e2c 2069 7465 6d2c 2073 696c 656e  ign, item, silen
+00016810: 7420 3d20 7365 6c66 2e65 6e74 7279 5f74  t = self.entry_t
+00016820: 6f5f 7661 6c73 2865 6e74 7279 2c20 6167  o_vals(entry, ag
+00016830: 656e 7432 2c20 224c 6961 6269 6c69 7469  ent2, "Liabiliti
+00016840: 6573 2229 0d0a 2020 2020 2020 2020 2020  es")..          
+00016850: 2020 2020 2020 2020 2020 6966 2073 6967            if sig
+00016860: 6e20 6973 206e 6f74 204e 6f6e 653a 0d0a  n is not None:..
+00016870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016880: 2020 2020 2020 2020 636f 6d6d 616e 6473          commands
+00016890: 2e61 7070 656e 6428 2225 732e 6261 6c61  .append("%s.bala
+000168a0: 6e63 655f 7368 6565 742e 6368 616e 6765  nce_sheet.change
+000168b0: 5f69 7465 6d28 2725 7327 2c20 2573 2c20  _item('%s', %s, 
+000168c0: 2573 2c20 7375 7070 7265 7373 5f73 746f  %s, suppress_sto
+000168d0: 636b 3d25 7329 2220 2520 280d 0a20 2020  ck=%s)" % (..   
+000168e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000168f0: 2020 2020 2061 6765 6e74 322c 2069 7465       agent2, ite
+00016900: 6d2c 2022 4261 6c61 6e63 6545 6e74 7279  m, "BalanceEntry
+00016910: 2e4c 4941 4249 4c49 5449 4553 222c 2073  .LIABILITIES", s
+00016920: 6967 6e20 2b20 7175 616e 7469 7479 2c20  ign + quantity, 
+00016930: 7369 6c65 6e74 2929 0d0a 0d0a 2020 2020  silent))....    
+00016940: 2020 2020 2020 2020 636f 6d6d 616e 6473          commands
+00016950: 2e61 7070 656e 6428 2225 732e 6261 6c61  .append("%s.bala
+00016960: 6e63 655f 7368 6565 742e 656e 6761 6765  nce_sheet.engage
+00016970: 2829 2220 2520 6167 656e 7431 290d 0a20  ()" % agent1).. 
+00016980: 2020 2020 2020 2020 2020 2069 6620 5472             if Tr
+00016990: 7565 3a20 2320 6167 656e 7431 213d 6167  ue: # agent1!=ag
+000169a0: 656e 7432 3a0d 0a20 2020 2020 2020 2020  ent2:..         
+000169b0: 2020 2020 2020 2063 6f6d 6d61 6e64 732e         commands.
+000169c0: 6170 7065 6e64 2822 2573 2e62 616c 616e  append("%s.balan
+000169d0: 6365 5f73 6865 6574 2e65 6e67 6167 6528  ce_sheet.engage(
+000169e0: 2922 2025 2061 6765 6e74 3229 0d0a 0d0a  )" % agent2)....
+000169f0: 2020 2020 2020 2020 2020 2020 6164 645f              add_
+00016a00: 666c 6f77 203d 2066 6c6f 775f 6368 6563  flow = flow_chec
+00016a10: 6b0d 0a20 2020 2020 2020 2020 2020 2069  k..            i
+00016a20: 6620 6164 645f 666c 6f77 3a0d 0a20 2020  f add_flow:..   
+00016a30: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+00016a40: 6e74 2873 7562 6a65 6374 5f73 7472 2c22  nt(subject_str,"
+00016a50: 666c 6f77 2063 6865 636b 222c 666c 6f77  flow check",flow
+00016a60: 5f63 6865 636b 290d 0a0d 0a20 2020 2020  _check)....     
+00016a70: 2020 2020 2020 2020 2020 206b 696e 645f             kind_
+00016a80: 656e 756d 203d 2022 2825 732c 2573 2922  enum = "(%s,%s)"
+00016a90: 2025 2028 6b69 6e64 2e73 706c 6974 2822   % (kind.split("
+00016aa0: 2d3e 2229 5b30 5d2e 7374 7269 7028 292c  ->")[0].strip(),
+00016ab0: 6b69 6e64 2e73 706c 6974 2822 2d3e 2229  kind.split("->")
+00016ac0: 5b31 5d2e 7374 7269 7028 2929 0d0a 0d0a  [1].strip())....
+00016ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016ae0: 636f 6d6d 616e 6473 2e61 7070 656e 6428  commands.append(
+00016af0: 2246 6c6f 774d 6174 7269 7828 292e 6c6f  "FlowMatrix().lo
+00016b00: 675f 666c 6f77 2825 732c 2025 732c 2025  g_flow(%s, %s, %
+00016b10: 732c 2025 732c 2073 7562 6a65 6374 3d27  s, %s, subject='
+00016b20: 2573 2729 2220 2520 286b 696e 645f 656e  %s')" % (kind_en
+00016b30: 756d 2c20 7175 616e 7469 7479 2c20 6167  um, quantity, ag
+00016b40: 656e 7431 2c20 6167 656e 7432 2c20 7375  ent1, agent2, su
+00016b50: 626a 6563 745f 7374 7229 290d 0a0d 0a20  bject_str)).... 
+00016b60: 2020 2020 2020 2020 2020 2023 2061 7070             # app
+00016b70: 656e 6420 696e 7365 7274 5f6c 696e 6b20  end insert_link 
+00016b80: 636f 6d6d 616e 6420 746f 2063 6f64 650d  command to code.
+00016b90: 0a0d 0a0d 0a20 2020 2020 2020 2020 2020  .....           
+00016ba0: 206d 795f 696e 636f 6d65 5f64 6963 7420   my_income_dict 
+00016bb0: 3d20 7b20 2320 2374 7261 6e73 6c61 7465  = { # #translate
+00016bc0: 7320 7374 7269 6e67 2069 6e74 6f20 4943  s string into IC
+00016bd0: 5345 6e74 7279 2028 666f 7220 6265 7474  SEntry (for bett
+00016be0: 6572 2065 6666 6963 6965 6e63 7929 0d0a  er efficiency)..
+00016bf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016c00: 2252 6576 656e 7565 223a 2022 4943 5345  "Revenue": "ICSE
+00016c10: 6e74 7279 2e52 4556 454e 5545 5322 2c0d  ntry.REVENUES",.
+00016c20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016c30: 2022 4e6f 6e2d 4f70 2e20 496e 636f 6d65   "Non-Op. Income
+00016c40: 223a 2022 4943 5345 6e74 7279 2e4e 4f49  ": "ICSEntry.NOI
+00016c50: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
+00016c60: 2020 2020 2245 7870 656e 7365 223a 2022      "Expense": "
+00016c70: 4943 5345 6e74 7279 2e45 5850 454e 5345  ICSEntry.EXPENSE
+00016c80: 5322 2c0d 0a20 2020 2020 2020 2020 2020  S",..           
+00016c90: 2020 2020 2022 5461 7822 3a20 2249 4353       "Tax": "ICS
+00016ca0: 456e 7472 792e 5441 5845 5322 2c0d 0a20  Entry.TAXES",.. 
+00016cb0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00016cc0: 496e 7465 7265 7374 223a 2022 4943 5345  Interest": "ICSE
+00016cd0: 6e74 7279 2e49 4e54 4552 4553 5422 2c0d  ntry.INTEREST",.
+00016ce0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016cf0: 2022 4761 696e 223a 2022 4943 5345 6e74   "Gain": "ICSEnt
+00016d00: 7279 2e47 4149 4e53 222c 0d0a 2020 2020  ry.GAINS",..    
+00016d10: 2020 2020 2020 2020 2020 2020 224e 6f6e              "Non
+00016d20: 7461 782e 5072 6f66 6974 223a 2022 4943  tax.Profit": "IC
+00016d30: 5345 6e74 7279 2e4e 4f4e 5441 585f 5052  SEntry.NONTAX_PR
+00016d40: 4f46 4954 5322 2c0d 0a20 2020 2020 2020  OFITS",..       
+00016d50: 2020 2020 2020 2020 2022 4e6f 6e74 6178           "Nontax
+00016d60: 2e20 5072 6f66 6974 223a 2022 4943 5345  . Profit": "ICSE
+00016d70: 6e74 7279 2e4e 4f4e 5441 585f 5052 4f46  ntry.NONTAX_PROF
+00016d80: 4954 5322 2c20 2320 7175 6963 6b20 616e  ITS", # quick an
+00016d90: 6420 6469 7274 7920 6275 6766 6978 0d0a  d dirty bugfix..
+00016da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016db0: 224e 6f6e 7461 782e 204c 6f73 7322 3a20  "Nontax. Loss": 
+00016dc0: 2022 4943 5345 6e74 7279 2e4e 4f4e 5441   "ICSEntry.NONTA
+00016dd0: 585f 4c4f 5353 4553 222c 0d0a 2020 2020  X_LOSSES",..    
+00016de0: 2020 2020 2020 2020 2020 2020 224c 6f73              "Los
+00016df0: 7322 3a20 2022 4943 5345 6e74 7279 2e4c  s":  "ICSEntry.L
+00016e00: 4f53 5345 5322 0d0a 2020 2020 2020 2020  OSSES"..        
+00016e10: 2020 2020 7d0d 0a0d 0a20 2020 2020 2020      }....       
+00016e20: 2020 2020 2023 2069 6e63 6f6d 6520 7374       # income st
+00016e30: 6174 656d 656e 743f 0d0a 2020 2020 2020  atement?..      
+00016e40: 2020 2020 2020 6966 2022 696e 636f 6d65        if "income
+00016e50: 3122 2069 6e20 6669 6c65 6461 7461 3a0d  1" in filedata:.
+00016e60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016e70: 2069 6620 7374 7228 6669 6c65 6461 7461   if str(filedata
+00016e80: 5b22 696e 636f 6d65 3122 5d29 2021 3d20  ["income1"]) != 
+00016e90: 274e 6f6e 6527 3a0d 0a20 2020 2020 2020  'None':..       
+00016ea0: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
+00016eb0: 6d61 6e64 732e 6170 7065 6e64 2822 2573  mands.append("%s
+00016ec0: 2e69 6e63 6f6d 655f 7374 6174 656d 656e  .income_statemen
+00016ed0: 742e 6e65 775f 656e 7472 7928 2573 2c27  t.new_entry(%s,'
+00016ee0: 2573 272c 2573 2922 2025 2028 6167 656e  %s',%s)" % (agen
+00016ef0: 7431 2c6d 795f 696e 636f 6d65 5f64 6963  t1,my_income_dic
+00016f00: 745b 6669 6c65 6461 7461 5b22 696e 636f  t[filedata["inco
+00016f10: 6d65 3122 5d5d 2c73 7562 6a65 6374 2c71  me1"]],subject,q
+00016f20: 7561 6e74 6974 7929 290d 0a0d 0a20 2020  uantity))....   
+00016f30: 2020 2020 2020 2020 2069 6620 2269 6e63           if "inc
+00016f40: 6f6d 6532 2220 696e 2066 696c 6564 6174  ome2" in filedat
+00016f50: 613a 0d0a 2020 2020 2020 2020 2020 2020  a:..            
+00016f60: 2020 2020 6966 2073 7472 2866 696c 6564      if str(filed
+00016f70: 6174 615b 2269 6e63 6f6d 6532 225d 2920  ata["income2"]) 
+00016f80: 213d 2027 4e6f 6e65 273a 0d0a 2020 2020  != 'None':..    
+00016f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016fa0: 636f 6d6d 616e 6473 2e61 7070 656e 6428  commands.append(
+00016fb0: 2225 732e 696e 636f 6d65 5f73 7461 7465  "%s.income_state
+00016fc0: 6d65 6e74 2e6e 6577 5f65 6e74 7279 2825  ment.new_entry(%
+00016fd0: 732c 2725 7327 2c25 7329 2220 2520 2861  s,'%s',%s)" % (a
+00016fe0: 6765 6e74 322c 206d 795f 696e 636f 6d65  gent2, my_income
+00016ff0: 5f64 6963 745b 6669 6c65 6461 7461 5b22  _dict[filedata["
+00017000: 696e 636f 6d65 3222 5d5d 2c20 7375 626a  income2"]], subj
+00017010: 6563 742c 2071 7561 6e74 6974 7929 290d  ect, quantity)).
+00017020: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+00017030: 2063 6173 6820 666c 6f77 2073 7461 7465   cash flow state
+00017040: 6d65 6e74 0d0a 2020 2020 2020 2020 2020  ment..          
+00017050: 2020 6966 2022 6361 7368 666c 6f77 3122    if "cashflow1"
+00017060: 2069 6e20 6669 6c65 6461 7461 3a0d 0a20   in filedata:.. 
+00017070: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00017080: 6620 7374 7228 6669 6c65 6461 7461 5b22  f str(filedata["
+00017090: 6361 7368 666c 6f77 3122 5d29 2021 3d20  cashflow1"]) != 
+000170a0: 274e 6f6e 6527 3a0d 0a20 2020 2020 2020  'None':..       
+000170b0: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
+000170c0: 6d61 6e64 732e 6170 7065 6e64 2822 2573  mands.append("%s
+000170d0: 2e63 6173 685f 666c 6f77 5f73 7461 7465  .cash_flow_state
+000170e0: 6d65 6e74 2e6e 6577 5f65 6e74 7279 2825  ment.new_entry(%
+000170f0: 732c 2725 7327 2c2d 2573 2922 2025 2028  s,'%s',-%s)" % (
+00017100: 6167 656e 7431 2c22 4361 7368 466c 6f77  agent1,"CashFlow
+00017110: 456e 7472 792e 2220 2b20 6669 6c65 6461  Entry." + fileda
+00017120: 7461 5b22 6361 7368 666c 6f77 3122 5d2e  ta["cashflow1"].
+00017130: 7570 7065 7228 292c 7375 626a 6563 742c  upper(),subject,
+00017140: 7175 616e 7469 7479 2929 0d0a 0d0a 2020  quantity))....  
+00017150: 2020 2020 2020 2020 2020 6966 2022 6361            if "ca
+00017160: 7368 666c 6f77 3222 2069 6e20 6669 6c65  shflow2" in file
+00017170: 6461 7461 3a0d 0a20 2020 2020 2020 2020  data:..         
+00017180: 2020 2020 2020 2069 6620 7374 7228 6669         if str(fi
+00017190: 6c65 6461 7461 5b22 6361 7368 666c 6f77  ledata["cashflow
+000171a0: 3222 5d29 2021 3d20 274e 6f6e 6527 3a0d  2"]) != 'None':.
+000171b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000171c0: 2020 2020 2063 6f6d 6d61 6e64 732e 6170       commands.ap
+000171d0: 7065 6e64 2822 2573 2e63 6173 685f 666c  pend("%s.cash_fl
+000171e0: 6f77 5f73 7461 7465 6d65 6e74 2e6e 6577  ow_statement.new
+000171f0: 5f65 6e74 7279 2825 732c 2725 7327 2c25  _entry(%s,'%s',%
+00017200: 7329 2220 2520 2861 6765 6e74 322c 2243  s)" % (agent2,"C
+00017210: 6173 6846 6c6f 7745 6e74 7279 2e22 202b  ashFlowEntry." +
+00017220: 2066 696c 6564 6174 615b 2263 6173 6866   filedata["cashf
+00017230: 6c6f 7732 225d 2e75 7070 6572 2829 2c73  low2"].upper(),s
+00017240: 7562 6a65 6374 2c71 7561 6e74 6974 7929  ubject,quantity)
+00017250: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+00017260: 2069 6620 5472 7565 3a20 2320 6167 656e   if True: # agen
+00017270: 7431 2021 3d20 6167 656e 7432 3a0d 0a20  t1 != agent2:.. 
+00017280: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00017290: 6574 686f 6420 3d20 2264 6566 2025 7328  ethod = "def %s(
+000172a0: 2573 2c20 2573 2c20 2573 293a 5c6e 2220  %s, %s, %s):\n" 
+000172b0: 2520 2873 7562 6a65 6374 2c61 6765 6e74  % (subject,agent
+000172c0: 312c 6167 656e 7432 2c71 7561 6e74 6974  1,agent2,quantit
+000172d0: 7929 0d0a 2020 2020 2020 2020 2020 2020  y)..            
+000172e0: 2365 6c73 653a 0d0a 2020 2020 2020 2020  #else:..        
+000172f0: 2020 2020 2320 2020 206d 6574 686f 6420      #    method 
+00017300: 3d20 2264 6566 2025 7328 2573 2c20 2573  = "def %s(%s, %s
+00017310: 293a 5c6e 2220 2520 2873 7562 6a65 6374  ):\n" % (subject
+00017320: 2c20 6167 656e 7431 2c20 7175 616e 7469  , agent1, quanti
+00017330: 7479 290d 0a0d 0a20 2020 2020 2020 2020  ty)....         
+00017340: 2020 2069 6620 2264 6573 6372 6970 7469     if "descripti
+00017350: 6f6e 2220 696e 2066 696c 6564 6174 613a  on" in filedata:
+00017360: 2023 2061 6464 2074 6865 2064 6573 6372   # add the descr
+00017370: 6970 7469 6f6e 2069 6e20 7468 6520 646f  iption in the do
+00017380: 6373 7472 696e 6720 6f66 2074 6865 2066  cstring of the f
+00017390: 756e 6374 696f 6e20 6465 6669 6e69 7469  unction definiti
+000173a0: 6f6e 0d0a 2020 2020 2020 2020 2020 2020  on..            
+000173b0: 2020 2020 6d65 7468 6f64 202b 3d20 2220      method += " 
+000173c0: 2020 2023 2220 2b20 6669 6c65 6461 7461     #" + filedata
+000173d0: 5b22 6465 7363 7269 7074 696f 6e22 5d20  ["description"] 
+000173e0: 2b20 225c 6e22 0d0a 0d0a 2020 2020 2020  + "\n"....      
+000173f0: 2020 2020 2020 666f 7220 636f 6d6d 616e        for comman
+00017400: 6420 696e 2063 6f6d 6d61 6e64 733a 0d0a  d in commands:..
+00017410: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017420: 6d65 7468 6f64 202b 3d20 2220 2020 2022  method += "    "
+00017430: 202b 2063 6f6d 6d61 6e64 202b 2022 5c6e   + command + "\n
+00017440: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
+00017450: 206d 6574 686f 6420 2b3d 2022 5c6e 5c6e   method += "\n\n
+00017460: 220d 0a20 2020 2020 2020 2020 2020 2063  "..            c
+00017470: 6f64 6520 2b3d 206d 6574 686f 640d 0a0d  ode += method...
+00017480: 0a20 2020 2020 2020 2066 6f6c 6465 7220  .        folder 
+00017490: 3d20 6f73 2e70 6174 682e 6469 726e 616d  = os.path.dirnam
+000174a0: 6528 7365 6c66 2e63 7572 7265 6e74 5f66  e(self.current_f
+000174b0: 696c 6529 2023 2073 7461 7475 7342 6172  ile) # statusBar
+000174c0: 2829 2e63 7572 7265 6e74 4d65 7373 6167  ().currentMessag
+000174d0: 6528 2929 0d0a 2020 2020 2020 2020 666e  e())..        fn
+000174e0: 616d 6520 3d20 2066 6f6c 6465 7220 2b20  ame =  folder + 
+000174f0: 222f 7079 7468 6f6e 5f63 6f64 652f 7472  "/python_code/tr
+00017500: 616e 7361 6374 696f 6e73 2e70 7922 0d0a  ansactions.py"..
+00017510: 0d0a 2020 2020 2020 2020 7769 7468 206f  ..        with o
+00017520: 7065 6e28 666e 616d 652c 2277 222c 656e  pen(fname,"w",en
+00017530: 636f 6469 6e67 3d22 7574 662d 3822 2920  coding="utf-8") 
+00017540: 6173 2066 696c 653a 0d0a 2020 2020 2020  as file:..      
+00017550: 2020 2020 2020 6669 6c65 2e77 7269 7465        file.write
+00017560: 2863 6f64 6529 0d0a 0d0a 2020 2020 2020  (code)....      
+00017570: 2020 6966 2073 686f 775f 6e6f 7469 6669    if show_notifi
+00017580: 6361 7469 6f6e 3a0d 0a20 2020 2020 2020  cation:..       
+00017590: 2020 2020 2073 656c 662e 6e6f 7469 6679       self.notify
+000175a0: 286d 6573 7361 6765 3d22 436f 6465 2065  (message="Code e
+000175b0: 7870 6f72 7465 6420 746f 2025 7322 2025  xported to %s" %
+000175c0: 2028 666e 616d 6529 2c74 6974 6c65 3d22   (fname),title="
+000175d0: 5375 6363 6573 7322 290d 0a0d 0a0d 0a20  Success")...... 
+000175e0: 2020 2064 6566 2067 656e 5f69 6373 5f73     def gen_ics_s
+000175f0: 696e 676c 6528 7365 6c66 293a 0d0a 2020  ingle(self):..  
+00017600: 2020 2020 2020 6966 2073 656c 662e 6472        if self.dr
+00017610: 6177 6361 6e76 6173 2e68 6967 686c 6967  awcanvas.highlig
+00017620: 6874 6564 2069 7320 4e6f 6e65 3a0d 0a20  hted is None:.. 
+00017630: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00017640: 6e6f 7469 6679 2874 6974 6c65 3d22 4e6f  notify(title="No
+00017650: 2061 6765 6e74 2073 656c 6563 7465 6422   agent selected"
+00017660: 2c20 6d65 7373 6167 653d 224e 6f20 6167  , message="No ag
+00017670: 656e 7420 7365 6c65 6374 6564 2e20 506c  ent selected. Pl
+00017680: 6561 7365 2073 656c 6563 7420 6f6e 6520  ease select one 
+00017690: 6669 7273 742e 2229 0d0a 2020 2020 2020  first.")..      
+000176a0: 2020 2020 2020 7265 7475 726e 0d0a 2020        return..  
+000176b0: 2020 2020 2020 6966 2073 656c 662e 6472        if self.dr
+000176c0: 6177 6361 6e76 6173 2e68 6967 686c 6967  awcanvas.highlig
+000176d0: 6874 6564 2e69 7368 656c 7065 723a 0d0a  hted.ishelper:..
+000176e0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000176f0: 2e6e 6f74 6966 7928 7469 746c 653d 224e  .notify(title="N
+00017700: 6f20 6167 656e 7420 7365 6c65 6374 6564  o agent selected
+00017710: 222c 206d 6573 7361 6765 3d22 4e6f 2076  ", message="No v
+00017720: 616c 6964 2062 6f78 2073 656c 6563 7465  alid box selecte
+00017730: 642e 2050 6c65 6173 6520 7365 6c65 6374  d. Please select
+00017740: 2061 6e20 6167 656e 742e 2229 0d0a 2020   an agent.")..  
+00017750: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00017760: 0d0a 2020 2020 2020 2020 6d79 5f61 6765  ..        my_age
+00017770: 6e74 203d 2073 656c 662e 6472 6177 6361  nt = self.drawca
+00017780: 6e76 6173 2e68 6967 686c 6967 6874 6564  nvas.highlighted
+00017790: 2e6e 616d 650d 0a0d 0a20 2020 2020 2020  .name....       
+000177a0: 2063 6f6d 6269 6e65 645f 696e 636f 6d65   combined_income
+000177b0: 203d 2020 7b22 5375 626a 6563 7422 3a5b   =  {"Subject":[
+000177c0: 5d2c 2253 686f 7274 204e 616d 6522 3a20  ],"Short Name": 
+000177d0: 5b5d 2c22 5175 616e 7469 7479 223a 5b5d  [],"Quantity":[]
+000177e0: 2c20 2254 7970 6522 3a5b 5d2c 2022 5261  , "Type":[], "Ra
+000177f0: 6e6b 696e 6722 3a5b 5d7d 2023 2072 616e  nking":[]} # ran
+00017800: 6b69 6e67 2077 696c 6c20 6265 2072 656d  king will be rem
+00017810: 6f76 6564 206c 6174 6572 0d0a 2020 2020  oved later..    
+00017820: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
+00017830: 2022 4761 696e 7322 3a20 5b5d 2c20 224c   "Gains": [], "L
+00017840: 6f73 7365 7322 3a20 5b5d 2c20 2252 6576  osses": [], "Rev
+00017850: 656e 7565 7322 3a20 5b5d 2c20 2254 6178  enues": [], "Tax
+00017860: 6573 223a 205b 5d2c 2022 4578 7065 6e73  es": [], "Expens
+00017870: 6573 223a 205b 5d2c 0d0a 2020 2020 2020  es": [],..      
+00017880: 2020 2022 4e6f 6e74 6178 6162 6c65 204c     "Nontaxable L
+00017890: 6f73 7365 7322 3a20 5b5d 2c20 224e 6f6e  osses": [], "Non
+000178a0: 7461 7861 626c 6520 5072 6f66 6974 7322  taxable Profits"
+000178b0: 3a20 5b5d 2c0d 0a20 2020 2020 2020 2020  : [],..         
+000178c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000178d0: 2020 2020 2020 224e 6f6e 2d4f 7065 7261        "Non-Opera
+000178e0: 7469 6f6e 616c 2049 6e63 6f6d 6522 3a20  tional Income": 
+000178f0: 5b5d 2c0d 0a20 2020 2020 2020 2020 2020  [],..           
+00017900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017920: 2020 2020 2249 6e74 6572 6573 7420 5061      "Interest Pa
+00017930: 796d 656e 7473 223a 205b 5d0d 0a20 2020  yments": []..   
+00017940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017960: 2020 2020 2020 2020 2020 2020 7d0d 0a20              }.. 
+00017970: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
+00017980: 2020 2020 6b20 3d20 300d 0a20 2020 2020      k = 0..     
+00017990: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
+000179a0: 2020 2020 2066 6f72 2066 696c 6564 6174       for filedat
+000179b0: 6120 696e 2073 656c 662e 656e 7472 795f  a in self.entry_
+000179c0: 6461 7461 3a0d 0a20 2020 2020 2020 2020  data:..         
+000179d0: 2020 2020 2020 2061 6765 6e74 3120 3d20         agent1 = 
+000179e0: 6669 6c65 6461 7461 5b22 6167 656e 7431  filedata["agent1
+000179f0: 225d 2e73 7472 6970 2829 0d0a 2020 2020  "].strip()..    
+00017a00: 2020 2020 2020 2020 2020 2020 6167 656e              agen
+00017a10: 7432 203d 2066 696c 6564 6174 615b 2261  t2 = filedata["a
+00017a20: 6765 6e74 3222 5d2e 7374 7269 7028 290d  gent2"].strip().
+00017a30: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00017a40: 2020 2070 7269 6e74 2822 6167 656e 7431     print("agent1
+00017a50: 222c 6167 656e 7431 2c22 6167 656e 7432  ",agent1,"agent2
+00017a60: 222c 6167 656e 7432 290d 0a20 2020 2020  ",agent2)..     
+00017a70: 2020 2020 2020 2020 2020 2069 6620 6167             if ag
+00017a80: 656e 7431 203d 3d20 6d79 5f61 6765 6e74  ent1 == my_agent
+00017a90: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00017aa0: 2020 2020 2020 2072 6566 5f61 6765 6e74         ref_agent
+00017ab0: 203d 2022 6167 656e 7431 220d 0a20 2020   = "agent1"..   
+00017ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017ad0: 2072 6566 5f69 6e63 6f6d 6520 3d20 2269   ref_income = "i
+00017ae0: 6e63 6f6d 6531 220d 0a0d 0a20 2020 2020  ncome1"....     
+00017af0: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00017b00: 6167 656e 7432 203d 3d20 6d79 5f61 6765  agent2 == my_age
+00017b10: 6e74 3a0d 0a20 2020 2020 2020 2020 2020  nt:..           
+00017b20: 2020 2020 2020 2020 2072 6566 5f61 6765           ref_age
+00017b30: 6e74 203d 2022 6167 656e 7432 220d 0a20  nt = "agent2".. 
 00017b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017b50: 2020 2020 2020 2022 5461 7822 3a20 2254         "Tax": "T
-00017b60: 6178 6573 222c 0d0a 2020 2020 2020 2020  axes",..        
-00017b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017b80: 2020 2020 2020 224e 6f6e 7461 782e 2050        "Nontax. P
-00017b90: 726f 6669 7422 3a20 224e 6f6e 7461 7861  rofit": "Nontaxa
-00017ba0: 626c 6520 5072 6f66 6974 7322 2c0d 0a20  ble Profits",.. 
-00017bb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017bc0: 2020 2020 2020 2020 2020 2020 2022 4e6f               "No
-00017bd0: 6e74 6178 2e20 4c6f 7373 223a 2022 4e6f  ntax. Loss": "No
-00017be0: 6e74 6178 6162 6c65 204c 6f73 7365 7322  ntaxable Losses"
-00017bf0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00017c00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017c10: 2022 4e6f 6e2d 4f70 2e20 496e 636f 6d65   "Non-Op. Income
-00017c20: 223a 2022 4e6f 6e2d 4f70 6572 6174 696f  ": "Non-Operatio
-00017c30: 6e61 6c20 496e 636f 6d65 222c 0d0a 2020  nal Income",..  
-00017c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017c50: 2020 2020 2020 2020 2020 2020 2249 6e74              "Int
-00017c60: 6572 6573 7422 3a20 2249 6e74 6572 6573  erest": "Interes
-00017c70: 7420 5061 796d 656e 7473 227d 0d0a 0d0a  t Payments"}....
-00017c80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017c90: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-00017ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017cb0: 2020 6966 2061 6765 6e74 3120 3d3d 206d    if agent1 == m
-00017cc0: 795f 6167 656e 743a 0d0a 2020 2020 2020  y_agent:..      
-00017cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017ce0: 2020 2020 2020 7369 676e 203d 2022 2d22        sign = "-"
-00017cf0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00017d00: 2020 2020 2020 2020 2020 6966 2061 6765            if age
-00017d10: 6e74 3220 3d3d 206d 795f 6167 656e 743a  nt2 == my_agent:
-00017d20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00017d30: 2020 2020 2020 2020 2020 2020 2020 7369                si
-00017d40: 676e 203d 2022 2b22 0d0a 0d0a 2020 2020  gn = "+"....    
-00017d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017d60: 2020 2020 7120 3d20 7379 6d70 792e 6c61      q = sympy.la
-00017d70: 7465 7828 7379 6d70 792e 7369 6d70 6c69  tex(sympy.simpli
-00017d80: 6679 2873 6967 6e20 2b20 6669 6c65 6461  fy(sign + fileda
-00017d90: 7461 5b22 7175 616e 7469 7479 225d 292c  ta["quantity"]),
-00017da0: 206d 6f64 653d 2270 6c61 696e 2229 0d0a   mode="plain")..
-00017db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017dc0: 2020 2020 2020 2020 7375 626a 6563 7420          subject 
-00017dd0: 3d20 6669 6c65 6461 7461 5b22 7375 626a  = filedata["subj
-00017de0: 6563 7422 5d2e 7265 706c 6163 6528 225f  ect"].replace("_
-00017df0: 222c 2022 2022 292e 6361 7069 7461 6c69  ", " ").capitali
-00017e00: 7a65 2829 0d0a 2020 2020 2020 2020 2020  ze()..          
-00017e10: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-00017e20: 696e 7428 2220 2020 2020 2066 6f75 6e64  int("      found
-00017e30: 222c 712c 7375 626a 6563 7429 0d0a 2020  ",q,subject)..  
-00017e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017e50: 2020 2020 2020 7470 6520 3d20 6d79 6469        tpe = mydi
-00017e60: 6374 5b66 696c 6564 6174 615b 7265 665f  ct[filedata[ref_
-00017e70: 696e 636f 6d65 5d5d 0d0a 2020 2020 2020  income]]..      
-00017e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017e90: 2020 636f 6d62 696e 6564 5f69 6e63 6f6d    combined_incom
-00017ea0: 655b 2254 7970 6522 5d2e 6170 7065 6e64  e["Type"].append
-00017eb0: 2874 7065 290d 0a20 2020 2020 2020 2020  (tpe)..         
-00017ec0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00017ed0: 6f6d 6269 6e65 645f 696e 636f 6d65 5b22  ombined_income["
-00017ee0: 5375 626a 6563 7422 5d2e 6170 7065 6e64  Subject"].append
-00017ef0: 2873 7562 6a65 6374 290d 0a20 2020 2020  (subject)..     
-00017f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017f10: 2020 2063 6f6d 6269 6e65 645f 696e 636f     combined_inco
-00017f20: 6d65 5b22 5175 616e 7469 7479 225d 2e61  me["Quantity"].a
-00017f30: 7070 656e 6428 7374 7228 7129 290d 0a20  ppend(str(q)).. 
-00017f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017f50: 2020 2020 2020 2063 6f6d 6269 6e65 645f         combined_
-00017f60: 696e 636f 6d65 5b22 5368 6f72 7420 4e61  income["Short Na
-00017f70: 6d65 225d 2e61 7070 656e 6428 6669 6c65  me"].append(file
-00017f80: 6461 7461 5b22 7368 6f72 746e 616d 6522  data["shortname"
-00017f90: 5d2e 7374 7269 7028 2929 0d0a 0d0a 2020  ].strip())....  
-00017fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017fb0: 2020 2020 2020 6966 2074 7065 2069 6e20        if tpe in 
-00017fc0: 5b22 4761 696e 7322 2c22 4c6f 7373 6573  ["Gains","Losses
-00017fd0: 222c 2245 7870 656e 7365 7322 2c22 5265  ","Expenses","Re
-00017fe0: 7665 6e75 6573 225d 3a0d 0a20 2020 2020  venues"]:..     
-00017ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018000: 2020 2020 2020 2063 6f6d 6269 6e65 645f         combined_
-00018010: 696e 636f 6d65 5b22 5261 6e6b 696e 6722  income["Ranking"
-00018020: 5d2e 6170 7065 6e64 2830 290d 0a20 2020  ].append(0)..   
-00018030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018040: 2020 2020 2065 6c69 6620 7470 6520 696e       elif tpe in
-00018050: 205b 224e 6f6e 2d4f 7065 7261 7469 6f6e   ["Non-Operation
-00018060: 616c 2049 6e63 6f6d 6522 2c22 496e 7465  al Income","Inte
-00018070: 7265 7374 2050 6179 6d65 6e74 7322 5d3a  rest Payments"]:
-00018080: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00018090: 2020 2020 2020 2020 2020 2020 2020 636f                co
-000180a0: 6d62 696e 6564 5f69 6e63 6f6d 655b 2252  mbined_income["R
-000180b0: 616e 6b69 6e67 225d 2e61 7070 656e 6428  anking"].append(
-000180c0: 3129 0d0a 2020 2020 2020 2020 2020 2020  1)..            
-000180d0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-000180e0: 2074 7065 2069 6e20 5b22 5461 7865 7322   tpe in ["Taxes"
-000180f0: 5d3a 0d0a 2020 2020 2020 2020 2020 2020  ]:..            
-00018100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018110: 636f 6d62 696e 6564 5f69 6e63 6f6d 655b  combined_income[
-00018120: 2252 616e 6b69 6e67 225d 2e61 7070 656e  "Ranking"].appen
-00018130: 6428 3229 0d0a 2020 2020 2020 2020 2020  d(2)..          
-00018140: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00018150: 6966 2074 7065 2069 6e20 5b22 4e6f 6e74  if tpe in ["Nont
-00018160: 6178 6162 6c65 2050 726f 6669 7473 222c  axable Profits",
-00018170: 2022 4e6f 6e74 6178 6162 6c65 204c 6f73   "Nontaxable Los
-00018180: 7365 7322 5d3a 0d0a 2020 2020 2020 2020  ses"]:..        
+00017b50: 2020 2072 6566 5f69 6e63 6f6d 6520 3d20     ref_income = 
+00017b60: 2269 6e63 6f6d 6532 220d 0a20 2020 2020  "income2"..     
+00017b70: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00017b80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00017b90: 2020 2020 2020 7061 7373 0d0a 0d0a 2020        pass....  
+00017ba0: 2020 2020 2020 2020 2020 2020 2020 2361                #a
+00017bb0: 7373 6574 7331 203d 2066 696c 6564 6174  ssets1 = filedat
+00017bc0: 615b 2261 3122 5d20 2b20 225c 6e22 0d0a  a["a1"] + "\n"..
+00017bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017be0: 236c 6961 6273 3120 3d20 6669 6c65 6461  #liabs1 = fileda
+00017bf0: 7461 5b22 6c31 225d 202b 2022 5c6e 2220  ta["l1"] + "\n" 
+00017c00: 2b20 6669 6c65 6461 7461 5b22 6531 225d  + filedata["e1"]
+00017c10: 202b 2022 5c6e 220d 0a0d 0a20 2020 2020   + "\n"....     
+00017c20: 2020 2020 2020 2020 2020 2023 6173 7365             #asse
+00017c30: 7473 3220 3d20 6669 6c65 6461 7461 5b22  ts2 = filedata["
+00017c40: 6132 225d 202b 2022 5c6e 220d 0a20 2020  a2"] + "\n"..   
+00017c50: 2020 2020 2020 2020 2020 2020 2023 6c69               #li
+00017c60: 6162 7332 203d 2066 696c 6564 6174 615b  abs2 = filedata[
+00017c70: 226c 3222 5d20 2b20 225c 6e22 202b 2066  "l2"] + "\n" + f
+00017c80: 696c 6564 6174 615b 2265 3222 5d20 2b20  iledata["e2"] + 
+00017c90: 225c 6e22 0d0a 0d0a 2020 2020 2020 2020  "\n"....        
+00017ca0: 2020 2020 2020 2020 6966 2028 6167 656e          if (agen
+00017cb0: 7431 203d 3d20 6d79 5f61 6765 6e74 206f  t1 == my_agent o
+00017cc0: 7220 6167 656e 7432 203d 3d20 6d79 5f61  r agent2 == my_a
+00017cd0: 6765 6e74 2920 616e 6420 7374 7228 6669  gent) and str(fi
+00017ce0: 6c65 6461 7461 5b72 6566 5f69 6e63 6f6d  ledata[ref_incom
+00017cf0: 655d 2920 213d 2027 4e6f 6e65 273a 0d0a  e]) != 'None':..
+00017d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017d10: 2020 2020 6d79 6469 6374 203d 207b 2247      mydict = {"G
+00017d20: 6169 6e22 3a20 2247 6169 6e73 222c 0d0a  ain": "Gains",..
+00017d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017d40: 2020 2020 2020 2020 2020 2020 2020 224c                "L
+00017d50: 6f73 7322 3a20 224c 6f73 7365 7322 2c0d  oss": "Losses",.
+00017d60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017d70: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00017d80: 4578 7065 6e73 6522 3a20 2245 7870 656e  Expense": "Expen
+00017d90: 7365 7322 2c0d 0a20 2020 2020 2020 2020  ses",..         
+00017da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017db0: 2020 2020 2022 5265 7665 6e75 6522 3a20       "Revenue": 
+00017dc0: 2252 6576 656e 7565 7322 2c0d 0a20 2020  "Revenues",..   
+00017dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017de0: 2020 2020 2020 2020 2020 2022 5461 7822             "Tax"
+00017df0: 3a20 2254 6178 6573 222c 0d0a 2020 2020  : "Taxes",..    
+00017e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017e10: 2020 2020 2020 2020 2020 224e 6f6e 7461            "Nonta
+00017e20: 782e 2050 726f 6669 7422 3a20 224e 6f6e  x. Profit": "Non
+00017e30: 7461 7861 626c 6520 5072 6f66 6974 7322  taxable Profits"
+00017e40: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+00017e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017e60: 2022 4e6f 6e74 6178 2e20 4c6f 7373 223a   "Nontax. Loss":
+00017e70: 2022 4e6f 6e74 6178 6162 6c65 204c 6f73   "Nontaxable Los
+00017e80: 7365 7322 2c0d 0a20 2020 2020 2020 2020  ses",..         
+00017e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017ea0: 2020 2020 2022 4e6f 6e2d 4f70 2e20 496e       "Non-Op. In
+00017eb0: 636f 6d65 223a 2022 4e6f 6e2d 4f70 6572  come": "Non-Oper
+00017ec0: 6174 696f 6e61 6c20 496e 636f 6d65 222c  ational Income",
+00017ed0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00017ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017ef0: 2249 6e74 6572 6573 7422 3a20 2249 6e74  "Interest": "Int
+00017f00: 6572 6573 7420 5061 796d 656e 7473 227d  erest Payments"}
+00017f10: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00017f20: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+00017f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017f40: 2020 2020 2020 6966 2061 6765 6e74 3120        if agent1 
+00017f50: 3d3d 206d 795f 6167 656e 743a 0d0a 2020  == my_agent:..  
+00017f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017f70: 2020 2020 2020 2020 2020 7369 676e 203d            sign =
+00017f80: 2022 2d22 0d0a 2020 2020 2020 2020 2020   "-"..          
+00017f90: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00017fa0: 2061 6765 6e74 3220 3d3d 206d 795f 6167   agent2 == my_ag
+00017fb0: 656e 743a 0d0a 2020 2020 2020 2020 2020  ent:..          
+00017fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017fd0: 2020 7369 676e 203d 2022 2b22 0d0a 0d0a    sign = "+"....
+00017fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017ff0: 2020 2020 2020 2020 7120 3d20 7379 6d70          q = symp
+00018000: 792e 6c61 7465 7828 7379 6d70 792e 7369  y.latex(sympy.si
+00018010: 6d70 6c69 6679 2873 6967 6e20 2b20 6669  mplify(sign + fi
+00018020: 6c65 6461 7461 5b22 7175 616e 7469 7479  ledata["quantity
+00018030: 225d 292c 206d 6f64 653d 2270 6c61 696e  "]), mode="plain
+00018040: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
+00018050: 2020 2020 2020 2020 2020 2020 7375 626a              subj
+00018060: 6563 7420 3d20 6669 6c65 6461 7461 5b22  ect = filedata["
+00018070: 7375 626a 6563 7422 5d2e 7265 706c 6163  subject"].replac
+00018080: 6528 225f 222c 2022 2022 292e 6361 7069  e("_", " ").capi
+00018090: 7461 6c69 7a65 2829 0d0a 2020 2020 2020  talize()..      
+000180a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000180b0: 2020 7072 696e 7428 2220 2020 2020 2066    print("      f
+000180c0: 6f75 6e64 222c 712c 7375 626a 6563 7429  ound",q,subject)
+000180d0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000180e0: 2020 2020 2020 2020 2020 7470 6520 3d20            tpe = 
+000180f0: 6d79 6469 6374 5b66 696c 6564 6174 615b  mydict[filedata[
+00018100: 7265 665f 696e 636f 6d65 5d5d 0d0a 2020  ref_income]]..  
+00018110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018120: 2020 2020 2020 636f 6d62 696e 6564 5f69        combined_i
+00018130: 6e63 6f6d 655b 2254 7970 6522 5d2e 6170  ncome["Type"].ap
+00018140: 7065 6e64 2874 7065 290d 0a20 2020 2020  pend(tpe)..     
+00018150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018160: 2020 2063 6f6d 6269 6e65 645f 696e 636f     combined_inco
+00018170: 6d65 5b22 5375 626a 6563 7422 5d2e 6170  me["Subject"].ap
+00018180: 7065 6e64 2873 7562 6a65 6374 290d 0a20  pend(subject).. 
 00018190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000181a0: 2020 2020 636f 6d62 696e 6564 5f69 6e63      combined_inc
-000181b0: 6f6d 655b 2252 616e 6b69 6e67 225d 2e61  ome["Ranking"].a
-000181c0: 7070 656e 6428 3329 0d0a 2020 2020 2020  ppend(3)..      
-000181d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000181e0: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-000181f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018200: 2020 2020 2063 6f6d 6269 6e65 645f 696e       combined_in
-00018210: 636f 6d65 5b22 5261 6e6b 696e 6722 5d2e  come["Ranking"].
-00018220: 6170 7065 6e64 2834 290d 0a0d 0a0d 0a20  append(4)...... 
-00018230: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018240: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-00018250: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
-00018260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018270: 2020 2073 656c 662e 6e6f 7469 6679 280d     self.notify(.
-00018280: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018290: 2020 2020 2020 2020 2020 2020 2022 4361               "Ca
-000182a0: 6e6e 6f74 2068 616e 646c 6520 7468 6520  nnot handle the 
-000182b0: 7379 6d62 6f6c 6963 2065 7870 7265 7373  symbolic express
-000182c0: 696f 6e20 2573 2220 2520 7369 676e 202b  ion %s" % sign +
-000182d0: 2066 696c 6564 6174 615b 2271 7561 6e74   filedata["quant
-000182e0: 6974 7922 5d2c 7469 746c 653d 2245 7272  ity"],title="Err
-000182f0: 6f72 2229 0d0a 0d0a 2020 2020 2020 2020  or")....        
-00018300: 6578 6365 7074 3a0d 0a20 2020 2020 2020  except:..       
-00018310: 2020 2020 2073 656c 662e 6e6f 7469 6679       self.notify
-00018320: 2874 6974 6c65 3d22 4572 726f 7222 2c20  (title="Error", 
-00018330: 6d65 7373 6167 653d 2241 6e20 6572 726f  message="An erro
-00018340: 7220 6f63 6375 7272 6564 2e22 290d 0a0d  r occurred.")...
-00018350: 0a20 2020 2020 2020 2074 7279 3a0d 0a20  .        try:.. 
-00018360: 2020 2020 2020 2020 2020 2072 6573 756c             resul
-00018370: 7420 3d20 7064 2e44 6174 6146 7261 6d65  t = pd.DataFrame
-00018380: 2863 6f6d 6269 6e65 645f 696e 636f 6d65  (combined_income
-00018390: 292e 7365 745f 696e 6465 7828 2253 7562  ).set_index("Sub
-000183a0: 6a65 6374 2229 0d0a 0d0a 0d0a 2020 2020  ject")......    
-000183b0: 2020 2020 2020 2020 2320 736f 7274 2061          # sort a
-000183c0: 6674 6572 2072 616e 6b69 6e67 0d0a 2020  fter ranking..  
-000183d0: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-000183e0: 203d 2072 6573 756c 742e 736f 7274 5f76   = result.sort_v
-000183f0: 616c 7565 7328 2752 616e 6b69 6e67 2729  alues('Ranking')
-00018400: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-00018410: 2320 7265 6d6f 7665 2072 616e 6b69 6e67  # remove ranking
-00018420: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-00018430: 7375 6c74 203d 2072 6573 756c 742e 6472  sult = result.dr
-00018440: 6f70 2863 6f6c 756d 6e73 3d20 2252 616e  op(columns= "Ran
-00018450: 6b69 6e67 2229 0d0a 0d0a 2020 2020 2020  king")....      
-00018460: 2020 2020 2020 6d6f 6465 6c20 3d20 5061        model = Pa
-00018470: 6e64 6173 4d6f 6465 6c28 7265 7375 6c74  ndasModel(result
-00018480: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-00018490: 2069 6620 6d79 5f61 6765 6e74 206e 6f74   if my_agent not
-000184a0: 2069 6e20 496e 636f 6d65 5669 6577 6572   in IncomeViewer
-000184b0: 2e69 6e73 7461 6e63 6573 3a0d 0a20 2020  .instances:..   
-000184c0: 2020 2020 2020 2020 2020 2020 206d 7976               myv
-000184d0: 6965 7720 3d20 496e 636f 6d65 5669 6577  iew = IncomeView
-000184e0: 6572 2873 656c 662c 6e61 6d65 3d6d 795f  er(self,name=my_
-000184f0: 6167 656e 7429 0d0a 2020 2020 2020 2020  agent)..        
-00018500: 2020 2020 656c 7365 3a0d 0a20 2020 2020      else:..     
-00018510: 2020 2020 2020 2020 2020 206d 7976 6965             myvie
-00018520: 7720 3d20 496e 636f 6d65 5669 6577 6572  w = IncomeViewer
-00018530: 2e69 6e73 7461 6e63 6573 5b6d 795f 6167  .instances[my_ag
-00018540: 656e 745d 0d0a 2020 2020 2020 2020 2020  ent]..          
-00018550: 2020 2320 6d76 6965 772e 7365 7447 656f    # mview.setGeo
-00018560: 6d65 7472 7928 3130 302c 3530 3029 0d0a  metry(100,500)..
-00018570: 2020 2020 2020 2020 2020 2020 6d79 7669              myvi
-00018580: 6577 2e73 6574 5f6d 6f64 656c 286d 6f64  ew.set_model(mod
-00018590: 656c 290d 0a20 2020 2020 2020 2020 2020  el)..           
-000185a0: 2023 206d 7669 6577 2e77 6562 5669 6577   # mview.webView
-000185b0: 2e73 6574 4874 6d6c 2864 665f 6874 6d6c  .setHtml(df_html
-000185c0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-000185d0: 2069 6620 6e6f 7420 7365 6c66 2e74 6573   if not self.tes
-000185e0: 745f 6d6f 6465 3a0d 0a20 2020 2020 2020  t_mode:..       
-000185f0: 2020 2020 2020 2020 206d 7976 6965 772e           myview.
-00018600: 7368 6f77 2829 0d0a 0d0a 2020 2020 2020  show()....      
-00018610: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
-00018620: 6f6e 2061 7320 653a 0d0a 2020 2020 2020  on as e:..      
-00018630: 2020 2020 2020 7365 6c66 2e6e 6f74 6966        self.notif
-00018640: 7928 7469 746c 653d 2245 7272 6f72 222c  y(title="Error",
-00018650: 206d 6573 7361 6765 3d22 416e 2065 7272   message="An err
-00018660: 6f72 206f 6363 7572 7265 642e 2220 2b20  or occurred." + 
-00018670: 7374 7228 6529 290d 0a0d 0a0d 0a20 2020  str(e))......   
-00018680: 2064 6566 2067 656e 5f63 6173 6866 6c6f   def gen_cashflo
-00018690: 775f 7369 6e67 6c65 2873 656c 6629 3a0d  w_single(self):.
-000186a0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-000186b0: 2e64 7261 7763 616e 7661 732e 6869 6768  .drawcanvas.high
-000186c0: 6c69 6768 7465 6420 6973 204e 6f6e 653a  lighted is None:
-000186d0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-000186e0: 6c66 2e6e 6f74 6966 7928 7469 746c 653d  lf.notify(title=
-000186f0: 224e 6f20 6167 656e 7420 7365 6c65 6374  "No agent select
-00018700: 6564 222c 206d 6573 7361 6765 3d22 4e6f  ed", message="No
-00018710: 2061 6765 6e74 2073 656c 6563 7465 642e   agent selected.
-00018720: 2050 6c65 6173 6520 7365 6c65 6374 206f   Please select o
-00018730: 6e65 2066 6972 7374 2e22 290d 0a20 2020  ne first.")..   
-00018740: 2020 2020 2020 2020 2072 6574 7572 6e0d           return.
-00018750: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00018760: 2e64 7261 7763 616e 7661 732e 6869 6768  .drawcanvas.high
-00018770: 6c69 6768 7465 642e 6973 6865 6c70 6572  lighted.ishelper
-00018780: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
-00018790: 656c 662e 6e6f 7469 6679 2874 6974 6c65  elf.notify(title
-000187a0: 3d22 4e6f 2061 6765 6e74 2073 656c 6563  ="No agent selec
-000187b0: 7465 6422 2c20 6d65 7373 6167 653d 224e  ted", message="N
-000187c0: 6f20 7661 6c69 6420 626f 7820 7365 6c65  o valid box sele
-000187d0: 6374 6564 2e20 506c 6561 7365 2073 656c  cted. Please sel
-000187e0: 6563 7420 616e 2061 6765 6e74 2e22 290d  ect an agent.").
-000187f0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00018800: 7572 6e0d 0a20 2020 2020 2020 206d 795f  urn..        my_
-00018810: 6167 656e 7420 3d20 7365 6c66 2e64 7261  agent = self.dra
-00018820: 7763 616e 7661 732e 6869 6768 6c69 6768  wcanvas.highligh
-00018830: 7465 642e 6e61 6d65 0d0a 0d0a 2020 2020  ted.name....    
-00018840: 2020 2020 636f 6d62 696e 6564 5f69 6e63      combined_inc
-00018850: 6f6d 6520 3d20 207b 2253 7562 6a65 6374  ome =  {"Subject
-00018860: 223a 5b5d 2c22 5368 6f72 7420 4e61 6d65  ":[],"Short Name
-00018870: 223a 205b 5d2c 2251 7561 6e74 6974 7922  ": [],"Quantity"
-00018880: 3a5b 5d2c 2022 5479 7065 223a 5b5d 2c20  :[], "Type":[], 
-00018890: 2252 616e 6b69 6e67 223a 5b5d 7d20 2320  "Ranking":[]} # 
-000188a0: 7261 6e6b 696e 6720 7769 6c6c 2062 6520  ranking will be 
-000188b0: 7265 6d6f 7665 6420 6c61 7465 720d 0a20  removed later.. 
-000188c0: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-000188d0: 2020 2020 2222 220d 0a20 2020 2020 2020      """..       
-000188e0: 206b 203d 2030 0d0a 2020 2020 2020 2020   k = 0..        
-000188f0: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
-00018900: 2020 666f 7220 6669 6c65 6461 7461 2069    for filedata i
-00018910: 6e20 7365 6c66 2e65 6e74 7279 5f64 6174  n self.entry_dat
-00018920: 613a 0d0a 2020 2020 2020 2020 2020 2020  a:..            
-00018930: 2020 2020 6167 656e 7431 203d 2066 696c      agent1 = fil
-00018940: 6564 6174 615b 2261 6765 6e74 3122 5d2e  edata["agent1"].
-00018950: 7374 7269 7028 290d 0a20 2020 2020 2020  strip()..       
-00018960: 2020 2020 2020 2020 2061 6765 6e74 3220           agent2 
-00018970: 3d20 6669 6c65 6461 7461 5b22 6167 656e  = filedata["agen
-00018980: 7432 225d 2e73 7472 6970 2829 0d0a 0d0a  t2"].strip()....
-00018990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000189a0: 7072 696e 7428 2261 6765 6e74 3122 2c61  print("agent1",a
-000189b0: 6765 6e74 312c 2261 6765 6e74 3222 2c61  gent1,"agent2",a
-000189c0: 6765 6e74 3229 0d0a 2020 2020 2020 2020  gent2)..        
-000189d0: 2020 2020 2020 2020 6966 2061 6765 6e74          if agent
-000189e0: 3120 3d3d 206d 795f 6167 656e 743a 0d0a  1 == my_agent:..
-000189f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018a00: 2020 2020 7265 665f 6167 656e 7420 3d20      ref_agent = 
-00018a10: 2261 6765 6e74 3122 0d0a 2020 2020 2020  "agent1"..      
-00018a20: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00018a30: 665f 696e 636f 6d65 203d 2022 6361 7368  f_income = "cash
-00018a40: 666c 6f77 3122 0d0a 0d0a 2020 2020 2020  flow1"....      
-00018a50: 2020 2020 2020 2020 2020 656c 6966 2061            elif a
-00018a60: 6765 6e74 3220 3d3d 206d 795f 6167 656e  gent2 == my_agen
-00018a70: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
-00018a80: 2020 2020 2020 2020 7265 665f 6167 656e          ref_agen
-00018a90: 7420 3d20 2261 6765 6e74 3222 0d0a 2020  t = "agent2"..  
-00018aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018ab0: 2020 7265 665f 696e 636f 6d65 203d 2022    ref_income = "
-00018ac0: 6361 7368 666c 6f77 3222 0d0a 2020 2020  cashflow2"..    
-00018ad0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00018ae0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00018af0: 2020 2020 2020 2070 6173 730d 0a0d 0a20         pass.... 
-00018b00: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-00018b10: 6173 7365 7473 3120 3d20 6669 6c65 6461  assets1 = fileda
-00018b20: 7461 5b22 6131 225d 202b 2022 5c6e 220d  ta["a1"] + "\n".
-00018b30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018b40: 2023 6c69 6162 7331 203d 2066 696c 6564   #liabs1 = filed
-00018b50: 6174 615b 226c 3122 5d20 2b20 225c 6e22  ata["l1"] + "\n"
-00018b60: 202b 2066 696c 6564 6174 615b 2265 3122   + filedata["e1"
-00018b70: 5d20 2b20 225c 6e22 0d0a 0d0a 2020 2020  ] + "\n"....    
-00018b80: 2020 2020 2020 2020 2020 2020 2361 7373              #ass
-00018b90: 6574 7332 203d 2066 696c 6564 6174 615b  ets2 = filedata[
-00018ba0: 2261 3222 5d20 2b20 225c 6e22 0d0a 2020  "a2"] + "\n"..  
-00018bb0: 2020 2020 2020 2020 2020 2020 2020 236c                #l
-00018bc0: 6961 6273 3220 3d20 6669 6c65 6461 7461  iabs2 = filedata
-00018bd0: 5b22 6c32 225d 202b 2022 5c6e 2220 2b20  ["l2"] + "\n" + 
-00018be0: 6669 6c65 6461 7461 5b22 6532 225d 202b  filedata["e2"] +
-00018bf0: 2022 5c6e 220d 0a0d 0a20 2020 2020 2020   "\n"....       
-00018c00: 2020 2020 2020 2020 2069 6620 2861 6765           if (age
-00018c10: 6e74 3120 3d3d 206d 795f 6167 656e 7420  nt1 == my_agent 
-00018c20: 6f72 2061 6765 6e74 3220 3d3d 206d 795f  or agent2 == my_
-00018c30: 6167 656e 7429 2061 6e64 2073 7472 2866  agent) and str(f
-00018c40: 696c 6564 6174 615b 7265 665f 696e 636f  iledata[ref_inco
-00018c50: 6d65 5d29 2021 3d20 274e 6f6e 6527 3a0d  me]) != 'None':.
-00018c60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018c70: 2020 2020 206d 7964 6963 7420 3d20 7b22       mydict = {"
-00018c80: 4761 696e 223a 2022 4761 696e 7322 2c0d  Gain": "Gains",.
-00018c90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018ca0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00018cb0: 4c6f 7373 223a 2022 4c6f 7373 6573 222c  Loss": "Losses",
-00018cc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00018cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018ce0: 2245 7870 656e 7365 223a 2022 4578 7065  "Expense": "Expe
-00018cf0: 6e73 6573 222c 0d0a 2020 2020 2020 2020  nses",..        
-00018d00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018d10: 2020 2020 2020 2252 6576 656e 7565 223a        "Revenue":
-00018d20: 2022 5265 7665 6e75 6573 222c 0d0a 2020   "Revenues",..  
-00018d30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018d40: 2020 2020 2020 2020 2020 2020 2254 6178              "Tax
-00018d50: 223a 2022 5461 7865 7322 2c0d 0a20 2020  ": "Taxes",..   
+000181a0: 2020 2020 2020 2063 6f6d 6269 6e65 645f         combined_
+000181b0: 696e 636f 6d65 5b22 5175 616e 7469 7479  income["Quantity
+000181c0: 225d 2e61 7070 656e 6428 7374 7228 7129  "].append(str(q)
+000181d0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+000181e0: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
+000181f0: 6e65 645f 696e 636f 6d65 5b22 5368 6f72  ned_income["Shor
+00018200: 7420 4e61 6d65 225d 2e61 7070 656e 6428  t Name"].append(
+00018210: 6669 6c65 6461 7461 5b22 7368 6f72 746e  filedata["shortn
+00018220: 616d 6522 5d2e 7374 7269 7028 2929 0d0a  ame"].strip())..
+00018230: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018240: 2020 2020 2020 2020 2020 6966 2074 7065            if tpe
+00018250: 2069 6e20 5b22 4761 696e 7322 2c22 4c6f   in ["Gains","Lo
+00018260: 7373 6573 222c 2245 7870 656e 7365 7322  sses","Expenses"
+00018270: 2c22 5265 7665 6e75 6573 225d 3a0d 0a20  ,"Revenues"]:.. 
+00018280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018290: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
+000182a0: 6e65 645f 696e 636f 6d65 5b22 5261 6e6b  ned_income["Rank
+000182b0: 696e 6722 5d2e 6170 7065 6e64 2830 290d  ing"].append(0).
+000182c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000182d0: 2020 2020 2020 2020 2065 6c69 6620 7470           elif tp
+000182e0: 6520 696e 205b 224e 6f6e 2d4f 7065 7261  e in ["Non-Opera
+000182f0: 7469 6f6e 616c 2049 6e63 6f6d 6522 2c22  tional Income","
+00018300: 496e 7465 7265 7374 2050 6179 6d65 6e74  Interest Payment
+00018310: 7322 5d3a 0d0a 2020 2020 2020 2020 2020  s"]:..          
+00018320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018330: 2020 636f 6d62 696e 6564 5f69 6e63 6f6d    combined_incom
+00018340: 655b 2252 616e 6b69 6e67 225d 2e61 7070  e["Ranking"].app
+00018350: 656e 6428 3129 0d0a 2020 2020 2020 2020  end(1)..        
+00018360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018370: 656c 6966 2074 7065 2069 6e20 5b22 5461  elif tpe in ["Ta
+00018380: 7865 7322 5d3a 0d0a 2020 2020 2020 2020  xes"]:..        
+00018390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000183a0: 2020 2020 636f 6d62 696e 6564 5f69 6e63      combined_inc
+000183b0: 6f6d 655b 2252 616e 6b69 6e67 225d 2e61  ome["Ranking"].a
+000183c0: 7070 656e 6428 3229 0d0a 2020 2020 2020  ppend(2)..      
+000183d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000183e0: 2020 656c 6966 2074 7065 2069 6e20 5b22    elif tpe in ["
+000183f0: 4e6f 6e74 6178 6162 6c65 2050 726f 6669  Nontaxable Profi
+00018400: 7473 222c 2022 4e6f 6e74 6178 6162 6c65  ts", "Nontaxable
+00018410: 204c 6f73 7365 7322 5d3a 0d0a 2020 2020   Losses"]:..    
+00018420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018430: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
+00018440: 5f69 6e63 6f6d 655b 2252 616e 6b69 6e67  _income["Ranking
+00018450: 225d 2e61 7070 656e 6428 3329 0d0a 2020  "].append(3)..  
+00018460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018470: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00018480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018490: 2020 2020 2020 2020 2063 6f6d 6269 6e65           combine
+000184a0: 645f 696e 636f 6d65 5b22 5261 6e6b 696e  d_income["Rankin
+000184b0: 6722 5d2e 6170 7065 6e64 2834 290d 0a0d  g"].append(4)...
+000184c0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+000184d0: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+000184e0: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
+000184f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018500: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
+00018510: 6679 280d 0a20 2020 2020 2020 2020 2020  fy(..           
+00018520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018530: 2022 4361 6e6e 6f74 2068 616e 646c 6520   "Cannot handle 
+00018540: 7468 6520 7379 6d62 6f6c 6963 2065 7870  the symbolic exp
+00018550: 7265 7373 696f 6e20 2573 2220 2520 7369  ression %s" % si
+00018560: 676e 202b 2066 696c 6564 6174 615b 2271  gn + filedata["q
+00018570: 7561 6e74 6974 7922 5d2c 7469 746c 653d  uantity"],title=
+00018580: 2245 7272 6f72 2229 0d0a 0d0a 2020 2020  "Error")....    
+00018590: 2020 2020 6578 6365 7074 3a0d 0a20 2020      except:..   
+000185a0: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
+000185b0: 7469 6679 2874 6974 6c65 3d22 4572 726f  tify(title="Erro
+000185c0: 7222 2c20 6d65 7373 6167 653d 2241 6e20  r", message="An 
+000185d0: 6572 726f 7220 6f63 6375 7272 6564 2e22  error occurred."
+000185e0: 290d 0a0d 0a20 2020 2020 2020 2074 7279  )....        try
+000185f0: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
+00018600: 6573 756c 7420 3d20 7064 2e44 6174 6146  esult = pd.DataF
+00018610: 7261 6d65 2863 6f6d 6269 6e65 645f 696e  rame(combined_in
+00018620: 636f 6d65 292e 7365 745f 696e 6465 7828  come).set_index(
+00018630: 2253 7562 6a65 6374 2229 0d0a 0d0a 0d0a  "Subject")......
+00018640: 2020 2020 2020 2020 2020 2020 2320 736f              # so
+00018650: 7274 2061 6674 6572 2072 616e 6b69 6e67  rt after ranking
+00018660: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
+00018670: 7375 6c74 203d 2072 6573 756c 742e 736f  sult = result.so
+00018680: 7274 5f76 616c 7565 7328 2752 616e 6b69  rt_values('Ranki
+00018690: 6e67 2729 0d0a 0d0a 2020 2020 2020 2020  ng')....        
+000186a0: 2020 2020 2320 7265 6d6f 7665 2072 616e      # remove ran
+000186b0: 6b69 6e67 0d0a 2020 2020 2020 2020 2020  king..          
+000186c0: 2020 7265 7375 6c74 203d 2072 6573 756c    result = resul
+000186d0: 742e 6472 6f70 2863 6f6c 756d 6e73 3d20  t.drop(columns= 
+000186e0: 2252 616e 6b69 6e67 2229 0d0a 0d0a 2020  "Ranking")....  
+000186f0: 2020 2020 2020 2020 2020 6d6f 6465 6c20            model 
+00018700: 3d20 5061 6e64 6173 4d6f 6465 6c28 7265  = PandasModel(re
+00018710: 7375 6c74 290d 0a0d 0a20 2020 2020 2020  sult)....       
+00018720: 2020 2020 2069 6620 6d79 5f61 6765 6e74       if my_agent
+00018730: 206e 6f74 2069 6e20 496e 636f 6d65 5669   not in IncomeVi
+00018740: 6577 6572 2e69 6e73 7461 6e63 6573 3a0d  ewer.instances:.
+00018750: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018760: 206d 7976 6965 7720 3d20 496e 636f 6d65   myview = Income
+00018770: 5669 6577 6572 2873 656c 662c 6e61 6d65  Viewer(self,name
+00018780: 3d6d 795f 6167 656e 7429 0d0a 2020 2020  =my_agent)..    
+00018790: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+000187a0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+000187b0: 7976 6965 7720 3d20 496e 636f 6d65 5669  yview = IncomeVi
+000187c0: 6577 6572 2e69 6e73 7461 6e63 6573 5b6d  ewer.instances[m
+000187d0: 795f 6167 656e 745d 0d0a 2020 2020 2020  y_agent]..      
+000187e0: 2020 2020 2020 2320 6d76 6965 772e 7365        # mview.se
+000187f0: 7447 656f 6d65 7472 7928 3130 302c 3530  tGeometry(100,50
+00018800: 3029 0d0a 2020 2020 2020 2020 2020 2020  0)..            
+00018810: 6d79 7669 6577 2e73 6574 5f6d 6f64 656c  myview.set_model
+00018820: 286d 6f64 656c 290d 0a20 2020 2020 2020  (model)..       
+00018830: 2020 2020 2023 206d 7669 6577 2e77 6562       # mview.web
+00018840: 5669 6577 2e73 6574 4874 6d6c 2864 665f  View.setHtml(df_
+00018850: 6874 6d6c 290d 0a0d 0a20 2020 2020 2020  html)....       
+00018860: 2020 2020 2069 6620 6e6f 7420 7365 6c66       if not self
+00018870: 2e74 6573 745f 6d6f 6465 3a0d 0a20 2020  .test_mode:..   
+00018880: 2020 2020 2020 2020 2020 2020 206d 7976               myv
+00018890: 6965 772e 7368 6f77 2829 0d0a 0d0a 2020  iew.show()....  
+000188a0: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
+000188b0: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
+000188c0: 2020 2020 2020 2020 2020 7365 6c66 2e6e            self.n
+000188d0: 6f74 6966 7928 7469 746c 653d 2245 7272  otify(title="Err
+000188e0: 6f72 222c 206d 6573 7361 6765 3d22 416e  or", message="An
+000188f0: 2065 7272 6f72 206f 6363 7572 7265 642e   error occurred.
+00018900: 2220 2b20 7374 7228 6529 290d 0a0d 0a0d  " + str(e)).....
+00018910: 0a20 2020 2064 6566 2067 656e 5f63 6173  .    def gen_cas
+00018920: 6866 6c6f 775f 7369 6e67 6c65 2873 656c  hflow_single(sel
+00018930: 6629 3a0d 0a20 2020 2020 2020 2069 6620  f):..        if 
+00018940: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
+00018950: 6869 6768 6c69 6768 7465 6420 6973 204e  highlighted is N
+00018960: 6f6e 653a 0d0a 2020 2020 2020 2020 2020  one:..          
+00018970: 2020 7365 6c66 2e6e 6f74 6966 7928 7469    self.notify(ti
+00018980: 746c 653d 224e 6f20 6167 656e 7420 7365  tle="No agent se
+00018990: 6c65 6374 6564 222c 206d 6573 7361 6765  lected", message
+000189a0: 3d22 4e6f 2061 6765 6e74 2073 656c 6563  ="No agent selec
+000189b0: 7465 642e 2050 6c65 6173 6520 7365 6c65  ted. Please sele
+000189c0: 6374 206f 6e65 2066 6972 7374 2e22 290d  ct one first.").
+000189d0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+000189e0: 7572 6e0d 0a20 2020 2020 2020 2069 6620  urn..        if 
+000189f0: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
+00018a00: 6869 6768 6c69 6768 7465 642e 6973 6865  highlighted.ishe
+00018a10: 6c70 6572 3a0d 0a20 2020 2020 2020 2020  lper:..         
+00018a20: 2020 2073 656c 662e 6e6f 7469 6679 2874     self.notify(t
+00018a30: 6974 6c65 3d22 4e6f 2061 6765 6e74 2073  itle="No agent s
+00018a40: 656c 6563 7465 6422 2c20 6d65 7373 6167  elected", messag
+00018a50: 653d 224e 6f20 7661 6c69 6420 626f 7820  e="No valid box 
+00018a60: 7365 6c65 6374 6564 2e20 506c 6561 7365  selected. Please
+00018a70: 2073 656c 6563 7420 616e 2061 6765 6e74   select an agent
+00018a80: 2e22 290d 0a20 2020 2020 2020 2020 2020  .")..           
+00018a90: 2072 6574 7572 6e0d 0a20 2020 2020 2020   return..       
+00018aa0: 206d 795f 6167 656e 7420 3d20 7365 6c66   my_agent = self
+00018ab0: 2e64 7261 7763 616e 7661 732e 6869 6768  .drawcanvas.high
+00018ac0: 6c69 6768 7465 642e 6e61 6d65 0d0a 0d0a  lighted.name....
+00018ad0: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
+00018ae0: 5f69 6e63 6f6d 6520 3d20 207b 2253 7562  _income =  {"Sub
+00018af0: 6a65 6374 223a 5b5d 2c22 5368 6f72 7420  ject":[],"Short 
+00018b00: 4e61 6d65 223a 205b 5d2c 2251 7561 6e74  Name": [],"Quant
+00018b10: 6974 7922 3a5b 5d2c 2022 5479 7065 223a  ity":[], "Type":
+00018b20: 5b5d 2c20 2252 616e 6b69 6e67 223a 5b5d  [], "Ranking":[]
+00018b30: 7d20 2320 7261 6e6b 696e 6720 7769 6c6c  } # ranking will
+00018b40: 2062 6520 7265 6d6f 7665 6420 6c61 7465   be removed late
+00018b50: 720d 0a20 2020 2020 2020 2022 2222 0d0a  r..        """..
+00018b60: 2020 2020 2020 2020 2222 220d 0a20 2020          """..   
+00018b70: 2020 2020 206b 203d 2030 0d0a 2020 2020       k = 0..    
+00018b80: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
+00018b90: 2020 2020 2020 666f 7220 6669 6c65 6461        for fileda
+00018ba0: 7461 2069 6e20 7365 6c66 2e65 6e74 7279  ta in self.entry
+00018bb0: 5f64 6174 613a 0d0a 2020 2020 2020 2020  _data:..        
+00018bc0: 2020 2020 2020 2020 6167 656e 7431 203d          agent1 =
+00018bd0: 2066 696c 6564 6174 615b 2261 6765 6e74   filedata["agent
+00018be0: 3122 5d2e 7374 7269 7028 290d 0a20 2020  1"].strip()..   
+00018bf0: 2020 2020 2020 2020 2020 2020 2061 6765               age
+00018c00: 6e74 3220 3d20 6669 6c65 6461 7461 5b22  nt2 = filedata["
+00018c10: 6167 656e 7432 225d 2e73 7472 6970 2829  agent2"].strip()
+00018c20: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00018c30: 2020 2020 7072 696e 7428 2261 6765 6e74      print("agent
+00018c40: 3122 2c61 6765 6e74 312c 2261 6765 6e74  1",agent1,"agent
+00018c50: 3222 2c61 6765 6e74 3229 0d0a 2020 2020  2",agent2)..    
+00018c60: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+00018c70: 6765 6e74 3120 3d3d 206d 795f 6167 656e  gent1 == my_agen
+00018c80: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
+00018c90: 2020 2020 2020 2020 7265 665f 6167 656e          ref_agen
+00018ca0: 7420 3d20 2261 6765 6e74 3122 0d0a 2020  t = "agent1"..  
+00018cb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018cc0: 2020 7265 665f 696e 636f 6d65 203d 2022    ref_income = "
+00018cd0: 6361 7368 666c 6f77 3122 0d0a 0d0a 2020  cashflow1"....  
+00018ce0: 2020 2020 2020 2020 2020 2020 2020 656c                el
+00018cf0: 6966 2061 6765 6e74 3220 3d3d 206d 795f  if agent2 == my_
+00018d00: 6167 656e 743a 0d0a 2020 2020 2020 2020  agent:..        
+00018d10: 2020 2020 2020 2020 2020 2020 7265 665f              ref_
+00018d20: 6167 656e 7420 3d20 2261 6765 6e74 3222  agent = "agent2"
+00018d30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018d40: 2020 2020 2020 7265 665f 696e 636f 6d65        ref_income
+00018d50: 203d 2022 6361 7368 666c 6f77 3222 0d0a   = "cashflow2"..
 00018d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018d70: 2020 2020 2020 2020 2020 2022 4e6f 6e74             "Nont
-00018d80: 6178 2e20 5072 6f66 6974 223a 2022 4e6f  ax. Profit": "No
-00018d90: 6e74 6178 6162 6c65 2050 726f 6669 7473  ntaxable Profits
-00018da0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-00018db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018dc0: 2020 224e 6f6e 7461 782e 204c 6f73 7322    "Nontax. Loss"
-00018dd0: 3a20 224e 6f6e 7461 7861 626c 6520 4c6f  : "Nontaxable Lo
-00018de0: 7373 6573 222c 0d0a 2020 2020 2020 2020  sses",..        
-00018df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018e00: 2020 2020 2020 224e 6f6e 2d4f 702e 2049        "Non-Op. I
-00018e10: 6e63 6f6d 6522 3a20 224e 6f6e 2d4f 7065  ncome": "Non-Ope
-00018e20: 7261 7469 6f6e 616c 2049 6e63 6f6d 6522  rational Income"
-00018e30: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-00018e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018e50: 2022 496e 7465 7265 7374 223a 2022 496e   "Interest": "In
-00018e60: 7465 7265 7374 2050 6179 6d65 6e74 7322  terest Payments"
-00018e70: 7d0d 0a0d 0a20 2020 2020 2020 2020 2020  }....           
-00018e80: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
-00018e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018ea0: 2020 2020 2020 2069 6620 6167 656e 7431         if agent1
-00018eb0: 203d 3d20 6d79 5f61 6765 6e74 3a0d 0a20   == my_agent:.. 
-00018ec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018ed0: 2020 2020 2020 2020 2020 2073 6967 6e20             sign 
-00018ee0: 3d20 222d 220d 0a20 2020 2020 2020 2020  = "-"..         
-00018ef0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00018f00: 6620 6167 656e 7432 203d 3d20 6d79 5f61  f agent2 == my_a
-00018f10: 6765 6e74 3a0d 0a20 2020 2020 2020 2020  gent:..         
-00018f20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018f30: 2020 2073 6967 6e20 3d20 222b 220d 0a0d     sign = "+"...
-00018f40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018f50: 2020 2020 2020 2020 2071 203d 2073 796d           q = sym
-00018f60: 7079 2e6c 6174 6578 2873 796d 7079 2e73  py.latex(sympy.s
-00018f70: 696d 706c 6966 7928 7369 676e 202b 2066  implify(sign + f
-00018f80: 696c 6564 6174 615b 2271 7561 6e74 6974  iledata["quantit
-00018f90: 7922 5d29 2c20 6d6f 6465 3d22 706c 6169  y"]), mode="plai
-00018fa0: 6e22 290d 0a20 2020 2020 2020 2020 2020  n")..           
-00018fb0: 2020 2020 2020 2020 2020 2020 2073 7562               sub
-00018fc0: 6a65 6374 203d 2066 696c 6564 6174 615b  ject = filedata[
-00018fd0: 2273 7562 6a65 6374 225d 2e72 6570 6c61  "subject"].repla
-00018fe0: 6365 2822 5f22 2c20 2220 2229 2e63 6170  ce("_", " ").cap
-00018ff0: 6974 616c 697a 6528 290d 0a20 2020 2020  italize()..     
-00019000: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019010: 2020 2070 7269 6e74 2822 2020 2020 2020     print("      
-00019020: 666f 756e 6422 2c71 2c73 7562 6a65 6374  found",q,subject
-00019030: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00019040: 2020 2020 2020 2020 2020 2074 7065 203d             tpe =
-00019050: 2066 696c 6564 6174 615b 7265 665f 696e   filedata[ref_in
-00019060: 636f 6d65 5d0d 0a20 2020 2020 2020 2020  come]..         
-00019070: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00019080: 6f6d 6269 6e65 645f 696e 636f 6d65 5b22  ombined_income["
-00019090: 5479 7065 225d 2e61 7070 656e 6428 7470  Type"].append(tp
-000190a0: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
-000190b0: 2020 2020 2020 2020 2020 2020 636f 6d62              comb
-000190c0: 696e 6564 5f69 6e63 6f6d 655b 2253 7562  ined_income["Sub
-000190d0: 6a65 6374 225d 2e61 7070 656e 6428 7375  ject"].append(su
-000190e0: 626a 6563 7429 0d0a 2020 2020 2020 2020  bject)..        
-000190f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019100: 636f 6d62 696e 6564 5f69 6e63 6f6d 655b  combined_income[
-00019110: 2251 7561 6e74 6974 7922 5d2e 6170 7065  "Quantity"].appe
-00019120: 6e64 2873 7472 2871 2929 0d0a 2020 2020  nd(str(q))..    
-00019130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019140: 2020 2020 636f 6d62 696e 6564 5f69 6e63      combined_inc
-00019150: 6f6d 655b 2253 686f 7274 204e 616d 6522  ome["Short Name"
-00019160: 5d2e 6170 7065 6e64 2866 696c 6564 6174  ].append(filedat
-00019170: 615b 2273 686f 7274 6e61 6d65 225d 2e73  a["shortname"].s
-00019180: 7472 6970 2829 290d 0a20 2020 2020 2020  trip())..       
-00019190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000191a0: 2063 6f6d 6269 6e65 645f 696e 636f 6d65   combined_income
-000191b0: 5b22 5261 6e6b 696e 6722 5d2e 6170 7065  ["Ranking"].appe
-000191c0: 6e64 2830 290d 0a20 2020 2020 2020 2020  nd(0)..         
-000191d0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000191e0: 2222 0d0a 2020 2020 2020 2020 2020 2020  ""..            
-000191f0: 2020 2020 2020 2020 2020 2020 6966 2074              if t
-00019200: 7065 2069 6e20 5b22 4761 696e 7322 2c22  pe in ["Gains","
-00019210: 4c6f 7373 6573 222c 2245 7870 656e 7365  Losses","Expense
-00019220: 7322 2c22 5265 7665 6e75 6573 225d 3a0d  s","Revenues"]:.
-00019230: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019240: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
-00019250: 6269 6e65 645f 696e 636f 6d65 5b22 5261  bined_income["Ra
-00019260: 6e6b 696e 6722 5d2e 6170 7065 6e64 2830  nking"].append(0
-00019270: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00019280: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00019290: 7470 6520 696e 205b 224e 6f6e 2d4f 7065  tpe in ["Non-Ope
-000192a0: 7261 7469 6f6e 616c 2049 6e63 6f6d 6522  rational Income"
-000192b0: 2c22 496e 7465 7265 7374 2050 6179 6d65  ,"Interest Payme
-000192c0: 6e74 7322 5d3a 0d0a 2020 2020 2020 2020  nts"]:..        
-000192d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000192e0: 2020 2020 636f 6d62 696e 6564 5f69 6e63      combined_inc
-000192f0: 6f6d 655b 2252 616e 6b69 6e67 225d 2e61  ome["Ranking"].a
-00019300: 7070 656e 6428 3129 0d0a 2020 2020 2020  ppend(1)..      
-00019310: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019320: 2020 656c 6966 2074 7065 2069 6e20 5b22    elif tpe in ["
-00019330: 5461 7865 7322 5d3a 0d0a 2020 2020 2020  Taxes"]:..      
+00018d70: 656c 7365 3a0d 0a20 2020 2020 2020 2020  else:..         
+00018d80: 2020 2020 2020 2020 2020 2070 6173 730d             pass.
+00018d90: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+00018da0: 2020 2023 6173 7365 7473 3120 3d20 6669     #assets1 = fi
+00018db0: 6c65 6461 7461 5b22 6131 225d 202b 2022  ledata["a1"] + "
+00018dc0: 5c6e 220d 0a20 2020 2020 2020 2020 2020  \n"..           
+00018dd0: 2020 2020 2023 6c69 6162 7331 203d 2066       #liabs1 = f
+00018de0: 696c 6564 6174 615b 226c 3122 5d20 2b20  iledata["l1"] + 
+00018df0: 225c 6e22 202b 2066 696c 6564 6174 615b  "\n" + filedata[
+00018e00: 2265 3122 5d20 2b20 225c 6e22 0d0a 0d0a  "e1"] + "\n"....
+00018e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018e20: 2361 7373 6574 7332 203d 2066 696c 6564  #assets2 = filed
+00018e30: 6174 615b 2261 3222 5d20 2b20 225c 6e22  ata["a2"] + "\n"
+00018e40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018e50: 2020 236c 6961 6273 3220 3d20 6669 6c65    #liabs2 = file
+00018e60: 6461 7461 5b22 6c32 225d 202b 2022 5c6e  data["l2"] + "\n
+00018e70: 2220 2b20 6669 6c65 6461 7461 5b22 6532  " + filedata["e2
+00018e80: 225d 202b 2022 5c6e 220d 0a0d 0a20 2020  "] + "\n"....   
+00018e90: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00018ea0: 2861 6765 6e74 3120 3d3d 206d 795f 6167  (agent1 == my_ag
+00018eb0: 656e 7420 6f72 2061 6765 6e74 3220 3d3d  ent or agent2 ==
+00018ec0: 206d 795f 6167 656e 7429 2061 6e64 2073   my_agent) and s
+00018ed0: 7472 2866 696c 6564 6174 615b 7265 665f  tr(filedata[ref_
+00018ee0: 696e 636f 6d65 5d29 2021 3d20 274e 6f6e  income]) != 'Non
+00018ef0: 6527 3a0d 0a20 2020 2020 2020 2020 2020  e':..           
+00018f00: 2020 2020 2020 2020 206d 7964 6963 7420           mydict 
+00018f10: 3d20 7b22 4761 696e 223a 2022 4761 696e  = {"Gain": "Gain
+00018f20: 7322 2c0d 0a20 2020 2020 2020 2020 2020  s",..           
+00018f30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018f40: 2020 2022 4c6f 7373 223a 2022 4c6f 7373     "Loss": "Loss
+00018f50: 6573 222c 0d0a 2020 2020 2020 2020 2020  es",..          
+00018f60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018f70: 2020 2020 2245 7870 656e 7365 223a 2022      "Expense": "
+00018f80: 4578 7065 6e73 6573 222c 0d0a 2020 2020  Expenses",..    
+00018f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018fa0: 2020 2020 2020 2020 2020 2252 6576 656e            "Reven
+00018fb0: 7565 223a 2022 5265 7665 6e75 6573 222c  ue": "Revenues",
+00018fc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00018fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018fe0: 2254 6178 223a 2022 5461 7865 7322 2c0d  "Tax": "Taxes",.
+00018ff0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019000: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00019010: 4e6f 6e74 6178 2e20 5072 6f66 6974 223a  Nontax. Profit":
+00019020: 2022 4e6f 6e74 6178 6162 6c65 2050 726f   "Nontaxable Pro
+00019030: 6669 7473 222c 0d0a 2020 2020 2020 2020  fits",..        
+00019040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019050: 2020 2020 2020 224e 6f6e 7461 782e 204c        "Nontax. L
+00019060: 6f73 7322 3a20 224e 6f6e 7461 7861 626c  oss": "Nontaxabl
+00019070: 6520 4c6f 7373 6573 222c 0d0a 2020 2020  e Losses",..    
+00019080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019090: 2020 2020 2020 2020 2020 224e 6f6e 2d4f            "Non-O
+000190a0: 702e 2049 6e63 6f6d 6522 3a20 224e 6f6e  p. Income": "Non
+000190b0: 2d4f 7065 7261 7469 6f6e 616c 2049 6e63  -Operational Inc
+000190c0: 6f6d 6522 2c0d 0a20 2020 2020 2020 2020  ome",..         
+000190d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000190e0: 2020 2020 2022 496e 7465 7265 7374 223a       "Interest":
+000190f0: 2022 496e 7465 7265 7374 2050 6179 6d65   "Interest Payme
+00019100: 6e74 7322 7d0d 0a0d 0a20 2020 2020 2020  nts"}....       
+00019110: 2020 2020 2020 2020 2020 2020 2074 7279               try
+00019120: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00019130: 2020 2020 2020 2020 2020 2069 6620 6167             if ag
+00019140: 656e 7431 203d 3d20 6d79 5f61 6765 6e74  ent1 == my_agent
+00019150: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00019160: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00019170: 6967 6e20 3d20 222d 220d 0a20 2020 2020  ign = "-"..     
+00019180: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019190: 2020 2069 6620 6167 656e 7432 203d 3d20     if agent2 == 
+000191a0: 6d79 5f61 6765 6e74 3a0d 0a20 2020 2020  my_agent:..     
+000191b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000191c0: 2020 2020 2020 2073 6967 6e20 3d20 222b         sign = "+
+000191d0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
+000191e0: 2020 2020 2020 2020 2020 2020 2071 203d               q =
+000191f0: 2073 796d 7079 2e6c 6174 6578 2873 796d   sympy.latex(sym
+00019200: 7079 2e73 696d 706c 6966 7928 7369 676e  py.simplify(sign
+00019210: 202b 2066 696c 6564 6174 615b 2271 7561   + filedata["qua
+00019220: 6e74 6974 7922 5d29 2c20 6d6f 6465 3d22  ntity"]), mode="
+00019230: 706c 6169 6e22 290d 0a20 2020 2020 2020  plain")..       
+00019240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019250: 2073 7562 6a65 6374 203d 2066 696c 6564   subject = filed
+00019260: 6174 615b 2273 7562 6a65 6374 225d 2e72  ata["subject"].r
+00019270: 6570 6c61 6365 2822 5f22 2c20 2220 2229  eplace("_", " ")
+00019280: 2e63 6170 6974 616c 697a 6528 290d 0a20  .capitalize().. 
+00019290: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000192a0: 2020 2020 2020 2070 7269 6e74 2822 2020         print("  
+000192b0: 2020 2020 666f 756e 6422 2c71 2c73 7562      found",q,sub
+000192c0: 6a65 6374 290d 0a20 2020 2020 2020 2020  ject)..         
+000192d0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+000192e0: 7065 203d 2066 696c 6564 6174 615b 7265  pe = filedata[re
+000192f0: 665f 696e 636f 6d65 5d0d 0a20 2020 2020  f_income]..     
+00019300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019310: 2020 2063 6f6d 6269 6e65 645f 696e 636f     combined_inco
+00019320: 6d65 5b22 5479 7065 225d 2e61 7070 656e  me["Type"].appen
+00019330: 6428 7470 6529 0d0a 2020 2020 2020 2020  d(tpe)..        
 00019340: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019350: 2020 2020 2020 636f 6d62 696e 6564 5f69        combined_i
-00019360: 6e63 6f6d 655b 2252 616e 6b69 6e67 225d  ncome["Ranking"]
-00019370: 2e61 7070 656e 6428 3229 0d0a 2020 2020  .append(2)..    
+00019350: 636f 6d62 696e 6564 5f69 6e63 6f6d 655b  combined_income[
+00019360: 2253 7562 6a65 6374 225d 2e61 7070 656e  "Subject"].appen
+00019370: 6428 7375 626a 6563 7429 0d0a 2020 2020  d(subject)..    
 00019380: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019390: 2020 2020 656c 6966 2074 7065 2069 6e20      elif tpe in 
-000193a0: 5b22 4e6f 6e74 6178 6162 6c65 2050 726f  ["Nontaxable Pro
-000193b0: 6669 7473 222c 2022 4e6f 6e74 6178 6162  fits", "Nontaxab
-000193c0: 6c65 204c 6f73 7365 7322 5d3a 0d0a 2020  le Losses"]:..  
-000193d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000193e0: 2020 2020 2020 2020 2020 636f 6d62 696e            combin
-000193f0: 6564 5f69 6e63 6f6d 655b 2252 616e 6b69  ed_income["Ranki
-00019400: 6e67 225d 2e61 7070 656e 6428 3329 0d0a  ng"].append(3)..
-00019410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019420: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-00019430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019440: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
-00019450: 6e65 645f 696e 636f 6d65 5b22 5261 6e6b  ned_income["Rank
-00019460: 696e 6722 5d2e 6170 7065 6e64 2834 290d  ing"].append(4).
-00019470: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019480: 2020 2020 2020 2020 2022 2222 0d0a 0d0a           """....
-00019490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000194a0: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
-000194b0: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
-000194c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000194d0: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
-000194e0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-000194f0: 2020 2020 2020 2020 2020 2020 2020 2243                "C
-00019500: 616e 6e6f 7420 6861 6e64 6c65 2074 6865  annot handle the
-00019510: 2073 796d 626f 6c69 6320 6578 7072 6573   symbolic expres
-00019520: 7369 6f6e 2025 7322 2025 2073 6967 6e20  sion %s" % sign 
-00019530: 2b20 6669 6c65 6461 7461 5b22 7175 616e  + filedata["quan
-00019540: 7469 7479 225d 202b 2073 7472 2865 292c  tity"] + str(e),
-00019550: 7469 746c 653d 2245 7272 6f72 2229 0d0a  title="Error")..
-00019560: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
-00019570: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
-00019580: 656c 662e 6e6f 7469 6679 2874 6974 6c65  elf.notify(title
-00019590: 3d22 4572 726f 7222 2c20 6d65 7373 6167  ="Error", messag
-000195a0: 653d 2241 6e20 6572 726f 7220 6f63 6375  e="An error occu
-000195b0: 7272 6564 2e22 290d 0a0d 0a20 2020 2020  rred.")....     
-000195c0: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
-000195d0: 2020 2020 2072 6573 756c 7420 3d20 7064       result = pd
-000195e0: 2e44 6174 6146 7261 6d65 2863 6f6d 6269  .DataFrame(combi
-000195f0: 6e65 645f 696e 636f 6d65 292e 7365 745f  ned_income).set_
-00019600: 696e 6465 7828 2253 7562 6a65 6374 2229  index("Subject")
-00019610: 0d0a 0d0a 0d0a 2020 2020 2020 2020 2020  ......          
-00019620: 2020 2320 736f 7274 2061 6674 6572 2072    # sort after r
-00019630: 616e 6b69 6e67 0d0a 2020 2020 2020 2020  anking..        
-00019640: 2020 2020 7265 7375 6c74 203d 2072 6573      result = res
-00019650: 756c 742e 736f 7274 5f76 616c 7565 7328  ult.sort_values(
-00019660: 2752 616e 6b69 6e67 2729 0d0a 0d0a 2020  'Ranking')....  
-00019670: 2020 2020 2020 2020 2020 2320 7265 6d6f            # remo
-00019680: 7665 2072 616e 6b69 6e67 0d0a 2020 2020  ve ranking..    
-00019690: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
-000196a0: 2072 6573 756c 742e 6472 6f70 2863 6f6c   result.drop(col
-000196b0: 756d 6e73 3d20 2252 616e 6b69 6e67 2229  umns= "Ranking")
-000196c0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-000196d0: 6d6f 6465 6c20 3d20 5061 6e64 6173 4d6f  model = PandasMo
-000196e0: 6465 6c28 7265 7375 6c74 290d 0a0d 0a20  del(result).... 
-000196f0: 2020 2020 2020 2020 2020 2069 6620 6d79             if my
-00019700: 5f61 6765 6e74 206e 6f74 2069 6e20 4361  _agent not in Ca
-00019710: 7368 466c 6f77 5669 6577 6572 2e69 6e73  shFlowViewer.ins
-00019720: 7461 6e63 6573 3a0d 0a20 2020 2020 2020  tances:..       
-00019730: 2020 2020 2020 2020 206d 7976 6965 7720           myview 
-00019740: 3d20 4361 7368 466c 6f77 5669 6577 6572  = CashFlowViewer
-00019750: 2873 656c 662c 6e61 6d65 3d6d 795f 6167  (self,name=my_ag
-00019760: 656e 7429 0d0a 2020 2020 2020 2020 2020  ent)..          
-00019770: 2020 656c 7365 3a0d 0a20 2020 2020 2020    else:..       
-00019780: 2020 2020 2020 2020 206d 7976 6965 7720           myview 
-00019790: 3d20 4361 7368 466c 6f77 5669 6577 6572  = CashFlowViewer
-000197a0: 2e69 6e73 7461 6e63 6573 5b6d 795f 6167  .instances[my_ag
-000197b0: 656e 745d 0d0a 2020 2020 2020 2020 2020  ent]..          
-000197c0: 2020 2320 6d76 6965 772e 7365 7447 656f    # mview.setGeo
-000197d0: 6d65 7472 7928 3130 302c 3530 3029 0d0a  metry(100,500)..
-000197e0: 2020 2020 2020 2020 2020 2020 6d79 7669              myvi
-000197f0: 6577 2e73 6574 5f6d 6f64 656c 286d 6f64  ew.set_model(mod
-00019800: 656c 290d 0a20 2020 2020 2020 2020 2020  el)..           
-00019810: 2023 206d 7669 6577 2e77 6562 5669 6577   # mview.webView
-00019820: 2e73 6574 4874 6d6c 2864 665f 6874 6d6c  .setHtml(df_html
-00019830: 290d 0a20 2020 2020 2020 2020 2020 2069  )..            i
-00019840: 6620 6e6f 7420 7365 6c66 2e74 6573 745f  f not self.test_
-00019850: 6d6f 6465 3a0d 0a20 2020 2020 2020 2020  mode:..         
-00019860: 2020 2020 2020 206d 7976 6965 772e 7368         myview.sh
-00019870: 6f77 2829 0d0a 0d0a 2020 2020 2020 2020  ow()....        
-00019880: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
-00019890: 2061 7320 653a 0d0a 2020 2020 2020 2020   as e:..        
-000198a0: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
-000198b0: 7469 746c 653d 2245 7272 6f72 222c 206d  title="Error", m
-000198c0: 6573 7361 6765 3d22 416e 2065 7272 6f72  essage="An error
-000198d0: 206f 6363 7572 7265 642e 2220 2b20 7374   occurred." + st
-000198e0: 7228 6529 290d 0a0d 0a0d 0a20 2020 2064  r(e))......    d
-000198f0: 6566 2067 656e 5f74 6578 5f69 6373 2873  ef gen_tex_ics(s
-00019900: 656c 6629 3a0d 0a20 2020 2020 2020 2063  elf):..        c
-00019910: 6f6d 6269 6e65 645f 7368 6565 7473 203d  ombined_sheets =
-00019920: 207b 7d0d 0a0d 0a20 2020 2020 2020 2022   {}....        "
-00019930: 2222 0d0a 2020 2020 2020 2020 7b0d 0a20  ""..        {.. 
-00019940: 2020 2020 2020 2061 6765 6e74 5f6e 616d         agent_nam
-00019950: 653a 207b 0d0a 2020 2020 2020 2020 2020  e: {..          
-00019960: 2020 2020 2020 2020 2020 2241 7373 6574            "Asset
-00019970: 7322 3a20 7b0d 0a20 2020 2020 2020 2020  s": {..         
-00019980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019990: 2020 2020 2020 2061 7373 6574 5f6e 616d         asset_nam
-000199a0: 6520 3a20 5b65 6e74 7269 6573 5d2c 0d0a  e : [entries],..
-000199b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000199c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000199d0: 2e2e 2e7d 2c0d 0a0d 0a20 2020 2020 2020  ...},....       
-000199e0: 2020 2020 2020 2020 2020 2020 2022 4c69               "Li
-000199f0: 6162 696c 6974 6965 7320 616e 6420 4571  abilities and Eq
-00019a00: 7569 7479 223a 207b 0d0a 2020 2020 2020  uity": {..      
-00019a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019a20: 2020 2020 2020 2020 2020 6e61 6d65 203a            name :
-00019a30: 205b 656e 7472 6965 735d 2c0d 0a20 2020   [entries],..   
-00019a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019a50: 2020 2020 2020 2020 2020 2020 202e 2e2e               ...
-00019a60: 7d2c 0d0a 0d0a 2020 2020 2020 2020 2020  },....          
-00019a70: 2020 2020 2020 2020 2020 7d0d 0a20 2020            }..   
-00019a80: 2020 2020 207d 0d0a 2020 2020 2020 2020       }..        
-00019a90: 2222 220d 0a0d 0a20 2020 2020 2020 2063  """....        c
-00019aa0: 6f6d 6269 6e65 645f 696e 636f 6d65 203d  ombined_income =
-00019ab0: 2064 6566 6175 6c74 6469 6374 286c 616d   defaultdict(lam
-00019ac0: 6264 613a 207b 2247 6169 6e73 223a 205b  bda: {"Gains": [
-00019ad0: 5d2c 2022 4c6f 7373 6573 223a 205b 5d2c  ], "Losses": [],
-00019ae0: 2022 5265 7665 6e75 6573 223a 205b 5d2c   "Revenues": [],
-00019af0: 2022 5461 7865 7322 3a20 5b5d 2c20 2245   "Taxes": [], "E
-00019b00: 7870 656e 7365 7322 3a20 5b5d 2c0d 0a20  xpenses": [],.. 
-00019b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019b30: 2020 2020 2020 2020 2020 2020 2020 224e                "N
-00019b40: 6f6e 7461 7861 626c 6520 4c6f 7373 6573  ontaxable Losses
-00019b50: 223a 205b 5d2c 2022 4e6f 6e74 6178 6162  ": [], "Nontaxab
-00019b60: 6c65 2050 726f 6669 7473 223a 205b 5d2c  le Profits": [],
-00019b70: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00019b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019b90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019ba0: 2022 4e6f 6e2d 4f70 6572 6174 696f 6e61   "Non-Operationa
-00019bb0: 6c20 496e 636f 6d65 223a 205b 5d2c 0d0a  l Income": [],..
-00019bc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019be0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00019bf0: 496e 7465 7265 7374 2050 6179 6d65 6e74  Interest Payment
-00019c00: 7322 3a20 5b5d 0d0a 2020 2020 2020 2020  s": []..        
+00019390: 2020 2020 636f 6d62 696e 6564 5f69 6e63      combined_inc
+000193a0: 6f6d 655b 2251 7561 6e74 6974 7922 5d2e  ome["Quantity"].
+000193b0: 6170 7065 6e64 2873 7472 2871 2929 0d0a  append(str(q))..
+000193c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000193d0: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
+000193e0: 5f69 6e63 6f6d 655b 2253 686f 7274 204e  _income["Short N
+000193f0: 616d 6522 5d2e 6170 7065 6e64 2866 696c  ame"].append(fil
+00019400: 6564 6174 615b 2273 686f 7274 6e61 6d65  edata["shortname
+00019410: 225d 2e73 7472 6970 2829 290d 0a20 2020  "].strip())..   
+00019420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019430: 2020 2020 2063 6f6d 6269 6e65 645f 696e       combined_in
+00019440: 636f 6d65 5b22 5261 6e6b 696e 6722 5d2e  come["Ranking"].
+00019450: 6170 7065 6e64 2830 290d 0a20 2020 2020  append(0)..     
+00019460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019470: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00019480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019490: 6966 2074 7065 2069 6e20 5b22 4761 696e  if tpe in ["Gain
+000194a0: 7322 2c22 4c6f 7373 6573 222c 2245 7870  s","Losses","Exp
+000194b0: 656e 7365 7322 2c22 5265 7665 6e75 6573  enses","Revenues
+000194c0: 225d 3a0d 0a20 2020 2020 2020 2020 2020  "]:..           
+000194d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000194e0: 2063 6f6d 6269 6e65 645f 696e 636f 6d65   combined_income
+000194f0: 5b22 5261 6e6b 696e 6722 5d2e 6170 7065  ["Ranking"].appe
+00019500: 6e64 2830 290d 0a20 2020 2020 2020 2020  nd(0)..         
+00019510: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00019520: 6c69 6620 7470 6520 696e 205b 224e 6f6e  lif tpe in ["Non
+00019530: 2d4f 7065 7261 7469 6f6e 616c 2049 6e63  -Operational Inc
+00019540: 6f6d 6522 2c22 496e 7465 7265 7374 2050  ome","Interest P
+00019550: 6179 6d65 6e74 7322 5d3a 0d0a 2020 2020  ayments"]:..    
+00019560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019570: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
+00019580: 5f69 6e63 6f6d 655b 2252 616e 6b69 6e67  _income["Ranking
+00019590: 225d 2e61 7070 656e 6428 3129 0d0a 2020  "].append(1)..  
+000195a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000195b0: 2020 2020 2020 656c 6966 2074 7065 2069        elif tpe i
+000195c0: 6e20 5b22 5461 7865 7322 5d3a 0d0a 2020  n ["Taxes"]:..  
+000195d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000195e0: 2020 2020 2020 2020 2020 636f 6d62 696e            combin
+000195f0: 6564 5f69 6e63 6f6d 655b 2252 616e 6b69  ed_income["Ranki
+00019600: 6e67 225d 2e61 7070 656e 6428 3229 0d0a  ng"].append(2)..
+00019610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019620: 2020 2020 2020 2020 656c 6966 2074 7065          elif tpe
+00019630: 2069 6e20 5b22 4e6f 6e74 6178 6162 6c65   in ["Nontaxable
+00019640: 2050 726f 6669 7473 222c 2022 4e6f 6e74   Profits", "Nont
+00019650: 6178 6162 6c65 204c 6f73 7365 7322 5d3a  axable Losses"]:
+00019660: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00019670: 2020 2020 2020 2020 2020 2020 2020 636f                co
+00019680: 6d62 696e 6564 5f69 6e63 6f6d 655b 2252  mbined_income["R
+00019690: 616e 6b69 6e67 225d 2e61 7070 656e 6428  anking"].append(
+000196a0: 3329 0d0a 2020 2020 2020 2020 2020 2020  3)..            
+000196b0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+000196c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+000196d0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+000196e0: 6f6d 6269 6e65 645f 696e 636f 6d65 5b22  ombined_income["
+000196f0: 5261 6e6b 696e 6722 5d2e 6170 7065 6e64  Ranking"].append
+00019700: 2834 290d 0a20 2020 2020 2020 2020 2020  (4)..           
+00019710: 2020 2020 2020 2020 2020 2020 2022 2222               """
+00019720: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+00019730: 2020 2020 2020 2020 6578 6365 7074 2045          except E
+00019740: 7863 6570 7469 6f6e 2061 7320 653a 0d0a  xception as e:..
+00019750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019760: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
+00019770: 6966 7928 0d0a 2020 2020 2020 2020 2020  ify(..          
+00019780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019790: 2020 2243 616e 6e6f 7420 6861 6e64 6c65    "Cannot handle
+000197a0: 2074 6865 2073 796d 626f 6c69 6320 6578   the symbolic ex
+000197b0: 7072 6573 7369 6f6e 2025 7322 2025 2073  pression %s" % s
+000197c0: 6967 6e20 2b20 6669 6c65 6461 7461 5b22  ign + filedata["
+000197d0: 7175 616e 7469 7479 225d 202b 2073 7472  quantity"] + str
+000197e0: 2865 292c 7469 746c 653d 2245 7272 6f72  (e),title="Error
+000197f0: 2229 0d0a 0d0a 2020 2020 2020 2020 6578  ")....        ex
+00019800: 6365 7074 3a0d 0a20 2020 2020 2020 2020  cept:..         
+00019810: 2020 2073 656c 662e 6e6f 7469 6679 2874     self.notify(t
+00019820: 6974 6c65 3d22 4572 726f 7222 2c20 6d65  itle="Error", me
+00019830: 7373 6167 653d 2241 6e20 6572 726f 7220  ssage="An error 
+00019840: 6f63 6375 7272 6564 2e22 290d 0a0d 0a20  occurred.").... 
+00019850: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
+00019860: 2020 2020 2020 2020 2072 6573 756c 7420           result 
+00019870: 3d20 7064 2e44 6174 6146 7261 6d65 2863  = pd.DataFrame(c
+00019880: 6f6d 6269 6e65 645f 696e 636f 6d65 292e  ombined_income).
+00019890: 7365 745f 696e 6465 7828 2253 7562 6a65  set_index("Subje
+000198a0: 6374 2229 0d0a 0d0a 0d0a 2020 2020 2020  ct")......      
+000198b0: 2020 2020 2020 2320 736f 7274 2061 6674        # sort aft
+000198c0: 6572 2072 616e 6b69 6e67 0d0a 2020 2020  er ranking..    
+000198d0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+000198e0: 2072 6573 756c 742e 736f 7274 5f76 616c   result.sort_val
+000198f0: 7565 7328 2752 616e 6b69 6e67 2729 0d0a  ues('Ranking')..
+00019900: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+00019910: 7265 6d6f 7665 2072 616e 6b69 6e67 0d0a  remove ranking..
+00019920: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+00019930: 6c74 203d 2072 6573 756c 742e 6472 6f70  lt = result.drop
+00019940: 2863 6f6c 756d 6e73 3d20 2252 616e 6b69  (columns= "Ranki
+00019950: 6e67 2229 0d0a 0d0a 2020 2020 2020 2020  ng")....        
+00019960: 2020 2020 6d6f 6465 6c20 3d20 5061 6e64      model = Pand
+00019970: 6173 4d6f 6465 6c28 7265 7375 6c74 290d  asModel(result).
+00019980: 0a0d 0a20 2020 2020 2020 2020 2020 2069  ...            i
+00019990: 6620 6d79 5f61 6765 6e74 206e 6f74 2069  f my_agent not i
+000199a0: 6e20 4361 7368 466c 6f77 5669 6577 6572  n CashFlowViewer
+000199b0: 2e69 6e73 7461 6e63 6573 3a0d 0a20 2020  .instances:..   
+000199c0: 2020 2020 2020 2020 2020 2020 206d 7976               myv
+000199d0: 6965 7720 3d20 4361 7368 466c 6f77 5669  iew = CashFlowVi
+000199e0: 6577 6572 2873 656c 662c 6e61 6d65 3d6d  ewer(self,name=m
+000199f0: 795f 6167 656e 7429 0d0a 2020 2020 2020  y_agent)..      
+00019a00: 2020 2020 2020 656c 7365 3a0d 0a20 2020        else:..   
+00019a10: 2020 2020 2020 2020 2020 2020 206d 7976               myv
+00019a20: 6965 7720 3d20 4361 7368 466c 6f77 5669  iew = CashFlowVi
+00019a30: 6577 6572 2e69 6e73 7461 6e63 6573 5b6d  ewer.instances[m
+00019a40: 795f 6167 656e 745d 0d0a 2020 2020 2020  y_agent]..      
+00019a50: 2020 2020 2020 2320 6d76 6965 772e 7365        # mview.se
+00019a60: 7447 656f 6d65 7472 7928 3130 302c 3530  tGeometry(100,50
+00019a70: 3029 0d0a 2020 2020 2020 2020 2020 2020  0)..            
+00019a80: 6d79 7669 6577 2e73 6574 5f6d 6f64 656c  myview.set_model
+00019a90: 286d 6f64 656c 290d 0a20 2020 2020 2020  (model)..       
+00019aa0: 2020 2020 2023 206d 7669 6577 2e77 6562       # mview.web
+00019ab0: 5669 6577 2e73 6574 4874 6d6c 2864 665f  View.setHtml(df_
+00019ac0: 6874 6d6c 290d 0a20 2020 2020 2020 2020  html)..         
+00019ad0: 2020 2069 6620 6e6f 7420 7365 6c66 2e74     if not self.t
+00019ae0: 6573 745f 6d6f 6465 3a0d 0a20 2020 2020  est_mode:..     
+00019af0: 2020 2020 2020 2020 2020 206d 7976 6965             myvie
+00019b00: 772e 7368 6f77 2829 0d0a 0d0a 2020 2020  w.show()....    
+00019b10: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+00019b20: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
+00019b30: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
+00019b40: 6966 7928 7469 746c 653d 2245 7272 6f72  ify(title="Error
+00019b50: 222c 206d 6573 7361 6765 3d22 416e 2065  ", message="An e
+00019b60: 7272 6f72 206f 6363 7572 7265 642e 2220  rror occurred." 
+00019b70: 2b20 7374 7228 6529 290d 0a0d 0a0d 0a20  + str(e))...... 
+00019b80: 2020 2064 6566 2067 656e 5f74 6578 5f69     def gen_tex_i
+00019b90: 6373 2873 656c 6629 3a0d 0a20 2020 2020  cs(self):..     
+00019ba0: 2020 2063 6f6d 6269 6e65 645f 7368 6565     combined_shee
+00019bb0: 7473 203d 207b 7d0d 0a0d 0a20 2020 2020  ts = {}....     
+00019bc0: 2020 2022 2222 0d0a 2020 2020 2020 2020     """..        
+00019bd0: 7b0d 0a20 2020 2020 2020 2061 6765 6e74  {..        agent
+00019be0: 5f6e 616d 653a 207b 0d0a 2020 2020 2020  _name: {..      
+00019bf0: 2020 2020 2020 2020 2020 2020 2020 2241                "A
+00019c00: 7373 6574 7322 3a20 7b0d 0a20 2020 2020  ssets": {..     
 00019c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019c30: 2020 2020 2020 207d 290d 0a0d 0a20 2020         })....   
-00019c40: 2020 2020 2022 2222 0d0a 2020 2020 2020       """..      
-00019c50: 2020 7b0d 0a20 2020 2020 2020 2061 6765    {..        age
-00019c60: 6e74 5f6e 616d 653a 207b 0d0a 2020 2020  nt_name: {..    
-00019c70: 2020 2020 2020 2020 2020 2020 2247 6169              "Gai
-00019c80: 6e73 223a 2020 5b65 6e74 7269 6573 5d2c  ns":  [entries],
-00019c90: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00019ca0: 2020 224c 6f73 7365 7322 3a5b 656e 7472    "Losses":[entr
-00019cb0: 6965 735d 2c0d 0a20 2020 2020 2020 2020  ies],..         
-00019cc0: 2020 2020 2020 2022 4578 7065 6e64 6974         "Expendit
-00019cd0: 7572 6573 223a 5b65 6e74 7269 6573 5d2c  ures":[entries],
-00019ce0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00019cf0: 2020 2252 6576 656e 7565 7322 3a20 5b65    "Revenues": [e
-00019d00: 6e74 7269 6573 5d2c 0d0a 2020 2020 2020  ntries],..      
-00019d10: 2020 2020 2020 2020 2020 2254 6178 6573            "Taxes
-00019d20: 223a 5b65 6e74 7269 6573 5d0d 0a20 2020  ":[entries]..   
-00019d30: 2020 2020 207d 0d0a 2020 2020 2020 2020       }..        
-00019d40: 2222 220d 0a0d 0a20 2020 2020 2020 206b  """....        k
-00019d50: 203d 2030 0d0a 2020 2020 2020 2020 7465   = 0..        te
-00019d60: 7873 7472 203d 2022 220d 0a0d 0a20 2020  xstr = ""....   
-00019d70: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
-00019d80: 2020 2020 2020 2066 6f72 2066 696c 6564         for filed
-00019d90: 6174 6120 696e 2073 656c 662e 656e 7472  ata in self.entr
-00019da0: 795f 6461 7461 3a0d 0a20 2020 2020 2020  y_data:..       
+00019c20: 2020 2020 2020 2020 2020 2061 7373 6574             asset
+00019c30: 5f6e 616d 6520 3a20 5b65 6e74 7269 6573  _name : [entries
+00019c40: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+00019c50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019c60: 2020 2020 2e2e 2e7d 2c0d 0a0d 0a20 2020      ...},....   
+00019c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019c80: 2022 4c69 6162 696c 6974 6965 7320 616e   "Liabilities an
+00019c90: 6420 4571 7569 7479 223a 207b 0d0a 2020  d Equity": {..  
+00019ca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019cb0: 2020 2020 2020 2020 2020 2020 2020 6e61                na
+00019cc0: 6d65 203a 205b 656e 7472 6965 735d 2c0d  me : [entries],.
+00019cd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019cf0: 202e 2e2e 7d2c 0d0a 0d0a 2020 2020 2020   ...},....      
+00019d00: 2020 2020 2020 2020 2020 2020 2020 7d0d                }.
+00019d10: 0a20 2020 2020 2020 207d 0d0a 2020 2020  .        }..    
+00019d20: 2020 2020 2222 220d 0a0d 0a20 2020 2020      """....     
+00019d30: 2020 2063 6f6d 6269 6e65 645f 696e 636f     combined_inco
+00019d40: 6d65 203d 2064 6566 6175 6c74 6469 6374  me = defaultdict
+00019d50: 286c 616d 6264 613a 207b 2247 6169 6e73  (lambda: {"Gains
+00019d60: 223a 205b 5d2c 2022 4c6f 7373 6573 223a  ": [], "Losses":
+00019d70: 205b 5d2c 2022 5265 7665 6e75 6573 223a   [], "Revenues":
+00019d80: 205b 5d2c 2022 5461 7865 7322 3a20 5b5d   [], "Taxes": []
+00019d90: 2c20 2245 7870 656e 7365 7322 3a20 5b5d  , "Expenses": []
+00019da0: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
 00019db0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019dc0: 2020 2020 2023 2020 2073 656c 662e 7061       #   self.pa
-00019dd0: 7265 6e74 2e61 6765 6e74 312e 7661 6c75  rent.agent1.valu
-00019de0: 6520 3d20 6669 6c65 6461 7461 5b22 6167  e = filedata["ag
-00019df0: 656e 7431 225d 0d0a 2020 2020 2020 2020  ent1"]..        
-00019e00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019e10: 2020 2020 2320 7365 6c66 2e70 6172 656e      # self.paren
-00019e20: 742e 6167 656e 7432 2e76 616c 7565 203d  t.agent2.value =
-00019e30: 2066 696c 6564 6174 615b 2261 6765 6e74   filedata["agent
-00019e40: 3222 5d0d 0a0d 0a20 2020 2020 2020 2020  2"]....         
-00019e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019e60: 2020 2023 2073 656c 662e 7061 7265 6e74     # self.parent
-00019e70: 2e66 6c6f 775f 6368 6563 6b2e 7661 6c75  .flow_check.valu
-00019e80: 6520 3d20 7374 7228 626f 6f6c 2866 696c  e = str(bool(fil
-00019e90: 6564 6174 615b 226c 6f67 2074 7261 6e73  edata["log trans
-00019ea0: 6163 7469 6f6e 225d 2929 0d0a 2020 2020  action"]))..    
+00019dc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019dd0: 2020 224e 6f6e 7461 7861 626c 6520 4c6f    "Nontaxable Lo
+00019de0: 7373 6573 223a 205b 5d2c 2022 4e6f 6e74  sses": [], "Nont
+00019df0: 6178 6162 6c65 2050 726f 6669 7473 223a  axable Profits":
+00019e00: 205b 5d2c 0d0a 2020 2020 2020 2020 2020   [],..          
+00019e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019e30: 2020 2020 2022 4e6f 6e2d 4f70 6572 6174       "Non-Operat
+00019e40: 696f 6e61 6c20 496e 636f 6d65 223a 205b  ional Income": [
+00019e50: 5d2c 0d0a 2020 2020 2020 2020 2020 2020  ],..            
+00019e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019e70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019e80: 2020 2022 496e 7465 7265 7374 2050 6179     "Interest Pay
+00019e90: 6d65 6e74 7322 3a20 5b5d 0d0a 2020 2020  ments": []..    
+00019ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00019eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019ec0: 2020 2020 2020 2020 2320 7365 6c66 2e70          # self.p
-00019ed0: 6172 656e 742e 6b69 6e64 2e76 616c 7565  arent.kind.value
-00019ee0: 203d 2066 696c 6564 6174 615b 226b 696e   = filedata["kin
-00019ef0: 6422 5d0d 0a20 2020 2020 2020 2020 2020  d"]..           
+00019ec0: 2020 2020 2020 2020 2020 207d 290d 0a0d             })...
+00019ed0: 0a20 2020 2020 2020 2022 2222 0d0a 2020  .        """..  
+00019ee0: 2020 2020 2020 7b0d 0a20 2020 2020 2020        {..       
+00019ef0: 2061 6765 6e74 5f6e 616d 653a 207b 0d0a   agent_name: {..
 00019f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019f10: 2023 2073 656c 662e 7061 7265 6e74 2e73   # self.parent.s
-00019f20: 7562 6a65 6374 2e76 616c 7565 203d 2066  ubject.value = f
-00019f30: 696c 6564 6174 615b 2273 7562 6a65 6374  iledata["subject
-00019f40: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
-00019f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019f60: 2320 7365 6c66 2e70 6172 656e 742e 7175  # self.parent.qu
-00019f70: 616e 7469 7479 2e76 616c 7565 203d 2066  antity.value = f
-00019f80: 696c 6564 6174 615b 2271 7561 6e74 6974  iledata["quantit
-00019f90: 7922 5d0d 0a0d 0a20 2020 2020 2020 2020  y"]....         
-00019fa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019fb0: 2020 2061 6765 6e74 3120 3d20 6669 6c65     agent1 = file
-00019fc0: 6461 7461 5b22 6167 656e 7431 225d 0d0a  data["agent1"]..
-00019fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019fe0: 2020 2020 2020 2020 2020 2020 6167 656e              agen
-00019ff0: 7432 203d 2066 696c 6564 6174 615b 2261  t2 = filedata["a
-0001a000: 6765 6e74 3222 5d0d 0a0d 0a20 2020 2020  gent2"]....     
-0001a010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a020: 2020 2020 2020 2061 7373 6574 7331 203d         assets1 =
-0001a030: 2066 696c 6564 6174 615b 2261 3122 5d20   filedata["a1"] 
-0001a040: 2b20 225c 6e22 0d0a 2020 2020 2020 2020  + "\n"..        
-0001a050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a060: 2020 2020 6c69 6162 7331 203d 2066 696c      liabs1 = fil
-0001a070: 6564 6174 615b 226c 3122 5d20 2b20 225c  edata["l1"] + "\
-0001a080: 6e22 202b 2066 696c 6564 6174 615b 2265  n" + filedata["e
-0001a090: 3122 5d20 2b20 225c 6e22 0d0a 0d0a 2020  1"] + "\n"....  
-0001a0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a0b0: 2020 2020 2020 2020 2020 6173 7365 7473            assets
-0001a0c0: 3220 3d20 6669 6c65 6461 7461 5b22 6132  2 = filedata["a2
-0001a0d0: 225d 202b 2022 5c6e 220d 0a20 2020 2020  "] + "\n"..     
+00019f10: 2247 6169 6e73 223a 2020 5b65 6e74 7269  "Gains":  [entri
+00019f20: 6573 5d2c 0d0a 2020 2020 2020 2020 2020  es],..          
+00019f30: 2020 2020 2020 224c 6f73 7365 7322 3a5b        "Losses":[
+00019f40: 656e 7472 6965 735d 2c0d 0a20 2020 2020  entries],..     
+00019f50: 2020 2020 2020 2020 2020 2022 4578 7065             "Expe
+00019f60: 6e64 6974 7572 6573 223a 5b65 6e74 7269  nditures":[entri
+00019f70: 6573 5d2c 0d0a 2020 2020 2020 2020 2020  es],..          
+00019f80: 2020 2020 2020 2252 6576 656e 7565 7322        "Revenues"
+00019f90: 3a20 5b65 6e74 7269 6573 5d2c 0d0a 2020  : [entries],..  
+00019fa0: 2020 2020 2020 2020 2020 2020 2020 2254                "T
+00019fb0: 6178 6573 223a 5b65 6e74 7269 6573 5d0d  axes":[entries].
+00019fc0: 0a20 2020 2020 2020 207d 0d0a 2020 2020  .        }..    
+00019fd0: 2020 2020 2222 220d 0a0d 0a20 2020 2020      """....     
+00019fe0: 2020 206b 203d 2030 0d0a 2020 2020 2020     k = 0..      
+00019ff0: 2020 7465 7873 7472 203d 2022 220d 0a0d    texstr = ""...
+0001a000: 0a20 2020 2020 2020 2074 7279 3a0d 0a20  .        try:.. 
+0001a010: 2020 2020 2020 2020 2020 2066 6f72 2066             for f
+0001a020: 696c 6564 6174 6120 696e 2073 656c 662e  iledata in self.
+0001a030: 656e 7472 795f 6461 7461 3a0d 0a20 2020  entry_data:..   
+0001a040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a050: 2020 2020 2020 2020 2023 2020 2073 656c           #   sel
+0001a060: 662e 7061 7265 6e74 2e61 6765 6e74 312e  f.parent.agent1.
+0001a070: 7661 6c75 6520 3d20 6669 6c65 6461 7461  value = filedata
+0001a080: 5b22 6167 656e 7431 225d 0d0a 2020 2020  ["agent1"]..    
+0001a090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a0a0: 2020 2020 2020 2020 2320 7365 6c66 2e70          # self.p
+0001a0b0: 6172 656e 742e 6167 656e 7432 2e76 616c  arent.agent2.val
+0001a0c0: 7565 203d 2066 696c 6564 6174 615b 2261  ue = filedata["a
+0001a0d0: 6765 6e74 3222 5d0d 0a0d 0a20 2020 2020  gent2"]....     
 0001a0e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a0f0: 2020 2020 2020 206c 6961 6273 3220 3d20         liabs2 = 
-0001a100: 6669 6c65 6461 7461 5b22 6c32 225d 202b  filedata["l2"] +
-0001a110: 2022 5c6e 2220 2b20 6669 6c65 6461 7461   "\n" + filedata
-0001a120: 5b22 6532 225d 202b 2022 5c6e 220d 0a0d  ["e2"] + "\n"...
-0001a130: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a140: 2020 2020 2020 2020 2020 2020 206d 795f               my_
-0001a150: 7461 626c 6520 3d20 7064 2e44 6174 6146  table = pd.DataF
-0001a160: 7261 6d65 2e66 726f 6d5f 6469 6374 280d  rame.from_dict(.
-0001a170: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a190: 207b 2241 7373 6574 7322 3a20 6173 7365   {"Assets": asse
-0001a1a0: 7473 312e 7370 6c69 7428 225c 6e22 292c  ts1.split("\n"),
-0001a1b0: 2022 4c69 6162 696c 6974 6965 7320 616e   "Liabilities an
-0001a1c0: 6420 4571 7569 7479 223a 206c 6961 6273  d Equity": liabs
-0001a1d0: 312e 7370 6c69 7428 225c 6e22 297d 2c0d  1.split("\n")},.
-0001a1e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a200: 206f 7269 656e 743d 2769 6e64 6578 2729   orient='index')
-0001a210: 2e54 0d0a 2020 2020 2020 2020 2020 2020  .T..            
-0001a220: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a230: 6d79 5f74 6162 6c65 3220 3d20 7064 2e44  my_table2 = pd.D
-0001a240: 6174 6146 7261 6d65 2e66 726f 6d5f 6469  ataFrame.from_di
-0001a250: 6374 280d 0a20 2020 2020 2020 2020 2020  ct(..           
-0001a260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a270: 2020 2020 207b 2241 7373 6574 7322 3a20       {"Assets": 
-0001a280: 6173 7365 7473 322e 7370 6c69 7428 225c  assets2.split("\
-0001a290: 6e22 292c 2022 4c69 6162 696c 6974 6965  n"), "Liabilitie
-0001a2a0: 7320 616e 6420 4571 7569 7479 223a 206c  s and Equity": l
-0001a2b0: 6961 6273 322e 7370 6c69 7428 225c 6e22  iabs2.split("\n"
-0001a2c0: 297d 2c0d 0a20 2020 2020 2020 2020 2020  )},..           
-0001a2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a2e0: 2020 2020 206f 7269 656e 743d 2769 6e64       orient='ind
-0001a2f0: 6578 2729 2e54 0d0a 0d0a 2020 2020 2020  ex').T....      
-0001a300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a310: 2020 2020 2020 7465 785f 7461 626c 6531        tex_table1
-0001a320: 203d 206d 795f 7461 626c 652e 746f 5f6c   = my_table.to_l
-0001a330: 6174 6578 2869 6e64 6578 5f6e 616d 6573  atex(index_names
-0001a340: 3d46 616c 7365 2c20 696e 6465 783d 4661  =False, index=Fa
-0001a350: 6c73 6529 0d0a 2020 2020 2020 2020 2020  lse)..          
-0001a360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a370: 2020 7465 785f 7461 626c 6532 203d 206d    tex_table2 = m
-0001a380: 795f 7461 626c 6532 2e74 6f5f 6c61 7465  y_table2.to_late
-0001a390: 7828 696e 6465 785f 6e61 6d65 733d 4661  x(index_names=Fa
-0001a3a0: 6c73 652c 2069 6e64 6578 3d46 616c 7365  lse, index=False
-0001a3b0: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0001a3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a3d0: 2023 206d 6572 6765 5f74 6162 6c65 203d   # merge_table =
-0001a3e0: 2070 642e 636f 6e63 6174 2874 6578 5f74   pd.concat(tex_t
-0001a3f0: 6162 6c65 312c 7465 785f 7461 626c 6532  able1,tex_table2
-0001a400: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
+0001a0f0: 2020 2020 2020 2023 2073 656c 662e 7061         # self.pa
+0001a100: 7265 6e74 2e66 6c6f 775f 6368 6563 6b2e  rent.flow_check.
+0001a110: 7661 6c75 6520 3d20 7374 7228 626f 6f6c  value = str(bool
+0001a120: 2866 696c 6564 6174 615b 226c 6f67 2074  (filedata["log t
+0001a130: 7261 6e73 6163 7469 6f6e 225d 2929 0d0a  ransaction"]))..
+0001a140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a150: 2020 2020 2020 2020 2020 2020 2320 7365              # se
+0001a160: 6c66 2e70 6172 656e 742e 6b69 6e64 2e76  lf.parent.kind.v
+0001a170: 616c 7565 203d 2066 696c 6564 6174 615b  alue = filedata[
+0001a180: 226b 696e 6422 5d0d 0a20 2020 2020 2020  "kind"]..       
+0001a190: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a1a0: 2020 2020 2023 2073 656c 662e 7061 7265       # self.pare
+0001a1b0: 6e74 2e73 7562 6a65 6374 2e76 616c 7565  nt.subject.value
+0001a1c0: 203d 2066 696c 6564 6174 615b 2273 7562   = filedata["sub
+0001a1d0: 6a65 6374 225d 0d0a 2020 2020 2020 2020  ject"]..        
+0001a1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a1f0: 2020 2020 2320 7365 6c66 2e70 6172 656e      # self.paren
+0001a200: 742e 7175 616e 7469 7479 2e76 616c 7565  t.quantity.value
+0001a210: 203d 2066 696c 6564 6174 615b 2271 7561   = filedata["qua
+0001a220: 6e74 6974 7922 5d0d 0a0d 0a20 2020 2020  ntity"]....     
+0001a230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a240: 2020 2020 2020 2061 6765 6e74 3120 3d20         agent1 = 
+0001a250: 6669 6c65 6461 7461 5b22 6167 656e 7431  filedata["agent1
+0001a260: 225d 0d0a 2020 2020 2020 2020 2020 2020  "]..            
+0001a270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a280: 6167 656e 7432 203d 2066 696c 6564 6174  agent2 = filedat
+0001a290: 615b 2261 6765 6e74 3222 5d0d 0a0d 0a20  a["agent2"].... 
+0001a2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a2b0: 2020 2020 2020 2020 2020 2061 7373 6574             asset
+0001a2c0: 7331 203d 2066 696c 6564 6174 615b 2261  s1 = filedata["a
+0001a2d0: 3122 5d20 2b20 225c 6e22 0d0a 2020 2020  1"] + "\n"..    
+0001a2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a2f0: 2020 2020 2020 2020 6c69 6162 7331 203d          liabs1 =
+0001a300: 2066 696c 6564 6174 615b 226c 3122 5d20   filedata["l1"] 
+0001a310: 2b20 225c 6e22 202b 2066 696c 6564 6174  + "\n" + filedat
+0001a320: 615b 2265 3122 5d20 2b20 225c 6e22 0d0a  a["e1"] + "\n"..
+0001a330: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001a340: 2020 2020 2020 2020 2020 2020 2020 6173                as
+0001a350: 7365 7473 3220 3d20 6669 6c65 6461 7461  sets2 = filedata
+0001a360: 5b22 6132 225d 202b 2022 5c6e 220d 0a20  ["a2"] + "\n".. 
+0001a370: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a380: 2020 2020 2020 2020 2020 206c 6961 6273             liabs
+0001a390: 3220 3d20 6669 6c65 6461 7461 5b22 6c32  2 = filedata["l2
+0001a3a0: 225d 202b 2022 5c6e 2220 2b20 6669 6c65  "] + "\n" + file
+0001a3b0: 6461 7461 5b22 6532 225d 202b 2022 5c6e  data["e2"] + "\n
+0001a3c0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
+0001a3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a3e0: 206d 795f 7461 626c 6520 3d20 7064 2e44   my_table = pd.D
+0001a3f0: 6174 6146 7261 6d65 2e66 726f 6d5f 6469  ataFrame.from_di
+0001a400: 6374 280d 0a20 2020 2020 2020 2020 2020  ct(..           
 0001a410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a420: 2023 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d   # =============
-0001a430: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d20  =============== 
-0001a440: 6d6f 6469 6679 2063 6f6d 6269 6e65 6420  modify combined 
-0001a450: 7368 6565 740d 0a0d 0a20 2020 2020 2020  sheet....       
-0001a460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a470: 2020 2020 2023 0d0a 2020 2020 2020 2020       #..        
+0001a420: 2020 2020 207b 2241 7373 6574 7322 3a20       {"Assets": 
+0001a430: 6173 7365 7473 312e 7370 6c69 7428 225c  assets1.split("\
+0001a440: 6e22 292c 2022 4c69 6162 696c 6974 6965  n"), "Liabilitie
+0001a450: 7320 616e 6420 4571 7569 7479 223a 206c  s and Equity": l
+0001a460: 6961 6273 312e 7370 6c69 7428 225c 6e22  iabs1.split("\n"
+0001a470: 297d 2c0d 0a20 2020 2020 2020 2020 2020  )},..           
 0001a480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a490: 2020 2020 2320 4147 454e 5420 310d 0a20      # AGENT 1.. 
-0001a4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a4b0: 2020 2020 2020 2020 2020 2023 0d0a 0d0a             #....
-0001a4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a4d0: 2020 2020 2020 2020 2020 2020 6966 2061              if a
-0001a4e0: 6765 6e74 3120 6e6f 7420 696e 2063 6f6d  gent1 not in com
-0001a4f0: 6269 6e65 645f 7368 6565 7473 3a0d 0a20  bined_sheets:.. 
-0001a500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a510: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0001a520: 6f6d 6269 6e65 645f 7368 6565 7473 5b61  ombined_sheets[a
-0001a530: 6765 6e74 315d 203d 207b 7d0d 0a0d 0a20  gent1] = {}.... 
-0001a540: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a550: 2020 2020 2020 2020 2020 2069 6620 2241             if "A
-0001a560: 7373 6574 7322 206e 6f74 2069 6e20 636f  ssets" not in co
-0001a570: 6d62 696e 6564 5f73 6865 6574 735b 6167  mbined_sheets[ag
-0001a580: 656e 7431 5d3a 0d0a 2020 2020 2020 2020  ent1]:..        
+0001a490: 2020 2020 206f 7269 656e 743d 2769 6e64       orient='ind
+0001a4a0: 6578 2729 2e54 0d0a 2020 2020 2020 2020  ex').T..        
+0001a4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a4c0: 2020 2020 6d79 5f74 6162 6c65 3220 3d20      my_table2 = 
+0001a4d0: 7064 2e44 6174 6146 7261 6d65 2e66 726f  pd.DataFrame.fro
+0001a4e0: 6d5f 6469 6374 280d 0a20 2020 2020 2020  m_dict(..       
+0001a4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a500: 2020 2020 2020 2020 207b 2241 7373 6574           {"Asset
+0001a510: 7322 3a20 6173 7365 7473 322e 7370 6c69  s": assets2.spli
+0001a520: 7428 225c 6e22 292c 2022 4c69 6162 696c  t("\n"), "Liabil
+0001a530: 6974 6965 7320 616e 6420 4571 7569 7479  ities and Equity
+0001a540: 223a 206c 6961 6273 322e 7370 6c69 7428  ": liabs2.split(
+0001a550: 225c 6e22 297d 2c0d 0a20 2020 2020 2020  "\n")},..       
+0001a560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a570: 2020 2020 2020 2020 206f 7269 656e 743d           orient=
+0001a580: 2769 6e64 6578 2729 2e54 0d0a 0d0a 2020  'index').T....  
 0001a590: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a5a0: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
-0001a5b0: 5f73 6865 6574 735b 6167 656e 7431 5d5b  _sheets[agent1][
-0001a5c0: 2241 7373 6574 7322 5d20 3d20 7b7d 0d0a  "Assets"] = {}..
-0001a5d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a5e0: 2020 2020 2020 2020 2020 2020 6966 2022              if "
-0001a5f0: 4c69 6162 696c 6974 6965 7320 616e 6420  Liabilities and 
-0001a600: 4571 7569 7479 2220 6e6f 7420 696e 2063  Equity" not in c
-0001a610: 6f6d 6269 6e65 645f 7368 6565 7473 5b61  ombined_sheets[a
-0001a620: 6765 6e74 315d 3a0d 0a20 2020 2020 2020  gent1]:..       
-0001a630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a640: 2020 2020 2020 2020 2063 6f6d 6269 6e65           combine
-0001a650: 645f 7368 6565 7473 5b61 6765 6e74 315d  d_sheets[agent1]
-0001a660: 5b22 4c69 6162 696c 6974 6965 7320 616e  ["Liabilities an
-0001a670: 6420 4571 7569 7479 225d 203d 207b 7d0d  d Equity"] = {}.
-0001a680: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0001a690: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0001a6a0: 6f72 2063 6861 6e67 6520 696e 2061 7373  or change in ass
-0001a6b0: 6574 7331 2e73 706c 6974 2822 5c6e 2229  ets1.split("\n")
-0001a6c0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0001a6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a6e0: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
+0001a5a0: 2020 2020 2020 2020 2020 7465 785f 7461            tex_ta
+0001a5b0: 626c 6531 203d 206d 795f 7461 626c 652e  ble1 = my_table.
+0001a5c0: 746f 5f6c 6174 6578 2869 6e64 6578 5f6e  to_latex(index_n
+0001a5d0: 616d 6573 3d46 616c 7365 2c20 696e 6465  ames=False, inde
+0001a5e0: 783d 4661 6c73 6529 0d0a 2020 2020 2020  x=False)..      
+0001a5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a600: 2020 2020 2020 7465 785f 7461 626c 6532        tex_table2
+0001a610: 203d 206d 795f 7461 626c 6532 2e74 6f5f   = my_table2.to_
+0001a620: 6c61 7465 7828 696e 6465 785f 6e61 6d65  latex(index_name
+0001a630: 733d 4661 6c73 652c 2069 6e64 6578 3d46  s=False, index=F
+0001a640: 616c 7365 290d 0a0d 0a20 2020 2020 2020  alse)....       
+0001a650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a660: 2020 2020 2023 206d 6572 6765 5f74 6162       # merge_tab
+0001a670: 6c65 203d 2070 642e 636f 6e63 6174 2874  le = pd.concat(t
+0001a680: 6578 5f74 6162 6c65 312c 7465 785f 7461  ex_table1,tex_ta
+0001a690: 626c 6532 290d 0a0d 0a20 2020 2020 2020  ble2)....       
+0001a6a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a6b0: 2020 2020 2023 203d 3d3d 3d3d 3d3d 3d3d       # =========
+0001a6c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001a6d0: 3d3d 3d20 6d6f 6469 6679 2063 6f6d 6269  === modify combi
+0001a6e0: 6e65 6420 7368 6565 740d 0a0d 0a20 2020  ned sheet....   
 0001a6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a700: 2020 2020 2020 2020 2020 2020 2073 6967               sig
-0001a710: 6e20 3d20 6368 616e 6765 5b30 5d20 2023  n = change[0]  #
-0001a720: 2066 6972 7374 206c 6574 7465 7220 6973   first letter is
-0001a730: 2073 6967 6e20 2b20 6f72 202d 0d0a 0d0a   sign + or -....
-0001a740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a760: 2020 2020 6e61 6d65 203d 2063 6861 6e67      name = chang
-0001a770: 655b 313a 5d2e 7374 7269 7028 290d 0a20  e[1:].strip().. 
-0001a780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a7a0: 2020 2071 203d 2073 796d 7079 2e6c 6174     q = sympy.lat
-0001a7b0: 6578 2873 796d 7079 2e73 696d 706c 6966  ex(sympy.simplif
-0001a7c0: 7928 7369 676e 202b 2066 696c 6564 6174  y(sign + filedat
-0001a7d0: 615b 2271 7561 6e74 6974 7922 5d29 2c20  a["quantity"]), 
-0001a7e0: 6d6f 6465 3d22 696e 6c69 6e65 2229 0d0a  mode="inline")..
-0001a7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a800: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a810: 2020 2020 7375 626a 6563 7420 3d20 2220      subject = " 
-0001a820: 2020 2822 202b 2066 696c 6564 6174 615b    (" + filedata[
-0001a830: 2273 7562 6a65 6374 225d 2e72 6570 6c61  "subject"].repla
-0001a840: 6365 2822 5f22 2c20 2220 2229 202b 2022  ce("_", " ") + "
-0001a850: 2922 0d0a 0d0a 2020 2020 2020 2020 2020  )"....          
-0001a860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a870: 2020 2020 2020 2020 2020 2370 7269 6e74            #print
-0001a880: 2822 6e61 6d65 222c 206e 616d 6529 0d0a  ("name", name)..
-0001a890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a8a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a8b0: 2020 2020 2370 7269 6e74 2822 636f 6d62      #print("comb
-0001a8c0: 696e 6564 5f73 6865 6574 735b 6167 656e  ined_sheets[agen
-0001a8d0: 7431 5d22 2c20 636f 6d62 696e 6564 5f73  t1]", combined_s
-0001a8e0: 6865 6574 735b 6167 656e 7431 5d29 0d0a  heets[agent1])..
-0001a8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a910: 2020 2020 6966 206e 616d 6520 6e6f 7420      if name not 
-0001a920: 696e 2063 6f6d 6269 6e65 645f 7368 6565  in combined_shee
-0001a930: 7473 5b61 6765 6e74 315d 5b22 4173 7365  ts[agent1]["Asse
-0001a940: 7473 225d 3a0d 0a20 2020 2020 2020 2020  ts"]:..         
-0001a950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a960: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0001a970: 6f6d 6269 6e65 645f 7368 6565 7473 5b61  ombined_sheets[a
-0001a980: 6765 6e74 315d 5b22 4173 7365 7473 225d  gent1]["Assets"]
-0001a990: 5b6e 616d 655d 203d 2022 220d 0a0d 0a20  [name] = "".... 
-0001a9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a9c0: 2020 2063 6f6d 6269 6e65 645f 7368 6565     combined_shee
-0001a9d0: 7473 5b61 6765 6e74 315d 5b22 4173 7365  ts[agent1]["Asse
-0001a9e0: 7473 225d 5b6e 616d 655d 202b 3d20 7120  ts"][name] += q 
-0001a9f0: 2b20 7375 626a 6563 7420 2b20 225c 6e22  + subject + "\n"
-0001aa00: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001aa10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aa20: 2020 6578 6365 7074 3a0d 0a20 2020 2020    except:..     
-0001aa30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aa40: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0001aa50: 6173 730d 0a20 2020 2020 2020 2020 2020  ass..           
-0001aa60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aa70: 2066 6f72 2063 6861 6e67 6520 696e 206c   for change in l
-0001aa80: 6961 6273 312e 7370 6c69 7428 225c 6e22  iabs1.split("\n"
-0001aa90: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
-0001aaa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aab0: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-0001aac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aad0: 2020 2020 2020 2020 2020 2020 2020 7369                si
-0001aae0: 676e 203d 2063 6861 6e67 655b 305d 2020  gn = change[0]  
-0001aaf0: 2320 6669 7273 7420 6c65 7474 6572 2069  # first letter i
-0001ab00: 7320 7369 676e 202b 206f 7220 2d0d 0a0d  s sign + or -...
-0001ab10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ab20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ab30: 2020 2020 206e 616d 6520 3d20 6368 616e       name = chan
-0001ab40: 6765 5b31 3a5d 2e73 7472 6970 2829 0d0a  ge[1:].strip()..
-0001ab50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ab60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ab70: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-0001ab80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a700: 2020 2020 2020 2020 2023 0d0a 2020 2020           #..    
+0001a710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a720: 2020 2020 2020 2020 2320 4147 454e 5420          # AGENT 
+0001a730: 310d 0a20 2020 2020 2020 2020 2020 2020  1..             
+0001a740: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0001a750: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0001a760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a770: 6966 2061 6765 6e74 3120 6e6f 7420 696e  if agent1 not in
+0001a780: 2063 6f6d 6269 6e65 645f 7368 6565 7473   combined_sheets
+0001a790: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0001a7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a7b0: 2020 2063 6f6d 6269 6e65 645f 7368 6565     combined_shee
+0001a7c0: 7473 5b61 6765 6e74 315d 203d 207b 7d0d  ts[agent1] = {}.
+0001a7d0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001a7e0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0001a7f0: 6620 2241 7373 6574 7322 206e 6f74 2069  f "Assets" not i
+0001a800: 6e20 636f 6d62 696e 6564 5f73 6865 6574  n combined_sheet
+0001a810: 735b 6167 656e 7431 5d3a 0d0a 2020 2020  s[agent1]:..    
+0001a820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a830: 2020 2020 2020 2020 2020 2020 636f 6d62              comb
+0001a840: 696e 6564 5f73 6865 6574 735b 6167 656e  ined_sheets[agen
+0001a850: 7431 5d5b 2241 7373 6574 7322 5d20 3d20  t1]["Assets"] = 
+0001a860: 7b7d 0d0a 2020 2020 2020 2020 2020 2020  {}..            
+0001a870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a880: 6966 2022 4c69 6162 696c 6974 6965 7320  if "Liabilities 
+0001a890: 616e 6420 4571 7569 7479 2220 6e6f 7420  and Equity" not 
+0001a8a0: 696e 2063 6f6d 6269 6e65 645f 7368 6565  in combined_shee
+0001a8b0: 7473 5b61 6765 6e74 315d 3a0d 0a20 2020  ts[agent1]:..   
+0001a8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a8d0: 2020 2020 2020 2020 2020 2020 2063 6f6d               com
+0001a8e0: 6269 6e65 645f 7368 6565 7473 5b61 6765  bined_sheets[age
+0001a8f0: 6e74 315d 5b22 4c69 6162 696c 6974 6965  nt1]["Liabilitie
+0001a900: 7320 616e 6420 4571 7569 7479 225d 203d  s and Equity"] =
+0001a910: 207b 7d0d 0a0d 0a20 2020 2020 2020 2020   {}....         
+0001a920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a930: 2020 2066 6f72 2063 6861 6e67 6520 696e     for change in
+0001a940: 2061 7373 6574 7331 2e73 706c 6974 2822   assets1.split("
+0001a950: 5c6e 2229 3a0d 0a20 2020 2020 2020 2020  \n"):..         
+0001a960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a970: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
+0001a980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a990: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a9a0: 2073 6967 6e20 3d20 6368 616e 6765 5b30   sign = change[0
+0001a9b0: 5d20 2023 2066 6972 7374 206c 6574 7465  ]  # first lette
+0001a9c0: 7220 6973 2073 6967 6e20 2b20 6f72 202d  r is sign + or -
+0001a9d0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0001a9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a9f0: 2020 2020 2020 2020 6e61 6d65 203d 2063          name = c
+0001aa00: 6861 6e67 655b 313a 5d2e 7374 7269 7028  hange[1:].strip(
+0001aa10: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0001aa20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aa30: 2020 2020 2020 2071 203d 2073 796d 7079         q = sympy
+0001aa40: 2e6c 6174 6578 2873 796d 7079 2e73 696d  .latex(sympy.sim
+0001aa50: 706c 6966 7928 7369 676e 202b 2066 696c  plify(sign + fil
+0001aa60: 6564 6174 615b 2271 7561 6e74 6974 7922  edata["quantity"
+0001aa70: 5d29 2c20 6d6f 6465 3d22 696e 6c69 6e65  ]), mode="inline
+0001aa80: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
+0001aa90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aaa0: 2020 2020 2020 2020 7375 626a 6563 7420          subject 
+0001aab0: 3d20 2220 2020 2822 202b 2066 696c 6564  = "   (" + filed
+0001aac0: 6174 615b 2273 7562 6a65 6374 225d 2e72  ata["subject"].r
+0001aad0: 6570 6c61 6365 2822 5f22 2c20 2220 2229  eplace("_", " ")
+0001aae0: 202b 2022 2922 0d0a 0d0a 2020 2020 2020   + ")"....      
+0001aaf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ab00: 2020 2020 2020 2020 2020 2020 2020 2370                #p
+0001ab10: 7269 6e74 2822 6e61 6d65 222c 206e 616d  rint("name", nam
+0001ab20: 6529 0d0a 2020 2020 2020 2020 2020 2020  e)..            
+0001ab30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ab40: 2020 2020 2020 2020 2370 7269 6e74 2822          #print("
+0001ab50: 636f 6d62 696e 6564 5f73 6865 6574 735b  combined_sheets[
+0001ab60: 6167 656e 7431 5d22 2c20 636f 6d62 696e  agent1]", combin
+0001ab70: 6564 5f73 6865 6574 735b 6167 656e 7431  ed_sheets[agent1
+0001ab80: 5d29 0d0a 2020 2020 2020 2020 2020 2020  ])..            
 0001ab90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aba0: 2020 7120 3d20 7379 6d70 792e 6c61 7465    q = sympy.late
-0001abb0: 7828 7379 6d70 792e 7369 6d70 6c69 6679  x(sympy.simplify
-0001abc0: 2873 6967 6e20 2b20 6669 6c65 6461 7461  (sign + filedata
-0001abd0: 5b22 7175 616e 7469 7479 225d 292c 206d  ["quantity"]), m
-0001abe0: 6f64 653d 2269 6e6c 696e 6522 290d 0a20  ode="inline").. 
+0001aba0: 2020 2020 2020 2020 6966 206e 616d 6520          if name 
+0001abb0: 6e6f 7420 696e 2063 6f6d 6269 6e65 645f  not in combined_
+0001abc0: 7368 6565 7473 5b61 6765 6e74 315d 5b22  sheets[agent1]["
+0001abd0: 4173 7365 7473 225d 3a0d 0a20 2020 2020  Assets"]:..     
+0001abe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001abf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ac00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ac10: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
-0001ac20: 696f 6e20 6173 2065 3a0d 0a20 2020 2020  ion as e:..     
-0001ac30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ac00: 2020 2063 6f6d 6269 6e65 645f 7368 6565     combined_shee
+0001ac10: 7473 5b61 6765 6e74 315d 5b22 4173 7365  ts[agent1]["Asse
+0001ac20: 7473 225d 5b6e 616d 655d 203d 2022 220d  ts"][name] = "".
+0001ac30: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
 0001ac40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ac50: 2020 2073 656c 662e 6e6f 7469 6679 280d     self.notify(.
-0001ac60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ac70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ac80: 2020 2020 2020 2020 2020 2020 2022 4361               "Ca
-0001ac90: 6e6e 6f74 2068 616e 646c 6520 7468 6520  nnot handle the 
-0001aca0: 7379 6d62 6f6c 6963 2065 7870 7265 7373  symbolic express
-0001acb0: 696f 6e20 2573 2220 2520 7369 676e 202b  ion %s" % sign +
-0001acc0: 2066 696c 6564 6174 615b 0d0a 2020 2020   filedata[..    
+0001ac50: 2020 2020 2020 2063 6f6d 6269 6e65 645f         combined_
+0001ac60: 7368 6565 7473 5b61 6765 6e74 315d 5b22  sheets[agent1]["
+0001ac70: 4173 7365 7473 225d 5b6e 616d 655d 202b  Assets"][name] +
+0001ac80: 3d20 7120 2b20 7375 626a 6563 7420 2b20  = q + subject + 
+0001ac90: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
+0001aca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001acb0: 2020 2020 2020 6578 6365 7074 3a0d 0a20        except:.. 
+0001acc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001acd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ace0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001acf0: 2020 2020 2020 2020 2020 2020 2271 7561              "qua
-0001ad00: 6e74 6974 7922 5d2c 7469 746c 653d 2245  ntity"],title="E
-0001ad10: 7272 6f72 2229 0d0a 0d0a 2020 2020 2020  rror")....      
-0001ad20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ad30: 2020 2020 2020 2020 2020 2020 2020 7375                su
-0001ad40: 626a 6563 7420 3d20 2220 2020 2822 202b  bject = "   (" +
-0001ad50: 2066 696c 6564 6174 615b 2273 7562 6a65   filedata["subje
-0001ad60: 6374 225d 2e72 6570 6c61 6365 2822 5f22  ct"].replace("_"
-0001ad70: 2c20 2220 2229 202b 2022 2922 0d0a 0d0a  , " ") + ")"....
-0001ad80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ad90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ada0: 2020 2020 6966 206e 616d 6520 6e6f 7420      if name not 
-0001adb0: 696e 2063 6f6d 6269 6e65 645f 7368 6565  in combined_shee
-0001adc0: 7473 5b61 6765 6e74 315d 5b22 4c69 6162  ts[agent1]["Liab
-0001add0: 696c 6974 6965 7320 616e 6420 4571 7569  ilities and Equi
-0001ade0: 7479 225d 3a0d 0a20 2020 2020 2020 2020  ty"]:..         
+0001ace0: 2020 2070 6173 730d 0a20 2020 2020 2020     pass..       
+0001acf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ad00: 2020 2020 2066 6f72 2063 6861 6e67 6520       for change 
+0001ad10: 696e 206c 6961 6273 312e 7370 6c69 7428  in liabs1.split(
+0001ad20: 225c 6e22 293a 0d0a 2020 2020 2020 2020  "\n"):..        
+0001ad30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ad40: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+0001ad50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ad60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ad70: 2020 7369 676e 203d 2063 6861 6e67 655b    sign = change[
+0001ad80: 305d 2020 2320 6669 7273 7420 6c65 7474  0]  # first lett
+0001ad90: 6572 2069 7320 7369 676e 202b 206f 7220  er is sign + or 
+0001ada0: 2d0d 0a0d 0a20 2020 2020 2020 2020 2020  -....           
+0001adb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001adc0: 2020 2020 2020 2020 206e 616d 6520 3d20           name = 
+0001add0: 6368 616e 6765 5b31 3a5d 2e73 7472 6970  change[1:].strip
+0001ade0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
 0001adf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ae00: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0001ae10: 6f6d 6269 6e65 645f 7368 6565 7473 5b61  ombined_sheets[a
-0001ae20: 6765 6e74 315d 5b22 4c69 6162 696c 6974  gent1]["Liabilit
-0001ae30: 6965 7320 616e 6420 4571 7569 7479 225d  ies and Equity"]
-0001ae40: 5b6e 616d 655d 203d 2022 220d 0a0d 0a20  [name] = "".... 
-0001ae50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ae60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ae70: 2020 2063 6f6d 6269 6e65 645f 7368 6565     combined_shee
-0001ae80: 7473 5b61 6765 6e74 315d 5b22 4c69 6162  ts[agent1]["Liab
-0001ae90: 696c 6974 6965 7320 616e 6420 4571 7569  ilities and Equi
-0001aea0: 7479 225d 5b6e 616d 655d 202b 3d20 7120  ty"][name] += q 
-0001aeb0: 2b20 7375 626a 6563 7420 2b20 225c 6e22  + subject + "\n"
-0001aec0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001ae00: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+0001ae10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ae20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ae30: 2020 2020 2020 7120 3d20 7379 6d70 792e        q = sympy.
+0001ae40: 6c61 7465 7828 7379 6d70 792e 7369 6d70  latex(sympy.simp
+0001ae50: 6c69 6679 2873 6967 6e20 2b20 6669 6c65  lify(sign + file
+0001ae60: 6461 7461 5b22 7175 616e 7469 7479 225d  data["quantity"]
+0001ae70: 292c 206d 6f64 653d 2269 6e6c 696e 6522  ), mode="inline"
+0001ae80: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0001ae90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001aea0: 2020 2020 2020 2065 7863 6570 7420 4578         except Ex
+0001aeb0: 6365 7074 696f 6e20 6173 2065 3a0d 0a20  ception as e:.. 
+0001aec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001aed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aee0: 2020 6578 6365 7074 3a0d 0a20 2020 2020    except:..     
-0001aef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001af00: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-0001af10: 6173 730d 0a0d 0a20 2020 2020 2020 2020  ass....         
-0001af20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001af30: 2020 2069 6620 7374 7228 6669 6c65 6461     if str(fileda
-0001af40: 7461 5b22 696e 636f 6d65 3122 5d29 2021  ta["income1"]) !
-0001af50: 3d20 274e 6f6e 6527 3a0d 0a20 2020 2020  = 'None':..     
+0001aee0: 2020 2020 2020 2073 656c 662e 6e6f 7469         self.noti
+0001aef0: 6679 280d 0a20 2020 2020 2020 2020 2020  fy(..           
+0001af00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001af10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001af20: 2022 4361 6e6e 6f74 2068 616e 646c 6520   "Cannot handle 
+0001af30: 7468 6520 7379 6d62 6f6c 6963 2065 7870  the symbolic exp
+0001af40: 7265 7373 696f 6e20 2573 2220 2520 7369  ression %s" % si
+0001af50: 676e 202b 2066 696c 6564 6174 615b 0d0a  gn + filedata[..
 0001af60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001af70: 2020 2020 2020 2020 2020 206d 7964 6963             mydic
-0001af80: 7420 3d20 7b22 4761 696e 223a 2022 4761  t = {"Gain": "Ga
-0001af90: 696e 7322 2c0d 0a20 2020 2020 2020 2020  ins",..         
-0001afa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001af70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001af80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001af90: 2271 7561 6e74 6974 7922 5d2c 7469 746c  "quantity"],titl
+0001afa0: 653d 2245 7272 6f72 2229 0d0a 0d0a 2020  e="Error")....  
 0001afb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001afc0: 2022 4c6f 7373 223a 2022 4c6f 7373 6573   "Loss": "Losses
-0001afd0: 222c 0d0a 2020 2020 2020 2020 2020 2020  ",..            
-0001afe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aff0: 2020 2020 2020 2020 2020 2020 2020 2245                "E
-0001b000: 7870 656e 7365 223a 2022 4578 7065 6e73  xpense": "Expens
-0001b010: 6573 222c 0d0a 2020 2020 2020 2020 2020  es",..          
+0001afc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001afd0: 2020 7375 626a 6563 7420 3d20 2220 2020    subject = "   
+0001afe0: 2822 202b 2066 696c 6564 6174 615b 2273  (" + filedata["s
+0001aff0: 7562 6a65 6374 225d 2e72 6570 6c61 6365  ubject"].replace
+0001b000: 2822 5f22 2c20 2220 2229 202b 2022 2922  ("_", " ") + ")"
+0001b010: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
 0001b020: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b040: 2252 6576 656e 7565 223a 2022 5265 7665  "Revenue": "Reve
-0001b050: 6e75 6573 222c 0d0a 2020 2020 2020 2020  nues",..        
-0001b060: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b080: 2020 2254 6178 223a 2022 5461 7865 7322    "Tax": "Taxes"
-0001b090: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
-0001b0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b0b0: 2020 2020 2020 2020 2020 2020 2022 4e6f               "No
-0001b0c0: 6e74 6178 2e20 5072 6f66 6974 223a 2022  ntax. Profit": "
-0001b0d0: 4e6f 6e74 6178 6162 6c65 2050 726f 6669  Nontaxable Profi
-0001b0e0: 7473 222c 0d0a 2020 2020 2020 2020 2020  ts",..          
+0001b030: 2020 2020 2020 2020 6966 206e 616d 6520          if name 
+0001b040: 6e6f 7420 696e 2063 6f6d 6269 6e65 645f  not in combined_
+0001b050: 7368 6565 7473 5b61 6765 6e74 315d 5b22  sheets[agent1]["
+0001b060: 4c69 6162 696c 6974 6965 7320 616e 6420  Liabilities and 
+0001b070: 4571 7569 7479 225d 3a0d 0a20 2020 2020  Equity"]:..     
+0001b080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b090: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b0a0: 2020 2063 6f6d 6269 6e65 645f 7368 6565     combined_shee
+0001b0b0: 7473 5b61 6765 6e74 315d 5b22 4c69 6162  ts[agent1]["Liab
+0001b0c0: 696c 6974 6965 7320 616e 6420 4571 7569  ilities and Equi
+0001b0d0: 7479 225d 5b6e 616d 655d 203d 2022 220d  ty"][name] = "".
+0001b0e0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
 0001b0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b110: 224e 6f6e 7461 782e 204c 6f73 7322 3a20  "Nontax. Loss": 
-0001b120: 224e 6f6e 7461 7861 626c 6520 4c6f 7373  "Nontaxable Loss
-0001b130: 6573 222c 0d0a 2020 2020 2020 2020 2020  es",..          
-0001b140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b160: 224e 6f6e 2d4f 702e 2049 6e63 6f6d 6522  "Non-Op. Income"
-0001b170: 3a20 224e 6f6e 2d4f 7065 7261 7469 6f6e  : "Non-Operation
-0001b180: 616c 2049 6e63 6f6d 6522 2c0d 0a20 2020  al Income",..   
+0001b100: 2020 2020 2020 2063 6f6d 6269 6e65 645f         combined_
+0001b110: 7368 6565 7473 5b61 6765 6e74 315d 5b22  sheets[agent1]["
+0001b120: 4c69 6162 696c 6974 6965 7320 616e 6420  Liabilities and 
+0001b130: 4571 7569 7479 225d 5b6e 616d 655d 202b  Equity"][name] +
+0001b140: 3d20 7120 2b20 7375 626a 6563 7420 2b20  = q + subject + 
+0001b150: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
+0001b160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b170: 2020 2020 2020 6578 6365 7074 3a0d 0a20        except:.. 
+0001b180: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001b190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b1b0: 2020 2020 2020 2022 496e 7465 7265 7374         "Interest
-0001b1c0: 223a 2022 496e 7465 7265 7374 2050 6179  ": "Interest Pay
-0001b1d0: 6d65 6e74 7322 7d0d 0a0d 0a20 2020 2020  ments"}....     
-0001b1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b1f0: 2020 2020 2020 2020 2020 2074 7279 3a0d             try:.
-0001b200: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b210: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b220: 2020 2020 2071 203d 2073 796d 7079 2e6c       q = sympy.l
-0001b230: 6174 6578 2873 796d 7079 2e73 696d 706c  atex(sympy.simpl
-0001b240: 6966 7928 7369 676e 202b 2066 696c 6564  ify(sign + filed
-0001b250: 6174 615b 2271 7561 6e74 6974 7922 5d29  ata["quantity"])
-0001b260: 2c20 6d6f 6465 3d22 696e 6c69 6e65 2229  , mode="inline")
-0001b270: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001b1a0: 2020 2070 6173 730d 0a0d 0a20 2020 2020     pass....     
+0001b1b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b1c0: 2020 2020 2020 2069 6620 7374 7228 6669         if str(fi
+0001b1d0: 6c65 6461 7461 5b22 696e 636f 6d65 3122  ledata["income1"
+0001b1e0: 5d29 2021 3d20 274e 6f6e 6527 3a0d 0a20  ]) != 'None':.. 
+0001b1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b200: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+0001b210: 7964 6963 7420 3d20 7b22 4761 696e 223a  ydict = {"Gain":
+0001b220: 2022 4761 696e 7322 2c0d 0a20 2020 2020   "Gains",..     
+0001b230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b240: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b250: 2020 2020 2022 4c6f 7373 223a 2022 4c6f       "Loss": "Lo
+0001b260: 7373 6573 222c 0d0a 2020 2020 2020 2020  sses",..        
+0001b270: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001b280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b290: 2020 2020 2020 7375 626a 6563 7420 3d20        subject = 
-0001b2a0: 2220 2020 2822 202b 2066 696c 6564 6174  "   (" + filedat
-0001b2b0: 615b 2273 7562 6a65 6374 225d 2e72 6570  a["subject"].rep
-0001b2c0: 6c61 6365 2822 5f22 2c20 2220 2229 202b  lace("_", " ") +
-0001b2d0: 2022 2922 0d0a 2020 2020 2020 2020 2020   ")"..          
-0001b2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b2f0: 2020 2020 2020 2020 2020 636f 6d62 696e            combin
-0001b300: 6564 5f69 6e63 6f6d 655b 6167 656e 7431  ed_income[agent1
-0001b310: 5d5b 6d79 6469 6374 5b66 696c 6564 6174  ][mydict[filedat
-0001b320: 615b 2269 6e63 6f6d 6531 225d 5d5d 2e61  a["income1"]]].a
-0001b330: 7070 656e 6428 2873 7472 2871 292c 2073  ppend((str(q), s
-0001b340: 7562 6a65 6374 2929 0d0a 0d0a 2020 2020  ubject))....    
-0001b350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b360: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-0001b370: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
-0001b380: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0001b290: 2020 2245 7870 656e 7365 223a 2022 4578    "Expense": "Ex
+0001b2a0: 7065 6e73 6573 222c 0d0a 2020 2020 2020  penses",..      
+0001b2b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b2d0: 2020 2020 2252 6576 656e 7565 223a 2022      "Revenue": "
+0001b2e0: 5265 7665 6e75 6573 222c 0d0a 2020 2020  Revenues",..    
+0001b2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b310: 2020 2020 2020 2254 6178 223a 2022 5461        "Tax": "Ta
+0001b320: 7865 7322 2c0d 0a20 2020 2020 2020 2020  xes",..         
+0001b330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b340: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b350: 2022 4e6f 6e74 6178 2e20 5072 6f66 6974   "Nontax. Profit
+0001b360: 223a 2022 4e6f 6e74 6178 6162 6c65 2050  ": "Nontaxable P
+0001b370: 726f 6669 7473 222c 0d0a 2020 2020 2020  rofits",..      
+0001b380: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001b390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b3a0: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
-0001b3b0: 6966 7928 0d0a 2020 2020 2020 2020 2020  ify(..          
-0001b3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b3d0: 2020 2020 2020 2020 2020 2020 2020 2243                "C
-0001b3e0: 616e 6e6f 7420 6861 6e64 6c65 2074 6865  annot handle the
-0001b3f0: 2073 796d 626f 6c69 6320 6578 7072 6573   symbolic expres
-0001b400: 7369 6f6e 2025 7322 2025 2073 6967 6e20  sion %s" % sign 
-0001b410: 2b20 6669 6c65 6461 7461 5b22 7175 616e  + filedata["quan
-0001b420: 7469 7479 225d 2c74 6974 6c65 3d22 4572  tity"],title="Er
-0001b430: 726f 7222 290d 0a0d 0a0d 0a20 2020 2020  ror")......     
-0001b440: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b450: 2020 2020 2020 2023 0d0a 2020 2020 2020         #..      
-0001b460: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b470: 2020 2020 2020 2320 4147 454e 5420 320d        # AGENT 2.
-0001b480: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b490: 2020 2020 2020 2020 2020 2020 2023 0d0a               #..
-0001b4a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001b4b0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0001b4c0: 2061 6765 6e74 3220 6e6f 7420 696e 2063   agent2 not in c
-0001b4d0: 6f6d 6269 6e65 645f 7368 6565 7473 3a0d  ombined_sheets:.
-0001b4e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b500: 2063 6f6d 6269 6e65 645f 7368 6565 7473   combined_sheets
-0001b510: 5b61 6765 6e74 325d 203d 207b 7d0d 0a0d  [agent2] = {}...
-0001b520: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b530: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0001b540: 2241 7373 6574 7322 206e 6f74 2069 6e20  "Assets" not in 
-0001b550: 636f 6d62 696e 6564 5f73 6865 6574 735b  combined_sheets[
-0001b560: 6167 656e 7432 5d3a 0d0a 2020 2020 2020  agent2]:..      
+0001b3a0: 2020 2020 224e 6f6e 7461 782e 204c 6f73      "Nontax. Los
+0001b3b0: 7322 3a20 224e 6f6e 7461 7861 626c 6520  s": "Nontaxable 
+0001b3c0: 4c6f 7373 6573 222c 0d0a 2020 2020 2020  Losses",..      
+0001b3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b3f0: 2020 2020 224e 6f6e 2d4f 702e 2049 6e63      "Non-Op. Inc
+0001b400: 6f6d 6522 3a20 224e 6f6e 2d4f 7065 7261  ome": "Non-Opera
+0001b410: 7469 6f6e 616c 2049 6e63 6f6d 6522 2c0d  tional Income",.
+0001b420: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b430: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b440: 2020 2020 2020 2020 2020 2022 496e 7465             "Inte
+0001b450: 7265 7374 223a 2022 496e 7465 7265 7374  rest": "Interest
+0001b460: 2050 6179 6d65 6e74 7322 7d0d 0a0d 0a20   Payments"}.... 
+0001b470: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b480: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+0001b490: 7279 3a0d 0a20 2020 2020 2020 2020 2020  ry:..           
+0001b4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b4b0: 2020 2020 2020 2020 2071 203d 2073 796d           q = sym
+0001b4c0: 7079 2e6c 6174 6578 2873 796d 7079 2e73  py.latex(sympy.s
+0001b4d0: 696d 706c 6966 7928 7369 676e 202b 2066  implify(sign + f
+0001b4e0: 696c 6564 6174 615b 2271 7561 6e74 6974  iledata["quantit
+0001b4f0: 7922 5d29 2c20 6d6f 6465 3d22 696e 6c69  y"]), mode="inli
+0001b500: 6e65 2229 0d0a 2020 2020 2020 2020 2020  ne")..          
+0001b510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b520: 2020 2020 2020 2020 2020 7375 626a 6563            subjec
+0001b530: 7420 3d20 2220 2020 2822 202b 2066 696c  t = "   (" + fil
+0001b540: 6564 6174 615b 2273 7562 6a65 6374 225d  edata["subject"]
+0001b550: 2e72 6570 6c61 6365 2822 5f22 2c20 2220  .replace("_", " 
+0001b560: 2229 202b 2022 2922 0d0a 2020 2020 2020  ") + ")"..      
 0001b570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b580: 2020 2020 2020 2020 2020 636f 6d62 696e            combin
-0001b590: 6564 5f73 6865 6574 735b 6167 656e 7432  ed_sheets[agent2
-0001b5a0: 5d5b 2241 7373 6574 7322 5d20 3d20 7b7d  ]["Assets"] = {}
-0001b5b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001b5c0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0001b5d0: 2022 4c69 6162 696c 6974 6965 7320 616e   "Liabilities an
-0001b5e0: 6420 4571 7569 7479 2220 6e6f 7420 696e  d Equity" not in
-0001b5f0: 2063 6f6d 6269 6e65 645f 7368 6565 7473   combined_sheets
-0001b600: 5b61 6765 6e74 325d 3a0d 0a20 2020 2020  [agent2]:..     
-0001b610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b620: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
-0001b630: 6e65 645f 7368 6565 7473 5b61 6765 6e74  ned_sheets[agent
-0001b640: 325d 5b22 4c69 6162 696c 6974 6965 7320  2]["Liabilities 
-0001b650: 616e 6420 4571 7569 7479 225d 203d 207b  and Equity"] = {
-0001b660: 7d0d 0a0d 0a20 2020 2020 2020 2020 2020  }....           
-0001b670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b680: 2066 6f72 2063 6861 6e67 6520 696e 2061   for change in a
-0001b690: 7373 6574 7332 2e73 706c 6974 2822 5c6e  ssets2.split("\n
-0001b6a0: 2229 3a0d 0a0d 0a20 2020 2020 2020 2020  "):....         
-0001b6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b6c0: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
+0001b580: 2020 2020 2020 2020 2020 2020 2020 636f                co
+0001b590: 6d62 696e 6564 5f69 6e63 6f6d 655b 6167  mbined_income[ag
+0001b5a0: 656e 7431 5d5b 6d79 6469 6374 5b66 696c  ent1][mydict[fil
+0001b5b0: 6564 6174 615b 2269 6e63 6f6d 6531 225d  edata["income1"]
+0001b5c0: 5d5d 2e61 7070 656e 6428 2873 7472 2871  ]].append((str(q
+0001b5d0: 292c 2073 7562 6a65 6374 2929 0d0a 0d0a  ), subject))....
+0001b5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b600: 6578 6365 7074 2045 7863 6570 7469 6f6e  except Exception
+0001b610: 2061 7320 653a 0d0a 2020 2020 2020 2020   as e:..        
+0001b620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b630: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0001b640: 2e6e 6f74 6966 7928 0d0a 2020 2020 2020  .notify(..      
+0001b650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b670: 2020 2243 616e 6e6f 7420 6861 6e64 6c65    "Cannot handle
+0001b680: 2074 6865 2073 796d 626f 6c69 6320 6578   the symbolic ex
+0001b690: 7072 6573 7369 6f6e 2025 7322 2025 2073  pression %s" % s
+0001b6a0: 6967 6e20 2b20 6669 6c65 6461 7461 5b22  ign + filedata["
+0001b6b0: 7175 616e 7469 7479 225d 2c74 6974 6c65  quantity"],title
+0001b6c0: 3d22 4572 726f 7222 290d 0a0d 0a0d 0a20  ="Error")...... 
 0001b6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b6f0: 2073 6967 6e20 3d20 6368 616e 6765 5b30   sign = change[0
-0001b700: 5d20 2023 2066 6972 7374 206c 6574 7465  ]  # first lette
-0001b710: 7220 6973 2073 6967 6e20 2b20 6f72 202d  r is sign + or -
-0001b720: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0001b730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b740: 2020 2020 2020 2020 6e61 6d65 203d 2063          name = c
-0001b750: 6861 6e67 655b 313a 5d2e 7374 7269 7028  hange[1:].strip(
-0001b760: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0001b770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b780: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
-0001b790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b7b0: 2020 2020 2071 203d 2073 796d 7079 2e6c       q = sympy.l
-0001b7c0: 6174 6578 2873 796d 7079 2e73 696d 706c  atex(sympy.simpl
-0001b7d0: 6966 7928 7369 676e 202b 2066 696c 6564  ify(sign + filed
-0001b7e0: 6174 615b 2271 7561 6e74 6974 7922 5d29  ata["quantity"])
-0001b7f0: 2c20 6d6f 6465 3d22 696e 6c69 6e65 2229  , mode="inline")
-0001b800: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001b810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b820: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
-0001b830: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
-0001b840: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b6e0: 2020 2020 2020 2020 2020 2023 0d0a 2020             #..  
+0001b6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b700: 2020 2020 2020 2020 2020 2320 4147 454e            # AGEN
+0001b710: 5420 320d 0a20 2020 2020 2020 2020 2020  T 2..           
+0001b720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b730: 2023 0d0a 0d0a 2020 2020 2020 2020 2020   #....          
+0001b740: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b750: 2020 6966 2061 6765 6e74 3220 6e6f 7420    if agent2 not 
+0001b760: 696e 2063 6f6d 6269 6e65 645f 7368 6565  in combined_shee
+0001b770: 7473 3a0d 0a20 2020 2020 2020 2020 2020  ts:..           
+0001b780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b790: 2020 2020 2063 6f6d 6269 6e65 645f 7368       combined_sh
+0001b7a0: 6565 7473 5b61 6765 6e74 325d 203d 207b  eets[agent2] = {
+0001b7b0: 7d0d 0a0d 0a20 2020 2020 2020 2020 2020  }....           
+0001b7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b7d0: 2069 6620 2241 7373 6574 7322 206e 6f74   if "Assets" not
+0001b7e0: 2069 6e20 636f 6d62 696e 6564 5f73 6865   in combined_she
+0001b7f0: 6574 735b 6167 656e 7432 5d3a 0d0a 2020  ets[agent2]:..  
+0001b800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b810: 2020 2020 2020 2020 2020 2020 2020 636f                co
+0001b820: 6d62 696e 6564 5f73 6865 6574 735b 6167  mbined_sheets[ag
+0001b830: 656e 7432 5d5b 2241 7373 6574 7322 5d20  ent2]["Assets"] 
+0001b840: 3d20 7b7d 0d0a 2020 2020 2020 2020 2020  = {}..          
 0001b850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b860: 2020 2020 2020 7365 6c66 2e6e 6f74 6966        self.notif
-0001b870: 7928 0d0a 2020 2020 2020 2020 2020 2020  y(..            
-0001b880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b8a0: 2243 616e 6e6f 7420 6861 6e64 6c65 2074  "Cannot handle t
-0001b8b0: 6865 2073 796d 626f 6c69 6320 6578 7072  he symbolic expr
-0001b8c0: 6573 7369 6f6e 2025 7322 2025 2073 6967  ession %s" % sig
-0001b8d0: 6e20 2b20 6669 6c65 6461 7461 5b0d 0a20  n + filedata[.. 
-0001b8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b900: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0001b910: 7175 616e 7469 7479 225d 2c74 6974 6c65  quantity"],title
-0001b920: 3d22 4572 726f 7222 290d 0a0d 0a20 2020  ="Error")....   
-0001b930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b860: 2020 6966 2022 4c69 6162 696c 6974 6965    if "Liabilitie
+0001b870: 7320 616e 6420 4571 7569 7479 2220 6e6f  s and Equity" no
+0001b880: 7420 696e 2063 6f6d 6269 6e65 645f 7368  t in combined_sh
+0001b890: 6565 7473 5b61 6765 6e74 325d 3a0d 0a20  eets[agent2]:.. 
+0001b8a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b8b0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0001b8c0: 6f6d 6269 6e65 645f 7368 6565 7473 5b61  ombined_sheets[a
+0001b8d0: 6765 6e74 325d 5b22 4c69 6162 696c 6974  gent2]["Liabilit
+0001b8e0: 6965 7320 616e 6420 4571 7569 7479 225d  ies and Equity"]
+0001b8f0: 203d 207b 7d0d 0a0d 0a20 2020 2020 2020   = {}....       
+0001b900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b910: 2020 2020 2066 6f72 2063 6861 6e67 6520       for change 
+0001b920: 696e 2061 7373 6574 7332 2e73 706c 6974  in assets2.split
+0001b930: 2822 5c6e 2229 3a0d 0a0d 0a20 2020 2020  ("\n"):....     
 0001b940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b950: 2073 7562 6a65 6374 203d 2022 2020 2028   subject = "   (
-0001b960: 2220 2b20 6669 6c65 6461 7461 5b22 7375  " + filedata["su
-0001b970: 626a 6563 7422 5d2e 7265 706c 6163 6528  bject"].replace(
-0001b980: 225f 222c 2022 2022 2920 2b20 2229 220d  "_", " ") + ")".
-0001b990: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0001b9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b9b0: 2020 2020 2020 2069 6620 6e61 6d65 206e         if name n
-0001b9c0: 6f74 2069 6e20 636f 6d62 696e 6564 5f73  ot in combined_s
-0001b9d0: 6865 6574 735b 6167 656e 7432 5d5b 2241  heets[agent2]["A
-0001b9e0: 7373 6574 7322 5d3a 0d0a 2020 2020 2020  ssets"]:..      
-0001b9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b950: 2020 2020 2020 2020 2020 2074 7279 3a0d             try:.
+0001b960: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b980: 2020 2020 2073 6967 6e20 3d20 6368 616e       sign = chan
+0001b990: 6765 5b30 5d20 2023 2066 6972 7374 206c  ge[0]  # first l
+0001b9a0: 6574 7465 7220 6973 2073 6967 6e20 2b20  etter is sign + 
+0001b9b0: 6f72 202d 0d0a 0d0a 2020 2020 2020 2020  or -....        
+0001b9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b9d0: 2020 2020 2020 2020 2020 2020 6e61 6d65              name
+0001b9e0: 203d 2063 6861 6e67 655b 313a 5d2e 7374   = change[1:].st
+0001b9f0: 7269 7028 290d 0a20 2020 2020 2020 2020  rip()..         
 0001ba00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ba10: 2020 636f 6d62 696e 6564 5f73 6865 6574    combined_sheet
-0001ba20: 735b 6167 656e 7432 5d5b 2241 7373 6574  s[agent2]["Asset
-0001ba30: 7322 5d5b 6e61 6d65 5d20 3d20 2222 0d0a  s"][name] = ""..
-0001ba40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001ba50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ba60: 2020 2020 2020 636f 6d62 696e 6564 5f73        combined_s
-0001ba70: 6865 6574 735b 6167 656e 7432 5d5b 2241  heets[agent2]["A
-0001ba80: 7373 6574 7322 5d5b 6e61 6d65 5d20 2b3d  ssets"][name] +=
-0001ba90: 2071 202b 2073 7562 6a65 6374 202b 2022   q + subject + "
-0001baa0: 5c6e 220d 0a20 2020 2020 2020 2020 2020  \n"..           
-0001bab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bac0: 2020 2020 2065 7863 6570 743a 0d0a 2020       except:..  
-0001bad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ba10: 2020 2020 2020 2020 2020 2074 7279 3a0d             try:.
+0001ba20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ba30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ba40: 2020 2020 2020 2020 2071 203d 2073 796d           q = sym
+0001ba50: 7079 2e6c 6174 6578 2873 796d 7079 2e73  py.latex(sympy.s
+0001ba60: 696d 706c 6966 7928 7369 676e 202b 2066  implify(sign + f
+0001ba70: 696c 6564 6174 615b 2271 7561 6e74 6974  iledata["quantit
+0001ba80: 7922 5d29 2c20 6d6f 6465 3d22 696e 6c69  y"]), mode="inli
+0001ba90: 6e65 2229 0d0a 2020 2020 2020 2020 2020  ne")..          
+0001baa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bab0: 2020 2020 2020 2020 2020 6578 6365 7074            except
+0001bac0: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
+0001bad0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
 0001bae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001baf0: 2020 7061 7373 0d0a 0d0a 2020 2020 2020    pass....      
-0001bb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bb10: 2020 2020 2020 666f 7220 6368 616e 6765        for change
-0001bb20: 2069 6e20 6c69 6162 7332 2e73 706c 6974   in liabs2.split
-0001bb30: 2822 5c6e 2229 3a0d 0a20 2020 2020 2020  ("\n"):..       
-0001bb40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bb50: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
-0001bb60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bb80: 2020 2073 6967 6e20 3d20 6368 616e 6765     sign = change
-0001bb90: 5b30 5d20 2023 2066 6972 7374 206c 6574  [0]  # first let
-0001bba0: 7465 7220 6973 2073 6967 6e20 2b20 6f72  ter is sign + or
-0001bbb0: 202d 0d0a 0d0a 2020 2020 2020 2020 2020   -....          
-0001bbc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bbd0: 2020 2020 2020 2020 2020 6e61 6d65 203d            name =
-0001bbe0: 2063 6861 6e67 655b 313a 5d2e 7374 7269   change[1:].stri
-0001bbf0: 7028 290d 0a20 2020 2020 2020 2020 2020  p()..           
-0001bc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bc10: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
-0001bc20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001baf0: 2020 2020 2020 2020 2020 7365 6c66 2e6e            self.n
+0001bb00: 6f74 6966 7928 0d0a 2020 2020 2020 2020  otify(..        
+0001bb10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bb30: 2020 2020 2243 616e 6e6f 7420 6861 6e64      "Cannot hand
+0001bb40: 6c65 2074 6865 2073 796d 626f 6c69 6320  le the symbolic 
+0001bb50: 6578 7072 6573 7369 6f6e 2025 7322 2025  expression %s" %
+0001bb60: 2073 6967 6e20 2b20 6669 6c65 6461 7461   sign + filedata
+0001bb70: 5b0d 0a20 2020 2020 2020 2020 2020 2020  [..             
+0001bb80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bba0: 2020 2022 7175 616e 7469 7479 225d 2c74     "quantity"],t
+0001bbb0: 6974 6c65 3d22 4572 726f 7222 290d 0a0d  itle="Error")...
+0001bbc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001bbd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bbe0: 2020 2020 2073 7562 6a65 6374 203d 2022       subject = "
+0001bbf0: 2020 2028 2220 2b20 6669 6c65 6461 7461     (" + filedata
+0001bc00: 5b22 7375 626a 6563 7422 5d2e 7265 706c  ["subject"].repl
+0001bc10: 6163 6528 225f 222c 2022 2022 2920 2b20  ace("_", " ") + 
+0001bc20: 2229 220d 0a0d 0a20 2020 2020 2020 2020  ")"....         
 0001bc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bc40: 2020 2020 2020 2071 203d 2073 796d 7079         q = sympy
-0001bc50: 2e6c 6174 6578 2873 796d 7079 2e73 696d  .latex(sympy.sim
-0001bc60: 706c 6966 7928 7369 676e 202b 2066 696c  plify(sign + fil
-0001bc70: 6564 6174 615b 2271 7561 6e74 6974 7922  edata["quantity"
-0001bc80: 5d29 2c20 6d6f 6465 3d22 696e 6c69 6e65  ]), mode="inline
-0001bc90: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
-0001bca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bcb0: 2020 2020 2020 2020 6578 6365 7074 2045          except E
-0001bcc0: 7863 6570 7469 6f6e 2061 7320 653a 0d0a  xception as e:..
-0001bcd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bc40: 2020 2020 2020 2020 2020 2069 6620 6e61             if na
+0001bc50: 6d65 206e 6f74 2069 6e20 636f 6d62 696e  me not in combin
+0001bc60: 6564 5f73 6865 6574 735b 6167 656e 7432  ed_sheets[agent2
+0001bc70: 5d5b 2241 7373 6574 7322 5d3a 0d0a 2020  ]["Assets"]:..  
+0001bc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bc90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bca0: 2020 2020 2020 636f 6d62 696e 6564 5f73        combined_s
+0001bcb0: 6865 6574 735b 6167 656e 7432 5d5b 2241  heets[agent2]["A
+0001bcc0: 7373 6574 7322 5d5b 6e61 6d65 5d20 3d20  ssets"][name] = 
+0001bcd0: 2222 0d0a 0d0a 2020 2020 2020 2020 2020  ""....          
 0001bce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bcf0: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
-0001bd00: 6966 7928 0d0a 2020 2020 2020 2020 2020  ify(..          
-0001bd10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bd30: 2020 2243 616e 6e6f 7420 6861 6e64 6c65    "Cannot handle
-0001bd40: 2074 6865 2073 796d 626f 6c69 6320 6578   the symbolic ex
-0001bd50: 7072 6573 7369 6f6e 2025 7322 2025 2073  pression %s" % s
-0001bd60: 6967 6e20 2b20 6669 6c65 6461 7461 5b0d  ign + filedata[.
-0001bd70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001bd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bcf0: 2020 2020 2020 2020 2020 636f 6d62 696e            combin
+0001bd00: 6564 5f73 6865 6574 735b 6167 656e 7432  ed_sheets[agent2
+0001bd10: 5d5b 2241 7373 6574 7322 5d5b 6e61 6d65  ]["Assets"][name
+0001bd20: 5d20 2b3d 2071 202b 2073 7562 6a65 6374  ] += q + subject
+0001bd30: 202b 2022 5c6e 220d 0a20 2020 2020 2020   + "\n"..       
+0001bd40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bd50: 2020 2020 2020 2020 2065 7863 6570 743a           except:
+0001bd60: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001bd70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bd80: 2020 2020 2020 7061 7373 0d0a 0d0a 2020        pass....  
 0001bd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bda0: 2022 7175 616e 7469 7479 225d 2c74 6974   "quantity"],tit
-0001bdb0: 6c65 3d22 4572 726f 7222 290d 0a0d 0a20  le="Error").... 
-0001bdc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bda0: 2020 2020 2020 2020 2020 666f 7220 6368            for ch
+0001bdb0: 616e 6765 2069 6e20 6c69 6162 7332 2e73  ange in liabs2.s
+0001bdc0: 706c 6974 2822 5c6e 2229 3a0d 0a20 2020  plit("\n"):..   
 0001bdd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bde0: 2020 2073 7562 6a65 6374 203d 2022 2020     subject = "  
-0001bdf0: 2028 2220 2b20 6669 6c65 6461 7461 5b22   (" + filedata["
-0001be00: 7375 626a 6563 7422 5d2e 7265 706c 6163  subject"].replac
-0001be10: 6528 225f 222c 2022 2022 2920 2b20 2229  e("_", " ") + ")
-0001be20: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
-0001be30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001be40: 2020 2020 2020 2020 2069 6620 6e61 6d65           if name
-0001be50: 206e 6f74 2069 6e20 636f 6d62 696e 6564   not in combined
-0001be60: 5f73 6865 6574 735b 6167 656e 7432 5d5b  _sheets[agent2][
-0001be70: 224c 6961 6269 6c69 7469 6573 2061 6e64  "Liabilities and
-0001be80: 2045 7175 6974 7922 5d3a 0d0a 2020 2020   Equity"]:..    
+0001bde0: 2020 2020 2020 2020 2020 2020 2074 7279               try
+0001bdf0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0001be00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001be10: 2020 2020 2020 2073 6967 6e20 3d20 6368         sign = ch
+0001be20: 616e 6765 5b30 5d20 2023 2066 6972 7374  ange[0]  # first
+0001be30: 206c 6574 7465 7220 6973 2073 6967 6e20   letter is sign 
+0001be40: 2b20 6f72 202d 0d0a 0d0a 2020 2020 2020  + or -....      
+0001be50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001be60: 2020 2020 2020 2020 2020 2020 2020 6e61                na
+0001be70: 6d65 203d 2063 6861 6e67 655b 313a 5d2e  me = change[1:].
+0001be80: 7374 7269 7028 290d 0a20 2020 2020 2020  strip()..       
 0001be90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001beb0: 2020 2020 636f 6d62 696e 6564 5f73 6865      combined_she
-0001bec0: 6574 735b 6167 656e 7432 5d5b 224c 6961  ets[agent2]["Lia
-0001bed0: 6269 6c69 7469 6573 2061 6e64 2045 7175  bilities and Equ
-0001bee0: 6974 7922 5d5b 6e61 6d65 5d20 3d20 2222  ity"][name] = ""
-0001bef0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0001bf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bf10: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
-0001bf20: 5f73 6865 6574 735b 6167 656e 7432 5d5b  _sheets[agent2][
-0001bf30: 224c 6961 6269 6c69 7469 6573 2061 6e64  "Liabilities and
-0001bf40: 2045 7175 6974 7922 5d5b 6e61 6d65 5d20   Equity"][name] 
-0001bf50: 2b3d 2071 202b 2073 7562 6a65 6374 202b  += q + subject +
-0001bf60: 2022 5c6e 220d 0a20 2020 2020 2020 2020   "\n"..         
+0001bea0: 2020 2020 2020 2020 2020 2020 2074 7279               try
+0001beb0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0001bec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bed0: 2020 2020 2020 2020 2020 2071 203d 2073             q = s
+0001bee0: 796d 7079 2e6c 6174 6578 2873 796d 7079  ympy.latex(sympy
+0001bef0: 2e73 696d 706c 6966 7928 7369 676e 202b  .simplify(sign +
+0001bf00: 2066 696c 6564 6174 615b 2271 7561 6e74   filedata["quant
+0001bf10: 6974 7922 5d29 2c20 6d6f 6465 3d22 696e  ity"]), mode="in
+0001bf20: 6c69 6e65 2229 0d0a 2020 2020 2020 2020  line")..        
+0001bf30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bf40: 2020 2020 2020 2020 2020 2020 6578 6365              exce
+0001bf50: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
+0001bf60: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
 0001bf70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bf80: 2020 2020 2020 2065 7863 6570 743a 0d0a         except:..
-0001bf90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bf80: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0001bf90: 2e6e 6f74 6966 7928 0d0a 2020 2020 2020  .notify(..      
 0001bfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bfb0: 2020 2020 7061 7373 0d0a 0d0a 2020 2020      pass....    
-0001bfc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bfd0: 2020 2020 2020 2020 6966 2073 7472 2866          if str(f
-0001bfe0: 696c 6564 6174 615b 2269 6e63 6f6d 6532  iledata["income2
-0001bff0: 225d 2920 213d 2027 4e6f 6e65 273a 0d0a  "]) != 'None':..
-0001c000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bfb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bfc0: 2020 2020 2020 2243 616e 6e6f 7420 6861        "Cannot ha
+0001bfd0: 6e64 6c65 2074 6865 2073 796d 626f 6c69  ndle the symboli
+0001bfe0: 6320 6578 7072 6573 7369 6f6e 2025 7322  c expression %s"
+0001bff0: 2025 2073 6967 6e20 2b20 6669 6c65 6461   % sign + fileda
+0001c000: 7461 5b0d 0a20 2020 2020 2020 2020 2020  ta[..           
 0001c010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c020: 6d79 6469 6374 203d 207b 2247 6169 6e22  mydict = {"Gain"
-0001c030: 3a20 2247 6169 6e73 222c 0d0a 2020 2020  : "Gains",..    
-0001c040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c060: 2020 2020 2020 224c 6f73 7322 3a20 224c        "Loss": "L
-0001c070: 6f73 7365 7322 2c0d 0a20 2020 2020 2020  osses",..       
-0001c080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c0a0: 2020 2022 4578 7065 6e73 6522 3a20 2245     "Expense": "E
-0001c0b0: 7870 656e 7365 7322 2c0d 0a20 2020 2020  xpenses",..     
+0001c020: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c030: 2020 2020 2022 7175 616e 7469 7479 225d       "quantity"]
+0001c040: 2c74 6974 6c65 3d22 4572 726f 7222 290d  ,title="Error").
+0001c050: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001c060: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c070: 2020 2020 2020 2073 7562 6a65 6374 203d         subject =
+0001c080: 2022 2020 2028 2220 2b20 6669 6c65 6461   "   (" + fileda
+0001c090: 7461 5b22 7375 626a 6563 7422 5d2e 7265  ta["subject"].re
+0001c0a0: 706c 6163 6528 225f 222c 2022 2022 2920  place("_", " ") 
+0001c0b0: 2b20 2229 220d 0a0d 0a20 2020 2020 2020  + ")"....       
 0001c0c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c0d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c0e0: 2020 2020 2022 5265 7665 6e75 6522 3a20       "Revenue": 
-0001c0f0: 2252 6576 656e 7565 7322 2c0d 0a20 2020  "Revenues",..   
-0001c100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c110: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c120: 2020 2020 2020 2022 5461 7822 3a20 2254         "Tax": "T
-0001c130: 6178 6573 222c 0d0a 2020 2020 2020 2020  axes",..        
-0001c140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c160: 2020 224e 6f6e 7461 782e 2050 726f 6669    "Nontax. Profi
-0001c170: 7422 3a20 224e 6f6e 7461 7861 626c 6520  t": "Nontaxable 
-0001c180: 5072 6f66 6974 7322 2c0d 0a20 2020 2020  Profits",..     
+0001c0d0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0001c0e0: 6e61 6d65 206e 6f74 2069 6e20 636f 6d62  name not in comb
+0001c0f0: 696e 6564 5f73 6865 6574 735b 6167 656e  ined_sheets[agen
+0001c100: 7432 5d5b 224c 6961 6269 6c69 7469 6573  t2]["Liabilities
+0001c110: 2061 6e64 2045 7175 6974 7922 5d3a 0d0a   and Equity"]:..
+0001c120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c130: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c140: 2020 2020 2020 2020 636f 6d62 696e 6564          combined
+0001c150: 5f73 6865 6574 735b 6167 656e 7432 5d5b  _sheets[agent2][
+0001c160: 224c 6961 6269 6c69 7469 6573 2061 6e64  "Liabilities and
+0001c170: 2045 7175 6974 7922 5d5b 6e61 6d65 5d20   Equity"][name] 
+0001c180: 3d20 2222 0d0a 0d0a 2020 2020 2020 2020  = ""....        
 0001c190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c1a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c1b0: 2020 2020 2022 4e6f 6e74 6178 2e20 4c6f       "Nontax. Lo
-0001c1c0: 7373 223a 2022 4e6f 6e74 6178 6162 6c65  ss": "Nontaxable
-0001c1d0: 204c 6f73 7365 7322 2c0d 0a20 2020 2020   Losses",..     
-0001c1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c200: 2020 2020 2022 4e6f 6e2d 4f70 2e20 496e       "Non-Op. In
-0001c210: 636f 6d65 223a 2022 4e6f 6e2d 4f70 6572  come": "Non-Oper
-0001c220: 6174 696f 6e61 6c20 496e 636f 6d65 222c  ational Income",
-0001c230: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001c240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c250: 2020 2020 2020 2020 2020 2020 2249 6e74              "Int
-0001c260: 6572 6573 7422 3a20 2249 6e74 6572 6573  erest": "Interes
-0001c270: 7420 5061 796d 656e 7473 227d 0d0a 2020  t Payments"}..  
-0001c280: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c290: 2020 2020 2020 2020 2020 2020 2020 7120                q 
-0001c2a0: 3d20 7379 6d70 792e 6c61 7465 7828 7379  = sympy.latex(sy
-0001c2b0: 6d70 792e 7369 6d70 6c69 6679 2873 6967  mpy.simplify(sig
-0001c2c0: 6e20 2b20 6669 6c65 6461 7461 5b22 7175  n + filedata["qu
-0001c2d0: 616e 7469 7479 225d 292c 206d 6f64 653d  antity"]), mode=
-0001c2e0: 2269 6e6c 696e 6522 290d 0a20 2020 2020  "inline")..     
-0001c2f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c300: 2020 2020 2020 2020 2020 2073 7562 6a65             subje
-0001c310: 6374 203d 2022 2020 2028 2220 2b20 6669  ct = "   (" + fi
-0001c320: 6c65 6461 7461 5b22 7375 626a 6563 7422  ledata["subject"
-0001c330: 5d2e 7265 706c 6163 6528 225f 222c 2022  ].replace("_", "
-0001c340: 2022 2920 2b20 2229 220d 0a20 2020 2020   ") + ")"..     
+0001c1a0: 2020 2020 2020 2020 2020 2020 636f 6d62              comb
+0001c1b0: 696e 6564 5f73 6865 6574 735b 6167 656e  ined_sheets[agen
+0001c1c0: 7432 5d5b 224c 6961 6269 6c69 7469 6573  t2]["Liabilities
+0001c1d0: 2061 6e64 2045 7175 6974 7922 5d5b 6e61   and Equity"][na
+0001c1e0: 6d65 5d20 2b3d 2071 202b 2073 7562 6a65  me] += q + subje
+0001c1f0: 6374 202b 2022 5c6e 220d 0a20 2020 2020  ct + "\n"..     
+0001c200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c210: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+0001c220: 743a 0d0a 2020 2020 2020 2020 2020 2020  t:..            
+0001c230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c240: 2020 2020 2020 2020 7061 7373 0d0a 0d0a          pass....
+0001c250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c260: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+0001c270: 7472 2866 696c 6564 6174 615b 2269 6e63  tr(filedata["inc
+0001c280: 6f6d 6532 225d 2920 213d 2027 4e6f 6e65  ome2"]) != 'None
+0001c290: 273a 0d0a 2020 2020 2020 2020 2020 2020  ':..            
+0001c2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c2b0: 2020 2020 6d79 6469 6374 203d 207b 2247      mydict = {"G
+0001c2c0: 6169 6e22 3a20 2247 6169 6e73 222c 0d0a  ain": "Gains",..
+0001c2d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c2e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c2f0: 2020 2020 2020 2020 2020 224c 6f73 7322            "Loss"
+0001c300: 3a20 224c 6f73 7365 7322 2c0d 0a20 2020  : "Losses",..   
+0001c310: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c330: 2020 2020 2020 2022 4578 7065 6e73 6522         "Expense"
+0001c340: 3a20 2245 7870 656e 7365 7322 2c0d 0a20  : "Expenses",.. 
 0001c350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c360: 2020 2020 2020 2020 2020 2063 6f6d 6269             combi
-0001c370: 6e65 645f 696e 636f 6d65 5b61 6765 6e74  ned_income[agent
-0001c380: 325d 5b6d 7964 6963 745b 6669 6c65 6461  2][mydict[fileda
-0001c390: 7461 5b22 696e 636f 6d65 3222 5d5d 5d2e  ta["income2"]]].
-0001c3a0: 6170 7065 6e64 2828 7374 7228 7129 2c20  append((str(q), 
-0001c3b0: 7375 626a 6563 7429 290d 0a0d 0a20 2020  subject))....   
-0001c3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c3d0: 2020 2020 2020 2020 2020 2020 2023 203d               # =
-0001c3e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001c3f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d0d 0a0d 0a20  ===========.... 
-0001c400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c410: 2020 2020 2020 2020 2020 2074 7261 6e73             trans
-0001c420: 6665 725f 7374 7220 3d20 2222 0d0a 0d0a  fer_str = ""....
+0001c360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c370: 2020 2020 2020 2020 2022 5265 7665 6e75           "Revenu
+0001c380: 6522 3a20 2252 6576 656e 7565 7322 2c0d  e": "Revenues",.
+0001c390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001c3a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c3b0: 2020 2020 2020 2020 2020 2022 5461 7822             "Tax"
+0001c3c0: 3a20 2254 6178 6573 222c 0d0a 2020 2020  : "Taxes",..    
+0001c3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c3e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c3f0: 2020 2020 2020 224e 6f6e 7461 782e 2050        "Nontax. P
+0001c400: 726f 6669 7422 3a20 224e 6f6e 7461 7861  rofit": "Nontaxa
+0001c410: 626c 6520 5072 6f66 6974 7322 2c0d 0a20  ble Profits",.. 
+0001c420: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001c430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c440: 2020 2020 2020 2020 2020 2020 6966 2063              if c
-0001c450: 6f6e 7665 7274 5f62 6f6f 6c28 6669 6c65  onvert_bool(file
-0001c460: 6461 7461 5b22 6c6f 6720 7472 616e 7361  data["log transa
-0001c470: 6374 696f 6e22 5d29 3a0d 0a20 2020 2020  ction"]):..     
+0001c440: 2020 2020 2020 2020 2022 4e6f 6e74 6178           "Nontax
+0001c450: 2e20 4c6f 7373 223a 2022 4e6f 6e74 6178  . Loss": "Nontax
+0001c460: 6162 6c65 204c 6f73 7365 7322 2c0d 0a20  able Losses",.. 
+0001c470: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001c480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c490: 2020 2020 2020 2020 2020 2074 7261 6e73             trans
-0001c4a0: 6665 725f 7374 7220 3d20 225c 6e46 6c6f  fer_str = "\nFlo
-0001c4b0: 773a 7e22 202b 2066 696c 6564 6174 615b  w:~" + filedata[
-0001c4c0: 226b 696e 6422 5d2e 7374 7269 7028 292e  "kind"].strip().
-0001c4d0: 7265 706c 6163 6528 222d 3e22 2c0d 0a20  replace("->",.. 
+0001c490: 2020 2020 2020 2020 2022 4e6f 6e2d 4f70           "Non-Op
+0001c4a0: 2e20 496e 636f 6d65 223a 2022 4e6f 6e2d  . Income": "Non-
+0001c4b0: 4f70 6572 6174 696f 6e61 6c20 496e 636f  Operational Inco
+0001c4c0: 6d65 222c 0d0a 2020 2020 2020 2020 2020  me",..          
+0001c4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001c4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c4f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c4f0: 2249 6e74 6572 6573 7422 3a20 2249 6e74  "Interest": "Int
+0001c500: 6572 6573 7420 5061 796d 656e 7473 227d  erest Payments"}
+0001c510: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
 0001c520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c530: 2020 2020 2020 2020 2020 2020 2224 5c5c              "$\\
-0001c540: 7269 6768 7461 7272 6f77 2422 2920 2b20  rightarrow$") + 
-0001c550: 2226 7e5c 5c5c 5c22 202b 2022 5c6e 220d  "&~\\\\" + "\n".
-0001c560: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001c570: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c580: 2074 7261 6e73 6665 725f 7374 7220 2b3d   transfer_str +=
-0001c590: 2022 5375 626a 6563 743a 7e22 202b 2066   "Subject:~" + f
-0001c5a0: 696c 6564 6174 615b 2273 7562 6a65 6374  iledata["subject
-0001c5b0: 225d 2e73 7472 6970 2829 2e74 6974 6c65  "].strip().title
-0001c5c0: 2829 202b 2022 267e 5c5c 5c5c 2220 2b20  () + "&~\\\\" + 
-0001c5d0: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
+0001c530: 2020 7120 3d20 7379 6d70 792e 6c61 7465    q = sympy.late
+0001c540: 7828 7379 6d70 792e 7369 6d70 6c69 6679  x(sympy.simplify
+0001c550: 2873 6967 6e20 2b20 6669 6c65 6461 7461  (sign + filedata
+0001c560: 5b22 7175 616e 7469 7479 225d 292c 206d  ["quantity"]), m
+0001c570: 6f64 653d 2269 6e6c 696e 6522 290d 0a20  ode="inline").. 
+0001c580: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c590: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001c5a0: 7562 6a65 6374 203d 2022 2020 2028 2220  ubject = "   (" 
+0001c5b0: 2b20 6669 6c65 6461 7461 5b22 7375 626a  + filedata["subj
+0001c5c0: 6563 7422 5d2e 7265 706c 6163 6528 225f  ect"].replace("_
+0001c5d0: 222c 2022 2022 2920 2b20 2229 220d 0a20  ", " ") + ")".. 
 0001c5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c5f0: 2020 2020 2020 2320 7472 616e 7366 6572        # transfer
-0001c600: 5f73 7472 202b 3d20 2251 7561 6e74 6974  _str += "Quantit
-0001c610: 793a 7e22 202b 2066 696c 6564 6174 615b  y:~" + filedata[
-0001c620: 2271 7561 6e74 6974 7922 5d2e 7374 7269  "quantity"].stri
-0001c630: 7028 2920 2b20 2226 7e5c 5c5c 5c22 2b20  p() + "&~\\\\"+ 
-0001c640: 225c 6e22 0d0a 0d0a 2020 2020 2020 2020  "\n"....        
-0001c650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c660: 2020 2020 7461 626c 655f 7374 7220 3d20      table_str = 
-0001c670: 2222 225c 5c62 6567 696e 7b74 6162 756c  """\\begin{tabul
-0001c680: 6172 7d7b 6c6c 7d0d 0a0d 0a20 2020 2020  ar}{ll}....     
-0001c690: 2020 2020 2020 2020 2020 2025 7320 2620             %s & 
-0001c6a0: 2573 205c 5c5c 5c0d 0a20 2020 2020 2020  %s \\\\..       
-0001c6b0: 2020 2020 2020 2020 207e 2026 207e 205c           ~ & ~ \
-0001c6c0: 5c5c 5c0d 0a20 2020 2020 2020 2020 2020  \\\..           
-0001c6d0: 2020 2020 2022 2222 2025 2028 6669 6c65       """ % (file
-0001c6e0: 6461 7461 5b22 6167 656e 7431 225d 2c20  data["agent1"], 
-0001c6f0: 6669 6c65 6461 7461 5b22 6167 656e 7432  filedata["agent2
-0001c700: 225d 290d 0a20 2020 2020 2020 2020 2020  "])..           
+0001c5f0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0001c600: 6f6d 6269 6e65 645f 696e 636f 6d65 5b61  ombined_income[a
+0001c610: 6765 6e74 325d 5b6d 7964 6963 745b 6669  gent2][mydict[fi
+0001c620: 6c65 6461 7461 5b22 696e 636f 6d65 3222  ledata["income2"
+0001c630: 5d5d 5d2e 6170 7065 6e64 2828 7374 7228  ]]].append((str(
+0001c640: 7129 2c20 7375 626a 6563 7429 290d 0a0d  q), subject))...
+0001c650: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001c660: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c670: 2023 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d   # =============
+0001c680: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0d  ===============.
+0001c690: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001c6a0: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+0001c6b0: 7261 6e73 6665 725f 7374 7220 3d20 2222  ransfer_str = ""
+0001c6c0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0001c6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c6e0: 6966 2063 6f6e 7665 7274 5f62 6f6f 6c28  if convert_bool(
+0001c6f0: 6669 6c65 6461 7461 5b22 6c6f 6720 7472  filedata["log tr
+0001c700: 616e 7361 6374 696f 6e22 5d29 3a0d 0a20  ansaction"]):.. 
 0001c710: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c720: 2074 6162 6c65 5f73 7472 202b 3d20 7465   table_str += te
-0001c730: 785f 7461 626c 6531 202b 2022 2622 202b  x_table1 + "&" +
-0001c740: 2074 6578 5f74 6162 6c65 3220 2b20 225c   tex_table2 + "\
-0001c750: 5c5c 5c5c 5c5c 5c22 202b 2074 7261 6e73  \\\\\\\" + trans
-0001c760: 6665 725f 7374 720d 0a0d 0a20 2020 2020  fer_str....     
-0001c770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c780: 2020 2020 2020 2074 6162 6c65 5f73 7472         table_str
-0001c790: 202b 3d20 225c 6e5c 6e5c 5c65 6e64 7b74   += "\n\n\\end{t
-0001c7a0: 6162 756c 6172 7d22 0d0a 2020 2020 2020  abular}"..      
+0001c720: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+0001c730: 7261 6e73 6665 725f 7374 7220 3d20 225c  ransfer_str = "\
+0001c740: 6e46 6c6f 773a 7e22 202b 2066 696c 6564  nFlow:~" + filed
+0001c750: 6174 615b 226b 696e 6422 5d2e 7374 7269  ata["kind"].stri
+0001c760: 7028 292e 7265 706c 6163 6528 222d 3e22  p().replace("->"
+0001c770: 2c0d 0a20 2020 2020 2020 2020 2020 2020  ,..             
+0001c780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c790: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
 0001c7b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c7c0: 2020 2020 2020 7465 7873 7472 202b 3d20        texstr += 
-0001c7d0: 2222 225c 5c62 6567 696e 7b74 6162 6c65  """\\begin{table
-0001c7e0: 7d5b 485d 5c6e 2222 220d 0a20 2020 2020  }[H]\n"""..     
-0001c7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c800: 2020 2020 2020 2074 6578 7374 7220 2b3d         texstr +=
-0001c810: 2074 6162 6c65 5f73 7472 0d0a 2020 2020   table_str..    
-0001c820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c830: 2020 2020 2020 2020 7465 7873 7472 202b          texstr +
-0001c840: 3d20 2222 225c 6361 7074 696f 6e7b 2573  = """\caption{%s
-0001c850: 7d5c 6e5c 656e 647b 7461 626c 657d 2222  }\n\end{table}""
-0001c860: 2220 2520 2866 696c 6564 6174 615b 2273  " % (filedata["s
-0001c870: 7562 6a65 6374 225d 202b 2022 2825 7329  ubject"] + "(%s)
-0001c880: 2225 6669 6c65 6461 7461 5b22 7368 6f72  "%filedata["shor
-0001c890: 746e 616d 6522 5d29 0d0a 0d0a 2020 2020  tname"])....    
-0001c8a0: 2020 2020 2020 2020 7465 7873 7472 203d          texstr =
-0001c8b0: 2074 6578 7374 722e 7265 706c 6163 6528   texstr.replace(
-0001c8c0: 225f 222c 2022 2022 290d 0a20 2020 2020  "_", " ")..     
-0001c8d0: 2020 2020 2020 2074 6578 7374 7220 3d20         texstr = 
-0001c8e0: 7465 7873 7472 2e72 6570 6c61 6365 2822  texstr.replace("
-0001c8f0: 4e6f 6e65 222c 2022 2229 0d0a 0d0a 2020  None", "")....  
-0001c900: 2020 2020 2020 2020 2020 2320 3d3d 3d3d            # ====
-0001c910: 3d3d 3d3d 3d3d 3d3d 2061 6464 2063 6f6d  ======== add com
-0001c920: 6269 6e65 6420 7368 6565 7473 203d 3d3d  bined sheets ===
-0001c930: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001c940: 3d3d 3d0d 0a20 2020 2020 2020 2020 2020  ===..           
-0001c950: 2070 7269 6e74 2863 6f6d 6269 6e65 645f   print(combined_
-0001c960: 7368 6565 7473 290d 0a0d 0a20 2020 2020  sheets)....     
-0001c970: 2020 2020 2020 2023 2070 642e 4461 7461         # pd.Data
-0001c980: 4672 616d 6528 636f 6d62 696e 6564 5f73  Frame(combined_s
-0001c990: 6865 6574 7329 2e74 6f5f 6578 6365 6c28  heets).to_excel(
-0001c9a0: 2274 6573 742e 786c 7378 2229 203c 2d20  "test.xlsx") <- 
-0001c9b0: 666f 7220 6d61 6e75 616c 2074 6573 7469  for manual testi
-0001c9c0: 6e67 0d0a 0d0a 2020 2020 2020 2020 2020  ng....          
-0001c9d0: 2020 2320 636f 6e76 6572 7420 7468 6520    # convert the 
-0001c9e0: 636f 6d62 696e 6564 2073 6865 6574 7320  combined sheets 
-0001c9f0: 746f 2074 6578 0d0a 2020 2020 2020 2020  to tex..        
-0001ca00: 2020 2020 7465 7873 7472 5f63 6f6d 6269      texstr_combi
-0001ca10: 6e65 6420 3d20 2222 0d0a 2020 2020 2020  ned = ""..      
-0001ca20: 2020 2020 2020 666f 7220 6167 656e 742c        for agent,
-0001ca30: 2064 6174 6120 696e 2063 6f6d 6269 6e65   data in combine
-0001ca40: 645f 7368 6565 7473 2e69 7465 6d73 2829  d_sheets.items()
-0001ca50: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0001ca60: 2020 2061 6765 6e74 5f74 6974 6c65 6420     agent_titled 
-0001ca70: 3d20 6167 656e 742e 7265 706c 6163 6528  = agent.replace(
-0001ca80: 225f 222c 2022 2022 292e 7469 746c 6528  "_", " ").title(
-0001ca90: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0001caa0: 2020 2020 2061 7373 6574 7320 3d20 6461       assets = da
-0001cab0: 7461 5b22 4173 7365 7473 225d 0d0a 2020  ta["Assets"]..  
-0001cac0: 2020 2020 2020 2020 2020 2020 2020 6c69                li
-0001cad0: 6162 7320 3d20 6461 7461 5b22 4c69 6162  abs = data["Liab
-0001cae0: 696c 6974 6965 7320 616e 6420 4571 7569  ilities and Equi
-0001caf0: 7479 225d 0d0a 0d0a 2020 2020 2020 2020  ty"]....        
-0001cb00: 2020 2020 2020 2020 6d79 7320 3d20 2222          mys = ""
-0001cb10: 220d 0a20 2020 2020 2020 2020 2020 205c  "..            \
-0001cb20: 5c62 6567 696e 7b74 6162 6c65 7d5b 485d  \begin{table}[H]
-0001cb30: 0d0a 2020 2020 2020 2020 2020 2020 5c5c  ..            \\
-0001cb40: 6365 6e74 6572 696e 670d 0a20 2020 2020  centering..     
-0001cb50: 2020 2020 2020 2022 2222 0d0a 2020 2020         """..    
-0001cb60: 2020 2020 2020 2020 2020 2020 6d79 7320              mys 
-0001cb70: 2b3d 2022 2222 0d0a 2020 2020 2020 2020  += """..        
-0001cb80: 2020 2020 5c5c 6265 6769 6e7b 7461 6275      \\begin{tabu
-0001cb90: 6c61 727d 7b7c 6c7c 6c7c 7d0d 0a20 2020  lar}{|l|l|}..   
-0001cba0: 2020 2020 2020 2020 205c 686c 696e 650d           \hline.
-0001cbb0: 0a20 2020 2020 2020 2020 2020 207e 267e  .            ~&~
-0001cbc0: 5c5c 5c5c 0d0a 2020 2020 2020 2020 2020  \\\\..          
-0001cbd0: 2020 5c5c 7465 7874 6266 7b41 7373 6574    \\textbf{Asset
-0001cbe0: 737d 2026 205c 5c74 6578 7462 667b 4c69  s} & \\textbf{Li
-0001cbf0: 6162 696c 6974 6965 7320 616e 6420 4571  abilities and Eq
-0001cc00: 7569 7479 7d5c 5c5c 5c0d 0a20 2020 2020  uity}\\\\..     
-0001cc10: 2020 2020 2020 207e 267e 5c5c 5c5c 0d0a         ~&~\\\\..
-0001cc20: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001cc30: 2020 2020 2020 2020 2020 2222 220d 0a0d            """...
-0001cc40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001cc50: 206d 7973 202b 3d20 2222 220d 0a20 2020   mys += """..   
-0001cc60: 2020 2020 2020 2020 205c 5c62 6567 696e           \\begin
-0001cc70: 7b74 6162 756c 6172 7d7b 6c6c 7d0d 0a20  {tabular}{ll}.. 
-0001cc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cc90: 2020 2020 2020 2022 2222 0d0a 0d0a 2020         """....  
-0001cca0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-0001ccb0: 7220 6974 656d 2c20 656e 7472 7920 696e  r item, entry in
-0001ccc0: 2061 7373 6574 732e 6974 656d 7328 293a   assets.items():
-0001ccd0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0001cce0: 2020 2020 2020 2020 6d79 7320 2b3d 2069          mys += i
-0001ccf0: 7465 6d20 2b20 2226 7e20 5c5c 5c5c 5c68  tem + "&~ \\\\\h
-0001cd00: 6c69 6e65 7e26 7e5c 5c5c 5c5c 6e22 0d0a  line~&~\\\\\n"..
-0001cd10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001cd20: 2020 2020 2020 666f 7220 7375 625f 656e        for sub_en
-0001cd30: 7472 7920 696e 2065 6e74 7279 2e73 706c  try in entry.spl
-0001cd40: 6974 2822 5c6e 2229 3a0d 0a20 2020 2020  it("\n"):..     
-0001cd50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cd60: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
-0001cd70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cd80: 2020 2020 206c 745f 7375 6265 6e74 7279       lt_subentry
-0001cd90: 203d 2073 7562 5f65 6e74 7279 0d0a 2020   = sub_entry..  
-0001cda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cdb0: 2020 2020 2020 2020 2020 6d79 7320 2b3d            mys +=
-0001cdc0: 2022 7e26 2220 2b20 6c74 5f73 7562 656e   "~&" + lt_suben
-0001cdd0: 7472 7920 2b20 225c 5c5c 5c22 202b 2022  try + "\\\\" + "
-0001cde0: 5c6e 220d 0a20 2020 2020 2020 2020 2020  \n"..           
-0001cdf0: 2020 2020 2020 2020 2020 2020 2065 7863               exc
-0001ce00: 6570 743a 0d0a 2020 2020 2020 2020 2020  ept:..          
-0001ce10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ce20: 2020 7061 7373 0d0a 0d0a 2020 2020 2020    pass....      
-0001ce30: 2020 2020 2020 2020 2020 6d79 7320 2b3d            mys +=
-0001ce40: 2022 2222 0d0a 2020 2020 2020 2020 2020   """..          
-0001ce50: 2020 5c65 6e64 7b74 6162 756c 6172 7d20    \end{tabular} 
-0001ce60: 2620 5c5c 6265 6769 6e7b 7461 6275 6c61  & \\begin{tabula
-0001ce70: 727d 7b6c 6c7d 2222 2220 2b20 225c 6e22  r}{ll}""" + "\n"
-0001ce80: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0001ce90: 2020 2020 666f 7220 6974 656d 2c20 656e      for item, en
-0001cea0: 7472 7920 696e 206c 6961 6273 2e69 7465  try in liabs.ite
-0001ceb0: 6d73 2829 3a0d 0a20 2020 2020 2020 2020  ms():..         
-0001cec0: 2020 2020 2020 2020 2020 2069 6620 6974             if it
-0001ced0: 656d 2021 3d20 2245 7175 6974 7922 3a0d  em != "Equity":.
-0001cee0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001cef0: 2020 2020 2020 2020 206d 7973 202b 3d20           mys += 
-0001cf00: 6974 656d 202b 2022 267e 205c 5c5c 5c5c  item + "&~ \\\\\
-0001cf10: 686c 696e 657e 267e 5c5c 5c5c 5c6e 220d  hline~&~\\\\\n".
-0001cf20: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0001cf30: 2020 2020 2020 2020 2020 2066 6f72 2073             for s
-0001cf40: 7562 5f65 6e74 7279 2069 6e20 656e 7472  ub_entry in entr
-0001cf50: 792e 7370 6c69 7428 225c 6e22 293a 0d0a  y.split("\n"):..
-0001cf60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cf70: 2020 2020 2020 2020 2020 2020 7472 793a              try:
-0001cf80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001cf90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cfa0: 2020 6c74 5f73 7562 656e 7472 7920 3d20    lt_subentry = 
-0001cfb0: 7375 625f 656e 7472 790d 0a20 2020 2020  sub_entry..     
-0001cfc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001cfd0: 2020 2020 2020 2020 2020 206d 7973 202b             mys +
-0001cfe0: 3d20 227e 2622 202b 206c 745f 7375 6265  = "~&" + lt_sube
-0001cff0: 6e74 7279 202b 2022 5c5c 5c5c 2220 2b20  ntry + "\\\\" + 
-0001d000: 225c 6e22 0d0a 2020 2020 2020 2020 2020  "\n"..          
-0001d010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d020: 2020 6578 6365 7074 3a0d 0a20 2020 2020    except:..     
-0001d030: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d040: 2020 2020 2020 2020 2020 2070 6173 730d             pass.
-0001d050: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0001d060: 2020 2074 7279 3a0d 0a20 2020 2020 2020     try:..       
-0001d070: 2020 2020 2020 2020 2020 2020 2069 7465               ite
-0001d080: 6d20 3d20 2245 7175 6974 7922 0d0a 2020  m = "Equity"..  
-0001d090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d0a0: 2020 656e 7472 7920 3d20 6c69 6162 735b    entry = liabs[
-0001d0b0: 2245 7175 6974 7922 5d0d 0a20 2020 2020  "Equity"]..     
-0001d0c0: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-0001d0d0: 7973 202b 3d20 6974 656d 202b 2022 267e  ys += item + "&~
-0001d0e0: 205c 5c5c 5c5c 686c 696e 657e 267e 5c5c   \\\\\hline~&~\\
-0001d0f0: 5c5c 5c6e 220d 0a0d 0a20 2020 2020 2020  \\\n"....       
-0001d100: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-0001d110: 2073 7562 5f65 6e74 7279 2069 6e20 656e   sub_entry in en
-0001d120: 7472 792e 7370 6c69 7428 225c 6e22 293a  try.split("\n"):
-0001d130: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001d140: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
-0001d150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d160: 2020 2020 2020 2020 2020 2020 6c74 5f73              lt_s
-0001d170: 7562 656e 7472 7920 3d20 7375 625f 656e  ubentry = sub_en
-0001d180: 7472 790d 0a20 2020 2020 2020 2020 2020  try..           
-0001d190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d1a0: 206d 7973 202b 3d20 227e 2622 202b 206c   mys += "~&" + l
-0001d1b0: 745f 7375 6265 6e74 7279 202b 2022 5c5c  t_subentry + "\\
-0001d1c0: 5c5c 2220 2b20 225c 6e22 0d0a 2020 2020  \\" + "\n"..    
-0001d1d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d1e0: 2020 2020 6578 6365 7074 3a0d 0a20 2020      except:..   
-0001d1f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d200: 2020 2020 2020 2020 2070 6173 730d 0a20           pass.. 
-0001d210: 2020 2020 2020 2020 2020 2020 2020 2065                 e
-0001d220: 7863 6570 743a 0d0a 2020 2020 2020 2020  xcept:..        
-0001d230: 2020 2020 2020 2020 2020 2020 7061 7373              pass
-0001d240: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0001d250: 2020 2020 6d79 7320 2b3d 2022 2222 0d0a      mys += """..
-0001d260: 2020 2020 2020 2020 2020 2020 5c5c 656e              \\en
-0001d270: 647b 7461 6275 6c61 727d 0d0a 2020 2020  d{tabular}..    
-0001d280: 2020 2020 2020 2020 5c5c 5c5c 7e26 7e0d          \\\\~&~.
-0001d290: 0a20 2020 2020 2020 2020 2020 205c 5c5c  .            \\\
-0001d2a0: 5c5c 686c 696e 6522 2222 0d0a 2020 2020  \\hline"""..    
-0001d2b0: 2020 2020 2020 2020 2020 2020 6d79 7320              mys 
-0001d2c0: 2b3d 2022 2222 0d0a 2020 2020 2020 2020  += """..        
-0001d2d0: 2020 2020 5c5c 656e 647b 7461 6275 6c61      \\end{tabula
-0001d2e0: 727d 2222 220d 0a20 2020 2020 2020 2020  r}"""..         
-0001d2f0: 2020 2020 2020 206d 7973 202b 3d20 2222         mys += ""
-0001d300: 220d 0a20 2020 2020 2020 2020 2020 205c  "..            \
-0001d310: 5c63 6170 7469 6f6e 7b42 616c 616e 6365  \caption{Balance
-0001d320: 2053 6865 6574 206f 6620 2573 7d22 2222   Sheet of %s}"""
-0001d330: 2025 2061 6765 6e74 5f74 6974 6c65 6420   % agent_titled 
-0001d340: 2b20 2222 220d 0a20 2020 2020 2020 2020  + """..         
-0001d350: 2020 205c 5c65 6e64 7b74 6162 6c65 7d0d     \\end{table}.
-0001d360: 0a20 2020 2020 2020 2020 2020 2022 2222  .            """
-0001d370: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001d380: 2020 7465 7873 7472 5f63 6f6d 6269 6e65    texstr_combine
-0001d390: 6420 2b3d 206d 7973 0d0a 0d0a 2020 2020  d += mys....    
-0001d3a0: 2020 2020 2020 2020 2020 2020 2320 3d3d              # ==
-0001d3b0: 3d3d 3d3d 3d3d 3d3d 3d20 6164 6420 696e  ========= add in
-0001d3c0: 636f 6d65 0d0a 0d0a 2020 2020 2020 2020  come....        
-0001d3d0: 2020 2020 2020 2020 6966 2061 6765 6e74          if agent
-0001d3e0: 2069 6e20 636f 6d62 696e 6564 5f69 6e63   in combined_inc
-0001d3f0: 6f6d 653a 0d0a 2020 2020 2020 2020 2020  ome:..          
-0001d400: 2020 2020 2020 2020 2020 696e 636f 6d65            income
-0001d410: 5f64 6174 6120 3d20 636f 6d62 696e 6564  _data = combined
-0001d420: 5f69 6e63 6f6d 655b 6167 656e 745d 0d0a  _income[agent]..
-0001d430: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d440: 2020 2020 696e 636f 6d65 5f73 7472 203d      income_str =
-0001d450: 2022 2222 0d0a 2020 2020 2020 2020 2020   """..          
-0001d460: 2020 5c5c 6265 6769 6e7b 7461 626c 657d    \\begin{table}
-0001d470: 5b48 5d5c 6e5c 6365 6e74 6572 696e 675c  [H]\n\centering\
-0001d480: 6e0d 0a20 2020 2020 2020 2020 2020 205c  n..            \
-0001d490: 5c62 6567 696e 7b74 6162 756c 6172 7d7b  \begin{tabular}{
-0001d4a0: 7c6c 6c7c 7d5c 6e5c 686c 696e 6522 2222  |ll|}\n\hline"""
-0001d4b0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0001d4c0: 2020 2020 2020 2020 666f 7220 6b20 696e          for k in
-0001d4d0: 2022 5265 7665 6e75 6573 222c 2022 4761   "Revenues", "Ga
-0001d4e0: 696e 7322 2c20 2245 7870 656e 7365 7322  ins", "Expenses"
-0001d4f0: 2c20 224c 6f73 7365 7322 2c20 5c0d 0a20  , "Losses", \.. 
-0001d500: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d510: 2020 2020 2020 2020 2020 2020 2249 6e74              "Int
-0001d520: 6572 6573 7420 5061 796d 656e 7473 222c  erest Payments",
-0001d530: 2022 4e6f 6e2d 4f70 6572 6174 696f 6e61   "Non-Operationa
-0001d540: 6c20 496e 636f 6d65 222c 2022 5461 7865  l Income", "Taxe
-0001d550: 7322 2c20 224e 6f6e 7461 7861 626c 6520  s", "Nontaxable 
-0001d560: 5072 6f66 6974 7322 2c20 224e 6f6e 7461  Profits", "Nonta
-0001d570: 7861 626c 6520 4c6f 7373 6573 223a 0d0a  xable Losses":..
-0001d580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d590: 2020 2020 2020 2020 7620 3d20 696e 636f          v = inco
-0001d5a0: 6d65 5f64 6174 615b 6b5d 0d0a 0d0a 2020  me_data[k]....  
-0001d5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d5c0: 2020 2020 2020 696e 636f 6d65 5f73 7472        income_str
-0001d5d0: 202b 3d20 227e 267e 5c5c 5c5c 220d 0a20   += "~&~\\\\".. 
-0001d5e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d5f0: 2020 2020 2020 2069 6e63 6f6d 655f 7374         income_st
-0001d600: 7220 2b3d 2022 5c74 2220 2b20 6b20 2b20  r += "\t" + k + 
-0001d610: 2226 7e5c 5c5c 5c5c 6e22 0d0a 0d0a 2020  "&~\\\\\n"....  
-0001d620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d630: 2020 2020 2020 666f 7220 7375 625f 7661        for sub_va
-0001d640: 6c75 6520 696e 2076 3a0d 0a20 2020 2020  lue in v:..     
-0001d650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d660: 2020 2020 2020 2069 6e63 6f6d 655f 7374         income_st
-0001d670: 7220 2b3d 2022 5c74 2220 2b20 227e 2622  r += "\t" + "~&"
-0001d680: 202b 2073 7562 5f76 616c 7565 5b30 5d20   + sub_value[0] 
-0001d690: 2b20 7375 625f 7661 6c75 655b 315d 202b  + sub_value[1] +
-0001d6a0: 2022 5c5c 5c5c 5c6e 220d 0a20 2020 2020   "\\\\\n"..     
-0001d6b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d6c0: 2020 2069 6620 6c65 6e28 7629 203d 3d20     if len(v) == 
-0001d6d0: 303a 0d0a 2020 2020 2020 2020 2020 2020  0:..            
-0001d6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d6f0: 696e 636f 6d65 5f73 7472 202b 3d20 225c  income_str += "\
-0001d700: 7422 202b 2022 7e26 2220 2b20 222e 2d22  t" + "~&" + ".-"
-0001d710: 202b 2022 5c5c 5c5c 5c6e 220d 0a0d 0a20   + "\\\\\n".... 
-0001d720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d730: 2020 2020 2020 2069 6620 6b20 213d 2022         if k != "
-0001d740: 4e6f 6e74 6178 6162 6c65 204c 6f73 7365  Nontaxable Losse
-0001d750: 7322 3a0d 0a20 2020 2020 2020 2020 2020  s":..           
-0001d760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d770: 2069 6e63 6f6d 655f 7374 7220 2b3d 2022   income_str += "
-0001d780: 7e26 7e5c 5c5c 5c5c 686c 696e 655c 6e22  ~&~\\\\\hline\n"
-0001d790: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
-0001d7a0: 2020 2020 2020 2020 696e 636f 6d65 5f73          income_s
-0001d7b0: 7472 202b 3d20 2222 225c 6e0d 0a20 2020  tr += """\n..   
-0001d7c0: 2020 2020 2020 2020 207e 267e 5c5c 5c5c           ~&~\\\\
-0001d7d0: 5c68 6c69 6e65 5c6e 5c5c 656e 647b 7461  \hline\n\\end{ta
-0001d7e0: 6275 6c61 727d 2222 220d 0a20 2020 2020  bular}"""..     
-0001d7f0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0001d800: 6e63 6f6d 655f 7374 7220 2b3d 2022 2222  ncome_str += """
-0001d810: 5c6e 0d0a 2020 2020 2020 2020 2020 2020  \n..            
-0001d820: 5c5c 6361 7074 696f 6e7b 496e 636f 6d65  \\caption{Income
-0001d830: 2053 7461 7465 6d65 6e74 206f 6620 2573   Statement of %s
-0001d840: 7d22 2222 2025 2061 6765 6e74 5f74 6974  }""" % agent_tit
-0001d850: 6c65 6420 2b20 2222 220d 0a20 2020 2020  led + """..     
-0001d860: 2020 2020 2020 205c 5c65 6e64 7b74 6162         \\end{tab
-0001d870: 6c65 7d22 2222 0d0a 0d0a 2020 2020 2020  le}"""....      
-0001d880: 2020 2020 2020 2020 2020 2020 2020 7465                te
-0001d890: 7873 7472 5f63 6f6d 6269 6e65 6420 2b3d  xstr_combined +=
-0001d8a0: 2069 6e63 6f6d 655f 7374 720d 0a0d 0a20   income_str.... 
-0001d8b0: 2020 2020 2020 2020 2020 2023 203d 3d3d             # ===
-0001d8c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001d8d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001d8e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001d8f0: 3d3d 3d3d 0d0a 2020 2020 2020 2020 2020  ====..          
-0001d900: 2020 7079 7065 7263 6c69 702e 636f 7079    pyperclip.copy
-0001d910: 2874 6578 7374 725f 636f 6d62 696e 6564  (texstr_combined
-0001d920: 290d 0a20 2020 2020 2020 2020 2020 2073  )..            s
-0001d930: 656c 662e 6e6f 7469 6679 286d 6573 7361  elf.notify(messa
-0001d940: 6765 3d22 4c61 5465 5820 636f 6465 2063  ge="LaTeX code c
-0001d950: 6f70 6965 6420 746f 2063 6c69 7062 6f61  opied to clipboa
-0001d960: 7264 2e20 4861 7665 2066 756e 2122 2c20  rd. Have fun!", 
-0001d970: 7469 746c 653d 2248 6176 6520 6675 6e22  title="Have fun"
-0001d980: 290d 0a0d 0a20 2020 2020 2020 2020 2020  )....           
-0001d990: 2069 6620 4661 6c73 653a 2023 2064 6570   if False: # dep
-0001d9a0: 7265 6369 6174 6564 0d0a 0d0a 2020 2020  reciated....    
-0001d9b0: 2020 2020 2020 2020 2020 2020 7061 7468              path
-0001d9c0: 203d 206f 732e 7061 7468 2e64 6972 6e61   = os.path.dirna
-0001d9d0: 6d65 286f 732e 7061 7468 2e61 6273 7061  me(os.path.abspa
-0001d9e0: 7468 285f 5f66 696c 655f 5f29 290d 0a20  th(__file__)).. 
-0001d9f0: 2020 2020 2020 2020 2020 2020 2020 2077                 w
-0001da00: 6974 6820 6f70 656e 286f 732e 7061 7468  ith open(os.path
-0001da10: 2e6a 6f69 6e28 7061 7468 202c 2022 6669  .join(path , "fi
-0001da20: 6c65 732f 696e 636f 6d65 5f73 7461 746d  les/income_statm
-0001da30: 656e 7473 2e74 6578 2229 2c20 2277 2229  ents.tex"), "w")
-0001da40: 2061 7320 6669 6c65 3a0d 0a20 2020 2020   as file:..     
-0001da50: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0001da60: 696c 652e 7772 6974 6528 2222 220d 0a20  ile.write(""".. 
-0001da70: 2020 205c 646f 6375 6d65 6e74 636c 6173     \documentclas
-0001da80: 737b 6172 7469 636c 657d 0d0a 2020 2020  s{article}..    
-0001da90: 5c5c 7573 6570 6163 6b61 6765 7b74 6162  \\usepackage{tab
-0001daa0: 756c 6172 787d 0d0a 2020 2020 5c5c 7573  ularx}..    \\us
-0001dab0: 6570 6163 6b61 6765 7b61 6d73 6d61 7468  epackage{amsmath
-0001dac0: 7d0d 0a20 2020 205c 5c75 7365 7061 636b  }..    \\usepack
-0001dad0: 6167 657b 666c 6f61 747d 0d0a 0d0a 2020  age{float}....  
-0001dae0: 2020 5c5c 6265 6769 6e7b 646f 6375 6d65    \\begin{docume
-0001daf0: 6e74 7d0d 0a0d 0a20 2020 2022 2222 290d  nt}....    """).
-0001db00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001db10: 2020 2020 2066 696c 652e 7772 6974 6528       file.write(
-0001db20: 7465 7873 7472 5f63 6f6d 6269 6e65 6429  texstr_combined)
-0001db30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001db40: 2020 2020 2020 6669 6c65 2e77 7269 7465        file.write
-0001db50: 2822 2222 0d0a 2020 2020 5c5c 656e 647b  ("""..    \\end{
-0001db60: 646f 6375 6d65 6e74 7d0d 0a20 2020 2022  document}..    "
-0001db70: 2222 290d 0a0d 0a20 2020 2020 2020 2020  "")....         
-0001db80: 2020 2020 2020 2069 6d70 6f72 7420 7375         import su
-0001db90: 6270 726f 6365 7373 0d0a 2020 2020 2020  bprocess..      
-0001dba0: 2020 2020 2020 2020 2020 7472 793a 0d0a            try:..
-0001dbb0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001dbc0: 2020 2020 2020 7061 7468 203d 206f 732e        path = os.
-0001dbd0: 7061 7468 2e64 6972 6e61 6d65 286f 732e  path.dirname(os.
-0001dbe0: 7061 7468 2e61 6273 7061 7468 285f 5f66  path.abspath(__f
-0001dbf0: 696c 655f 5f29 290d 0a20 2020 2020 2020  ile__))..       
-0001dc00: 2020 2020 2020 2020 2020 2020 2073 7562               sub
-0001dc10: 7072 6f63 6573 732e 7275 6e28 2270 6466  process.run("pdf
-0001dc20: 6c61 7465 7820 2573 2220 2520 286f 732e  latex %s" % (os.
-0001dc30: 7061 7468 2e6a 6f69 6e28 7061 7468 2c20  path.join(path, 
-0001dc40: 2266 696c 6573 2f69 6e63 6f6d 655f 7374  "files/income_st
-0001dc50: 6174 6d65 6e74 732e 7465 7822 2929 292e  atments.tex"))).
-0001dc60: 6368 6563 6b5f 7265 7475 726e 636f 6465  check_returncode
-0001dc70: 2829 0d0a 0d0a 2020 2020 2020 2020 2020  ()....          
-0001dc80: 2020 2020 2020 2020 2020 7368 7574 696c            shutil
-0001dc90: 2e6d 6f76 6528 7061 7468 202b 2022 696e  .move(path + "in
-0001dca0: 636f 6d65 5f73 7461 746d 656e 7473 2e74  come_statments.t
-0001dcb0: 6578 222c 2070 6174 6820 2b20 2266 696c  ex", path + "fil
-0001dcc0: 6573 5c5c 696e 636f 6d65 5f73 7461 746d  es\\income_statm
-0001dcd0: 656e 7473 2e74 6578 2229 0d0a 2020 2020  ents.tex")..    
+0001c7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c7d0: 2224 5c5c 7269 6768 7461 7272 6f77 2422  "$\\rightarrow$"
+0001c7e0: 2920 2b20 2226 7e5c 5c5c 5c22 202b 2022  ) + "&~\\\\" + "
+0001c7f0: 5c6e 220d 0a20 2020 2020 2020 2020 2020  \n"..           
+0001c800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c810: 2020 2020 2074 7261 6e73 6665 725f 7374       transfer_st
+0001c820: 7220 2b3d 2022 5375 626a 6563 743a 7e22  r += "Subject:~"
+0001c830: 202b 2066 696c 6564 6174 615b 2273 7562   + filedata["sub
+0001c840: 6a65 6374 225d 2e73 7472 6970 2829 2e74  ject"].strip().t
+0001c850: 6974 6c65 2829 202b 2022 267e 5c5c 5c5c  itle() + "&~\\\\
+0001c860: 2220 2b20 225c 6e22 0d0a 2020 2020 2020  " + "\n"..      
+0001c870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c880: 2020 2020 2020 2020 2020 2320 7472 616e            # tran
+0001c890: 7366 6572 5f73 7472 202b 3d20 2251 7561  sfer_str += "Qua
+0001c8a0: 6e74 6974 793a 7e22 202b 2066 696c 6564  ntity:~" + filed
+0001c8b0: 6174 615b 2271 7561 6e74 6974 7922 5d2e  ata["quantity"].
+0001c8c0: 7374 7269 7028 2920 2b20 2226 7e5c 5c5c  strip() + "&~\\\
+0001c8d0: 5c22 2b20 225c 6e22 0d0a 0d0a 2020 2020  \"+ "\n"....    
+0001c8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c8f0: 2020 2020 2020 2020 7461 626c 655f 7374          table_st
+0001c900: 7220 3d20 2222 225c 5c62 6567 696e 7b74  r = """\\begin{t
+0001c910: 6162 756c 6172 7d7b 6c6c 7d0d 0a0d 0a20  abular}{ll}.... 
+0001c920: 2020 2020 2020 2020 2020 2020 2020 2025                 %
+0001c930: 7320 2620 2573 205c 5c5c 5c0d 0a20 2020  s & %s \\\\..   
+0001c940: 2020 2020 2020 2020 2020 2020 207e 2026               ~ &
+0001c950: 207e 205c 5c5c 5c0d 0a20 2020 2020 2020   ~ \\\\..       
+0001c960: 2020 2020 2020 2020 2022 2222 2025 2028           """ % (
+0001c970: 6669 6c65 6461 7461 5b22 6167 656e 7431  filedata["agent1
+0001c980: 225d 2c20 6669 6c65 6461 7461 5b22 6167  "], filedata["ag
+0001c990: 656e 7432 225d 290d 0a20 2020 2020 2020  ent2"])..       
+0001c9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c9b0: 2020 2020 2074 6162 6c65 5f73 7472 202b       table_str +
+0001c9c0: 3d20 7465 785f 7461 626c 6531 202b 2022  = tex_table1 + "
+0001c9d0: 2622 202b 2074 6578 5f74 6162 6c65 3220  &" + tex_table2 
+0001c9e0: 2b20 225c 5c5c 5c5c 5c5c 5c22 202b 2074  + "\\\\\\\\" + t
+0001c9f0: 7261 6e73 6665 725f 7374 720d 0a0d 0a20  ransfer_str.... 
+0001ca00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ca10: 2020 2020 2020 2020 2020 2074 6162 6c65             table
+0001ca20: 5f73 7472 202b 3d20 225c 6e5c 6e5c 5c65  _str += "\n\n\\e
+0001ca30: 6e64 7b74 6162 756c 6172 7d22 0d0a 2020  nd{tabular}"..  
+0001ca40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ca50: 2020 2020 2020 2020 2020 7465 7873 7472            texstr
+0001ca60: 202b 3d20 2222 225c 5c62 6567 696e 7b74   += """\\begin{t
+0001ca70: 6162 6c65 7d5b 485d 5c6e 2222 220d 0a20  able}[H]\n""".. 
+0001ca80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ca90: 2020 2020 2020 2020 2020 2074 6578 7374             texst
+0001caa0: 7220 2b3d 2074 6162 6c65 5f73 7472 0d0a  r += table_str..
+0001cab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cac0: 2020 2020 2020 2020 2020 2020 7465 7873              texs
+0001cad0: 7472 202b 3d20 2222 225c 6361 7074 696f  tr += """\captio
+0001cae0: 6e7b 2573 7d5c 6e5c 656e 647b 7461 626c  n{%s}\n\end{tabl
+0001caf0: 657d 2222 2220 2520 2866 696c 6564 6174  e}""" % (filedat
+0001cb00: 615b 2273 7562 6a65 6374 225d 202b 2022  a["subject"] + "
+0001cb10: 2825 7329 2225 6669 6c65 6461 7461 5b22  (%s)"%filedata["
+0001cb20: 7368 6f72 746e 616d 6522 5d29 0d0a 0d0a  shortname"])....
+0001cb30: 2020 2020 2020 2020 2020 2020 7465 7873              texs
+0001cb40: 7472 203d 2074 6578 7374 722e 7265 706c  tr = texstr.repl
+0001cb50: 6163 6528 225f 222c 2022 2022 290d 0a20  ace("_", " ").. 
+0001cb60: 2020 2020 2020 2020 2020 2074 6578 7374             texst
+0001cb70: 7220 3d20 7465 7873 7472 2e72 6570 6c61  r = texstr.repla
+0001cb80: 6365 2822 4e6f 6e65 222c 2022 2229 0d0a  ce("None", "")..
+0001cb90: 0d0a 2020 2020 2020 2020 2020 2020 2320  ..            # 
+0001cba0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 2061 6464  ============ add
+0001cbb0: 2063 6f6d 6269 6e65 6420 7368 6565 7473   combined sheets
+0001cbc0: 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d   ===============
+0001cbd0: 3d3d 3d3d 3d3d 3d0d 0a20 2020 2020 2020  =======..       
+0001cbe0: 2020 2020 2070 7269 6e74 2863 6f6d 6269       print(combi
+0001cbf0: 6e65 645f 7368 6565 7473 290d 0a0d 0a20  ned_sheets).... 
+0001cc00: 2020 2020 2020 2020 2020 2023 2070 642e             # pd.
+0001cc10: 4461 7461 4672 616d 6528 636f 6d62 696e  DataFrame(combin
+0001cc20: 6564 5f73 6865 6574 7329 2e74 6f5f 6578  ed_sheets).to_ex
+0001cc30: 6365 6c28 2274 6573 742e 786c 7378 2229  cel("test.xlsx")
+0001cc40: 203c 2d20 666f 7220 6d61 6e75 616c 2074   <- for manual t
+0001cc50: 6573 7469 6e67 0d0a 0d0a 2020 2020 2020  esting....      
+0001cc60: 2020 2020 2020 2320 636f 6e76 6572 7420        # convert 
+0001cc70: 7468 6520 636f 6d62 696e 6564 2073 6865  the combined she
+0001cc80: 6574 7320 746f 2074 6578 0d0a 2020 2020  ets to tex..    
+0001cc90: 2020 2020 2020 2020 7465 7873 7472 5f63          texstr_c
+0001cca0: 6f6d 6269 6e65 6420 3d20 2222 0d0a 2020  ombined = ""..  
+0001ccb0: 2020 2020 2020 2020 2020 666f 7220 6167            for ag
+0001ccc0: 656e 742c 2064 6174 6120 696e 2063 6f6d  ent, data in com
+0001ccd0: 6269 6e65 645f 7368 6565 7473 2e69 7465  bined_sheets.ite
+0001cce0: 6d73 2829 3a0d 0a20 2020 2020 2020 2020  ms():..         
+0001ccf0: 2020 2020 2020 2061 6765 6e74 5f74 6974         agent_tit
+0001cd00: 6c65 6420 3d20 6167 656e 742e 7265 706c  led = agent.repl
+0001cd10: 6163 6528 225f 222c 2022 2022 292e 7469  ace("_", " ").ti
+0001cd20: 746c 6528 290d 0a0d 0a20 2020 2020 2020  tle()....       
+0001cd30: 2020 2020 2020 2020 2061 7373 6574 7320           assets 
+0001cd40: 3d20 6461 7461 5b22 4173 7365 7473 225d  = data["Assets"]
+0001cd50: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001cd60: 2020 6c69 6162 7320 3d20 6461 7461 5b22    liabs = data["
+0001cd70: 4c69 6162 696c 6974 6965 7320 616e 6420  Liabilities and 
+0001cd80: 4571 7569 7479 225d 0d0a 0d0a 2020 2020  Equity"]....    
+0001cd90: 2020 2020 2020 2020 2020 2020 6d79 7320              mys 
+0001cda0: 3d20 2222 220d 0a20 2020 2020 2020 2020  = """..         
+0001cdb0: 2020 205c 5c62 6567 696e 7b74 6162 6c65     \\begin{table
+0001cdc0: 7d5b 485d 0d0a 2020 2020 2020 2020 2020  }[H]..          
+0001cdd0: 2020 5c5c 6365 6e74 6572 696e 670d 0a20    \\centering.. 
+0001cde0: 2020 2020 2020 2020 2020 2022 2222 0d0a             """..
+0001cdf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ce00: 6d79 7320 2b3d 2022 2222 0d0a 2020 2020  mys += """..    
+0001ce10: 2020 2020 2020 2020 5c5c 6265 6769 6e7b          \\begin{
+0001ce20: 7461 6275 6c61 727d 7b7c 6c7c 6c7c 7d0d  tabular}{|l|l|}.
+0001ce30: 0a20 2020 2020 2020 2020 2020 205c 686c  .            \hl
+0001ce40: 696e 650d 0a20 2020 2020 2020 2020 2020  ine..           
+0001ce50: 207e 267e 5c5c 5c5c 0d0a 2020 2020 2020   ~&~\\\\..      
+0001ce60: 2020 2020 2020 5c5c 7465 7874 6266 7b41        \\textbf{A
+0001ce70: 7373 6574 737d 2026 205c 5c74 6578 7462  ssets} & \\textb
+0001ce80: 667b 4c69 6162 696c 6974 6965 7320 616e  f{Liabilities an
+0001ce90: 6420 4571 7569 7479 7d5c 5c5c 5c0d 0a20  d Equity}\\\\.. 
+0001cea0: 2020 2020 2020 2020 2020 207e 267e 5c5c             ~&~\\
+0001ceb0: 5c5c 0d0a 0d0a 2020 2020 2020 2020 2020  \\....          
+0001cec0: 2020 2020 2020 2020 2020 2020 2020 2222                ""
+0001ced0: 220d 0a0d 0a20 2020 2020 2020 2020 2020  "....           
+0001cee0: 2020 2020 206d 7973 202b 3d20 2222 220d       mys += """.
+0001cef0: 0a20 2020 2020 2020 2020 2020 205c 5c62  .            \\b
+0001cf00: 6567 696e 7b74 6162 756c 6172 7d7b 6c6c  egin{tabular}{ll
+0001cf10: 7d0d 0a20 2020 2020 2020 2020 2020 2020  }..             
+0001cf20: 2020 2020 2020 2020 2020 2022 2222 0d0a             """..
+0001cf30: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001cf40: 2020 666f 7220 6974 656d 2c20 656e 7472    for item, entr
+0001cf50: 7920 696e 2061 7373 6574 732e 6974 656d  y in assets.item
+0001cf60: 7328 293a 0d0a 0d0a 2020 2020 2020 2020  s():....        
+0001cf70: 2020 2020 2020 2020 2020 2020 6d79 7320              mys 
+0001cf80: 2b3d 2069 7465 6d20 2b20 2226 7e20 5c5c  += item + "&~ \\
+0001cf90: 5c5c 5c68 6c69 6e65 7e26 7e5c 5c5c 5c5c  \\\hline~&~\\\\\
+0001cfa0: 6e22 0d0a 0d0a 2020 2020 2020 2020 2020  n"....          
+0001cfb0: 2020 2020 2020 2020 2020 666f 7220 7375            for su
+0001cfc0: 625f 656e 7472 7920 696e 2065 6e74 7279  b_entry in entry
+0001cfd0: 2e73 706c 6974 2822 5c6e 2229 3a0d 0a20  .split("\n"):.. 
+0001cfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001cff0: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
+0001d000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d010: 2020 2020 2020 2020 206c 745f 7375 6265           lt_sube
+0001d020: 6e74 7279 203d 2073 7562 5f65 6e74 7279  ntry = sub_entry
+0001d030: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001d040: 2020 2020 2020 2020 2020 2020 2020 6d79                my
+0001d050: 7320 2b3d 2022 7e26 2220 2b20 6c74 5f73  s += "~&" + lt_s
+0001d060: 7562 656e 7472 7920 2b20 225c 5c5c 5c22  ubentry + "\\\\"
+0001d070: 202b 2022 5c6e 220d 0a20 2020 2020 2020   + "\n"..       
+0001d080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d090: 2065 7863 6570 743a 0d0a 2020 2020 2020   except:..      
+0001d0a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d0b0: 2020 2020 2020 7061 7373 0d0a 0d0a 2020        pass....  
+0001d0c0: 2020 2020 2020 2020 2020 2020 2020 6d79                my
+0001d0d0: 7320 2b3d 2022 2222 0d0a 2020 2020 2020  s += """..      
+0001d0e0: 2020 2020 2020 5c65 6e64 7b74 6162 756c        \end{tabul
+0001d0f0: 6172 7d20 2620 5c5c 6265 6769 6e7b 7461  ar} & \\begin{ta
+0001d100: 6275 6c61 727d 7b6c 6c7d 2222 2220 2b20  bular}{ll}""" + 
+0001d110: 225c 6e22 0d0a 0d0a 2020 2020 2020 2020  "\n"....        
+0001d120: 2020 2020 2020 2020 666f 7220 6974 656d          for item
+0001d130: 2c20 656e 7472 7920 696e 206c 6961 6273  , entry in liabs
+0001d140: 2e69 7465 6d73 2829 3a0d 0a20 2020 2020  .items():..     
+0001d150: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0001d160: 6620 6974 656d 2021 3d20 2245 7175 6974  f item != "Equit
+0001d170: 7922 3a0d 0a20 2020 2020 2020 2020 2020  y":..           
+0001d180: 2020 2020 2020 2020 2020 2020 206d 7973               mys
+0001d190: 202b 3d20 6974 656d 202b 2022 267e 205c   += item + "&~ \
+0001d1a0: 5c5c 5c5c 686c 696e 657e 267e 5c5c 5c5c  \\\\hline~&~\\\\
+0001d1b0: 5c6e 220d 0a0d 0a20 2020 2020 2020 2020  \n"....         
+0001d1c0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001d1d0: 6f72 2073 7562 5f65 6e74 7279 2069 6e20  or sub_entry in 
+0001d1e0: 656e 7472 792e 7370 6c69 7428 225c 6e22  entry.split("\n"
+0001d1f0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0001d200: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d210: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+0001d220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d230: 2020 2020 2020 6c74 5f73 7562 656e 7472        lt_subentr
+0001d240: 7920 3d20 7375 625f 656e 7472 790d 0a20  y = sub_entry.. 
+0001d250: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d260: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+0001d270: 7973 202b 3d20 227e 2622 202b 206c 745f  ys += "~&" + lt_
+0001d280: 7375 6265 6e74 7279 202b 2022 5c5c 5c5c  subentry + "\\\\
+0001d290: 2220 2b20 225c 6e22 0d0a 2020 2020 2020  " + "\n"..      
+0001d2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d2b0: 2020 2020 2020 6578 6365 7074 3a0d 0a20        except:.. 
+0001d2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d2d0: 2020 2020 2020 2020 2020 2020 2020 2070                 p
+0001d2e0: 6173 730d 0a0d 0a20 2020 2020 2020 2020  ass....         
+0001d2f0: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
+0001d300: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d310: 2069 7465 6d20 3d20 2245 7175 6974 7922   item = "Equity"
+0001d320: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001d330: 2020 2020 2020 656e 7472 7920 3d20 6c69        entry = li
+0001d340: 6162 735b 2245 7175 6974 7922 5d0d 0a20  abs["Equity"].. 
+0001d350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d360: 2020 206d 7973 202b 3d20 6974 656d 202b     mys += item +
+0001d370: 2022 267e 205c 5c5c 5c5c 686c 696e 657e   "&~ \\\\\hline~
+0001d380: 267e 5c5c 5c5c 5c6e 220d 0a0d 0a20 2020  &~\\\\\n"....   
+0001d390: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d3a0: 2066 6f72 2073 7562 5f65 6e74 7279 2069   for sub_entry i
+0001d3b0: 6e20 656e 7472 792e 7370 6c69 7428 225c  n entry.split("\
+0001d3c0: 6e22 293a 0d0a 2020 2020 2020 2020 2020  n"):..          
+0001d3d0: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+0001d3e0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
+0001d3f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d400: 6c74 5f73 7562 656e 7472 7920 3d20 7375  lt_subentry = su
+0001d410: 625f 656e 7472 790d 0a20 2020 2020 2020  b_entry..       
+0001d420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d430: 2020 2020 206d 7973 202b 3d20 227e 2622       mys += "~&"
+0001d440: 202b 206c 745f 7375 6265 6e74 7279 202b   + lt_subentry +
+0001d450: 2022 5c5c 5c5c 2220 2b20 225c 6e22 0d0a   "\\\\" + "\n"..
+0001d460: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d470: 2020 2020 2020 2020 6578 6365 7074 3a0d          except:.
+0001d480: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d490: 2020 2020 2020 2020 2020 2020 2070 6173               pas
+0001d4a0: 730d 0a20 2020 2020 2020 2020 2020 2020  s..             
+0001d4b0: 2020 2065 7863 6570 743a 0d0a 2020 2020     except:..    
+0001d4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d4d0: 7061 7373 0d0a 0d0a 2020 2020 2020 2020  pass....        
+0001d4e0: 2020 2020 2020 2020 6d79 7320 2b3d 2022          mys += "
+0001d4f0: 2222 0d0a 2020 2020 2020 2020 2020 2020  ""..            
+0001d500: 5c5c 656e 647b 7461 6275 6c61 727d 0d0a  \\end{tabular}..
+0001d510: 2020 2020 2020 2020 2020 2020 5c5c 5c5c              \\\\
+0001d520: 7e26 7e0d 0a20 2020 2020 2020 2020 2020  ~&~..           
+0001d530: 205c 5c5c 5c5c 686c 696e 6522 2222 0d0a   \\\\\hline"""..
+0001d540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d550: 6d79 7320 2b3d 2022 2222 0d0a 2020 2020  mys += """..    
+0001d560: 2020 2020 2020 2020 5c5c 656e 647b 7461          \\end{ta
+0001d570: 6275 6c61 727d 2222 220d 0a20 2020 2020  bular}"""..     
+0001d580: 2020 2020 2020 2020 2020 206d 7973 202b             mys +
+0001d590: 3d20 2222 220d 0a20 2020 2020 2020 2020  = """..         
+0001d5a0: 2020 205c 5c63 6170 7469 6f6e 7b42 616c     \\caption{Bal
+0001d5b0: 616e 6365 2053 6865 6574 206f 6620 2573  ance Sheet of %s
+0001d5c0: 7d22 2222 2025 2061 6765 6e74 5f74 6974  }""" % agent_tit
+0001d5d0: 6c65 6420 2b20 2222 220d 0a20 2020 2020  led + """..     
+0001d5e0: 2020 2020 2020 205c 5c65 6e64 7b74 6162         \\end{tab
+0001d5f0: 6c65 7d0d 0a20 2020 2020 2020 2020 2020  le}..           
+0001d600: 2022 2222 0d0a 2020 2020 2020 2020 2020   """..          
+0001d610: 2020 2020 2020 7465 7873 7472 5f63 6f6d        texstr_com
+0001d620: 6269 6e65 6420 2b3d 206d 7973 0d0a 0d0a  bined += mys....
+0001d630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d640: 2320 3d3d 3d3d 3d3d 3d3d 3d3d 3d20 6164  # =========== ad
+0001d650: 6420 696e 636f 6d65 0d0a 0d0a 2020 2020  d income....    
+0001d660: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+0001d670: 6765 6e74 2069 6e20 636f 6d62 696e 6564  gent in combined
+0001d680: 5f69 6e63 6f6d 653a 0d0a 2020 2020 2020  _income:..      
+0001d690: 2020 2020 2020 2020 2020 2020 2020 696e                in
+0001d6a0: 636f 6d65 5f64 6174 6120 3d20 636f 6d62  come_data = comb
+0001d6b0: 696e 6564 5f69 6e63 6f6d 655b 6167 656e  ined_income[agen
+0001d6c0: 745d 0d0a 2020 2020 2020 2020 2020 2020  t]..            
+0001d6d0: 2020 2020 2020 2020 696e 636f 6d65 5f73          income_s
+0001d6e0: 7472 203d 2022 2222 0d0a 2020 2020 2020  tr = """..      
+0001d6f0: 2020 2020 2020 5c5c 6265 6769 6e7b 7461        \\begin{ta
+0001d700: 626c 657d 5b48 5d5c 6e5c 6365 6e74 6572  ble}[H]\n\center
+0001d710: 696e 675c 6e0d 0a20 2020 2020 2020 2020  ing\n..         
+0001d720: 2020 205c 5c62 6567 696e 7b74 6162 756c     \\begin{tabul
+0001d730: 6172 7d7b 7c6c 6c7c 7d5c 6e5c 686c 696e  ar}{|ll|}\n\hlin
+0001d740: 6522 2222 0d0a 0d0a 2020 2020 2020 2020  e"""....        
+0001d750: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+0001d760: 6b20 696e 2022 5265 7665 6e75 6573 222c  k in "Revenues",
+0001d770: 2022 4761 696e 7322 2c20 2245 7870 656e   "Gains", "Expen
+0001d780: 7365 7322 2c20 224c 6f73 7365 7322 2c20  ses", "Losses", 
+0001d790: 5c0d 0a20 2020 2020 2020 2020 2020 2020  \..             
+0001d7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d7b0: 2249 6e74 6572 6573 7420 5061 796d 656e  "Interest Paymen
+0001d7c0: 7473 222c 2022 4e6f 6e2d 4f70 6572 6174  ts", "Non-Operat
+0001d7d0: 696f 6e61 6c20 496e 636f 6d65 222c 2022  ional Income", "
+0001d7e0: 5461 7865 7322 2c20 224e 6f6e 7461 7861  Taxes", "Nontaxa
+0001d7f0: 626c 6520 5072 6f66 6974 7322 2c20 224e  ble Profits", "N
+0001d800: 6f6e 7461 7861 626c 6520 4c6f 7373 6573  ontaxable Losses
+0001d810: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+0001d820: 2020 2020 2020 2020 2020 2020 7620 3d20              v = 
+0001d830: 696e 636f 6d65 5f64 6174 615b 6b5d 0d0a  income_data[k]..
+0001d840: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001d850: 2020 2020 2020 2020 2020 696e 636f 6d65            income
+0001d860: 5f73 7472 202b 3d20 227e 267e 5c5c 5c5c  _str += "~&~\\\\
+0001d870: 220d 0a20 2020 2020 2020 2020 2020 2020  "..             
+0001d880: 2020 2020 2020 2020 2020 2069 6e63 6f6d             incom
+0001d890: 655f 7374 7220 2b3d 2022 5c74 2220 2b20  e_str += "\t" + 
+0001d8a0: 6b20 2b20 2226 7e5c 5c5c 5c5c 6e22 0d0a  k + "&~\\\\\n"..
+0001d8b0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001d8c0: 2020 2020 2020 2020 2020 666f 7220 7375            for su
+0001d8d0: 625f 7661 6c75 6520 696e 2076 3a0d 0a20  b_value in v:.. 
+0001d8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d8f0: 2020 2020 2020 2020 2020 2069 6e63 6f6d             incom
+0001d900: 655f 7374 7220 2b3d 2022 5c74 2220 2b20  e_str += "\t" + 
+0001d910: 227e 2622 202b 2073 7562 5f76 616c 7565  "~&" + sub_value
+0001d920: 5b30 5d20 2b20 7375 625f 7661 6c75 655b  [0] + sub_value[
+0001d930: 315d 202b 2022 5c5c 5c5c 5c6e 220d 0a20  1] + "\\\\\n".. 
+0001d940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d950: 2020 2020 2020 2069 6620 6c65 6e28 7629         if len(v)
+0001d960: 203d 3d20 303a 0d0a 2020 2020 2020 2020   == 0:..        
+0001d970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d980: 2020 2020 696e 636f 6d65 5f73 7472 202b      income_str +
+0001d990: 3d20 225c 7422 202b 2022 7e26 2220 2b20  = "\t" + "~&" + 
+0001d9a0: 222e 2d22 202b 2022 5c5c 5c5c 5c6e 220d  ".-" + "\\\\\n".
+0001d9b0: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001d9c0: 2020 2020 2020 2020 2020 2069 6620 6b20             if k 
+0001d9d0: 213d 2022 4e6f 6e74 6178 6162 6c65 204c  != "Nontaxable L
+0001d9e0: 6f73 7365 7322 3a0d 0a20 2020 2020 2020  osses":..       
+0001d9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001da00: 2020 2020 2069 6e63 6f6d 655f 7374 7220       income_str 
+0001da10: 2b3d 2022 7e26 7e5c 5c5c 5c5c 686c 696e  += "~&~\\\\\hlin
+0001da20: 655c 6e22 0d0a 0d0a 2020 2020 2020 2020  e\n"....        
+0001da30: 2020 2020 2020 2020 2020 2020 696e 636f              inco
+0001da40: 6d65 5f73 7472 202b 3d20 2222 225c 6e0d  me_str += """\n.
+0001da50: 0a20 2020 2020 2020 2020 2020 207e 267e  .            ~&~
+0001da60: 5c5c 5c5c 5c68 6c69 6e65 5c6e 5c5c 656e  \\\\\hline\n\\en
+0001da70: 647b 7461 6275 6c61 727d 2222 220d 0a20  d{tabular}""".. 
+0001da80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001da90: 2020 2069 6e63 6f6d 655f 7374 7220 2b3d     income_str +=
+0001daa0: 2022 2222 5c6e 0d0a 2020 2020 2020 2020   """\n..        
+0001dab0: 2020 2020 5c5c 6361 7074 696f 6e7b 496e      \\caption{In
+0001dac0: 636f 6d65 2053 7461 7465 6d65 6e74 206f  come Statement o
+0001dad0: 6620 2573 7d22 2222 2025 2061 6765 6e74  f %s}""" % agent
+0001dae0: 5f74 6974 6c65 6420 2b20 2222 220d 0a20  _titled + """.. 
+0001daf0: 2020 2020 2020 2020 2020 205c 5c65 6e64             \\end
+0001db00: 7b74 6162 6c65 7d22 2222 0d0a 0d0a 2020  {table}"""....  
+0001db10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001db20: 2020 7465 7873 7472 5f63 6f6d 6269 6e65    texstr_combine
+0001db30: 6420 2b3d 2069 6e63 6f6d 655f 7374 720d  d += income_str.
+0001db40: 0a0d 0a20 2020 2020 2020 2020 2020 2023  ...            #
+0001db50: 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d   ===============
+0001db60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001db70: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001db80: 3d3d 3d3d 3d3d 3d3d 0d0a 2020 2020 2020  ========..      
+0001db90: 2020 2020 2020 7079 7065 7263 6c69 702e        pyperclip.
+0001dba0: 636f 7079 2874 6578 7374 725f 636f 6d62  copy(texstr_comb
+0001dbb0: 696e 6564 290d 0a20 2020 2020 2020 2020  ined)..         
+0001dbc0: 2020 2073 656c 662e 6e6f 7469 6679 286d     self.notify(m
+0001dbd0: 6573 7361 6765 3d22 4c61 5465 5820 636f  essage="LaTeX co
+0001dbe0: 6465 2063 6f70 6965 6420 746f 2063 6c69  de copied to cli
+0001dbf0: 7062 6f61 7264 2e20 4861 7665 2066 756e  pboard. Have fun
+0001dc00: 2122 2c20 7469 746c 653d 2248 6176 6520  !", title="Have 
+0001dc10: 6675 6e22 290d 0a0d 0a20 2020 2020 2020  fun")....       
+0001dc20: 2020 2020 2069 6620 4661 6c73 653a 2023       if False: #
+0001dc30: 2064 6570 7265 6369 6174 6564 0d0a 0d0a   depreciated....
+0001dc40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dc50: 7061 7468 203d 206f 732e 7061 7468 2e64  path = os.path.d
+0001dc60: 6972 6e61 6d65 286f 732e 7061 7468 2e61  irname(os.path.a
+0001dc70: 6273 7061 7468 285f 5f66 696c 655f 5f29  bspath(__file__)
+0001dc80: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
+0001dc90: 2020 2077 6974 6820 6f70 656e 286f 732e     with open(os.
+0001dca0: 7061 7468 2e6a 6f69 6e28 7061 7468 202c  path.join(path ,
+0001dcb0: 2022 6669 6c65 732f 696e 636f 6d65 5f73   "files/income_s
+0001dcc0: 7461 746d 656e 7473 2e74 6578 2229 2c20  tatments.tex"), 
+0001dcd0: 2277 2229 2061 7320 6669 6c65 3a0d 0a20  "w") as file:.. 
 0001dce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dcf0: 7368 7574 696c 2e6d 6f76 6528 7061 7468  shutil.move(path
-0001dd00: 202b 2022 696e 636f 6d65 5f73 7461 746d   + "income_statm
-0001dd10: 656e 7473 2e6c 6f67 222c 2070 6174 6820  ents.log", path 
-0001dd20: 2b20 2266 696c 6573 5c5c 696e 636f 6d65  + "files\\income
-0001dd30: 5f73 7461 746d 656e 7473 2e6c 6f67 2229  _statments.log")
-0001dd40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001dd50: 2020 2020 2020 7368 7574 696c 2e6d 6f76        shutil.mov
-0001dd60: 6528 7061 7468 202b 2022 696e 636f 6d65  e(path + "income
-0001dd70: 5f73 7461 746d 656e 7473 2e61 7578 222c  _statments.aux",
-0001dd80: 2070 6174 6820 2b20 2266 696c 6573 5c5c   path + "files\\
-0001dd90: 5c6d 696e 636f 6d65 5f73 7461 746d 656e  \mincome_statmen
-0001dda0: 7473 2e61 7578 2229 0d0a 2020 2020 2020  ts.aux")..      
-0001ddb0: 2020 2020 2020 2020 2020 2020 2020 7368                sh
-0001ddc0: 7574 696c 2e6d 6f76 6528 7061 7468 202b  util.move(path +
-0001ddd0: 2022 696e 636f 6d65 5f73 7461 746d 656e   "income_statmen
-0001dde0: 7473 2e70 6466 222c 2070 6174 6820 2b20  ts.pdf", path + 
-0001ddf0: 2266 696c 6573 5c5c 696e 636f 6d65 5f73  "files\\income_s
-0001de00: 7461 746d 656e 7473 2e70 6466 2229 0d0a  tatments.pdf")..
-0001de10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001de20: 2020 2020 7365 6c66 2e6e 6f74 6966 7928      self.notify(
-0001de30: 6d65 7373 6167 653d 2254 6558 2046 696c  message="TeX Fil
-0001de40: 6520 6372 6561 7465 6420 696e 2025 7322  e created in %s"
-0001de50: 2025 2070 6174 6820 2b20 225c 5c66 696c   % path + "\\fil
-0001de60: 6573 2220 2c74 6974 6c65 3d22 5375 6363  es" ,title="Succ
-0001de70: 6573 7322 290d 0a0d 0a20 2020 2020 2020  ess")....       
-0001de80: 2020 2020 2020 2020 2065 7863 6570 7420           except 
-0001de90: 4578 6365 7074 696f 6e20 6173 2065 3a0d  Exception as e:.
-0001dea0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001deb0: 2020 2020 2073 656c 662e 6e6f 7469 6679       self.notify
-0001dec0: 286d 6573 7361 6765 3d73 7472 2865 2e5f  (message=str(e._
-0001ded0: 5f63 6f6e 7465 7874 5f5f 2920 2b20 225c  _context__) + "\
-0001dee0: 6e22 202b 2073 7472 2865 292c 2074 6974  n" + str(e), tit
-0001def0: 6c65 3d65 2e5f 5f63 6c61 7373 5f5f 2e5f  le=e.__class__._
-0001df00: 5f6e 616d 655f 5f29 0d0a 0d0a 0d0a 2020  _name__)......  
-0001df10: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
-0001df20: 6570 7469 6f6e 2061 7320 653a 0d0a 2020  eption as e:..  
-0001df30: 2020 2020 2020 2020 2020 7365 6c66 2e6e            self.n
-0001df40: 6f74 6966 7928 6d65 7373 6167 653d 7374  otify(message=st
-0001df50: 7228 652e 5f5f 636f 6e74 6578 745f 5f29  r(e.__context__)
-0001df60: 202b 2022 5c6e 2220 2b20 7374 7228 6529   + "\n" + str(e)
-0001df70: 2c20 7469 746c 653d 652e 5f5f 636c 6173  , title=e.__clas
-0001df80: 735f 5f2e 5f5f 6e61 6d65 5f5f 290d 0a0d  s__.__name__)...
-0001df90: 0a20 2020 2064 6566 2061 6464 5f68 656c  .    def add_hel
-0001dfa0: 7065 7228 7365 6c66 293a 0d0a 2020 2020  per(self):..    
-0001dfb0: 2020 2020 6e65 775f 6e61 6d65 203d 2073      new_name = s
-0001dfc0: 656c 662e 4865 6c70 6572 4e61 6d65 4564  elf.HelperNameEd
-0001dfd0: 6974 2e74 6578 7428 290d 0a20 2020 2020  it.text()..     
-0001dfe0: 2020 2023 2054 4f44 4f20 6164 6420 7365     # TODO add se
-0001dff0: 6375 7269 7479 206d 6563 6861 6e69 736d  curity mechanism
-0001e000: 2074 6f20 6176 6f69 6420 6f76 6572 7772   to avoid overwr
-0001e010: 6974 696e 6720 616e 2061 6765 6e74 0d0a  iting an agent..
-0001e020: 2020 2020 2020 2020 6966 206e 6577 5f6e          if new_n
-0001e030: 616d 6520 3d3d 2022 223a 0d0a 2020 2020  ame == "":..    
-0001e040: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
-0001e050: 6966 7928 2250 6c65 6173 6520 656e 7465  ify("Please ente
-0001e060: 7220 6120 7661 6c69 6420 6e61 6d65 222c  r a valid name",
-0001e070: 2074 6974 6c65 3d22 4942 4d20 4572 726f   title="IBM Erro
-0001e080: 7222 290d 0a20 2020 2020 2020 2065 6c69  r")..        eli
-0001e090: 6620 6e6f 7420 6e65 775f 6e61 6d65 5b30  f not new_name[0
-0001e0a0: 5d2e 6973 7570 7065 7228 293a 0d0a 2020  ].isupper():..  
-0001e0b0: 2020 2020 2020 2020 2020 7365 6c66 2e6e            self.n
-0001e0c0: 6f74 6966 7928 2250 6c65 6173 6520 656e  otify("Please en
-0001e0d0: 7465 7220 6120 7661 6c69 6420 6e61 6d65  ter a valid name
-0001e0e0: 2077 6974 685c 6e75 7070 6572 6361 7365   with\nuppercase
-0001e0f0: 2066 6972 7374 206c 6574 7465 7220 6f72   first letter or
-0001e100: 2063 616d 656c 6361 7365 2c20 652e 672e   camelcase, e.g.
-0001e110: 2027 4d79 4167 656e 7427 222c 2074 6974   'MyAgent'", tit
-0001e120: 6c65 3d22 4942 4d20 4572 726f 7222 290d  le="IBM Error").
-0001e130: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
-0001e140: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001e150: 2e64 7261 7763 616e 7661 732e 6164 645f  .drawcanvas.add_
-0001e160: 6167 656e 7428 6e65 775f 6e61 6d65 290d  agent(new_name).
-0001e170: 0a0d 0a20 2020 2064 6566 2072 656d 6f76  ...    def remov
-0001e180: 655f 6865 6c70 6572 2873 656c 6629 3a0d  e_helper(self):.
-0001e190: 0a20 2020 2020 2020 2073 656c 662e 6472  .        self.dr
-0001e1a0: 6177 6361 6e76 6173 2e72 656d 6f76 655f  awcanvas.remove_
-0001e1b0: 6167 656e 7428 290d 0a0d 0a20 2020 2064  agent()....    d
-0001e1c0: 6566 2061 6464 5f6e 6577 2873 656c 6629  ef add_new(self)
-0001e1d0: 3a0d 0a0d 0a20 2020 2020 2020 2023 2054  :....        # T
-0001e1e0: 4f44 4f20 6173 7365 7274 2074 6861 7420  ODO assert that 
-0001e1f0: 7175 616e 7469 7479 2069 7320 6e6f 7420  quantity is not 
-0001e200: 7965 7420 696e 2061 6e79 206f 7468 6572  yet in any other
-0001e210: 2074 7261 6e73 6163 7469 6f6e 0d0a 2020   transaction..  
-0001e220: 2020 2020 2020 7365 6c66 2e6d 6164 655f        self.made_
-0001e230: 6368 616e 6765 7320 3d20 4661 6c73 650d  changes = False.
-0001e240: 0a0d 0a0d 0a20 2020 2020 2020 206e 6577  .....        new
-0001e250: 5f65 6e74 7279 203d 207b 7d0d 0a0d 0a20  _entry = {}.... 
-0001e260: 2020 2020 2020 206e 6577 5f65 6e74 7279         new_entry
-0001e270: 5b22 6131 225d 203d 2073 656c 662e 4173  ["a1"] = self.As
-0001e280: 7365 744c 6973 744c 6566 742e 746f 506c  setListLeft.toPl
-0001e290: 6169 6e54 6578 7428 290d 0a20 2020 2020  ainText()..     
-0001e2a0: 2020 206e 6577 5f65 6e74 7279 5b22 6132     new_entry["a2
-0001e2b0: 225d 203d 2073 656c 662e 4173 7365 744c  "] = self.AssetL
-0001e2c0: 6973 7452 6967 6874 2e74 6f50 6c61 696e  istRight.toPlain
-0001e2d0: 5465 7874 2829 0d0a 2020 2020 2020 2020  Text()..        
-0001e2e0: 6e65 775f 656e 7472 795b 226c 3122 5d20  new_entry["l1"] 
-0001e2f0: 3d20 7365 6c66 2e4c 6961 6269 6c69 7479  = self.Liability
-0001e300: 4c69 7374 4c65 6674 2e74 6f50 6c61 696e  ListLeft.toPlain
-0001e310: 5465 7874 2829 0d0a 2020 2020 2020 2020  Text()..        
-0001e320: 6e65 775f 656e 7472 795b 226c 3222 5d20  new_entry["l2"] 
-0001e330: 3d20 7365 6c66 2e4c 6961 6269 6c69 7479  = self.Liability
-0001e340: 4c69 7374 5269 6768 742e 746f 506c 6169  ListRight.toPlai
-0001e350: 6e54 6578 7428 290d 0a20 2020 2020 2020  nText()..       
-0001e360: 206e 6577 5f65 6e74 7279 5b22 6531 225d   new_entry["e1"]
-0001e370: 203d 2073 656c 662e 4571 7569 7479 4c69   = self.EquityLi
-0001e380: 7374 4c65 6674 2e74 6f50 6c61 696e 5465  stLeft.toPlainTe
-0001e390: 7874 2829 0d0a 2020 2020 2020 2020 6e65  xt()..        ne
-0001e3a0: 775f 656e 7472 795b 2265 3222 5d20 3d20  w_entry["e2"] = 
-0001e3b0: 7365 6c66 2e45 7175 6974 794c 6973 7452  self.EquityListR
-0001e3c0: 6967 6874 2e74 6f50 6c61 696e 5465 7874  ight.toPlainText
-0001e3d0: 2829 0d0a 0d0a 2020 2020 2020 2020 2320  ()....        # 
-0001e3e0: 6e65 775f 656e 7472 795b 2261 3122 5d20  new_entry["a1"] 
-0001e3f0: 3d20 7365 6c66 2e41 7373 6574 4c69 7374  = self.AssetList
-0001e400: 4c65 6674 2e74 6f50 6c61 696e 5465 7874  Left.toPlainText
-0001e410: 2829 0d0a 2020 2020 2020 2020 2320 6e65  ()..        # ne
-0001e420: 775f 656e 7472 795b 226c 3122 5d20 3d20  w_entry["l1"] = 
-0001e430: 7365 6c66 2e4c 6961 6269 6c69 7479 4c69  self.LiabilityLi
-0001e440: 7374 4c65 6674 2e74 6f50 6c61 696e 5465  stLeft.toPlainTe
-0001e450: 7874 2829 0d0a 2020 2020 2020 2020 2320  xt()..        # 
-0001e460: 6e65 775f 656e 7472 795b 2261 3222 5d20  new_entry["a2"] 
-0001e470: 3d20 7365 6c66 2e4c 6961 6269 6c69 7479  = self.Liability
-0001e480: 4c69 7374 5269 6768 742e 746f 506c 6169  ListRight.toPlai
-0001e490: 6e54 6578 7428 290d 0a20 2020 2020 2020  nText()..       
-0001e4a0: 2023 206e 6577 5f65 6e74 7279 5b22 6c32   # new_entry["l2
-0001e4b0: 225d 203d 2073 656c 662e 4173 7365 744c  "] = self.AssetL
-0001e4c0: 6973 7452 6967 6874 2e74 6f50 6c61 696e  istRight.toPlain
-0001e4d0: 5465 7874 2829 0d0a 2020 2020 2020 2020  Text()..        
-0001e4e0: 2320 6e65 775f 656e 7472 795b 2265 3122  # new_entry["e1"
-0001e4f0: 5d20 3d20 7365 6c66 2e45 7175 6974 794c  ] = self.EquityL
-0001e500: 6973 744c 6566 742e 746f 506c 6169 6e54  istLeft.toPlainT
-0001e510: 6578 7428 290d 0a20 2020 2020 2020 2023  ext()..        #
-0001e520: 206e 6577 5f65 6e74 7279 5b22 6532 225d   new_entry["e2"]
-0001e530: 203d 2073 656c 662e 4571 7569 7479 4c69   = self.EquityLi
-0001e540: 7374 5269 6768 742e 746f 506c 6169 6e54  stRight.toPlainT
-0001e550: 6578 7428 290d 0a0d 0a20 2020 2020 2020  ext()....       
-0001e560: 206e 6577 5f65 6e74 7279 5b22 6167 656e   new_entry["agen
-0001e570: 7431 225d 203d 2063 616d 656c 2873 656c  t1"] = camel(sel
-0001e580: 662e 6167 656e 7431 4564 6974 2e74 6578  f.agent1Edit.tex
-0001e590: 7428 2929 2023 2e63 6170 6974 616c 697a  t()) #.capitaliz
-0001e5a0: 6528 290d 0a20 2020 2020 2020 206e 6577  e()..        new
-0001e5b0: 5f65 6e74 7279 5b22 6167 656e 7432 225d  _entry["agent2"]
-0001e5c0: 203d 2063 616d 656c 2873 656c 662e 6167   = camel(self.ag
-0001e5d0: 656e 7432 4564 6974 2e74 6578 7428 2929  ent2Edit.text())
-0001e5e0: 2023 2e63 6170 6974 616c 697a 6528 290d   #.capitalize().
-0001e5f0: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
-0001e600: 6167 656e 7431 4564 6974 2e73 6574 5465  agent1Edit.setTe
-0001e610: 7874 2863 616d 656c 2873 656c 662e 6167  xt(camel(self.ag
-0001e620: 656e 7431 4564 6974 2e74 6578 7428 2929  ent1Edit.text())
-0001e630: 2920 2320 2e63 6170 6974 616c 697a 6528  ) # .capitalize(
-0001e640: 2929 0d0a 2020 2020 2020 2020 7365 6c66  ))..        self
-0001e650: 2e61 6765 6e74 3245 6469 742e 7365 7454  .agent2Edit.setT
-0001e660: 6578 7428 6361 6d65 6c28 7365 6c66 2e61  ext(camel(self.a
-0001e670: 6765 6e74 3245 6469 742e 7465 7874 2829  gent2Edit.text()
-0001e680: 2929 2023 2e63 6170 6974 616c 697a 6528  )) #.capitalize(
-0001e690: 2929 0d0a 0d0a 2020 2020 2020 2020 6966  ))....        if
-0001e6a0: 206e 6f74 2073 656c 662e 6472 6177 6361   not self.drawca
-0001e6b0: 6e76 6173 2e63 6865 636b 5f65 7869 7374  nvas.check_exist
-0001e6c0: 286e 6577 5f65 6e74 7279 5b22 6167 656e  (new_entry["agen
-0001e6d0: 7431 225d 293a 0d0a 2020 2020 2020 2020  t1"]):..        
-0001e6e0: 2020 2020 6966 206e 6577 5f65 6e74 7279      if new_entry
-0001e6f0: 5b22 6167 656e 7431 225d 2021 3d20 2222  ["agent1"] != ""
-0001e700: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0001e710: 2020 2079 6573 203d 2020 7365 6c66 2e61     yes =  self.a
-0001e720: 736b 5f71 7565 7374 696f 6e28 2727 2c22  sk_question('',"
-0001e730: 5468 6520 6167 656e 7420 2573 2064 6f65  The agent %s doe
-0001e740: 7320 6e6f 7420 6578 6973 742e 5c6e 446f  s not exist.\nDo
-0001e750: 2079 6f75 2077 6973 6820 746f 2063 6f6e   you wish to con
-0001e760: 7469 6e75 6520 616e 6420 6175 746f 6d61  tinue and automa
-0001e770: 7469 6361 6c6c 7920 6372 6561 7465 2061  tically create a
-0001e780: 206e 6577 2061 6765 6e74 3f22 256e 6577   new agent?"%new
-0001e790: 5f65 6e74 7279 5b22 6167 656e 7431 225d  _entry["agent1"]
-0001e7a0: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-0001e7b0: 2020 2069 6620 6e6f 7420 7965 733a 0d0a     if not yes:..
-0001e7c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001e7d0: 2020 2020 7265 7475 726e 0d0a 0d0a 2020      return....  
-0001e7e0: 2020 2020 2020 6966 206e 6f74 2073 656c        if not sel
-0001e7f0: 662e 6472 6177 6361 6e76 6173 2e63 6865  f.drawcanvas.che
-0001e800: 636b 5f65 7869 7374 286e 6577 5f65 6e74  ck_exist(new_ent
-0001e810: 7279 5b22 6167 656e 7432 225d 293a 0d0a  ry["agent2"]):..
-0001e820: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-0001e830: 6577 5f65 6e74 7279 5b22 6167 656e 7432  ew_entry["agent2
-0001e840: 225d 2021 3d20 2222 3a0d 0a20 2020 2020  "] != "":..     
-0001e850: 2020 2020 2020 2020 2020 2079 6573 203d             yes =
-0001e860: 2020 7365 6c66 2e61 736b 5f71 7565 7374    self.ask_quest
-0001e870: 696f 6e28 2727 2c20 2254 6865 2061 6765  ion('', "The age
-0001e880: 6e74 2025 7320 646f 6573 206e 6f74 2065  nt %s does not e
-0001e890: 7869 7374 2e5c 6e44 6f20 796f 7520 7769  xist.\nDo you wi
-0001e8a0: 7368 2074 6f20 636f 6e74 696e 7565 2061  sh to continue a
-0001e8b0: 6e64 2061 7574 6f6d 6174 6963 616c 6c79  nd automatically
-0001e8c0: 2063 7265 6174 6520 6120 6e65 7720 6167   create a new ag
-0001e8d0: 656e 743f 2225 6e65 775f 656e 7472 795b  ent?"%new_entry[
-0001e8e0: 2261 6765 6e74 3222 5d29 0d0a 2020 2020  "agent2"])..    
-0001e8f0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-0001e900: 6f74 2079 6573 3a0d 0a20 2020 2020 2020  ot yes:..       
-0001e910: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0001e920: 7572 6e0d 0a0d 0a0d 0a20 2020 2020 2020  urn......       
-0001e930: 2062 6f78 3120 3d20 7365 6c66 2e64 7261   box1 = self.dra
-0001e940: 7763 616e 7661 732e 6164 645f 6167 656e  wcanvas.add_agen
-0001e950: 7428 6e65 775f 656e 7472 795b 2261 6765  t(new_entry["age
-0001e960: 6e74 3122 5d29 0d0a 2020 2020 2020 2020  nt1"])..        
-0001e970: 626f 7832 203d 2073 656c 662e 6472 6177  box2 = self.draw
-0001e980: 6361 6e76 6173 2e61 6464 5f61 6765 6e74  canvas.add_agent
-0001e990: 286e 6577 5f65 6e74 7279 5b22 6167 656e  (new_entry["agen
-0001e9a0: 7432 225d 290d 0a0d 0a20 2020 2020 2020  t2"])....       
-0001e9b0: 206d 795f 6974 656d 7320 3d20 5b5d 0d0a   my_items = []..
-0001e9c0: 2020 2020 2020 2020 6461 7461 203d 206e          data = n
-0001e9d0: 6577 5f65 6e74 7279 0d0a 2020 2020 2020  ew_entry..      
-0001e9e0: 2020 616c 6c65 6e74 7269 6573 203d 2022    allentries = "
-0001e9f0: 5c6e 222e 6a6f 696e 285b 6461 7461 5b22  \n".join([data["
-0001ea00: 6c31 225d 2c20 6461 7461 5b22 6131 225d  l1"], data["a1"]
-0001ea10: 2c20 6461 7461 5b22 6531 225d 2c20 6461  , data["e1"], da
-0001ea20: 7461 5b22 6c32 225d 2c20 6461 7461 5b22  ta["l2"], data["
-0001ea30: 6132 225d 2c20 6461 7461 5b22 6532 225d  a2"], data["e2"]
-0001ea40: 5d29 0d0a 2020 2020 2020 2020 666f 7220  ])..        for 
-0001ea50: 7375 625f 6974 656d 2069 6e20 616c 6c65  sub_item in alle
-0001ea60: 6e74 7269 6573 2e73 706c 6974 2822 5c6e  ntries.split("\n
-0001ea70: 2229 3a0d 0a20 2020 2020 2020 2020 2020  "):..           
-0001ea80: 2066 6f72 2073 7562 5f65 6e74 7279 2069   for sub_entry i
-0001ea90: 6e20 7375 625f 6974 656d 2e73 706c 6974  n sub_item.split
-0001eaa0: 2822 5c6e 2229 3a0d 0a20 2020 2020 2020  ("\n"):..       
-0001eab0: 2020 2020 2020 2020 2065 6e74 7279 203d           entry =
-0001eac0: 2073 7562 5f65 6e74 7279 2e72 6570 6c61   sub_entry.repla
-0001ead0: 6365 2822 2d22 2c22 2229 2e72 6570 6c61  ce("-","").repla
-0001eae0: 6365 2822 2b22 2c22 2229 2e73 7472 6970  ce("+","").strip
-0001eaf0: 2829 0d0a 2020 2020 2020 2020 2020 2020  ()..            
-0001eb00: 2020 2020 6966 2065 6e74 7279 2021 3d20      if entry != 
-0001eb10: 2022 223a 0d0a 2020 2020 2020 2020 2020   "":..          
-0001eb20: 2020 2020 2020 2020 2020 6d79 5f69 7465            my_ite
-0001eb30: 6d73 2e61 7070 656e 6428 656e 7472 7929  ms.append(entry)
-0001eb40: 0d0a 0d0a 2020 2020 2020 2020 7365 6c66  ....        self
-0001eb50: 2e64 7261 7763 616e 7661 732e 6164 645f  .drawcanvas.add_
-0001eb60: 636f 6e6e 6563 7469 6f6e 2862 6f78 312c  connection(box1,
-0001eb70: 2062 6f78 322c 206e 616d 653d 2073 7472   box2, name= str
-0001eb80: 2873 656c 662e 6564 6974 5368 6f72 746e  (self.editShortn
-0001eb90: 616d 652e 7465 7874 2829 292c 7375 626a  ame.text()),subj
-0001eba0: 6563 743d 7365 6c66 2e65 6469 7453 7562  ect=self.editSub
-0001ebb0: 6a65 6374 2e74 6578 7428 292c 6974 656d  ject.text(),item
-0001ebc0: 733d 6d79 5f69 7465 6d73 290d 0a0d 0a20  s=my_items).... 
-0001ebd0: 2020 2020 2020 206e 6577 5f65 6e74 7279         new_entry
-0001ebe0: 5b22 756e 692d 6469 7265 6374 696f 6e61  ["uni-directiona
-0001ebf0: 6c22 5d20 3d20 5c0d 0a20 2020 2020 2020  l"] = \..       
-0001ec00: 2020 2020 2073 7472 2873 656c 662e 636f       str(self.co
-0001ec10: 6d62 6f55 6e69 6469 722e 6375 7272 656e  mboUnidir.curren
-0001ec20: 7454 6578 7428 2929 0d0a 0d0a 2020 2020  tText())....    
-0001ec30: 2020 2020 6e65 775f 656e 7472 795b 226c      new_entry["l
-0001ec40: 6f67 2074 7261 6e73 6163 7469 6f6e 225d  og transaction"]
-0001ec50: 203d 205c 0d0a 2020 2020 2020 2020 2020   = \..          
-0001ec60: 2020 7365 6c66 2e72 6567 6973 7465 7246    self.registerF
-0001ec70: 6c6f 7742 6f78 2e63 7572 7265 6e74 5465  lowBox.currentTe
-0001ec80: 7874 2829 0d0a 0d0a 2020 2020 2020 2020  xt()....        
-0001ec90: 6e65 775f 656e 7472 795b 2263 6173 6866  new_entry["cashf
-0001eca0: 6c6f 7731 225d 203d 205c 0d0a 2020 2020  low1"] = \..    
-0001ecb0: 2020 2020 2020 2020 7374 7228 7365 6c66          str(self
-0001ecc0: 2e63 6f6d 626f 4361 7368 4c65 6674 2e63  .comboCashLeft.c
-0001ecd0: 7572 7265 6e74 5465 7874 2829 290d 0a20  urrentText()).. 
-0001ece0: 2020 2020 2020 206e 6577 5f65 6e74 7279         new_entry
-0001ecf0: 5b22 6361 7368 666c 6f77 3222 5d20 3d20  ["cashflow2"] = 
-0001ed00: 5c0d 0a20 2020 2020 2020 2020 2020 2073  \..            s
-0001ed10: 7472 2873 656c 662e 636f 6d62 6f43 6173  tr(self.comboCas
-0001ed20: 6852 6967 6874 2e63 7572 7265 6e74 5465  hRight.currentTe
-0001ed30: 7874 2829 290d 0a0d 0a20 2020 2020 2020  xt())....       
-0001ed40: 206e 6577 5f65 6e74 7279 5b22 6b69 6e64   new_entry["kind
-0001ed50: 225d 203d 205c 0d0a 2020 2020 2020 2020  "] = \..        
-0001ed60: 2020 2020 7374 7228 7365 6c66 2e65 6469      str(self.edi
-0001ed70: 7454 7970 652e 6375 7272 656e 7454 6578  tType.currentTex
-0001ed80: 7428 2929 0d0a 0d0a 2020 2020 2020 2020  t())....        
-0001ed90: 6e65 775f 656e 7472 795b 2269 6e63 6f6d  new_entry["incom
-0001eda0: 6531 225d 203d 205c 0d0a 2020 2020 2020  e1"] = \..      
-0001edb0: 2020 2020 2020 7374 7228 7365 6c66 2e63        str(self.c
-0001edc0: 6f6d 626f 496e 636f 6d65 4c65 6674 2e63  omboIncomeLeft.c
-0001edd0: 7572 7265 6e74 5465 7874 2829 290d 0a20  urrentText()).. 
-0001ede0: 2020 2020 2020 206e 6577 5f65 6e74 7279         new_entry
-0001edf0: 5b22 696e 636f 6d65 3222 5d20 3d20 5c0d  ["income2"] = \.
-0001ee00: 0a20 2020 2020 2020 2020 2020 2073 7472  .            str
-0001ee10: 2873 656c 662e 636f 6d62 6f49 6e63 6f6d  (self.comboIncom
-0001ee20: 6552 6967 6874 2e63 7572 7265 6e74 5465  eRight.currentTe
-0001ee30: 7874 2829 290d 0a0d 0a20 2020 2020 2020  xt())....       
-0001ee40: 206e 6577 5f65 6e74 7279 5b22 7175 616e   new_entry["quan
-0001ee50: 7469 7479 225d 203d 205c 0d0a 2020 2020  tity"] = \..    
-0001ee60: 2020 2020 2020 2020 7374 7228 7365 6c66          str(self
-0001ee70: 2e65 6469 7451 7561 6e74 6974 792e 7465  .editQuantity.te
-0001ee80: 7874 2829 290d 0a0d 0a20 2020 2020 2020  xt())....       
-0001ee90: 206e 6577 5f65 6e74 7279 5b22 7375 626a   new_entry["subj
-0001eea0: 6563 7422 5d20 3d20 5c0d 0a20 2020 2020  ect"] = \..     
-0001eeb0: 2020 2020 2020 2073 7472 2873 656c 662e         str(self.
-0001eec0: 6564 6974 5375 626a 6563 742e 7465 7874  editSubject.text
-0001eed0: 2829 290d 0a0d 0a20 2020 2020 2020 206e  ())....        n
-0001eee0: 6577 5f65 6e74 7279 5b22 7368 6f72 746e  ew_entry["shortn
-0001eef0: 616d 6522 5d20 3d20 5c0d 0a20 2020 2020  ame"] = \..     
-0001ef00: 2020 2020 2020 2073 7472 2873 656c 662e         str(self.
-0001ef10: 6564 6974 5368 6f72 746e 616d 652e 7465  editShortname.te
-0001ef20: 7874 2829 290d 0a0d 0a20 2020 2020 2020  xt())....       
-0001ef30: 206e 6577 5f65 6e74 7279 5b22 6465 7363   new_entry["desc
-0001ef40: 7269 7074 696f 6e22 5d20 3d20 5c0d 0a20  ription"] = \.. 
-0001ef50: 2020 2020 2020 2020 2020 2073 7472 2873             str(s
-0001ef60: 656c 662e 6564 6974 4465 7363 7269 7074  elf.editDescript
-0001ef70: 696f 6e2e 7465 7874 2829 290d 0a0d 0a20  ion.text()).... 
-0001ef80: 2020 2020 2020 2073 656c 662e 656e 7472         self.entr
-0001ef90: 795f 6461 7461 2e61 7070 656e 6428 6e65  y_data.append(ne
-0001efa0: 775f 656e 7472 7929 0d0a 2020 2020 2020  w_entry)..      
-0001efb0: 2020 7365 6c66 2e75 7064 6174 655f 7461    self.update_ta
-0001efc0: 626c 6528 290d 0a0d 0a0d 0a0d 0a20 2020  ble()........   
-0001efd0: 2020 2020 2064 6172 6b4d 6f64 6520 3d20       darkMode = 
-0001efe0: 5472 7565 0d0a 2020 2020 2020 2020 7472  True..        tr
-0001eff0: 793a 0d0a 2020 2020 2020 2020 2020 2020  y:..            
-0001f000: 6966 2073 656c 662e 7468 656d 655f 6d61  if self.theme_ma
-0001f010: 6e61 6765 722e 7468 656d 6520 3d3d 2022  nager.theme == "
-0001f020: 6272 6967 6874 223a 0d0a 2020 2020 2020  bright":..      
-0001f030: 2020 2020 2020 2020 2020 6461 726b 4d6f            darkMo
-0001f040: 6465 203d 2046 616c 7365 0d0a 2020 2020  de = False..    
-0001f050: 2020 2020 6578 6365 7074 3a0d 0a20 2020      except:..   
-0001f060: 2020 2020 2020 2020 2070 6173 730d 0a0d           pass...
-0001f070: 0a20 2020 2020 2020 2074 7279 3a0d 0a20  .        try:.. 
-0001f080: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001f090: 7365 6c65 6374 696f 6e5f 6964 7820 3d20  selection_idx = 
-0001f0a0: 6c65 6e28 7365 6c66 2e65 6e74 7279 5f64  len(self.entry_d
-0001f0b0: 6174 6129 2d31 0d0a 2020 2020 2020 2020  ata)-1..        
-0001f0c0: 2020 2020 7365 6c66 2e72 6f77 5f73 656c      self.row_sel
-0001f0d0: 6563 7428 7365 6c66 2e73 656c 6563 7469  ect(self.selecti
-0001f0e0: 6f6e 5f69 6478 290d 0a20 2020 2020 2020  on_idx)..       
-0001f0f0: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
-0001f100: 6e20 6173 2065 203a 0d0a 2020 2020 2020  n as e :..      
-0001f110: 2020 2020 2020 7365 6c66 2e6e 6f74 6966        self.notif
-0001f120: 7928 2245 5252 4f52 3a22 202b 2074 7228  y("ERROR:" + tr(
-0001f130: 6529 2c74 6974 6c65 3d22 4572 726f 7222  e),title="Error"
-0001f140: 290d 0a0d 0a20 2020 2020 2020 2022 2222  )....        """
-0001f150: 0d0a 2020 2020 2020 2020 6966 2073 656c  ..        if sel
-0001f160: 662e 7365 6c65 6374 696f 6e5f 6964 7820  f.selection_idx 
-0001f170: 6973 206e 6f74 204e 6f6e 653a 0d0a 2020  is not None:..  
-0001f180: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
-0001f190: 696e 2072 616e 6765 2873 656c 662e 7472  in range(self.tr
-0001f1a0: 616e 7361 6374 696f 6e56 6965 772e 636f  ansactionView.co
-0001f1b0: 6c75 6d6e 436f 756e 7428 2929 3a0d 0a0d  lumnCount()):...
-0001f1c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f1d0: 2069 6620 6461 726b 4d6f 6465 3a0d 0a20   if darkMode:.. 
-0001f1e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f1f0: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
-0001f200: 696f 6e56 6965 772e 6974 656d 2873 656c  ionView.item(sel
-0001f210: 662e 7365 6c65 6374 696f 6e5f 6964 782c  f.selection_idx,
-0001f220: 2069 292e 7365 7442 6163 6b67 726f 756e   i).setBackgroun
-0001f230: 6428 5174 4775 692e 5143 6f6c 6f72 2832  d(QtGui.QColor(2
-0001f240: 312c 2032 312c 2032 3129 290d 0a20 2020  1, 21, 21))..   
-0001f250: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-0001f260: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
-0001f270: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
-0001f280: 6e73 6163 7469 6f6e 5669 6577 2e69 7465  nsactionView.ite
-0001f290: 6d28 7365 6c66 2e73 656c 6563 7469 6f6e  m(self.selection
-0001f2a0: 5f69 6478 2c20 6929 2e73 6574 4261 636b  _idx, i).setBack
-0001f2b0: 6772 6f75 6e64 2851 7447 7569 2e51 436f  ground(QtGui.QCo
-0001f2c0: 6c6f 7228 3233 332c 2032 3334 2c20 3232  lor(233, 234, 22
-0001f2d0: 3729 290d 0a0d 0a20 2020 2020 2020 2020  7))....         
-0001f2e0: 2020 2073 656c 662e 7365 6c65 6374 696f     self.selectio
-0001f2f0: 6e5f 6964 7820 3d20 7365 6c66 2e74 7261  n_idx = self.tra
-0001f300: 6e73 6163 7469 6f6e 5669 6577 2e72 6f77  nsactionView.row
-0001f310: 436f 756e 7428 292d 310d 0a20 2020 2020  Count()-1..     
-0001f320: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-0001f330: 7261 6e67 6528 7365 6c66 2e74 7261 6e73  range(self.trans
-0001f340: 6163 7469 6f6e 5669 6577 2e63 6f6c 756d  actionView.colum
-0001f350: 6e43 6f75 6e74 2829 293a 0d0a 2020 2020  nCount()):..    
-0001f360: 2020 2020 2020 2020 2020 2020 6966 2064              if d
-0001f370: 6172 6b4d 6f64 653a 0d0a 2020 2020 2020  arkMode:..      
-0001f380: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0001f390: 6c66 2e74 7261 6e73 6163 7469 6f6e 5669  lf.transactionVi
-0001f3a0: 6577 2e69 7465 6d28 7365 6c66 2e73 656c  ew.item(self.sel
-0001f3b0: 6563 7469 6f6e 5f69 6478 2c20 6929 2e73  ection_idx, i).s
-0001f3c0: 6574 4261 636b 6772 6f75 6e64 2851 7447  etBackground(QtG
-0001f3d0: 7569 2e51 436f 6c6f 7228 3138 2c20 3138  ui.QColor(18, 18
-0001f3e0: 2c20 3138 2929 0d0a 2020 2020 2020 2020  , 18))..        
-0001f3f0: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
-0001f400: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f410: 2020 2073 656c 662e 7472 616e 7361 6374     self.transact
-0001f420: 696f 6e56 6965 772e 6974 656d 2873 656c  ionView.item(sel
-0001f430: 662e 7365 6c65 6374 696f 6e5f 6964 782c  f.selection_idx,
-0001f440: 2069 292e 7365 7442 6163 6b67 726f 756e   i).setBackgroun
-0001f450: 6428 5174 4775 692e 5143 6f6c 6f72 2831  d(QtGui.QColor(1
-0001f460: 3539 2c20 3135 392c 2031 3539 2929 0d0a  59, 159, 159))..
-0001f470: 2020 2020 2020 2020 2222 220d 0a0d 0a0d          """.....
-0001f480: 0a0d 0a0d 0a20 2020 2064 6566 2067 6f74  .....    def got
-0001f490: 6f5f 6e65 7874 2873 656c 6629 3a0d 0a20  o_next(self):.. 
-0001f4a0: 2020 2020 2020 2070 6173 730d 0a0d 0a0d         pass.....
-0001f4b0: 0a20 2020 2064 6566 2075 6470 6174 655f  .    def udpate_
-0001f4c0: 6469 7370 6c61 7928 7365 6c66 293a 0d0a  display(self):..
-0001f4d0: 2020 2020 2020 2020 7472 793a 0d0a 0d0a          try:....
-0001f4e0: 2020 2020 2020 2020 2020 2020 6669 6c65              file
-0001f4f0: 6e61 6d65 203d 2073 656c 662e 6669 6c65  name = self.file
-0001f500: 6e61 6d65 0d0a 0d0a 2020 2020 2020 2020  name....        
-0001f510: 2020 2020 7769 7468 206f 7065 6e28 6669      with open(fi
-0001f520: 6c65 6e61 6d65 2c20 2772 2729 2061 7320  lename, 'r') as 
-0001f530: 7374 7265 616d 3a0d 0a20 2020 2020 2020  stream:..       
-0001f540: 2020 2020 2020 2020 2066 696c 6564 6174           filedat
-0001f550: 6120 3d20 7961 6d6c 2e73 6166 655f 6c6f  a = yaml.safe_lo
-0001f560: 6164 2873 7472 6561 6d29 0d0a 2020 2020  ad(stream)..    
-0001f570: 2020 2020 2020 2020 2020 2020 7072 696e              prin
-0001f580: 7428 6669 6c65 6461 7461 290d 0a0d 0a20  t(filedata).... 
-0001f590: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-0001f5a0: 656c 662e 6167 656e 7431 4c61 6265 6c2e  elf.agent1Label.
-0001f5b0: 7465 7874 203d 2066 696c 6564 6174 615b  text = filedata[
-0001f5c0: 2261 6765 6e74 3122 5d0d 0a20 2020 2020  "agent1"]..     
-0001f5d0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001f5e0: 6167 656e 7432 4c61 6265 6c2e 7465 7874  agent2Label.text
-0001f5f0: 203d 2066 696c 6564 6174 615b 2261 6765   = filedata["age
-0001f600: 6e74 3222 5d0d 0a0d 0a20 2020 2020 2020  nt2"]....       
-0001f610: 2020 2020 2020 2020 2023 2073 656c 662e           # self.
-0001f620: 6131 2e76 616c 7565 203d 2066 696c 6564  a1.value = filed
-0001f630: 6174 615b 2261 3122 5d20 2023 202b 2022  ata["a1"]  # + "
-0001f640: 5c6e 220d 0a20 2020 2020 2020 2020 2020  \n"..           
-0001f650: 2020 2020 2023 2073 656c 662e 6531 2e76       # self.e1.v
-0001f660: 616c 7565 203d 2066 696c 6564 6174 615b  alue = filedata[
-0001f670: 2265 3122 5d20 2023 202b 2022 5c6e 220d  "e1"]  # + "\n".
-0001f680: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f690: 2023 2073 656c 662e 6c31 2e76 616c 7565   # self.l1.value
-0001f6a0: 203d 2066 696c 6564 6174 615b 226c 3122   = filedata["l1"
-0001f6b0: 5d20 2023 202b 2022 5c6e 220d 0a20 2020  ]  # + "\n"..   
-0001f6c0: 2020 2020 2020 2020 2020 2020 2023 2073               # s
-0001f6d0: 656c 662e 6132 2e76 616c 7565 203d 2066  elf.a2.value = f
-0001f6e0: 696c 6564 6174 615b 2261 3222 5d20 2023  iledata["a2"]  #
-0001f6f0: 202b 2022 5c6e 220d 0a20 2020 2020 2020   + "\n"..       
-0001f700: 2020 2020 2020 2020 2023 2073 656c 662e           # self.
-0001f710: 6532 2e76 616c 7565 203d 2066 696c 6564  e2.value = filed
-0001f720: 6174 615b 2265 3222 5d20 2023 202b 2022  ata["e2"]  # + "
-0001f730: 5c6e 220d 0a20 2020 2020 2020 2020 2020  \n"..           
-0001f740: 2020 2020 2023 2073 656c 662e 6c32 2e76       # self.l2.v
-0001f750: 616c 7565 203d 2066 696c 6564 6174 615b  alue = filedata[
-0001f760: 226c 3222 5d20 2023 202b 2022 5c6e 220d  "l2"]  # + "\n".
-0001f770: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
-0001f780: 2020 2023 2069 6620 2273 686f 7274 6e61     # if "shortna
-0001f790: 6d65 2220 696e 2066 696c 6564 6174 613a  me" in filedata:
-0001f7a0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001f7b0: 2020 2320 2020 2073 656c 662e 7061 7265    #    self.pare
-0001f7c0: 6e74 2e73 686f 7274 6e61 6d65 2e76 616c  nt.shortname.val
-0001f7d0: 7565 203d 2066 696c 6564 6174 615b 2273  ue = filedata["s
-0001f7e0: 686f 7274 6e61 6d65 225d 0d0a 0d0a 2020  hortname"]....  
-0001f7f0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0001f800: 6966 2022 756e 692d 6469 7265 6374 696f  if "uni-directio
-0001f810: 6e61 6c22 2069 6e20 6669 6c65 6461 7461  nal" in filedata
-0001f820: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-0001f830: 2020 2023 2020 2020 7365 6c66 2e70 6172     #    self.par
-0001f840: 656e 742e 6469 7265 6374 696f 6e5f 6368  ent.direction_ch
-0001f850: 6563 6b2e 7661 6c75 6520 3d20 626f 6f6c  eck.value = bool
-0001f860: 2873 7472 2866 696c 6564 6174 615b 2275  (str(filedata["u
-0001f870: 6e69 2d64 6972 6563 7469 6f6e 616c 225d  ni-directional"]
-0001f880: 2929 0d0a 2020 2020 2020 2020 2020 2020  ))..            
-0001f890: 2020 2020 2320 656c 7365 3a0d 0a20 2020      # else:..   
-0001f8a0: 2020 2020 2020 2020 2020 2020 2023 2020               #  
-0001f8b0: 2020 7365 6c66 2e70 6172 656e 742e 6469    self.parent.di
-0001f8c0: 7265 6374 696f 6e5f 6368 6563 6b2e 7661  rection_check.va
-0001f8d0: 6c75 6520 3d20 4661 6c73 650d 0a0d 0a20  lue = False.... 
-0001f8e0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0001f8f0: 2069 6620 2264 6573 6372 6970 7469 6f6e   if "description
-0001f900: 2220 696e 2066 696c 6564 6174 613a 0d0a  " in filedata:..
-0001f910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f920: 2320 2020 2073 656c 662e 7061 7265 6e74  #    self.parent
-0001f930: 2e64 6573 6372 6970 7469 6f6e 2e76 616c  .description.val
-0001f940: 7565 203d 2066 696c 6564 6174 615b 2264  ue = filedata["d
-0001f950: 6573 6372 6970 7469 6f6e 225d 0d0a 0d0a  escription"]....
-0001f960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001f970: 2320 7365 6c66 2e70 6172 656e 742e 666c  # self.parent.fl
-0001f980: 6f77 5f63 6865 636b 2e76 616c 7565 203d  ow_check.value =
-0001f990: 2066 696c 6564 6174 615b 226c 6f67 2074   filedata["log t
-0001f9a0: 7261 6e73 6163 7469 6f6e 225d 0d0a 2020  ransaction"]..  
-0001f9b0: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0001f9c0: 7365 6c66 2e70 6172 656e 742e 6b69 6e64  self.parent.kind
-0001f9d0: 2e76 616c 7565 203d 2066 696c 6564 6174  .value = filedat
-0001f9e0: 615b 226b 696e 6422 5d0d 0a20 2020 2020  a["kind"]..     
-0001f9f0: 2020 2020 2020 2020 2020 2023 2073 656c             # sel
-0001fa00: 662e 7061 7265 6e74 2e73 7562 6a65 6374  f.parent.subject
-0001fa10: 2e76 616c 7565 203d 2066 696c 6564 6174  .value = filedat
-0001fa20: 615b 2273 7562 6a65 6374 225d 0d0a 2020  a["subject"]..  
-0001fa30: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0001fa40: 7365 6c66 2e70 6172 656e 742e 7175 616e  self.parent.quan
-0001fa50: 7469 7479 2e76 616c 7565 203d 2066 696c  tity.value = fil
-0001fa60: 6564 6174 615b 2271 7561 6e74 6974 7922  edata["quantity"
-0001fa70: 5d0d 0a0d 0a20 2020 2020 2020 2020 2020  ]....           
-0001fa80: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
-0001fa90: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0001faa0: 205b 224e 6f6e 6522 2c22 5265 7665 6e75   ["None","Revenu
-0001fab0: 6522 2c22 4578 7065 6e73 6522 2c22 4761  e","Expense","Ga
-0001fac0: 696e 222c 224c 6f73 7322 2c22 5461 7822  in","Loss","Tax"
-0001fad0: 5d0d 0a0d 0a20 2020 2020 2020 2020 2020  ]....           
-0001fae0: 2020 2020 2020 2020 206d 795f 6469 6374           my_dict
-0001faf0: 203d 207b 0d0a 2020 2020 2020 2020 2020   = {..          
-0001fb00: 2020 2020 2020 2020 2020 2020 2020 224e                "N
-0001fb10: 6f6e 6522 3a20 302c 0d0a 2020 2020 2020  one": 0,..      
-0001fb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fb30: 2020 2252 6576 656e 7565 223a 2031 2c0d    "Revenue": 1,.
-0001fb40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001fb50: 2020 2020 2020 2020 2022 4578 7065 6e73           "Expens
-0001fb60: 6522 3a20 322c 0d0a 2020 2020 2020 2020  e": 2,..        
-0001fb70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fb80: 2247 6169 6e22 3a20 332c 0d0a 2020 2020  "Gain": 3,..    
-0001fb90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fba0: 2020 2020 224c 6f73 7322 3a20 342c 0d0a      "Loss": 4,..
-0001fbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fbc0: 2020 2020 2020 2020 2249 6e74 6572 6573          "Interes
-0001fbd0: 7422 3a20 352c 0d0a 2020 2020 2020 2020  t": 5,..        
-0001fbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fbf0: 224e 6f6e 2d4f 702e 2049 6e63 6f6d 6522  "Non-Op. Income"
-0001fc00: 3a20 362c 0d0a 2020 2020 2020 2020 2020  : 6,..          
-0001fc10: 2020 2020 2020 2020 2020 2020 2020 2254                "T
-0001fc20: 6178 223a 2037 2c0d 0a20 2020 2020 2020  ax": 7,..       
-0001fc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fc40: 2022 4e6f 6e74 6178 2e20 5072 6f66 6974   "Nontax. Profit
-0001fc50: 223a 2038 2c0d 0a20 2020 2020 2020 2020  ": 8,..         
-0001fc60: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0001fc70: 4e6f 6e74 6178 2e20 4c6f 7373 223a 2039  Nontax. Loss": 9
-0001fc80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001fc90: 2020 2020 2020 7d0d 0a0d 0a20 2020 2020        }....     
-0001fca0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0001fcb0: 2073 656c 662e 7061 7265 6e74 2e69 6e63   self.parent.inc
-0001fcc0: 6f6d 6531 2e76 616c 7565 203d 205b 6d79  ome1.value = [my
-0001fcd0: 5f64 6963 745b 6669 6c65 6461 7461 5b22  _dict[filedata["
-0001fce0: 696e 636f 6d65 3122 5d5d 5d0d 0a20 2020  income1"]]]..   
-0001fcf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fd00: 2023 2073 656c 662e 7061 7265 6e74 2e69   # self.parent.i
-0001fd10: 6e63 6f6d 6532 2e76 616c 7565 203d 205b  ncome2.value = [
-0001fd20: 6d79 5f64 6963 745b 6669 6c65 6461 7461  my_dict[filedata
-0001fd30: 5b22 696e 636f 6d65 3222 5d5d 5d0d 0a0d  ["income2"]]]...
-0001fd40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001fd50: 2020 2020 2023 2073 656c 662e 7061 7265       # self.pare
-0001fd60: 6e74 2e63 6173 6866 6c6f 7731 2e76 616c  nt.cashflow1.val
-0001fd70: 7565 203d 205b 6669 6c65 6461 7461 5b22  ue = [filedata["
-0001fd80: 6361 7368 666c 6f77 3122 5d5d 0d0a 2020  cashflow1"]]..  
+0001dcf0: 2020 2066 696c 652e 7772 6974 6528 2222     file.write(""
+0001dd00: 220d 0a20 2020 205c 646f 6375 6d65 6e74  "..    \document
+0001dd10: 636c 6173 737b 6172 7469 636c 657d 0d0a  class{article}..
+0001dd20: 2020 2020 5c5c 7573 6570 6163 6b61 6765      \\usepackage
+0001dd30: 7b74 6162 756c 6172 787d 0d0a 2020 2020  {tabularx}..    
+0001dd40: 5c5c 7573 6570 6163 6b61 6765 7b61 6d73  \\usepackage{ams
+0001dd50: 6d61 7468 7d0d 0a20 2020 205c 5c75 7365  math}..    \\use
+0001dd60: 7061 636b 6167 657b 666c 6f61 747d 0d0a  package{float}..
+0001dd70: 0d0a 2020 2020 5c5c 6265 6769 6e7b 646f  ..    \\begin{do
+0001dd80: 6375 6d65 6e74 7d0d 0a0d 0a20 2020 2022  cument}....    "
+0001dd90: 2222 290d 0a20 2020 2020 2020 2020 2020  "")..           
+0001dda0: 2020 2020 2020 2020 2066 696c 652e 7772           file.wr
+0001ddb0: 6974 6528 7465 7873 7472 5f63 6f6d 6269  ite(texstr_combi
+0001ddc0: 6e65 6429 0d0a 2020 2020 2020 2020 2020  ned)..          
+0001ddd0: 2020 2020 2020 2020 2020 6669 6c65 2e77            file.w
+0001dde0: 7269 7465 2822 2222 0d0a 2020 2020 5c5c  rite("""..    \\
+0001ddf0: 656e 647b 646f 6375 6d65 6e74 7d0d 0a20  end{document}.. 
+0001de00: 2020 2022 2222 290d 0a0d 0a20 2020 2020     """)....     
+0001de10: 2020 2020 2020 2020 2020 2069 6d70 6f72             impor
+0001de20: 7420 7375 6270 726f 6365 7373 0d0a 2020  t subprocess..  
+0001de30: 2020 2020 2020 2020 2020 2020 2020 7472                tr
+0001de40: 793a 0d0a 0d0a 2020 2020 2020 2020 2020  y:....          
+0001de50: 2020 2020 2020 2020 2020 7061 7468 203d            path =
+0001de60: 206f 732e 7061 7468 2e64 6972 6e61 6d65   os.path.dirname
+0001de70: 286f 732e 7061 7468 2e61 6273 7061 7468  (os.path.abspath
+0001de80: 285f 5f66 696c 655f 5f29 290d 0a20 2020  (__file__))..   
+0001de90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dea0: 2073 7562 7072 6f63 6573 732e 7275 6e28   subprocess.run(
+0001deb0: 2270 6466 6c61 7465 7820 2573 2220 2520  "pdflatex %s" % 
+0001dec0: 286f 732e 7061 7468 2e6a 6f69 6e28 7061  (os.path.join(pa
+0001ded0: 7468 2c20 2266 696c 6573 2f69 6e63 6f6d  th, "files/incom
+0001dee0: 655f 7374 6174 6d65 6e74 732e 7465 7822  e_statments.tex"
+0001def0: 2929 292e 6368 6563 6b5f 7265 7475 726e  ))).check_return
+0001df00: 636f 6465 2829 0d0a 0d0a 2020 2020 2020  code()....      
+0001df10: 2020 2020 2020 2020 2020 2020 2020 7368                sh
+0001df20: 7574 696c 2e6d 6f76 6528 7061 7468 202b  util.move(path +
+0001df30: 2022 696e 636f 6d65 5f73 7461 746d 656e   "income_statmen
+0001df40: 7473 2e74 6578 222c 2070 6174 6820 2b20  ts.tex", path + 
+0001df50: 2266 696c 6573 5c5c 696e 636f 6d65 5f73  "files\\income_s
+0001df60: 7461 746d 656e 7473 2e74 6578 2229 0d0a  tatments.tex")..
+0001df70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001df80: 2020 2020 7368 7574 696c 2e6d 6f76 6528      shutil.move(
+0001df90: 7061 7468 202b 2022 696e 636f 6d65 5f73  path + "income_s
+0001dfa0: 7461 746d 656e 7473 2e6c 6f67 222c 2070  tatments.log", p
+0001dfb0: 6174 6820 2b20 2266 696c 6573 5c5c 696e  ath + "files\\in
+0001dfc0: 636f 6d65 5f73 7461 746d 656e 7473 2e6c  come_statments.l
+0001dfd0: 6f67 2229 0d0a 2020 2020 2020 2020 2020  og")..          
+0001dfe0: 2020 2020 2020 2020 2020 7368 7574 696c            shutil
+0001dff0: 2e6d 6f76 6528 7061 7468 202b 2022 696e  .move(path + "in
+0001e000: 636f 6d65 5f73 7461 746d 656e 7473 2e61  come_statments.a
+0001e010: 7578 222c 2070 6174 6820 2b20 2266 696c  ux", path + "fil
+0001e020: 6573 5c5c 5c6d 696e 636f 6d65 5f73 7461  es\\\mincome_sta
+0001e030: 746d 656e 7473 2e61 7578 2229 0d0a 2020  tments.aux")..  
+0001e040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e050: 2020 7368 7574 696c 2e6d 6f76 6528 7061    shutil.move(pa
+0001e060: 7468 202b 2022 696e 636f 6d65 5f73 7461  th + "income_sta
+0001e070: 746d 656e 7473 2e70 6466 222c 2070 6174  tments.pdf", pat
+0001e080: 6820 2b20 2266 696c 6573 5c5c 696e 636f  h + "files\\inco
+0001e090: 6d65 5f73 7461 746d 656e 7473 2e70 6466  me_statments.pdf
+0001e0a0: 2229 0d0a 2020 2020 2020 2020 2020 2020  ")..            
+0001e0b0: 2020 2020 2020 2020 7365 6c66 2e6e 6f74          self.not
+0001e0c0: 6966 7928 6d65 7373 6167 653d 2254 6558  ify(message="TeX
+0001e0d0: 2046 696c 6520 6372 6561 7465 6420 696e   File created in
+0001e0e0: 2025 7322 2025 2070 6174 6820 2b20 225c   %s" % path + "\
+0001e0f0: 5c66 696c 6573 2220 2c74 6974 6c65 3d22  \files" ,title="
+0001e100: 5375 6363 6573 7322 290d 0a0d 0a20 2020  Success")....   
+0001e110: 2020 2020 2020 2020 2020 2020 2065 7863               exc
+0001e120: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
+0001e130: 2065 3a0d 0a20 2020 2020 2020 2020 2020   e:..           
+0001e140: 2020 2020 2020 2020 2073 656c 662e 6e6f           self.no
+0001e150: 7469 6679 286d 6573 7361 6765 3d73 7472  tify(message=str
+0001e160: 2865 2e5f 5f63 6f6e 7465 7874 5f5f 2920  (e.__context__) 
+0001e170: 2b20 225c 6e22 202b 2073 7472 2865 292c  + "\n" + str(e),
+0001e180: 2074 6974 6c65 3d65 2e5f 5f63 6c61 7373   title=e.__class
+0001e190: 5f5f 2e5f 5f6e 616d 655f 5f29 0d0a 0d0a  __.__name__)....
+0001e1a0: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
+0001e1b0: 2045 7863 6570 7469 6f6e 2061 7320 653a   Exception as e:
+0001e1c0: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0001e1d0: 6c66 2e6e 6f74 6966 7928 6d65 7373 6167  lf.notify(messag
+0001e1e0: 653d 7374 7228 652e 5f5f 636f 6e74 6578  e=str(e.__contex
+0001e1f0: 745f 5f29 202b 2022 5c6e 2220 2b20 7374  t__) + "\n" + st
+0001e200: 7228 6529 2c20 7469 746c 653d 652e 5f5f  r(e), title=e.__
+0001e210: 636c 6173 735f 5f2e 5f5f 6e61 6d65 5f5f  class__.__name__
+0001e220: 290d 0a0d 0a20 2020 2064 6566 2061 6464  )....    def add
+0001e230: 5f68 656c 7065 7228 7365 6c66 293a 0d0a  _helper(self):..
+0001e240: 2020 2020 2020 2020 6e65 775f 6e61 6d65          new_name
+0001e250: 203d 2073 656c 662e 4865 6c70 6572 4e61   = self.HelperNa
+0001e260: 6d65 4564 6974 2e74 6578 7428 290d 0a20  meEdit.text().. 
+0001e270: 2020 2020 2020 2023 2054 4f44 4f20 6164         # TODO ad
+0001e280: 6420 7365 6375 7269 7479 206d 6563 6861  d security mecha
+0001e290: 6e69 736d 2074 6f20 6176 6f69 6420 6f76  nism to avoid ov
+0001e2a0: 6572 7772 6974 696e 6720 616e 2061 6765  erwriting an age
+0001e2b0: 6e74 0d0a 2020 2020 2020 2020 6966 206e  nt..        if n
+0001e2c0: 6577 5f6e 616d 6520 3d3d 2022 223a 0d0a  ew_name == "":..
+0001e2d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0001e2e0: 2e6e 6f74 6966 7928 2250 6c65 6173 6520  .notify("Please 
+0001e2f0: 656e 7465 7220 6120 7661 6c69 6420 6e61  enter a valid na
+0001e300: 6d65 222c 2074 6974 6c65 3d22 4942 4d20  me", title="IBM 
+0001e310: 4572 726f 7222 290d 0a20 2020 2020 2020  Error")..       
+0001e320: 2065 6c69 6620 6e6f 7420 6e65 775f 6e61   elif not new_na
+0001e330: 6d65 5b30 5d2e 6973 7570 7065 7228 293a  me[0].isupper():
+0001e340: 0d0a 2020 2020 2020 2020 2020 2020 7365  ..            se
+0001e350: 6c66 2e6e 6f74 6966 7928 2250 6c65 6173  lf.notify("Pleas
+0001e360: 6520 656e 7465 7220 6120 7661 6c69 6420  e enter a valid 
+0001e370: 6e61 6d65 2077 6974 685c 6e75 7070 6572  name with\nupper
+0001e380: 6361 7365 2066 6972 7374 206c 6574 7465  case first lette
+0001e390: 7220 6f72 2063 616d 656c 6361 7365 2c20  r or camelcase, 
+0001e3a0: 652e 672e 2027 4d79 4167 656e 7427 222c  e.g. 'MyAgent'",
+0001e3b0: 2074 6974 6c65 3d22 4942 4d20 4572 726f   title="IBM Erro
+0001e3c0: 7222 290d 0a20 2020 2020 2020 2065 6c73  r")..        els
+0001e3d0: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+0001e3e0: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
+0001e3f0: 6164 645f 6167 656e 7428 6e65 775f 6e61  add_agent(new_na
+0001e400: 6d65 290d 0a0d 0a20 2020 2064 6566 2072  me)....    def r
+0001e410: 656d 6f76 655f 6865 6c70 6572 2873 656c  emove_helper(sel
+0001e420: 6629 3a0d 0a20 2020 2020 2020 2073 656c  f):..        sel
+0001e430: 662e 6472 6177 6361 6e76 6173 2e72 656d  f.drawcanvas.rem
+0001e440: 6f76 655f 6167 656e 7428 290d 0a0d 0a20  ove_agent().... 
+0001e450: 2020 2064 6566 2061 6464 5f6e 6577 2873     def add_new(s
+0001e460: 656c 6629 3a0d 0a0d 0a20 2020 2020 2020  elf):....       
+0001e470: 2023 2054 4f44 4f20 6173 7365 7274 2074   # TODO assert t
+0001e480: 6861 7420 7175 616e 7469 7479 2069 7320  hat quantity is 
+0001e490: 6e6f 7420 7965 7420 696e 2061 6e79 206f  not yet in any o
+0001e4a0: 7468 6572 2074 7261 6e73 6163 7469 6f6e  ther transaction
+0001e4b0: 0d0a 2020 2020 2020 2020 7365 6c66 2e6d  ..        self.m
+0001e4c0: 6164 655f 6368 616e 6765 7320 3d20 4661  ade_changes = Fa
+0001e4d0: 6c73 650d 0a0d 0a0d 0a20 2020 2020 2020  lse......       
+0001e4e0: 206e 6577 5f65 6e74 7279 203d 207b 7d0d   new_entry = {}.
+0001e4f0: 0a0d 0a20 2020 2020 2020 206e 6577 5f65  ...        new_e
+0001e500: 6e74 7279 5b22 6131 225d 203d 2073 656c  ntry["a1"] = sel
+0001e510: 662e 4173 7365 744c 6973 744c 6566 742e  f.AssetListLeft.
+0001e520: 746f 506c 6169 6e54 6578 7428 290d 0a20  toPlainText().. 
+0001e530: 2020 2020 2020 206e 6577 5f65 6e74 7279         new_entry
+0001e540: 5b22 6132 225d 203d 2073 656c 662e 4173  ["a2"] = self.As
+0001e550: 7365 744c 6973 7452 6967 6874 2e74 6f50  setListRight.toP
+0001e560: 6c61 696e 5465 7874 2829 0d0a 2020 2020  lainText()..    
+0001e570: 2020 2020 6e65 775f 656e 7472 795b 226c      new_entry["l
+0001e580: 3122 5d20 3d20 7365 6c66 2e4c 6961 6269  1"] = self.Liabi
+0001e590: 6c69 7479 4c69 7374 4c65 6674 2e74 6f50  lityListLeft.toP
+0001e5a0: 6c61 696e 5465 7874 2829 0d0a 2020 2020  lainText()..    
+0001e5b0: 2020 2020 6e65 775f 656e 7472 795b 226c      new_entry["l
+0001e5c0: 3222 5d20 3d20 7365 6c66 2e4c 6961 6269  2"] = self.Liabi
+0001e5d0: 6c69 7479 4c69 7374 5269 6768 742e 746f  lityListRight.to
+0001e5e0: 506c 6169 6e54 6578 7428 290d 0a20 2020  PlainText()..   
+0001e5f0: 2020 2020 206e 6577 5f65 6e74 7279 5b22       new_entry["
+0001e600: 6531 225d 203d 2073 656c 662e 4571 7569  e1"] = self.Equi
+0001e610: 7479 4c69 7374 4c65 6674 2e74 6f50 6c61  tyListLeft.toPla
+0001e620: 696e 5465 7874 2829 0d0a 2020 2020 2020  inText()..      
+0001e630: 2020 6e65 775f 656e 7472 795b 2265 3222    new_entry["e2"
+0001e640: 5d20 3d20 7365 6c66 2e45 7175 6974 794c  ] = self.EquityL
+0001e650: 6973 7452 6967 6874 2e74 6f50 6c61 696e  istRight.toPlain
+0001e660: 5465 7874 2829 0d0a 0d0a 2020 2020 2020  Text()....      
+0001e670: 2020 2320 6e65 775f 656e 7472 795b 2261    # new_entry["a
+0001e680: 3122 5d20 3d20 7365 6c66 2e41 7373 6574  1"] = self.Asset
+0001e690: 4c69 7374 4c65 6674 2e74 6f50 6c61 696e  ListLeft.toPlain
+0001e6a0: 5465 7874 2829 0d0a 2020 2020 2020 2020  Text()..        
+0001e6b0: 2320 6e65 775f 656e 7472 795b 226c 3122  # new_entry["l1"
+0001e6c0: 5d20 3d20 7365 6c66 2e4c 6961 6269 6c69  ] = self.Liabili
+0001e6d0: 7479 4c69 7374 4c65 6674 2e74 6f50 6c61  tyListLeft.toPla
+0001e6e0: 696e 5465 7874 2829 0d0a 2020 2020 2020  inText()..      
+0001e6f0: 2020 2320 6e65 775f 656e 7472 795b 2261    # new_entry["a
+0001e700: 3222 5d20 3d20 7365 6c66 2e4c 6961 6269  2"] = self.Liabi
+0001e710: 6c69 7479 4c69 7374 5269 6768 742e 746f  lityListRight.to
+0001e720: 506c 6169 6e54 6578 7428 290d 0a20 2020  PlainText()..   
+0001e730: 2020 2020 2023 206e 6577 5f65 6e74 7279       # new_entry
+0001e740: 5b22 6c32 225d 203d 2073 656c 662e 4173  ["l2"] = self.As
+0001e750: 7365 744c 6973 7452 6967 6874 2e74 6f50  setListRight.toP
+0001e760: 6c61 696e 5465 7874 2829 0d0a 2020 2020  lainText()..    
+0001e770: 2020 2020 2320 6e65 775f 656e 7472 795b      # new_entry[
+0001e780: 2265 3122 5d20 3d20 7365 6c66 2e45 7175  "e1"] = self.Equ
+0001e790: 6974 794c 6973 744c 6566 742e 746f 506c  ityListLeft.toPl
+0001e7a0: 6169 6e54 6578 7428 290d 0a20 2020 2020  ainText()..     
+0001e7b0: 2020 2023 206e 6577 5f65 6e74 7279 5b22     # new_entry["
+0001e7c0: 6532 225d 203d 2073 656c 662e 4571 7569  e2"] = self.Equi
+0001e7d0: 7479 4c69 7374 5269 6768 742e 746f 506c  tyListRight.toPl
+0001e7e0: 6169 6e54 6578 7428 290d 0a0d 0a20 2020  ainText()....   
+0001e7f0: 2020 2020 206e 6577 5f65 6e74 7279 5b22       new_entry["
+0001e800: 6167 656e 7431 225d 203d 2063 616d 656c  agent1"] = camel
+0001e810: 2873 656c 662e 6167 656e 7431 4564 6974  (self.agent1Edit
+0001e820: 2e74 6578 7428 2929 2023 2e63 6170 6974  .text()) #.capit
+0001e830: 616c 697a 6528 290d 0a20 2020 2020 2020  alize()..       
+0001e840: 206e 6577 5f65 6e74 7279 5b22 6167 656e   new_entry["agen
+0001e850: 7432 225d 203d 2063 616d 656c 2873 656c  t2"] = camel(sel
+0001e860: 662e 6167 656e 7432 4564 6974 2e74 6578  f.agent2Edit.tex
+0001e870: 7428 2929 2023 2e63 6170 6974 616c 697a  t()) #.capitaliz
+0001e880: 6528 290d 0a0d 0a20 2020 2020 2020 2073  e()....        s
+0001e890: 656c 662e 6167 656e 7431 4564 6974 2e73  elf.agent1Edit.s
+0001e8a0: 6574 5465 7874 2863 616d 656c 2873 656c  etText(camel(sel
+0001e8b0: 662e 6167 656e 7431 4564 6974 2e74 6578  f.agent1Edit.tex
+0001e8c0: 7428 2929 2920 2320 2e63 6170 6974 616c  t())) # .capital
+0001e8d0: 697a 6528 2929 0d0a 2020 2020 2020 2020  ize())..        
+0001e8e0: 7365 6c66 2e61 6765 6e74 3245 6469 742e  self.agent2Edit.
+0001e8f0: 7365 7454 6578 7428 6361 6d65 6c28 7365  setText(camel(se
+0001e900: 6c66 2e61 6765 6e74 3245 6469 742e 7465  lf.agent2Edit.te
+0001e910: 7874 2829 2929 2023 2e63 6170 6974 616c  xt())) #.capital
+0001e920: 697a 6528 2929 0d0a 0d0a 2020 2020 2020  ize())....      
+0001e930: 2020 6966 206e 6f74 2073 656c 662e 6472    if not self.dr
+0001e940: 6177 6361 6e76 6173 2e63 6865 636b 5f65  awcanvas.check_e
+0001e950: 7869 7374 286e 6577 5f65 6e74 7279 5b22  xist(new_entry["
+0001e960: 6167 656e 7431 225d 293a 0d0a 2020 2020  agent1"]):..    
+0001e970: 2020 2020 2020 2020 6966 206e 6577 5f65          if new_e
+0001e980: 6e74 7279 5b22 6167 656e 7431 225d 2021  ntry["agent1"] !
+0001e990: 3d20 2222 3a0d 0a20 2020 2020 2020 2020  = "":..         
+0001e9a0: 2020 2020 2020 2079 6573 203d 2020 7365         yes =  se
+0001e9b0: 6c66 2e61 736b 5f71 7565 7374 696f 6e28  lf.ask_question(
+0001e9c0: 2727 2c22 5468 6520 6167 656e 7420 2573  '',"The agent %s
+0001e9d0: 2064 6f65 7320 6e6f 7420 6578 6973 742e   does not exist.
+0001e9e0: 5c6e 446f 2079 6f75 2077 6973 6820 746f  \nDo you wish to
+0001e9f0: 2063 6f6e 7469 6e75 6520 616e 6420 6175   continue and au
+0001ea00: 746f 6d61 7469 6361 6c6c 7920 6372 6561  tomatically crea
+0001ea10: 7465 2061 206e 6577 2061 6765 6e74 3f22  te a new agent?"
+0001ea20: 256e 6577 5f65 6e74 7279 5b22 6167 656e  %new_entry["agen
+0001ea30: 7431 225d 290d 0a20 2020 2020 2020 2020  t1"])..         
+0001ea40: 2020 2020 2020 2069 6620 6e6f 7420 7965         if not ye
+0001ea50: 733a 0d0a 2020 2020 2020 2020 2020 2020  s:..            
+0001ea60: 2020 2020 2020 2020 7265 7475 726e 0d0a          return..
+0001ea70: 0d0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
+0001ea80: 2073 656c 662e 6472 6177 6361 6e76 6173   self.drawcanvas
+0001ea90: 2e63 6865 636b 5f65 7869 7374 286e 6577  .check_exist(new
+0001eaa0: 5f65 6e74 7279 5b22 6167 656e 7432 225d  _entry["agent2"]
+0001eab0: 293a 0d0a 2020 2020 2020 2020 2020 2020  ):..            
+0001eac0: 6966 206e 6577 5f65 6e74 7279 5b22 6167  if new_entry["ag
+0001ead0: 656e 7432 225d 2021 3d20 2222 3a0d 0a20  ent2"] != "":.. 
+0001eae0: 2020 2020 2020 2020 2020 2020 2020 2079                 y
+0001eaf0: 6573 203d 2020 7365 6c66 2e61 736b 5f71  es =  self.ask_q
+0001eb00: 7565 7374 696f 6e28 2727 2c20 2254 6865  uestion('', "The
+0001eb10: 2061 6765 6e74 2025 7320 646f 6573 206e   agent %s does n
+0001eb20: 6f74 2065 7869 7374 2e5c 6e44 6f20 796f  ot exist.\nDo yo
+0001eb30: 7520 7769 7368 2074 6f20 636f 6e74 696e  u wish to contin
+0001eb40: 7565 2061 6e64 2061 7574 6f6d 6174 6963  ue and automatic
+0001eb50: 616c 6c79 2063 7265 6174 6520 6120 6e65  ally create a ne
+0001eb60: 7720 6167 656e 743f 2225 6e65 775f 656e  w agent?"%new_en
+0001eb70: 7472 795b 2261 6765 6e74 3222 5d29 0d0a  try["agent2"])..
+0001eb80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001eb90: 6966 206e 6f74 2079 6573 3a0d 0a20 2020  if not yes:..   
+0001eba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ebb0: 2072 6574 7572 6e0d 0a0d 0a0d 0a20 2020   return......   
+0001ebc0: 2020 2020 2062 6f78 3120 3d20 7365 6c66       box1 = self
+0001ebd0: 2e64 7261 7763 616e 7661 732e 6164 645f  .drawcanvas.add_
+0001ebe0: 6167 656e 7428 6e65 775f 656e 7472 795b  agent(new_entry[
+0001ebf0: 2261 6765 6e74 3122 5d29 0d0a 2020 2020  "agent1"])..    
+0001ec00: 2020 2020 626f 7832 203d 2073 656c 662e      box2 = self.
+0001ec10: 6472 6177 6361 6e76 6173 2e61 6464 5f61  drawcanvas.add_a
+0001ec20: 6765 6e74 286e 6577 5f65 6e74 7279 5b22  gent(new_entry["
+0001ec30: 6167 656e 7432 225d 290d 0a0d 0a20 2020  agent2"])....   
+0001ec40: 2020 2020 206d 795f 6974 656d 7320 3d20       my_items = 
+0001ec50: 5b5d 0d0a 2020 2020 2020 2020 6461 7461  []..        data
+0001ec60: 203d 206e 6577 5f65 6e74 7279 0d0a 2020   = new_entry..  
+0001ec70: 2020 2020 2020 616c 6c65 6e74 7269 6573        allentries
+0001ec80: 203d 2022 5c6e 222e 6a6f 696e 285b 6461   = "\n".join([da
+0001ec90: 7461 5b22 6c31 225d 2c20 6461 7461 5b22  ta["l1"], data["
+0001eca0: 6131 225d 2c20 6461 7461 5b22 6531 225d  a1"], data["e1"]
+0001ecb0: 2c20 6461 7461 5b22 6c32 225d 2c20 6461  , data["l2"], da
+0001ecc0: 7461 5b22 6132 225d 2c20 6461 7461 5b22  ta["a2"], data["
+0001ecd0: 6532 225d 5d29 0d0a 2020 2020 2020 2020  e2"]])..        
+0001ece0: 666f 7220 7375 625f 6974 656d 2069 6e20  for sub_item in 
+0001ecf0: 616c 6c65 6e74 7269 6573 2e73 706c 6974  allentries.split
+0001ed00: 2822 5c6e 2229 3a0d 0a20 2020 2020 2020  ("\n"):..       
+0001ed10: 2020 2020 2066 6f72 2073 7562 5f65 6e74       for sub_ent
+0001ed20: 7279 2069 6e20 7375 625f 6974 656d 2e73  ry in sub_item.s
+0001ed30: 706c 6974 2822 5c6e 2229 3a0d 0a20 2020  plit("\n"):..   
+0001ed40: 2020 2020 2020 2020 2020 2020 2065 6e74               ent
+0001ed50: 7279 203d 2073 7562 5f65 6e74 7279 2e72  ry = sub_entry.r
+0001ed60: 6570 6c61 6365 2822 2d22 2c22 2229 2e72  eplace("-","").r
+0001ed70: 6570 6c61 6365 2822 2b22 2c22 2229 2e73  eplace("+","").s
+0001ed80: 7472 6970 2829 0d0a 2020 2020 2020 2020  trip()..        
+0001ed90: 2020 2020 2020 2020 6966 2065 6e74 7279          if entry
+0001eda0: 2021 3d20 2022 223a 0d0a 2020 2020 2020   !=  "":..      
+0001edb0: 2020 2020 2020 2020 2020 2020 2020 6d79                my
+0001edc0: 5f69 7465 6d73 2e61 7070 656e 6428 656e  _items.append(en
+0001edd0: 7472 7929 0d0a 0d0a 2020 2020 2020 2020  try)....        
+0001ede0: 7365 6c66 2e64 7261 7763 616e 7661 732e  self.drawcanvas.
+0001edf0: 6164 645f 636f 6e6e 6563 7469 6f6e 2862  add_connection(b
+0001ee00: 6f78 312c 2062 6f78 322c 206e 616d 653d  ox1, box2, name=
+0001ee10: 2073 7472 2873 656c 662e 6564 6974 5368   str(self.editSh
+0001ee20: 6f72 746e 616d 652e 7465 7874 2829 292c  ortname.text()),
+0001ee30: 7375 626a 6563 743d 7365 6c66 2e65 6469  subject=self.edi
+0001ee40: 7453 7562 6a65 6374 2e74 6578 7428 292c  tSubject.text(),
+0001ee50: 6974 656d 733d 6d79 5f69 7465 6d73 290d  items=my_items).
+0001ee60: 0a0d 0a20 2020 2020 2020 206e 6577 5f65  ...        new_e
+0001ee70: 6e74 7279 5b22 756e 692d 6469 7265 6374  ntry["uni-direct
+0001ee80: 696f 6e61 6c22 5d20 3d20 5c0d 0a20 2020  ional"] = \..   
+0001ee90: 2020 2020 2020 2020 2073 7472 2873 656c           str(sel
+0001eea0: 662e 636f 6d62 6f55 6e69 6469 722e 6375  f.comboUnidir.cu
+0001eeb0: 7272 656e 7454 6578 7428 2929 0d0a 0d0a  rrentText())....
+0001eec0: 2020 2020 2020 2020 6e65 775f 656e 7472          new_entr
+0001eed0: 795b 226c 6f67 2074 7261 6e73 6163 7469  y["log transacti
+0001eee0: 6f6e 225d 203d 205c 0d0a 2020 2020 2020  on"] = \..      
+0001eef0: 2020 2020 2020 7365 6c66 2e72 6567 6973        self.regis
+0001ef00: 7465 7246 6c6f 7742 6f78 2e63 7572 7265  terFlowBox.curre
+0001ef10: 6e74 5465 7874 2829 0d0a 0d0a 2020 2020  ntText()....    
+0001ef20: 2020 2020 6e65 775f 656e 7472 795b 2263      new_entry["c
+0001ef30: 6173 6866 6c6f 7731 225d 203d 205c 0d0a  ashflow1"] = \..
+0001ef40: 2020 2020 2020 2020 2020 2020 7374 7228              str(
+0001ef50: 7365 6c66 2e63 6f6d 626f 4361 7368 4c65  self.comboCashLe
+0001ef60: 6674 2e63 7572 7265 6e74 5465 7874 2829  ft.currentText()
+0001ef70: 290d 0a20 2020 2020 2020 206e 6577 5f65  )..        new_e
+0001ef80: 6e74 7279 5b22 6361 7368 666c 6f77 3222  ntry["cashflow2"
+0001ef90: 5d20 3d20 5c0d 0a20 2020 2020 2020 2020  ] = \..         
+0001efa0: 2020 2073 7472 2873 656c 662e 636f 6d62     str(self.comb
+0001efb0: 6f43 6173 6852 6967 6874 2e63 7572 7265  oCashRight.curre
+0001efc0: 6e74 5465 7874 2829 290d 0a0d 0a20 2020  ntText())....   
+0001efd0: 2020 2020 206e 6577 5f65 6e74 7279 5b22       new_entry["
+0001efe0: 6b69 6e64 225d 203d 205c 0d0a 2020 2020  kind"] = \..    
+0001eff0: 2020 2020 2020 2020 7374 7228 7365 6c66          str(self
+0001f000: 2e65 6469 7454 7970 652e 6375 7272 656e  .editType.curren
+0001f010: 7454 6578 7428 2929 0d0a 0d0a 2020 2020  tText())....    
+0001f020: 2020 2020 6e65 775f 656e 7472 795b 2269      new_entry["i
+0001f030: 6e63 6f6d 6531 225d 203d 205c 0d0a 2020  ncome1"] = \..  
+0001f040: 2020 2020 2020 2020 2020 7374 7228 7365            str(se
+0001f050: 6c66 2e63 6f6d 626f 496e 636f 6d65 4c65  lf.comboIncomeLe
+0001f060: 6674 2e63 7572 7265 6e74 5465 7874 2829  ft.currentText()
+0001f070: 290d 0a20 2020 2020 2020 206e 6577 5f65  )..        new_e
+0001f080: 6e74 7279 5b22 696e 636f 6d65 3222 5d20  ntry["income2"] 
+0001f090: 3d20 5c0d 0a20 2020 2020 2020 2020 2020  = \..           
+0001f0a0: 2073 7472 2873 656c 662e 636f 6d62 6f49   str(self.comboI
+0001f0b0: 6e63 6f6d 6552 6967 6874 2e63 7572 7265  ncomeRight.curre
+0001f0c0: 6e74 5465 7874 2829 290d 0a0d 0a20 2020  ntText())....   
+0001f0d0: 2020 2020 206e 6577 5f65 6e74 7279 5b22       new_entry["
+0001f0e0: 7175 616e 7469 7479 225d 203d 205c 0d0a  quantity"] = \..
+0001f0f0: 2020 2020 2020 2020 2020 2020 7374 7228              str(
+0001f100: 7365 6c66 2e65 6469 7451 7561 6e74 6974  self.editQuantit
+0001f110: 792e 7465 7874 2829 290d 0a0d 0a20 2020  y.text())....   
+0001f120: 2020 2020 206e 6577 5f65 6e74 7279 5b22       new_entry["
+0001f130: 7375 626a 6563 7422 5d20 3d20 5c0d 0a20  subject"] = \.. 
+0001f140: 2020 2020 2020 2020 2020 2073 7472 2873             str(s
+0001f150: 656c 662e 6564 6974 5375 626a 6563 742e  elf.editSubject.
+0001f160: 7465 7874 2829 290d 0a0d 0a20 2020 2020  text())....     
+0001f170: 2020 206e 6577 5f65 6e74 7279 5b22 7368     new_entry["sh
+0001f180: 6f72 746e 616d 6522 5d20 3d20 5c0d 0a20  ortname"] = \.. 
+0001f190: 2020 2020 2020 2020 2020 2073 7472 2873             str(s
+0001f1a0: 656c 662e 6564 6974 5368 6f72 746e 616d  elf.editShortnam
+0001f1b0: 652e 7465 7874 2829 290d 0a0d 0a20 2020  e.text())....   
+0001f1c0: 2020 2020 206e 6577 5f65 6e74 7279 5b22       new_entry["
+0001f1d0: 6465 7363 7269 7074 696f 6e22 5d20 3d20  description"] = 
+0001f1e0: 5c0d 0a20 2020 2020 2020 2020 2020 2073  \..            s
+0001f1f0: 7472 2873 656c 662e 6564 6974 4465 7363  tr(self.editDesc
+0001f200: 7269 7074 696f 6e2e 7465 7874 2829 290d  ription.text()).
+0001f210: 0a0d 0a20 2020 2020 2020 2073 656c 662e  ...        self.
+0001f220: 656e 7472 795f 6461 7461 2e61 7070 656e  entry_data.appen
+0001f230: 6428 6e65 775f 656e 7472 7929 0d0a 2020  d(new_entry)..  
+0001f240: 2020 2020 2020 7365 6c66 2e75 7064 6174        self.updat
+0001f250: 655f 7461 626c 6528 290d 0a0d 0a0d 0a0d  e_table().......
+0001f260: 0a20 2020 2020 2020 2064 6172 6b4d 6f64  .        darkMod
+0001f270: 6520 3d20 5472 7565 0d0a 2020 2020 2020  e = True..      
+0001f280: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
+0001f290: 2020 2020 6966 2073 656c 662e 7468 656d      if self.them
+0001f2a0: 655f 6d61 6e61 6765 722e 7468 656d 6520  e_manager.theme 
+0001f2b0: 3d3d 2022 6272 6967 6874 223a 0d0a 2020  == "bright":..  
+0001f2c0: 2020 2020 2020 2020 2020 2020 2020 6461                da
+0001f2d0: 726b 4d6f 6465 203d 2046 616c 7365 0d0a  rkMode = False..
+0001f2e0: 2020 2020 2020 2020 6578 6365 7074 3a0d          except:.
+0001f2f0: 0a20 2020 2020 2020 2020 2020 2070 6173  .            pas
+0001f300: 730d 0a0d 0a20 2020 2020 2020 2074 7279  s....        try
+0001f310: 3a0d 0a20 2020 2020 2020 2020 2020 2073  :..            s
+0001f320: 656c 662e 7365 6c65 6374 696f 6e5f 6964  elf.selection_id
+0001f330: 7820 3d20 6c65 6e28 7365 6c66 2e65 6e74  x = len(self.ent
+0001f340: 7279 5f64 6174 6129 2d31 0d0a 2020 2020  ry_data)-1..    
+0001f350: 2020 2020 2020 2020 7365 6c66 2e72 6f77          self.row
+0001f360: 5f73 656c 6563 7428 7365 6c66 2e73 656c  _select(self.sel
+0001f370: 6563 7469 6f6e 5f69 6478 290d 0a20 2020  ection_idx)..   
+0001f380: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
+0001f390: 7074 696f 6e20 6173 2065 203a 0d0a 2020  ption as e :..  
+0001f3a0: 2020 2020 2020 2020 2020 7365 6c66 2e6e            self.n
+0001f3b0: 6f74 6966 7928 2245 5252 4f52 3a22 202b  otify("ERROR:" +
+0001f3c0: 2074 7228 6529 2c74 6974 6c65 3d22 4572   tr(e),title="Er
+0001f3d0: 726f 7222 290d 0a0d 0a20 2020 2020 2020  ror")....       
+0001f3e0: 2022 2222 0d0a 2020 2020 2020 2020 6966   """..        if
+0001f3f0: 2073 656c 662e 7365 6c65 6374 696f 6e5f   self.selection_
+0001f400: 6964 7820 6973 206e 6f74 204e 6f6e 653a  idx is not None:
+0001f410: 0d0a 2020 2020 2020 2020 2020 2020 666f  ..            fo
+0001f420: 7220 6920 696e 2072 616e 6765 2873 656c  r i in range(sel
+0001f430: 662e 7472 616e 7361 6374 696f 6e56 6965  f.transactionVie
+0001f440: 772e 636f 6c75 6d6e 436f 756e 7428 2929  w.columnCount())
+0001f450: 3a0d 0a0d 0a20 2020 2020 2020 2020 2020  :....           
+0001f460: 2020 2020 2069 6620 6461 726b 4d6f 6465       if darkMode
+0001f470: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0001f480: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
+0001f490: 7361 6374 696f 6e56 6965 772e 6974 656d  sactionView.item
+0001f4a0: 2873 656c 662e 7365 6c65 6374 696f 6e5f  (self.selection_
+0001f4b0: 6964 782c 2069 292e 7365 7442 6163 6b67  idx, i).setBackg
+0001f4c0: 726f 756e 6428 5174 4775 692e 5143 6f6c  round(QtGui.QCol
+0001f4d0: 6f72 2832 312c 2032 312c 2032 3129 290d  or(21, 21, 21)).
+0001f4e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001f4f0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
+0001f500: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0001f510: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
+0001f520: 2e69 7465 6d28 7365 6c66 2e73 656c 6563  .item(self.selec
+0001f530: 7469 6f6e 5f69 6478 2c20 6929 2e73 6574  tion_idx, i).set
+0001f540: 4261 636b 6772 6f75 6e64 2851 7447 7569  Background(QtGui
+0001f550: 2e51 436f 6c6f 7228 3233 332c 2032 3334  .QColor(233, 234
+0001f560: 2c20 3232 3729 290d 0a0d 0a20 2020 2020  , 227))....     
+0001f570: 2020 2020 2020 2073 656c 662e 7365 6c65         self.sele
+0001f580: 6374 696f 6e5f 6964 7820 3d20 7365 6c66  ction_idx = self
+0001f590: 2e74 7261 6e73 6163 7469 6f6e 5669 6577  .transactionView
+0001f5a0: 2e72 6f77 436f 756e 7428 292d 310d 0a20  .rowCount()-1.. 
+0001f5b0: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
+0001f5c0: 2069 6e20 7261 6e67 6528 7365 6c66 2e74   in range(self.t
+0001f5d0: 7261 6e73 6163 7469 6f6e 5669 6577 2e63  ransactionView.c
+0001f5e0: 6f6c 756d 6e43 6f75 6e74 2829 293a 0d0a  olumnCount()):..
+0001f5f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f600: 6966 2064 6172 6b4d 6f64 653a 0d0a 2020  if darkMode:..  
+0001f610: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f620: 2020 7365 6c66 2e74 7261 6e73 6163 7469    self.transacti
+0001f630: 6f6e 5669 6577 2e69 7465 6d28 7365 6c66  onView.item(self
+0001f640: 2e73 656c 6563 7469 6f6e 5f69 6478 2c20  .selection_idx, 
+0001f650: 6929 2e73 6574 4261 636b 6772 6f75 6e64  i).setBackground
+0001f660: 2851 7447 7569 2e51 436f 6c6f 7228 3138  (QtGui.QColor(18
+0001f670: 2c20 3138 2c20 3138 2929 0d0a 2020 2020  , 18, 18))..    
+0001f680: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0001f690: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+0001f6a0: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
+0001f6b0: 7361 6374 696f 6e56 6965 772e 6974 656d  sactionView.item
+0001f6c0: 2873 656c 662e 7365 6c65 6374 696f 6e5f  (self.selection_
+0001f6d0: 6964 782c 2069 292e 7365 7442 6163 6b67  idx, i).setBackg
+0001f6e0: 726f 756e 6428 5174 4775 692e 5143 6f6c  round(QtGui.QCol
+0001f6f0: 6f72 2831 3539 2c20 3135 392c 2031 3539  or(159, 159, 159
+0001f700: 2929 0d0a 2020 2020 2020 2020 2222 220d  ))..        """.
+0001f710: 0a0d 0a0d 0a0d 0a0d 0a20 2020 2064 6566  .........    def
+0001f720: 2067 6f74 6f5f 6e65 7874 2873 656c 6629   goto_next(self)
+0001f730: 3a0d 0a20 2020 2020 2020 2070 6173 730d  :..        pass.
+0001f740: 0a0d 0a0d 0a20 2020 2064 6566 2075 6470  .....    def udp
+0001f750: 6174 655f 6469 7370 6c61 7928 7365 6c66  ate_display(self
+0001f760: 293a 0d0a 2020 2020 2020 2020 7472 793a  ):..        try:
+0001f770: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0001f780: 6669 6c65 6e61 6d65 203d 2073 656c 662e  filename = self.
+0001f790: 6669 6c65 6e61 6d65 0d0a 0d0a 2020 2020  filename....    
+0001f7a0: 2020 2020 2020 2020 7769 7468 206f 7065          with ope
+0001f7b0: 6e28 6669 6c65 6e61 6d65 2c20 2772 2729  n(filename, 'r')
+0001f7c0: 2061 7320 7374 7265 616d 3a0d 0a20 2020   as stream:..   
+0001f7d0: 2020 2020 2020 2020 2020 2020 2066 696c               fil
+0001f7e0: 6564 6174 6120 3d20 7961 6d6c 2e73 6166  edata = yaml.saf
+0001f7f0: 655f 6c6f 6164 2873 7472 6561 6d29 0d0a  e_load(stream)..
+0001f800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001f810: 7072 696e 7428 6669 6c65 6461 7461 290d  print(filedata).
+0001f820: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001f830: 2020 2073 656c 662e 6167 656e 7431 4c61     self.agent1La
+0001f840: 6265 6c2e 7465 7874 203d 2066 696c 6564  bel.text = filed
+0001f850: 6174 615b 2261 6765 6e74 3122 5d0d 0a20  ata["agent1"].. 
+0001f860: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+0001f870: 656c 662e 6167 656e 7432 4c61 6265 6c2e  elf.agent2Label.
+0001f880: 7465 7874 203d 2066 696c 6564 6174 615b  text = filedata[
+0001f890: 2261 6765 6e74 3222 5d0d 0a0d 0a20 2020  "agent2"]....   
+0001f8a0: 2020 2020 2020 2020 2020 2020 2023 2073               # s
+0001f8b0: 656c 662e 6131 2e76 616c 7565 203d 2066  elf.a1.value = f
+0001f8c0: 696c 6564 6174 615b 2261 3122 5d20 2023  iledata["a1"]  #
+0001f8d0: 202b 2022 5c6e 220d 0a20 2020 2020 2020   + "\n"..       
+0001f8e0: 2020 2020 2020 2020 2023 2073 656c 662e           # self.
+0001f8f0: 6531 2e76 616c 7565 203d 2066 696c 6564  e1.value = filed
+0001f900: 6174 615b 2265 3122 5d20 2023 202b 2022  ata["e1"]  # + "
+0001f910: 5c6e 220d 0a20 2020 2020 2020 2020 2020  \n"..           
+0001f920: 2020 2020 2023 2073 656c 662e 6c31 2e76       # self.l1.v
+0001f930: 616c 7565 203d 2066 696c 6564 6174 615b  alue = filedata[
+0001f940: 226c 3122 5d20 2023 202b 2022 5c6e 220d  "l1"]  # + "\n".
+0001f950: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001f960: 2023 2073 656c 662e 6132 2e76 616c 7565   # self.a2.value
+0001f970: 203d 2066 696c 6564 6174 615b 2261 3222   = filedata["a2"
+0001f980: 5d20 2023 202b 2022 5c6e 220d 0a20 2020  ]  # + "\n"..   
+0001f990: 2020 2020 2020 2020 2020 2020 2023 2073               # s
+0001f9a0: 656c 662e 6532 2e76 616c 7565 203d 2066  elf.e2.value = f
+0001f9b0: 696c 6564 6174 615b 2265 3222 5d20 2023  iledata["e2"]  #
+0001f9c0: 202b 2022 5c6e 220d 0a20 2020 2020 2020   + "\n"..       
+0001f9d0: 2020 2020 2020 2020 2023 2073 656c 662e           # self.
+0001f9e0: 6c32 2e76 616c 7565 203d 2066 696c 6564  l2.value = filed
+0001f9f0: 6174 615b 226c 3222 5d20 2023 202b 2022  ata["l2"]  # + "
+0001fa00: 5c6e 220d 0a0d 0a20 2020 2020 2020 2020  \n"....         
+0001fa10: 2020 2020 2020 2023 2069 6620 2273 686f         # if "sho
+0001fa20: 7274 6e61 6d65 2220 696e 2066 696c 6564  rtname" in filed
+0001fa30: 6174 613a 0d0a 2020 2020 2020 2020 2020  ata:..          
+0001fa40: 2020 2020 2020 2320 2020 2073 656c 662e        #    self.
+0001fa50: 7061 7265 6e74 2e73 686f 7274 6e61 6d65  parent.shortname
+0001fa60: 2e76 616c 7565 203d 2066 696c 6564 6174  .value = filedat
+0001fa70: 615b 2273 686f 7274 6e61 6d65 225d 0d0a  a["shortname"]..
+0001fa80: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001fa90: 2020 2320 6966 2022 756e 692d 6469 7265    # if "uni-dire
+0001faa0: 6374 696f 6e61 6c22 2069 6e20 6669 6c65  ctional" in file
+0001fab0: 6461 7461 3a0d 0a20 2020 2020 2020 2020  data:..         
+0001fac0: 2020 2020 2020 2023 2020 2020 7365 6c66         #    self
+0001fad0: 2e70 6172 656e 742e 6469 7265 6374 696f  .parent.directio
+0001fae0: 6e5f 6368 6563 6b2e 7661 6c75 6520 3d20  n_check.value = 
+0001faf0: 626f 6f6c 2873 7472 2866 696c 6564 6174  bool(str(filedat
+0001fb00: 615b 2275 6e69 2d64 6972 6563 7469 6f6e  a["uni-direction
+0001fb10: 616c 225d 2929 0d0a 2020 2020 2020 2020  al"]))..        
+0001fb20: 2020 2020 2020 2020 2320 656c 7365 3a0d          # else:.
+0001fb30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001fb40: 2023 2020 2020 7365 6c66 2e70 6172 656e   #    self.paren
+0001fb50: 742e 6469 7265 6374 696f 6e5f 6368 6563  t.direction_chec
+0001fb60: 6b2e 7661 6c75 6520 3d20 4661 6c73 650d  k.value = False.
+0001fb70: 0a0d 0a20 2020 2020 2020 2020 2020 2020  ...             
+0001fb80: 2020 2023 2069 6620 2264 6573 6372 6970     # if "descrip
+0001fb90: 7469 6f6e 2220 696e 2066 696c 6564 6174  tion" in filedat
+0001fba0: 613a 0d0a 2020 2020 2020 2020 2020 2020  a:..            
+0001fbb0: 2020 2020 2320 2020 2073 656c 662e 7061      #    self.pa
+0001fbc0: 7265 6e74 2e64 6573 6372 6970 7469 6f6e  rent.description
+0001fbd0: 2e76 616c 7565 203d 2066 696c 6564 6174  .value = filedat
+0001fbe0: 615b 2264 6573 6372 6970 7469 6f6e 225d  a["description"]
+0001fbf0: 0d0a 0d0a 2020 2020 2020 2020 2020 2020  ....            
+0001fc00: 2020 2020 2320 7365 6c66 2e70 6172 656e      # self.paren
+0001fc10: 742e 666c 6f77 5f63 6865 636b 2e76 616c  t.flow_check.val
+0001fc20: 7565 203d 2066 696c 6564 6174 615b 226c  ue = filedata["l
+0001fc30: 6f67 2074 7261 6e73 6163 7469 6f6e 225d  og transaction"]
+0001fc40: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001fc50: 2020 2320 7365 6c66 2e70 6172 656e 742e    # self.parent.
+0001fc60: 6b69 6e64 2e76 616c 7565 203d 2066 696c  kind.value = fil
+0001fc70: 6564 6174 615b 226b 696e 6422 5d0d 0a20  edata["kind"].. 
+0001fc80: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0001fc90: 2073 656c 662e 7061 7265 6e74 2e73 7562   self.parent.sub
+0001fca0: 6a65 6374 2e76 616c 7565 203d 2066 696c  ject.value = fil
+0001fcb0: 6564 6174 615b 2273 7562 6a65 6374 225d  edata["subject"]
+0001fcc0: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+0001fcd0: 2020 2320 7365 6c66 2e70 6172 656e 742e    # self.parent.
+0001fce0: 7175 616e 7469 7479 2e76 616c 7565 203d  quantity.value =
+0001fcf0: 2066 696c 6564 6174 615b 2271 7561 6e74   filedata["quant
+0001fd00: 6974 7922 5d0d 0a0d 0a20 2020 2020 2020  ity"]....       
+0001fd10: 2020 2020 2020 2020 2074 7279 3a0d 0a20           try:.. 
+0001fd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fd30: 2020 2023 205b 224e 6f6e 6522 2c22 5265     # ["None","Re
+0001fd40: 7665 6e75 6522 2c22 4578 7065 6e73 6522  venue","Expense"
+0001fd50: 2c22 4761 696e 222c 224c 6f73 7322 2c22  ,"Gain","Loss","
+0001fd60: 5461 7822 5d0d 0a0d 0a20 2020 2020 2020  Tax"]....       
+0001fd70: 2020 2020 2020 2020 2020 2020 206d 795f               my_
+0001fd80: 6469 6374 203d 207b 0d0a 2020 2020 2020  dict = {..      
 0001fd90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fda0: 2020 2320 7365 6c66 2e70 6172 656e 742e    # self.parent.
-0001fdb0: 6361 7368 666c 6f77 322e 7661 6c75 6520  cashflow2.value 
-0001fdc0: 3d20 5b66 696c 6564 6174 615b 2263 6173  = [filedata["cas
-0001fdd0: 6866 6c6f 7732 225d 5d0d 0a0d 0a20 2020  hflow2"]]....   
-0001fde0: 2020 2020 2020 2020 2020 2020 2065 7863               exc
-0001fdf0: 6570 743a 0d0a 2020 2020 2020 2020 2020  ept:..          
-0001fe00: 2020 2020 2020 2020 2020 7061 7373 0d0a            pass..
-0001fe10: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
-0001fe20: 2020 2373 656c 662e 7061 7265 6e74 2e64    #self.parent.d
-0001fe30: 6973 706c 6179 2829 0d0a 0d0a 2020 2020  isplay()....    
-0001fe40: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
-0001fe50: 7469 6f6e 2061 7320 653a 0d0a 2020 2020  tion as e:..    
-0001fe60: 2020 2020 2020 2020 7072 696e 7428 7374          print(st
-0001fe70: 7228 6529 2920 2320 7365 6c66 2e6e 6f74  r(e)) # self.not
-0001fe80: 6966 7928 7374 7228 6529 2c22 4578 6365  ify(str(e),"Exce
-0001fe90: 7074 696f 6e22 2920 3c20 7468 6973 2073  ption") < this s
-0001fea0: 686f 756c 6420 6e6f 7420 7468 726f 7720  hould not throw 
-0001feb0: 616e 2065 7863 6570 7469 6f6e 0d0a 0d0a  an exception....
-0001fec0: 0d0a 0d0a 6465 6620 7275 6e5f 6170 7028  ....def run_app(
-0001fed0: 293a 0d0a 2020 2020 2320 7275 6e73 2074  ):..    # runs t
-0001fee0: 6865 206d 6169 6e20 6170 706c 6963 6174  he main applicat
-0001fef0: 696f 6e20 7769 6e64 6f77 0d0a 0d0a 2020  ion window....  
-0001ff00: 2020 6170 7020 3d20 5174 5769 6467 6574    app = QtWidget
-0001ff10: 732e 5141 7070 6c69 6361 7469 6f6e 2873  s.QApplication(s
-0001ff20: 7973 2e61 7267 7629 0d0a 0d0a 2020 2020  ys.argv)....    
-0001ff30: 2320 7069 786d 6170 203d 2051 5069 786d  # pixmap = QPixm
-0001ff40: 6170 2822 2e2f 7370 6c61 7368 2e70 6e67  ap("./splash.png
-0001ff50: 2229 0d0a 2020 2020 2320 7370 6c61 7368  ")..    # splash
-0001ff60: 203d 2051 5370 6c61 7368 5363 7265 656e   = QSplashScreen
-0001ff70: 2870 6978 6d61 7029 0d0a 2020 2020 2320  (pixmap)..    # 
-0001ff80: 7370 6c61 7368 2e73 686f 7728 290d 0a0d  splash.show()...
-0001ff90: 0a20 2020 2023 2061 7070 2e73 6574 5374  .    # app.setSt
-0001ffa0: 796c 6528 2746 7573 696f 6e27 290d 0a0d  yle('Fusion')...
-0001ffb0: 0a20 2020 2077 696e 646f 7720 3d20 5472  .    window = Tr
-0001ffc0: 616e 7361 6374 696f 6e44 6573 6967 6e65  ansactionDesigne
-0001ffd0: 7228 290d 0a20 2020 2023 2073 706c 6173  r()..    # splas
-0001ffe0: 682e 6669 6e69 7368 2877 696e 646f 7729  h.finish(window)
-0001fff0: 0d0a 0d0a 2020 2020 2320 7365 7475 7020  ....    # setup 
-00020000: 7374 796c 6573 6865 6574 0d0a 2020 2020  stylesheet..    
-00020010: 2320 6170 706c 795f 7374 796c 6573 6865  # apply_styleshe
-00020020: 6574 2861 7070 2c20 7468 656d 653d 2764  et(app, theme='d
-00020030: 6172 6b5f 7465 616c 2e78 6d6c 272c 2069  ark_teal.xml', i
-00020040: 6e76 6572 745f 7365 636f 6e64 6172 793d  nvert_secondary=
-00020050: 5472 7565 290d 0a20 2020 2023 2061 7070  True)..    # app
-00020060: 6c79 5f73 7479 6c65 7368 6565 7428 7769  ly_stylesheet(wi
-00020070: 6e64 6f77 2c20 7468 656d 653d 2764 6172  ndow, theme='dar
-00020080: 6b5f 7465 616c 2e78 6d6c 272c 2069 6e76  k_teal.xml', inv
-00020090: 6572 745f 7365 636f 6e64 6172 793d 5472  ert_secondary=Tr
-000200a0: 7565 290d 0a20 2020 200d 0a20 2020 2077  ue)..    ..    w
-000200b0: 696e 646f 772e 7368 6f77 2829 0d0a 2020  indow.show()..  
-000200c0: 2020 7769 6e64 6f77 2e73 7769 7463 685f    window.switch_
-000200d0: 7468 656d 6528 290d 0a20 2020 2077 696e  theme()..    win
-000200e0: 646f 772e 7377 6974 6368 5f74 6865 6d65  dow.switch_theme
-000200f0: 2829 0d0a 0d0a 2020 2020 6170 702e 6578  ()....    app.ex
-00020100: 6563 5f28 290d 0a0d 0a20 2020 0d0a 0d0a  ec_()....   ....
-00020110: 0d0a 0d0a 6966 205f 5f6e 616d 655f 5f20  ....if __name__ 
-00020120: 3d3d 2022 5f5f 6d61 696e 5f5f 223a 0d0a  == "__main__":..
-00020130: 0d0a 2020 2020 7275 6e5f 6170 7028 290d  ..    run_app().
-00020140: 0a                                       .
+0001fda0: 2020 224e 6f6e 6522 3a20 302c 0d0a 2020    "None": 0,..  
+0001fdb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fdc0: 2020 2020 2020 2252 6576 656e 7565 223a        "Revenue":
+0001fdd0: 2031 2c0d 0a20 2020 2020 2020 2020 2020   1,..           
+0001fde0: 2020 2020 2020 2020 2020 2020 2022 4578               "Ex
+0001fdf0: 7065 6e73 6522 3a20 322c 0d0a 2020 2020  pense": 2,..    
+0001fe00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fe10: 2020 2020 2247 6169 6e22 3a20 332c 0d0a      "Gain": 3,..
+0001fe20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fe30: 2020 2020 2020 2020 224c 6f73 7322 3a20          "Loss": 
+0001fe40: 342c 0d0a 2020 2020 2020 2020 2020 2020  4,..            
+0001fe50: 2020 2020 2020 2020 2020 2020 2249 6e74              "Int
+0001fe60: 6572 6573 7422 3a20 352c 0d0a 2020 2020  erest": 5,..    
+0001fe70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fe80: 2020 2020 224e 6f6e 2d4f 702e 2049 6e63      "Non-Op. Inc
+0001fe90: 6f6d 6522 3a20 362c 0d0a 2020 2020 2020  ome": 6,..      
+0001fea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001feb0: 2020 2254 6178 223a 2037 2c0d 0a20 2020    "Tax": 7,..   
+0001fec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fed0: 2020 2020 2022 4e6f 6e74 6178 2e20 5072       "Nontax. Pr
+0001fee0: 6f66 6974 223a 2038 2c0d 0a20 2020 2020  ofit": 8,..     
+0001fef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ff00: 2020 2022 4e6f 6e74 6178 2e20 4c6f 7373     "Nontax. Loss
+0001ff10: 223a 2039 0d0a 2020 2020 2020 2020 2020  ": 9..          
+0001ff20: 2020 2020 2020 2020 2020 7d0d 0a0d 0a20            }.... 
+0001ff30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ff40: 2020 2023 2073 656c 662e 7061 7265 6e74     # self.parent
+0001ff50: 2e69 6e63 6f6d 6531 2e76 616c 7565 203d  .income1.value =
+0001ff60: 205b 6d79 5f64 6963 745b 6669 6c65 6461   [my_dict[fileda
+0001ff70: 7461 5b22 696e 636f 6d65 3122 5d5d 5d0d  ta["income1"]]].
+0001ff80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ff90: 2020 2020 2023 2073 656c 662e 7061 7265       # self.pare
+0001ffa0: 6e74 2e69 6e63 6f6d 6532 2e76 616c 7565  nt.income2.value
+0001ffb0: 203d 205b 6d79 5f64 6963 745b 6669 6c65   = [my_dict[file
+0001ffc0: 6461 7461 5b22 696e 636f 6d65 3222 5d5d  data["income2"]]
+0001ffd0: 5d0d 0a0d 0a20 2020 2020 2020 2020 2020  ]....           
+0001ffe0: 2020 2020 2020 2020 2023 2073 656c 662e           # self.
+0001fff0: 7061 7265 6e74 2e63 6173 6866 6c6f 7731  parent.cashflow1
+00020000: 2e76 616c 7565 203d 205b 6669 6c65 6461  .value = [fileda
+00020010: 7461 5b22 6361 7368 666c 6f77 3122 5d5d  ta["cashflow1"]]
+00020020: 0d0a 2020 2020 2020 2020 2020 2020 2020  ..              
+00020030: 2020 2020 2020 2320 7365 6c66 2e70 6172        # self.par
+00020040: 656e 742e 6361 7368 666c 6f77 322e 7661  ent.cashflow2.va
+00020050: 6c75 6520 3d20 5b66 696c 6564 6174 615b  lue = [filedata[
+00020060: 2263 6173 6866 6c6f 7732 225d 5d0d 0a0d  "cashflow2"]]...
+00020070: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00020080: 2065 7863 6570 743a 0d0a 2020 2020 2020   except:..      
+00020090: 2020 2020 2020 2020 2020 2020 2020 7061                pa
+000200a0: 7373 0d0a 0d0a 2020 2020 2020 2020 2020  ss....          
+000200b0: 2020 2020 2020 2373 656c 662e 7061 7265        #self.pare
+000200c0: 6e74 2e64 6973 706c 6179 2829 0d0a 0d0a  nt.display()....
+000200d0: 2020 2020 2020 2020 6578 6365 7074 2045          except E
+000200e0: 7863 6570 7469 6f6e 2061 7320 653a 0d0a  xception as e:..
+000200f0: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00020100: 7428 7374 7228 6529 2920 2320 7365 6c66  t(str(e)) # self
+00020110: 2e6e 6f74 6966 7928 7374 7228 6529 2c22  .notify(str(e),"
+00020120: 4578 6365 7074 696f 6e22 2920 3c20 7468  Exception") < th
+00020130: 6973 2073 686f 756c 6420 6e6f 7420 7468  is should not th
+00020140: 726f 7720 616e 2065 7863 6570 7469 6f6e  row an exception
+00020150: 0d0a 0d0a 0d0a 0d0a 6465 6620 7275 6e5f  ........def run_
+00020160: 6170 7028 293a 0d0a 2020 2020 2320 7275  app():..    # ru
+00020170: 6e73 2074 6865 206d 6169 6e20 6170 706c  ns the main appl
+00020180: 6963 6174 696f 6e20 7769 6e64 6f77 0d0a  ication window..
+00020190: 0d0a 2020 2020 6170 7020 3d20 5174 5769  ..    app = QtWi
+000201a0: 6467 6574 732e 5141 7070 6c69 6361 7469  dgets.QApplicati
+000201b0: 6f6e 2873 7973 2e61 7267 7629 0d0a 0d0a  on(sys.argv)....
+000201c0: 2020 2020 2320 7069 786d 6170 203d 2051      # pixmap = Q
+000201d0: 5069 786d 6170 2822 2e2f 7370 6c61 7368  Pixmap("./splash
+000201e0: 2e70 6e67 2229 0d0a 2020 2020 2320 7370  .png")..    # sp
+000201f0: 6c61 7368 203d 2051 5370 6c61 7368 5363  lash = QSplashSc
+00020200: 7265 656e 2870 6978 6d61 7029 0d0a 2020  reen(pixmap)..  
+00020210: 2020 2320 7370 6c61 7368 2e73 686f 7728    # splash.show(
+00020220: 290d 0a0d 0a20 2020 2023 2061 7070 2e73  )....    # app.s
+00020230: 6574 5374 796c 6528 2746 7573 696f 6e27  etStyle('Fusion'
+00020240: 290d 0a0d 0a20 2020 2077 696e 646f 7720  )....    window 
+00020250: 3d20 5472 616e 7361 6374 696f 6e44 6573  = TransactionDes
+00020260: 6967 6e65 7228 290d 0a20 2020 2023 2073  igner()..    # s
+00020270: 706c 6173 682e 6669 6e69 7368 2877 696e  plash.finish(win
+00020280: 646f 7729 0d0a 0d0a 2020 2020 2320 7365  dow)....    # se
+00020290: 7475 7020 7374 796c 6573 6865 6574 0d0a  tup stylesheet..
+000202a0: 2020 2020 2320 6170 706c 795f 7374 796c      # apply_styl
+000202b0: 6573 6865 6574 2861 7070 2c20 7468 656d  esheet(app, them
+000202c0: 653d 2764 6172 6b5f 7465 616c 2e78 6d6c  e='dark_teal.xml
+000202d0: 272c 2069 6e76 6572 745f 7365 636f 6e64  ', invert_second
+000202e0: 6172 793d 5472 7565 290d 0a20 2020 2023  ary=True)..    #
+000202f0: 2061 7070 6c79 5f73 7479 6c65 7368 6565   apply_styleshee
+00020300: 7428 7769 6e64 6f77 2c20 7468 656d 653d  t(window, theme=
+00020310: 2764 6172 6b5f 7465 616c 2e78 6d6c 272c  'dark_teal.xml',
+00020320: 2069 6e76 6572 745f 7365 636f 6e64 6172   invert_secondar
+00020330: 793d 5472 7565 290d 0a0d 0a20 2020 2077  y=True)....    w
+00020340: 696e 646f 772e 7368 6f77 2829 0d0a 2020  indow.show()..  
+00020350: 2020 7769 6e64 6f77 2e73 7769 7463 685f    window.switch_
+00020360: 7468 656d 6528 290d 0a20 2020 2077 696e  theme()..    win
+00020370: 646f 772e 7377 6974 6368 5f74 6865 6d65  dow.switch_theme
+00020380: 2829 0d0a 0d0a 2020 2020 6170 702e 6578  ()....    app.ex
+00020390: 6563 5f28 290d 0a0d 0a0d 0a0d 0a0d 0a0d  ec_()...........
+000203a0: 0a69 6620 5f5f 6e61 6d65 5f5f 203d 3d20  .if __name__ == 
+000203b0: 225f 5f6d 6169 6e5f 5f22 3a0d 0a0d 0a20  "__main__":.... 
+000203c0: 2020 2072 756e 5f61 7070 2829 0d0a          run_app()..
```

### Comparing `sfctools-1.0.5.1/sfctools/gui/attune/src/resources.py` & `sfctools-1.0.5.2/sfctools/gui/attune/src/resources.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/attune/src/settings_edit.ui` & `sfctools-1.0.5.2/sfctools/gui/attune/src/settings_edit.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/attune/src/simulation_edit.ui` & `sfctools-1.0.5.2/sfctools/gui/attune/src/simulation_edit.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/attune/src/styles/bright/main.txt` & `sfctools-1.0.5.2/sfctools/gui/attune/src/styles/bright/main.txt`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/attune/src/styles/dark/background.txt` & `sfctools-1.0.5.2/sfctools/gui/attune/src/styles/dark/background.txt`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/attune/src/styles/dark/main.txt` & `sfctools-1.0.5.2/sfctools/gui/attune/src/styles/dark/main.txt`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/attune/src/theme_manager.py` & `sfctools-1.0.5.2/sfctools/gui/attune/src/theme_manager.py`

 * *Files 0% similar despite different names*

```diff
@@ -68,15 +68,15 @@
             "dark": self.dark_theme,
             "bright": self.bright_theme
         }
         self.restore_buttons()
         self.parent.update()
 
 
-    def load_colors(self,filename=None):
+    def load_colors(self, filename=None):
         if filename is None:
             filename = QFileDialog.getOpenFileName(self.parent, 'Open file',os.getcwd(), "Attune Theme Files (*.sfctheme)")[0]
 
         if filename is not None and filename != "":
 
             success = False
             try:
```

### Comparing `sfctools-1.0.5.1/sfctools/gui/attune/src/transaction_designer_mainwindow.ui` & `sfctools-1.0.5.2/sfctools/gui/attune/src/transaction_designer_mainwindow.ui`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/attune/src/yaml_editor.py` & `sfctools-1.0.5.2/sfctools/gui/attune/src/yaml_editor.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/CLA.pdf` & `sfctools-1.0.5.2/sfctools/gui/CLA.pdf`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/CONTRIBUTING.md` & `sfctools-1.0.5.2/sfctools/gui/CONTRIBUTING.md`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/LICENSE` & `sfctools-1.0.5.2/sfctools/gui/LICENSE`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/gui/README.md` & `sfctools-1.0.5.2/sfctools/gui/README.md`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/misc/mpl_plotting.py` & `sfctools-1.0.5.2/sfctools/misc/mpl_plotting.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/misc/reporting_sheet.py` & `sfctools-1.0.5.2/sfctools/misc/reporting_sheet.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/sfctools/misc/timeseries.py` & `sfctools-1.0.5.2/sfctools/misc/timeseries.py`

 * *Files identical despite different names*

### Comparing `sfctools-1.0.5.1/setup.py` & `sfctools-1.0.5.2/setup.py`

 * *Files 6% similar despite different names*

```diff
@@ -17,15 +17,14 @@
  'sfctools.gui',
  'sfctools.gui.attune',
  'sfctools.gui.attune.src',
  'sfctools.misc']
 
 package_data = \
 {'': ['*'],
- 'sfctools': ['.pytest_cache/*', '.pytest_cache/v/cache/*'],
  'sfctools.examples': ['exampleabm/data/processed/*',
                        'exampleabm/data/raw/*',
                        'exampleabm/figures/*',
                        'monte_carlo/result/*'],
  'sfctools.gui': ['attune/src/styles/bright/*', 'attune/src/styles/dark/*']}
 
 install_requires = \
@@ -45,15 +44,15 @@
  'scipy>1.9.1',
  'seaborn',
  'setuptools>=50.0.0',
  'sympy>=1.10.0']
 
 setup_kwargs = {
     'name': 'sfctools',
-    'version': '1.0.5.1',
+    'version': '1.0.5.2',
     'description': 'Framework for stock-flow consistent agent-based modeling, being developed at the German Aerospace Center (DLR) for and in the scientific context of energy systems analysis, however, it is widely applicable in other scientific fields.',
     'long_description': '# sfctools - A toolbox for stock-flow consistent, agent-based models\n\nSfctools is a lightweight and easy-to-use Python framework for agent-based macroeconomic, stock-flow consistent (ABM-SFC) modeling. It concentrates on agents in economics and helps you to construct agents, helps you to manage and document your model parameters, assures stock-flow consistency, and facilitates basic economic data structures (such as the balance sheet).\n\n\n## Installation\n\nWe recommend to install sfctools in a fresh Python 3.8 environment. For example, with conda, do\n\n    conda create --name sfcenv python=3.8\n    conda activate sfcenv\n    conda install pip\n\nThen, in a terminal of your choice, type:\n\n    pip install sfctools\n\nsee https://pypi.org/project/sfctools/\n\n## Usage with Graphical User Interface \'Attune\'\n\nType\n\n    python -m sfctools attune\n\nto start the GUI.\n\n## Usage inside Python\n\n```console\nfrom sfctools import Agent,World\nclass MyAgent(Agent):\n    def __init__(self, a):\n        super().__init__(self)\n        self.some_attribute = a\nmy_agent = MyAgent()\nprint(my_agent)\nprint(World().get_agents_of_type("MyAgent"))\n```\n\n## Running examples\n\n\n\n\n| Author Thomas Baldauf, German Aerospace Center (DLR), Curiestr. 4 70563 Stuttgart | thomas.baldauf@dlr.de |\n',
     'author': 'Thomas Baldauf',
     'author_email': 'thomas.baldauf@dlr.de',
     'maintainer': 'Thomas Baldauf, Benjamin Fuchs',
     'maintainer_email': 'thomas.baldauf@dlr.de, benjamin.fuchs@dlr.de',
     'url': 'https://gitlab.com/dlr-ve/esy/sfctools/framework',
```

### Comparing `sfctools-1.0.5.1/PKG-INFO` & `sfctools-1.0.5.2/PKG-INFO`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: sfctools
-Version: 1.0.5.1
+Version: 1.0.5.2
 Summary: Framework for stock-flow consistent agent-based modeling, being developed at the German Aerospace Center (DLR) for and in the scientific context of energy systems analysis, however, it is widely applicable in other scientific fields.
 Home-page: https://gitlab.com/dlr-ve/esy/sfctools/framework
 License: MIT
 Keywords: stock-flow-consistent,agent-based,agent,macroeconomics,computational economics
 Author: Thomas Baldauf
 Author-email: thomas.baldauf@dlr.de
 Maintainer: Thomas Baldauf, Benjamin Fuchs
@@ -13,15 +13,14 @@
 Classifier: License :: OSI Approved :: MIT License
 Classifier: Programming Language :: Python :: 3
 Classifier: Programming Language :: Python :: 3.6
 Classifier: Programming Language :: Python :: 3.7
 Classifier: Programming Language :: Python :: 3.8
 Classifier: Programming Language :: Python :: 3.9
 Classifier: Programming Language :: Python :: 3.10
-Classifier: Programming Language :: Python :: 3.11
 Requires-Dist: PyQt5 (>=5.9)
 Requires-Dist: attrs
 Requires-Dist: graphviz
 Requires-Dist: matplotlib (>=2.0.0)
 Requires-Dist: networkx (>=2.2)
 Requires-Dist: numpy
 Requires-Dist: openpyxl
```

