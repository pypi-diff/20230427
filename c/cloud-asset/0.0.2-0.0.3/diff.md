# Comparing `tmp/cloud_asset-0.0.2-py3-none-any.whl.zip` & `tmp/cloud_asset-0.0.3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,36 +1,36 @@
-Zip file size: 37607 bytes, number of entries: 34
+Zip file size: 38995 bytes, number of entries: 34
 -rw-rw-rw-  2.0 fat      102 b- defN 23-Jan-11 08:03 asset/__init__.py
--rw-rw-rw-  2.0 fat      780 b- defN 23-Jan-30 01:42 asset/asset_register.py
+-rw-rw-rw-  2.0 fat      863 b- defN 23-Apr-24 03:08 asset/asset_register.py
 -rw-rw-rw-  2.0 fat     3680 b- defN 23-Feb-09 07:04 asset/asset_table.py
--rw-rw-rw-  2.0 fat    14028 b- defN 23-Apr-18 08:35 asset/base.py
--rw-rw-rw-  2.0 fat     3125 b- defN 23-Apr-10 10:58 asset/cli.py
--rw-rw-rw-  2.0 fat     3044 b- defN 23-Apr-10 10:58 asset/commands.py
--rw-rw-rw-  2.0 fat     2550 b- defN 23-Apr-10 12:07 asset/conf.py
+-rw-rw-rw-  2.0 fat    16941 b- defN 23-Apr-27 03:27 asset/base.py
+-rw-rw-rw-  2.0 fat     3179 b- defN 23-Apr-26 06:24 asset/cli.py
+-rw-rw-rw-  2.0 fat     3068 b- defN 23-Apr-27 07:03 asset/commands.py
+-rw-rw-rw-  2.0 fat     3236 b- defN 23-Apr-26 09:11 asset/conf.py
 -rw-rw-rw-  2.0 fat      545 b- defN 23-Jan-30 08:11 asset/ctx.py
 -rw-rw-rw-  2.0 fat      286 b- defN 23-Jan-30 01:42 asset/exceptions.py
--rw-rw-rw-  2.0 fat     1437 b- defN 23-Feb-10 08:26 asset/schema.py
--rw-rw-rw-  2.0 fat     2821 b- defN 23-Apr-17 02:07 asset/tools.py
--rw-rw-rw-  2.0 fat     4532 b- defN 23-Apr-10 10:58 asset/utils.py
+-rw-rw-rw-  2.0 fat     1581 b- defN 23-Apr-23 09:08 asset/schema.py
+-rw-rw-rw-  2.0 fat     1500 b- defN 23-Apr-26 08:45 asset/tools.py
+-rw-rw-rw-  2.0 fat     6817 b- defN 23-Apr-27 07:02 asset/utils.py
 -rw-rw-rw-  2.0 fat      136 b- defN 22-Dec-30 07:13 asset/aliyun/__init__.py
--rw-rw-rw-  2.0 fat    10094 b- defN 23-Apr-17 06:51 asset/aliyun/ecs.py
+-rw-rw-rw-  2.0 fat    13364 b- defN 23-Apr-27 06:20 asset/aliyun/ecs.py
 -rw-rw-rw-  2.0 fat      167 b- defN 23-Apr-10 10:58 asset/aws/__init__.py
 -rw-rw-rw-  2.0 fat     4878 b- defN 23-Apr-10 10:58 asset/aws/cloudwatch.py
 -rw-rw-rw-  2.0 fat    11132 b- defN 23-Apr-14 07:50 asset/aws/ec2.py
 -rw-rw-rw-  2.0 fat     3055 b- defN 23-Apr-10 10:58 asset/aws/elb.py
 -rw-rw-rw-  2.0 fat     8620 b- defN 23-Apr-10 10:58 asset/aws/elb_v2.py
 -rw-rw-rw-  2.0 fat     9638 b- defN 23-Feb-10 09:11 asset/aws/rds.py
 -rw-rw-rw-  2.0 fat     3172 b- defN 23-Feb-09 08:29 asset/aws/s3.py
 -rw-rw-rw-  2.0 fat      170 b- defN 23-Apr-10 10:58 asset/tencent/__init__.py
 -rw-rw-rw-  2.0 fat     2901 b- defN 23-Apr-10 10:58 asset/tencent/cdb_mysql.py
 -rw-rw-rw-  2.0 fat     2309 b- defN 23-Apr-10 10:58 asset/tencent/clb.py
 -rw-rw-rw-  2.0 fat     1804 b- defN 23-Apr-10 10:58 asset/tencent/cos.py
 -rw-rw-rw-  2.0 fat     2242 b- defN 23-Apr-10 10:58 asset/tencent/cvm.py
 -rw-rw-rw-  2.0 fat     3279 b- defN 23-Apr-10 10:58 asset/tencent/monitor.py
 -rw-rw-rw-  2.0 fat    11514 b- defN 23-Apr-17 06:58 asset/tencent/vpc.py
--rw-rw-rw-  2.0 fat    11558 b- defN 23-Apr-18 08:49 cloud_asset-0.0.2.dist-info/LICENSE
--rw-rw-rw-  2.0 fat      739 b- defN 23-Apr-18 08:49 cloud_asset-0.0.2.dist-info/METADATA
--rw-rw-rw-  2.0 fat       92 b- defN 23-Apr-18 08:49 cloud_asset-0.0.2.dist-info/WHEEL
--rw-rw-rw-  2.0 fat       47 b- defN 23-Apr-18 08:49 cloud_asset-0.0.2.dist-info/entry_points.txt
--rw-rw-rw-  2.0 fat        6 b- defN 23-Apr-18 08:49 cloud_asset-0.0.2.dist-info/top_level.txt
--rw-rw-r--  2.0 fat     2610 b- defN 23-Apr-18 08:49 cloud_asset-0.0.2.dist-info/RECORD
-34 files, 127093 bytes uncompressed, 33529 bytes compressed:  73.6%
+-rw-rw-rw-  2.0 fat    11558 b- defN 23-Apr-27 07:47 cloud_asset-0.0.3.dist-info/LICENSE
+-rw-rw-rw-  2.0 fat      739 b- defN 23-Apr-27 07:47 cloud_asset-0.0.3.dist-info/METADATA
+-rw-rw-rw-  2.0 fat       92 b- defN 23-Apr-27 07:47 cloud_asset-0.0.3.dist-info/WHEEL
+-rw-rw-rw-  2.0 fat       47 b- defN 23-Apr-27 07:47 cloud_asset-0.0.3.dist-info/entry_points.txt
+-rw-rw-rw-  2.0 fat        6 b- defN 23-Apr-27 07:47 cloud_asset-0.0.3.dist-info/top_level.txt
+-rw-rw-r--  2.0 fat     2610 b- defN 23-Apr-27 07:47 cloud_asset-0.0.3.dist-info/RECORD
+34 files, 135231 bytes uncompressed, 34917 bytes compressed:  74.2%
```

## zipnote {}

```diff
@@ -78,26 +78,26 @@
 
 Filename: asset/tencent/monitor.py
 Comment: 
 
 Filename: asset/tencent/vpc.py
 Comment: 
 
-Filename: cloud_asset-0.0.2.dist-info/LICENSE
+Filename: cloud_asset-0.0.3.dist-info/LICENSE
 Comment: 
 
-Filename: cloud_asset-0.0.2.dist-info/METADATA
+Filename: cloud_asset-0.0.3.dist-info/METADATA
 Comment: 
 
-Filename: cloud_asset-0.0.2.dist-info/WHEEL
+Filename: cloud_asset-0.0.3.dist-info/WHEEL
 Comment: 
 
-Filename: cloud_asset-0.0.2.dist-info/entry_points.txt
+Filename: cloud_asset-0.0.3.dist-info/entry_points.txt
 Comment: 
 
-Filename: cloud_asset-0.0.2.dist-info/top_level.txt
+Filename: cloud_asset-0.0.3.dist-info/top_level.txt
 Comment: 
 
-Filename: cloud_asset-0.0.2.dist-info/RECORD
+Filename: cloud_asset-0.0.3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## asset/asset_register.py

```diff
@@ -27,18 +27,23 @@
     pass
 
 
 class AwsAssetRegister(AssetRegister):
     pass
 
 
+class HuaweiRegister(AssetRegister):
+    pass
+
+
 class CloudProviders:
     tencent = TencentAssetRegister()
     aliyun = AliyunAssetRegister()
     aws = AwsAssetRegister()
+    huawei = HuaweiRegister()
 
 
 cloud_providers = CloudProviders()
```

## asset/base.py

```diff
@@ -1,27 +1,31 @@
 # -*- coding: UTF-8 -*-
 
 # Copyright The Cloud Asset Authors.
 # SPDX-License-Identifier: Apache-2.0
 
 import abc
 import copy
+import logging
 import datetime
 
 from typing import List
 
 from sqlalchemy import create_engine, Table, UniqueConstraint
 
 from boto3 import Session
 
 from asset.asset_table import AssetTable
 from asset.schema import DbConfig, AssetColumn, STSAssumeRoleCredential, RamRoleArnCredential, AwsCredential,\
-    TencentProfile, AliyunProfile, AwsProfile
+    TencentProfile, AliyunProfile, AwsProfile, HuaweiProfile, HuaweiCredential
 from asset.utils import to_hump_underline, get_tencent_account_id, get_aliyun_account_id, get_aws_account_id, \
-    tencent_parser_response, aliyun_parser_response, aws_parser_response, recursive_list, aws_assume_role
+    tencent_parser_response, aliyun_parser_response, aws_parser_response, recursive_list, aws_assume_role, \
+    get_huawei_account_id, huawei_parser_response, retry
+
+from huaweicloudsdkcore.auth.credentials import BasicCredentials
 
 
 class Describe:
     def parser_response(self):
         raise NotImplementedError("")
 
     def describe(self):
@@ -40,14 +44,15 @@
     ):
         self.client = client
         self.des_request_func = des_request_func
         self.des_request = des_request
         self.response_field = response_filed
         self.parser_response_func = parser_response
 
+    @retry(3)
     def parser_response(self):
         return self.parser_response_func(self.describe(), self.response_field)
 
     def describe(self):
         return getattr(self.client, self.des_request_func)(self.des_request)
 
 
@@ -62,14 +67,15 @@
     ):
         self.client = client
         self.des_request = des_request
         self.response_filed = response_filed
         self.child_response_filed = child_response_filed
         self.parser_response_func = parser_response_func
 
+    @retry(5)
     def parser_response(self):
         return self.parser_response_func(self.describe(), self.response_filed, self.child_response_filed)
 
     def describe(self):
         return getattr(self.client, 'do_action_with_exception')(self.des_request)
 
 
@@ -86,22 +92,49 @@
         self.client = client
         self.des_request = des_request
         self.des_request_kwargs = dict() if des_request_kwargs is None else des_request_kwargs
         self.response_field = response_field
         self.child_response_filed = child_response_filed
         self.parser_response_func = parser_response_func
 
+    @retry(3)
     def parser_response(self):
         return self.parser_response_func(self.describe(), self.response_field, self.child_response_filed)
 
     def describe(self):
         return getattr(self.client, self.des_request)(**self.des_request_kwargs)
 
 
+class DescribeHuawei(Describe):
+
+    def __init__(
+            self,
+            client: object,
+            des: str,
+            des_request: object,
+            response_field: str,
+            parser_response_func: callable = huawei_parser_response
+    ):
+        self.client = client
+        self.des = des
+        self.des_request = des_request
+        self.response_field = response_field
+        self.parser_response_func = parser_response_func
+
+    @retry(3)
+    def parser_response(self):
+        return self.parser_response_func(self.describe(), self.response_field)
+
+    def describe(self):
+        return getattr(self.client, self.des)(self.des_request).to_json_object()
+
+
 class Asset(metaclass=abc.ABCMeta):
+    logger = logging.getLogger('cloud-asset-fetch')
+
     _platform: str = ''
 
     _table_name: str = None
     _asset_columns: List[AssetColumn] = None
     _is_hump_underline: bool = True
     _table_args: tuple = tuple()
     _table_kwargs: dict = None
@@ -410,8 +443,73 @@
 
     def _get_account_id(self):
         return get_aws_account_id(self.cred)
 
     @classmethod
     def load_creds(cls, profile: AwsProfile) -> List[AwsCredential]:
         for role in profile.roles:
-            yield aws_assume_role(role.arn, role_session_name=role.session_name, duration_seconds=role.duration_seconds)
+            yield aws_assume_role(role.arn, role_session_name=role.session_name, duration_seconds=role.duration_seconds)
+
+
+class HuaweiAsset(Asset):
+    _platform = 'huawei'
+
+    _client = None
+    _region_obj = None
+    _describe = DescribeHuawei
+    _des: str = ''
+    _request_obj = None
+    _request_pars: dict = {'limit': 50, 'offset': 1}
+    _response_field = ''
+    _offset = True
+
+    def __init__(
+            self,
+            cred: HuaweiCredential,
+            region=None, dbconfig: DbConfig = None,
+            parser_response=huawei_parser_response
+    ):
+        super(HuaweiAsset, self).__init__(cred, region=region, dbconfig=dbconfig, parser_response=parser_response)
+
+    @property
+    def credential(self):
+        return BasicCredentials(self.cred.ak, self.cred.sk)
+
+    def _paginate_all_assets(self) -> list:
+        assets = []
+        _des_request_kwargs = self._request_obj(**self._request_pars)
+        while True:
+            response = self._describe(
+                self.client,
+                self._des,
+                _des_request_kwargs,
+                self._response_field,
+                self.parser_response
+            ).parser_response()
+            assets += response
+
+            if not response:
+                break
+            if self._offset:
+                _des_request_kwargs.offset += 1
+            else:
+                if len(response) < _des_request_kwargs.limit:
+                    break
+
+        return assets
+
+    def _get_assets(self) -> list:
+        pass
+
+    def _get_account_id(self):
+        return get_huawei_account_id(self.credential)
+
+    def _get_client(self):
+        region = self._region_obj.value_of(self.region)
+        return getattr(
+            getattr(self._client.new_builder(), 'with_credentials')(self.credential),
+            'with_region'
+        )(region).build()
+
+    @classmethod
+    def load_creds(cls, profile: HuaweiProfile) -> List[HuaweiCredential]:
+        return profile.credentials
```

## asset/cli.py

```diff
@@ -45,15 +45,15 @@
     else:
         dbconfig = DbConfig(**profile.pop('dbconfig'))
 
     cloud_providers = profile.get('cloud_providers', None)
     if cloud_providers is None:
         raise BaseCloudAssetException('cloud_providers not be None')
     cloud_provider_profile = filter(lambda x: x['cloud_provider'] == cloud_provider, cloud_providers).__next__()
-
+    cloud_provider_profile.setdefault('regions', None)
     _regions = cloud_provider_profile.pop('regions')
     if regions is None:
         regions = _regions if _regions else REGIONS[cloud_provider]['default_region'].split(',')
     else:
         cloud_regions = REGIONS[cloud_provider]['regions']
         if regions == 'all':
             regions = cloud_regions
```

## asset/commands.py

```diff
@@ -4,30 +4,30 @@
 # SPDX-License-Identifier: Apache-2.0
 
 import os
 import logging
 import importlib
 
 from asset.asset_register import cloud_providers
-from asset.schema import DbConfig, TencentProfile, AliyunProfile, AwsProfile
+from asset.schema import DbConfig, TencentProfile, AliyunProfile, AwsProfile, HuaweiProfile
 from asset.ctx import FetchCtx
 
 from typing import Union
 
 
 _default_log_dir_path = './'
 
 
 class Fetch:
     logger = logging.getLogger('cloud-asset-fetch')
 
     def __init__(
             self,
             cloud_provider,
-            profile: Union[TencentProfile, AliyunProfile, AwsProfile],
+            profile: Union[TencentProfile, AliyunProfile, AwsProfile, HuaweiProfile],
             assets: Union[list, str],
             regions,
             log_dir_path=_default_log_dir_path,
             dbconfig=DbConfig()
     ):
         self.cloud_provider = cloud_provider
         self._register_assets = self.register_assets(cloud_provider=self.cloud_provider).assets  # type: dict
@@ -42,27 +42,26 @@
 
     def fetch(self):
         with FetchCtx(self):
             for asset_name in self.assets:
                 asset_obj = self._register_assets[asset_name]
                 for cred in asset_obj.load_creds(self.profile):
                     for region in self.regions:
-                        asset = asset_obj(cred, region=region, dbconfig=self.dbconfig)
                         try:
-
+                            asset = asset_obj(cred, region=region, dbconfig=self.dbconfig)
                             self.logger.info(
                                 f'asset: {asset_name} ----region: {region} ----account_id: {asset.account_id}----start')
                             asset.fetch()
-                            self.logger.info(
-                                f'asset: {asset_name} ----region: {region} ----account_id: {asset.account_id}----end')
                         except Exception as e:
                             self.logger.info(
                                 f'asset: {asset_name} ----region: {region} ----account_id: {asset.account_id}----fail----error: {e}'
                             )
                             continue
+                        self.logger.info(
+                            f'asset: {asset_name} ----region: {region} ----account_id: {asset.account_id}----end')
 
     @classmethod
     def register_assets(cls, cloud_provider):
         importlib.import_module(f'asset.{cloud_provider}')
         return getattr(cloud_providers, cloud_provider)
 
     def _setup_logger(self):
```

## asset/conf.py

```diff
@@ -2,22 +2,23 @@
 
 # Copyright The Cloud Asset Authors.
 # SPDX-License-Identifier: Apache-2.0
 
 import os
 import arrow
 from sqlalchemy import Integer, String, JSON, Date, Text, DateTime, NUMERIC, DECIMAL, FLOAT
-from asset.schema import TencentProfile, AliyunProfile, AwsProfile
+from asset.schema import TencentProfile, AliyunProfile, AwsProfile, HuaweiProfile
 
 
-PROVIDERS = ('tencent', 'aliyun', 'aws')
+PROVIDERS = ('tencent', 'aliyun', 'aws', 'huawei')
 PROVIDER_PROFILES = {
     'tencent': TencentProfile,
     'aliyun': AliyunProfile,
-    'aws': AwsProfile
+    'aws': AwsProfile,
+    'huawei': HuaweiProfile
 }
 
 today = arrow.now().datetime
 yesterday = arrow.now().shift(days=-1).datetime
 
 CLOUD_ASSERT_DB = {
     'host': os.getenv('CLOUD_ASSERT_HOST', ''),
@@ -93,9 +94,33 @@
     },
     'aws': {
         'default_region': 'cn-northwest-1',
         'regions': [
             'cn-northwest-1',
             'cn-north-1'
         ]
+    },
+    'huawei': {
+        'default_region': 'cn-south-1',
+        'regions': [
+            'cn-north-1',
+            'cn-north-4',
+            'cn-south-1',
+            'cn-east-2',
+            'cn-east-3',
+            'cn-southwest-2',
+            'ap-southeast-1',
+            'ap-southeast-2',
+            'ap-southeast-3',
+            'af-south-1',
+            'sa-brazil-1',
+            'la-north-2',
+            'cn-south-4',
+            'na-mexico-1',
+            'la-south-2',
+            'cn-south-2',
+            'cn-north-9',
+            'cn-north-2',
+            'ap-southeast-4'
+        ]
     }
 }
```

## asset/schema.py

```diff
@@ -58,8 +58,17 @@
 
 class AwsCredential(BaseModel):
     aws_access_key_id: str
     aws_secret_access_key: str
     aws_session_token: str
 
 
+class HuaweiCredential(BaseModel):
+    ak: str
+    sk: str
+
+
+class HuaweiProfile(BaseModel):
+    credentials: List[HuaweiCredential]
+
+
```

## asset/tools.py

```diff
@@ -25,74 +25,22 @@
             raise Exception(f'不支持的类型, value: {value}')
         _fields.append({'name': key, 'type': _type})
     return _fields
 
 
 if __name__ == '__main__':
 
-    fields_demo =    {
-      "CreationTime": "2019-12-25T12:31:31Z",
-      "VpcId": "vpc-bp1j7w3gc1cexjqd****",
-      "Type": "Secondary",
-      "Status": "Available",
-      "NetworkInterfaceTrafficMode": "Standard",
-      "NetworkInterfaceName": "my-eni-name",
-      "MacAddress": "00:16:3e:12:**:**",
-      "QueuePairNumber": 0,
-      "NetworkInterfaceId": "eni-bp125p95hhdhn3ot****",
-      "ServiceID": 12345678910,
-      "InstanceId": "i-bp1e2l6djkndyuli****",
-      "OwnerId": "123456****",
-      "ServiceManaged": 'true',
-      "VSwitchId": "vsw-bp16usj2p27htro3****",
-      "Description": "DescriptionTest",
-      "ResourceGroupId": "rg-2ze88m67qx5z****",
-      "ZoneId": "cn-hangzhou-e",
-      "PrivateIpAddress": "172.17.**.**",
-      "QueueNumber": 8,
-      "PrivateIpSets": [
-        {
-          "PrivateIpAddress": "172.17.**.**",
-          "Primary": 'true',
-          "AssociatedPublicIp": {
-            "PublicIpAddress": "116.62.**.**",
-            "AllocationId": "null"
-          }
-        }
-      ],
-      "Ipv6Sets": [
-        {
-          "Ipv6Address": "2408:4321:180:1701:94c7:bc38:3bfa:****"
-        }
-      ],
-      "Ipv4PrefixSets": [
-        {
-          "Ipv4Prefix": "hide"
-        }
-      ],
-      "Ipv6PrefixSets": [
-        {
-          "Ipv6Prefix": "hide"
-        }
-      ],
-      "Tags": [
-        {
-          "TagValue": "TestValue",
-          "TagKey": "TestKey"
-        }
-      ],
-      "SecurityGroupIds": [
-        "sg-bp18kz60mefsicfg****"
-      ],
-      "AssociatedPublicIp": {
-        "PublicIpAddress": "116.62.**.**",
-        "AllocationId": "null"
-      },
-      "Attachment": {
-        "DeviceIndex": 0,
-        "InstanceId": "null",
-        "TrunkNetworkInterfaceId": "null",
-        "NetworkCardIndex": 0
-      }
-    }
+    fields_demo = {
+    "id" : "a253be25-ae7c-4013-978b-3c0785eccd63",
+    "router_id" : "b1d81744-5165-48b8-916e-e56626feb88f",
+    "status" : "ACTIVE",
+    "description" : "nat01",
+    "admin_state_up" : 'true',
+    "tenant_id" : "27e25061336f4af590faeabeb7fcd9a3",
+    "created_at" : "2017-11-15 14:50:39.505112",
+    "spec" : "2",
+    "internal_network_id" : "5930796a-6026-4d8b-8790-6c6bfc9f87e8",
+    "name" : "wj3",
+    "enterprise_project_id" : "0aad99bc-f5f6-4f78-8404-c598d76b0ed2"
+  }
     for asset in asset_columns_generator(fields=fields_demo):
         print(str(asset) + ',')
```

## asset/utils.py

```diff
@@ -3,24 +3,59 @@
 # Copyright The Cloud Asset Authors.
 # SPDX-License-Identifier: Apache-2.0
 
 import re
 import json
 import boto3
 import datetime
+import logging
 
 from tencentcloud.cam.v20190116 import cam_client, models
 
 from aliyunsdksts.request.v20150401 import GetCallerIdentityRequest
 from aliyunsdkcore.client import AcsClient
 
+from huaweicloudsdkcore.sdk_response import SdkResponse
+
 from boto3 import client as aws_client
 from typing import Tuple, Union
 
-from asset.schema import AwsCredential, STSAssumeRoleCredential, RamRoleArnCredential
+from asset.schema import AwsCredential, STSAssumeRoleCredential, RamRoleArnCredential, HuaweiCredential
+
+
+def retry(retry_count=5):
+    """
+    :param retry_count: 重试次数
+    :return:
+    """
+    logger = logging.getLogger('cloud-asset-fetch')
+
+    def decorator(func):
+        def handler(*args, **kwargs):
+
+            all_fail, error, response = 0, None, None
+            for i in range(retry_count):
+                try:
+                    if i > 0:
+                        logger.info(f'开始重试, 重试次数{i}')
+                    response = func(*args, **kwargs)
+                    break
+                except Exception as e:
+                    all_fail += 1
+                    error = e
+                    continue
+
+            if all_fail == retry_count:
+                logger.info('全部重试失败！')
+                raise error
+
+            return response
+
+        return handler
+    return decorator
 
 
 def to_hump_underline(string) -> str:
     return re.sub(r"(?P<key>[A-Z])", r"_\g<key>", string).lower().strip('_')
 
 
 def register_assets(cloud_provider):
@@ -54,14 +89,18 @@
         elif isinstance(assets, dict):
             return assets.get(child_response_filed), next_token
         else:
             raise Exception('')
     return assets, next_token
 
 
+def huawei_parser_response(response: dict, response_filed: str) -> list:
+    return response.get(response_filed)
+
+
 def recursive_dict(_value):
     for key, value in _value.items():
         if isinstance(value, datetime.datetime):
             _value[key] = value.strftime('%Y-%m-%d %H:%M:%S')
         elif isinstance(value, datetime.date):
             _value[key] = value.strftime('%Y-%m-%d')
         elif isinstance(value, dict):
@@ -86,14 +125,22 @@
         elif isinstance(value, datetime.datetime):
             _value_list = value.strftime('%Y-%m-%d %H:%M:%S')
         else:
             _value_list.append(_value)
     return _value_list
 
 
+def recursive_list_huawei_assets(assets: list):
+    _assets = []
+    for index in range(len(assets)):
+        _asset = assets[index]
+        if isinstance(_asset, SdkResponse):
+            _assets.append(_asset.to_json_object())
+
+
 def get_tencent_account_id(cred):
     client = cam_client.CamClient(credential=cred, region=None)
     response = client.GetUserAppId(models.GetUserAppIdRequest())
     return response.OwnerUin
 
 
 def get_aliyun_account_id(cred):
@@ -103,14 +150,39 @@
 
 
 def get_aws_account_id(cred: AwsCredential):
     response = aws_client('sts', **cred.dict()).get_caller_identity()
     return response['Account']
 
 
+def get_huawei_account_id(cred: HuaweiCredential):
+    from huaweicloudsdkcore.auth.credentials import GlobalCredentials
+    from huaweicloudsdkiam.v3.region.iam_region import IamRegion
+    from huaweicloudsdkcore.exceptions import exceptions
+    from huaweicloudsdkiam.v3.iam_client import IamClient
+    from huaweicloudsdkiam.v3.model import KeystoneListAuthDomainsRequest
+
+    credentials = GlobalCredentials(cred.ak, cred.sk)
+
+    client = IamClient.new_builder() \
+        .with_credentials(credentials) \
+        .with_region(IamRegion.value_of("cn-south-1")) \
+        .build()
+
+    try:
+        request = KeystoneListAuthDomainsRequest()
+        response = client.keystone_list_auth_domains(request).to_dict()
+        domains = response.get('domains', [])
+        if not domains:
+            raise Exception('not find domain id')
+        return domains[0].get('id')
+    except exceptions.ClientRequestException as e:
+        raise e
+
+
 def aws_assume_role(arn, role_session_name='fetch_asset', duration_seconds=3600) -> AwsCredential:
     response = boto3.client('sts').assume_role(
         RoleArn=arn, RoleSessionName=role_session_name, DurationSeconds=duration_seconds
     )
     role_ak = response['Credentials'].get('AccessKeyId')
     role_sk = response['Credentials'].get('SecretAccessKey')
     role_token = response['Credentials']['SessionToken']
```

### encoding

```diff
@@ -1 +1 @@
-us-ascii
+utf-8
```

## asset/aliyun/ecs.py

```diff
@@ -7,14 +7,15 @@
 from asset.asset_register import cloud_providers
 from asset.base import AliyunAsset, AssetColumn, UniqueConstraint
 from aliyunsdkcore.client import AcsClient
 from aliyunsdkecs.request.v20140526.DescribeInstancesRequest import DescribeInstancesRequest
 from aliyunsdkecs.request.v20140526.DescribeEipAddressesRequest import DescribeEipAddressesRequest
 from aliyunsdkecs.request.v20140526.DescribeNatGatewaysRequest import DescribeNatGatewaysRequest
 from aliyunsdkecs.request.v20140526.DescribeNetworkInterfacesRequest import DescribeNetworkInterfacesRequest
+from aliyunsdkecs.request.v20140526.DescribeDisksRequest import DescribeDisksRequest
 
 
 asset_columns = [
     {'name': 'CreationTime', 'type': 'str', 'len': 64},
     {'name': 'SerialNumber', 'type': 'str', 'len': 128},
     {'name': 'Status', 'type': 'str', 'len': 16},
     {'name': 'DeploymentSetId', 'type': 'str', 'len': 128},
@@ -153,19 +154,81 @@
     {'name': 'Ipv4PrefixSets', 'type': 'dict'},
     {'name': 'Ipv6PrefixSets', 'type': 'dict'},
     {'name': 'Tags', 'type': 'dict'},
     {'name': 'SecurityGroupIds', 'type': 'dict'},
     {'name': 'AssociatedPublicIp', 'type': 'dict'},
     {'name': 'Attachment', 'type': 'dict'}
 ]
+disk_interface_columns = [
+    {'name': 'SerialNumber', 'type': 'str'},
+    {'name': 'CreationTime', 'type': 'str'},
+    {'name': 'Status', 'type': 'str'},
+    {'name': 'Type', 'type': 'str'},
+    {'name': 'PerformanceLevel', 'type': 'str'},
+    {'name': 'BdfId', 'type': 'str'},
+    {'name': 'EnableAutoSnapshot', 'type': 'str'},
+    {'name': 'StorageSetId', 'type': 'str'},
+    {'name': 'StorageSetPartitionNumber', 'type': 'int'},
+    {'name': 'DiskId', 'type': 'str'},
+    {'name': 'DeleteAutoSnapshot', 'type': 'str'},
+    {'name': 'StorageClusterId', 'type': 'str'},
+    {'name': 'Encrypted', 'type': 'str'},
+    {'name': 'IOPSRead', 'type': 'int'},
+    {'name': 'MountInstanceNum', 'type': 'int'},
+    {'name': 'Description', 'type': 'str'},
+    {'name': 'Device', 'type': 'str'},
+    {'name': 'DiskName', 'type': 'str'},
+    {'name': 'Portable', 'type': 'str'},
+    {'name': 'ImageId', 'type': 'str'},
+    {'name': 'KMSKeyId', 'type': 'str'},
+    {'name': 'DeleteWithInstance', 'type': 'str'},
+    {'name': 'DetachedTime', 'type': 'str'},
+    {'name': 'SourceSnapshotId', 'type': 'str'},
+    {'name': 'AutoSnapshotPolicyId', 'type': 'str'},
+    {'name': 'EnableAutomatedSnapshotPolicy', 'type': 'str'},
+    {'name': 'IOPSWrite', 'type': 'int'},
+    {'name': 'InstanceId', 'type': 'str'},
+    {'name': 'IOPS', 'type': 'int'},
+    {'name': 'RegionId', 'type': 'str'},
+    {'name': 'ExpiredTime', 'type': 'str'},
+    {'name': 'Size', 'type': 'int'},
+    {'name': 'ResourceGroupId', 'type': 'str'},
+    {'name': 'DiskChargeType', 'type': 'str'},
+    {'name': 'ZoneId', 'type': 'str'},
+    {'name': 'AttachedTime', 'type': 'str'},
+    {'name': 'Category', 'type': 'str'},
+    {'name': 'ProductCode', 'type': 'str'},
+    {'name': 'MultiAttach', 'type': 'str'},
+    {'name': 'OperationLocks', 'type': 'dict'},
+    {'name': 'MountInstances', 'type': 'dict'},
+    {'name': 'Tags', 'type': 'dict'},
+    {'name': 'Attachments', 'type': 'dict'},
+    {'name': 'ProvisionedIops', 'type': 'int'},
+    {'name': 'BurstingEnabled', 'type': 'str'},
+    {'name': 'Throughput', 'type': 'int'}
+]
+nat_interface_columns = [
+    {'name': 'id', 'type': 'str'},
+    {'name': 'router_id', 'type': 'str'},
+    {'name': 'status', 'type': 'str'},
+    {'name': 'description', 'type': 'str'},
+    {'name': 'admin_state_up', 'type': 'str'},
+    {'name': 'tenant_id', 'type': 'str'},
+    {'name': 'created_at', 'type': 'str'},
+    {'name': 'spec', 'type': 'str'},
+    {'name': 'internal_network_id', 'type': 'str'},
+    {'name': 'name', 'type': 'str'},
+    {'name': 'enterprise_project_id', 'type': 'str'}
+]
 
 ecs_field_document = 'https://help.aliyun.com/document_detail/25506.html?spm=a2c4g.11186623.0.0.3ac56cf0qyfOQ7#resultMapping'
 eip_field_document = 'https://next.api.aliyun.com/document/Ecs/2014-05-26/DescribeEipAddresses#workbench-doc-params'
 nat_field_document = 'https://next.api.aliyun.com/document/Ecs/2014-05-26/DescribeNatGateways#workbench-doc-response'
 network_interface_field_document = 'https://next.api.aliyun.com/document/Ecs/2014-05-26/DescribeNetworkInterfaces'
+disk_field_document = 'https://next.api.aliyun.com/document/Ecs/2014-05-26/DescribeDisks'
 
 
 @cloud_providers.aliyun.register('ecs')
 class Ecs(AliyunAsset):
     _des_request = DescribeInstancesRequest
     _response_field = 'Instances'
     _child_response_filed = 'Instance'
@@ -209,7 +272,21 @@
     _response_field = 'NetworkInterfaceSets'
     _child_response_filed = 'NetworkInterfaceSet'
 
     _table_name = 'aliyun_network_interface'
     _asset_columns = [AssetColumn(**asset_column) for asset_column in network_interface_columns]
     _table_args = (UniqueConstraint('account_id', 'record_date', 'network_interface_id', name='aliyun_uc_nii'),)
     _field_document = network_interface_field_document
+
+
+@cloud_providers.aliyun.register('disk')
+class Disk(Ecs):
+    _des_request = DescribeDisksRequest
+    _response_field = 'Disks'
+    _child_response_filed = 'Disk'
+
+    _table_name = 'aliyun_disk'
+    _asset_columns = [AssetColumn(**asset_column) for asset_column in disk_interface_columns]
+    _table_args = (UniqueConstraint('account_id', 'record_date', 'disk_id', name='aliyun_uc_disk'),)
+    _field_document = disk_field_document
+
+
```

## Comparing `cloud_asset-0.0.2.dist-info/LICENSE` & `cloud_asset-0.0.3.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `cloud_asset-0.0.2.dist-info/METADATA` & `cloud_asset-0.0.3.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: cloud-asset
-Version: 0.0.2
+Version: 0.0.3
 Summary: Cloud Asset - Asset For Postgres
 Author: Cloud Asset Authors
 Author-email: 
 License: Apache-2.0
 Requires-Python: >=3.7.1,<4.0
 Description-Content-Type: text/markdown
 License-File: LICENSE
```

## Comparing `cloud_asset-0.0.2.dist-info/RECORD` & `cloud_asset-0.0.3.dist-info/RECORD`

 * *Files 17% similar despite different names*

```diff
@@ -1,34 +1,34 @@
 asset/__init__.py,sha256=GvpscHSfjxM7PETS6otHH8z-AZF-aJDKR55Q-QFE2oY,102
-asset/asset_register.py,sha256=ICaxnfzL2oi8Yh_rsDPtsm4wnupol-djnX4B1TzwTmg,780
+asset/asset_register.py,sha256=8Z2Nmq8c1bmkMo6pEYvlYrcdaq1glStlvi7qQ1Gc0Zw,863
 asset/asset_table.py,sha256=x0h-Pv5F1K2uidqnP8dwlfIxuYX7Tg85Okd1poYIJnw,3680
-asset/base.py,sha256=-kE21wchnRd06Wr5STub8_nVo_QmItBifEG9-3U1O5Q,14028
-asset/cli.py,sha256=p2L3LgU3SWFH6iC7HyPQKB7Wkf17RQyLu3Lw86Py8tY,3125
-asset/commands.py,sha256=TA8flVU0wTaI_tKLPVm_KqRhE1PcV1Ps-o13dPrOmvw,3044
-asset/conf.py,sha256=87pUFwzCvoOb5p24aXcqFKum_ra6C5J4_56dWwlSZPI,2550
+asset/base.py,sha256=wSxOMVMDOLTWLc2e1S4A9pr37_rPDfY-6UP7eWZEQW8,16941
+asset/cli.py,sha256=pBlwNozRtLMdjdZRBDRgkAHNUF3ad6blz10OemLExlU,3179
+asset/commands.py,sha256=YCMS8XJWHqrx9mU9L9v-Emp3TE1x_Uc3r6ZIIwwt0MQ,3068
+asset/conf.py,sha256=GsQoR0zDbWfVcYVRkQQ2C9judhTUlSW6WcASXh9uBNU,3236
 asset/ctx.py,sha256=oH_crAsyc3eWTsswZ_ART6Dm0T-rtHorJ4-1QM3wBYA,545
 asset/exceptions.py,sha256=vovYwzqafovNMf4eMx_Aiu9NfHtHVKjNyTJ9tlJOZpg,286
-asset/schema.py,sha256=xzvwDTQ4uobeJ-jsfBtrD4VQW8nGb4QaDfWTGWwQCEw,1437
-asset/tools.py,sha256=2kDTyQk2gfGmNqB13qGaf0O3b7RpQOh4X3Y6aMJtgLw,2821
-asset/utils.py,sha256=8n6GFu03RtNABAF9CSlWoA4RQKBZCOBakGNx0dODGyU,4532
+asset/schema.py,sha256=qxiP6b3i3OUiMCJ0I7sGuH6tYJq6DAES3uoA-h1AE9I,1581
+asset/tools.py,sha256=rw6o7JTE6vm5DSRYpkm0_WnVwpCQAdU0HvLpZcF7HTU,1500
+asset/utils.py,sha256=EcLlIiZzFAbjzRbKn_okop0DBkqrVX2Gj7rfyBRr5DQ,6817
 asset/aliyun/__init__.py,sha256=fCH7MTc7LtwnQo1tHikZsc_09oDeVutxMJvg8ZUItvU,136
-asset/aliyun/ecs.py,sha256=Yt7H0lFawd9nLZ63Wt2JGKCVz70fp-HL_6nbdwkejW4,10094
+asset/aliyun/ecs.py,sha256=AJqlmG0eJrjEGnEUEX9X6uWCvGLJUPv3WTq9jpFO6J8,13364
 asset/aws/__init__.py,sha256=iZDKcu1UVff75M_C5lcXNRMY3LaWBI2Pf7GPyRVqxwg,167
 asset/aws/cloudwatch.py,sha256=i06mf37R7wMn8bJZxflapOM3GHXTTZs1XNaQqr5xXmM,4878
 asset/aws/ec2.py,sha256=zgYBqNykB4ru5aECglT1EUss_e7xzUL0pdsp-n5Gca0,11132
 asset/aws/elb.py,sha256=b2sdi-XLiQ0f8p4sPCtC1mWAsGXAcrZ1XLoWiAcHi9Y,3055
 asset/aws/elb_v2.py,sha256=lnExSX3Fv06nrZPociCv5sEAewajDXqLX9Hdvme1kcg,8620
 asset/aws/rds.py,sha256=QOSIu3HJM44Ib28pbSHzt9BtBYx8ceN_bILBPAg0rTI,9638
 asset/aws/s3.py,sha256=lxBcZP8mh1dILGC4txB7chqu2ClA6sPB4U2xXeZxmpM,3172
 asset/tencent/__init__.py,sha256=_MsiCfmMqtiYhCoTa8Sj_hfOWme6me6fwr3v4uI0Hos,170
 asset/tencent/cdb_mysql.py,sha256=YJJqU8zyV33nE0TMUdFafg1Ata8y8pQL2A1989EiBJ8,2901
 asset/tencent/clb.py,sha256=AXSqB1BtSrW2RNhQtdGfJlAIWfpvUdVFoqALiPT3aio,2309
 asset/tencent/cos.py,sha256=muWkfEdF0mHAGPTXw5MkBc13FrK8UMt9-QxPcy6QsMw,1804
 asset/tencent/cvm.py,sha256=QKj4PKvxJrjffT0Vr6H9eS_m65EmZxidsba-Yqqteag,2242
 asset/tencent/monitor.py,sha256=gEnGh0QxESqp5aZZ-LzLT6nQADsfCqZJPFI5QKNqJyc,3279
 asset/tencent/vpc.py,sha256=3XKDVm1fu0Egrc0wv3jbH-n2nxSLLSBzxxcS69VaR_Y,11514
-cloud_asset-0.0.2.dist-info/LICENSE,sha256=HrhfyXIkWY2tGFK11kg7vPCqhgh5DcxleloqdhrpyMY,11558
-cloud_asset-0.0.2.dist-info/METADATA,sha256=wX8EyZe53AX9N3cA7JZmO70EEhp8UomEg8JK4YiaM8o,739
-cloud_asset-0.0.2.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-cloud_asset-0.0.2.dist-info/entry_points.txt,sha256=E98BNjat-vzRmq_JOsUw1BEUB8gGDXTCrge_EcO1ItQ,47
-cloud_asset-0.0.2.dist-info/top_level.txt,sha256=OOL4Q5O665etnevbCwltTM6xLZ_EIE3w81HrT-kZli8,6
-cloud_asset-0.0.2.dist-info/RECORD,,
+cloud_asset-0.0.3.dist-info/LICENSE,sha256=HrhfyXIkWY2tGFK11kg7vPCqhgh5DcxleloqdhrpyMY,11558
+cloud_asset-0.0.3.dist-info/METADATA,sha256=_Eu9gZW5SVsNr5kMcmAEFcScHMVPn5vEtHpaHWvbYj0,739
+cloud_asset-0.0.3.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+cloud_asset-0.0.3.dist-info/entry_points.txt,sha256=E98BNjat-vzRmq_JOsUw1BEUB8gGDXTCrge_EcO1ItQ,47
+cloud_asset-0.0.3.dist-info/top_level.txt,sha256=OOL4Q5O665etnevbCwltTM6xLZ_EIE3w81HrT-kZli8,6
+cloud_asset-0.0.3.dist-info/RECORD,,
```

